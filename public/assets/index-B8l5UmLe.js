function Vx(i,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in i)){const f=Object.getOwnPropertyDescriptor(a,u);f&&Object.defineProperty(i,u,f.get?f:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const E of f.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&a(E)}).observe(document,{childList:!0,subtree:!0});function t(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=t(u);fetch(u.href,f)}})();var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var _0={exports:{}},zu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2;function Fx(){if(c2)return zu;c2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,u,f){var E=null;if(f!==void 0&&(E=""+f),u.key!==void 0&&(E=""+u.key),"key"in u){f={};for(var x in u)x!=="key"&&(f[x]=u[x])}else f=u;return u=f.ref,{$$typeof:i,type:a,key:E,ref:u!==void 0?u:null,props:f}}return zu.Fragment=e,zu.jsx=t,zu.jsxs=t,zu}var h2;function zx(){return h2||(h2=1,_0.exports=Fx()),_0.exports}var gt=zx(),A0={exports:{}},mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2;function Hx(){if(f2)return mt;f2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),E=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.iterator;function B(J){return J===null||typeof J!="object"?null:(J=R&&J[R]||J["@@iterator"],typeof J=="function"?J:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,$={};function te(J,Ie,Fe){this.props=J,this.context=Ie,this.refs=$,this.updater=Fe||j}te.prototype.isReactComponent={},te.prototype.setState=function(J,Ie){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,Ie,"setState")},te.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function ie(){}ie.prototype=te.prototype;function me(J,Ie,Fe){this.props=J,this.context=Ie,this.refs=$,this.updater=Fe||j}var ue=me.prototype=new ie;ue.constructor=me,q(ue,te.prototype),ue.isPureReactComponent=!0;var De=Array.isArray,Ve={H:null,A:null,T:null,S:null},ke=Object.prototype.hasOwnProperty;function H(J,Ie,Fe,Ue,Pe,lt){return Fe=lt.ref,{$$typeof:i,type:J,key:Ie,ref:Fe!==void 0?Fe:null,props:lt}}function F(J,Ie){return H(J.type,Ie,void 0,void 0,void 0,J.props)}function L(J){return typeof J=="object"&&J!==null&&J.$$typeof===i}function X(J){var Ie={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Fe){return Ie[Fe]})}var Z=/\/+/g;function Q(J,Ie){return typeof J=="object"&&J!==null&&J.key!=null?X(""+J.key):Ie.toString(36)}function G(){}function ft(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(G,G):(J.status="pending",J.then(function(Ie){J.status==="pending"&&(J.status="fulfilled",J.value=Ie)},function(Ie){J.status==="pending"&&(J.status="rejected",J.reason=Ie)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function ce(J,Ie,Fe,Ue,Pe){var lt=typeof J;(lt==="undefined"||lt==="boolean")&&(J=null);var Ne=!1;if(J===null)Ne=!0;else switch(lt){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(J.$$typeof){case i:case e:Ne=!0;break;case I:return Ne=J._init,ce(Ne(J._payload),Ie,Fe,Ue,Pe)}}if(Ne)return Pe=Pe(J),Ne=Ue===""?"."+Q(J,0):Ue,De(Pe)?(Fe="",Ne!=null&&(Fe=Ne.replace(Z,"$&/")+"/"),ce(Pe,Ie,Fe,"",function(rn){return rn})):Pe!=null&&(L(Pe)&&(Pe=F(Pe,Fe+(Pe.key==null||J&&J.key===Pe.key?"":(""+Pe.key).replace(Z,"$&/")+"/")+Ne)),Ie.push(Pe)),1;Ne=0;var xn=Ue===""?".":Ue+":";if(De(J))for(var et=0;et<J.length;et++)Ue=J[et],lt=xn+Q(Ue,et),Ne+=ce(Ue,Ie,Fe,lt,Pe);else if(et=B(J),typeof et=="function")for(J=et.call(J),et=0;!(Ue=J.next()).done;)Ue=Ue.value,lt=xn+Q(Ue,et++),Ne+=ce(Ue,Ie,Fe,lt,Pe);else if(lt==="object"){if(typeof J.then=="function")return ce(ft(J),Ie,Fe,Ue,Pe);throw Ie=String(J),Error("Objects are not valid as a React child (found: "+(Ie==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":Ie)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function Se(J,Ie,Fe){if(J==null)return J;var Ue=[],Pe=0;return ce(J,Ue,"","",function(lt){return Ie.call(Fe,lt,Pe++)}),Ue}function Oe(J){if(J._status===-1){var Ie=J._result;Ie=Ie(),Ie.then(function(Fe){(J._status===0||J._status===-1)&&(J._status=1,J._result=Fe)},function(Fe){(J._status===0||J._status===-1)&&(J._status=2,J._result=Fe)}),J._status===-1&&(J._status=0,J._result=Ie)}if(J._status===1)return J._result.default;throw J._result}var Ye=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(Ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function Et(){}return mt.Children={map:Se,forEach:function(J,Ie,Fe){Se(J,function(){Ie.apply(this,arguments)},Fe)},count:function(J){var Ie=0;return Se(J,function(){Ie++}),Ie},toArray:function(J){return Se(J,function(Ie){return Ie})||[]},only:function(J){if(!L(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},mt.Component=te,mt.Fragment=t,mt.Profiler=u,mt.PureComponent=me,mt.StrictMode=a,mt.Suspense=T,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ve,mt.act=function(){throw Error("act(...) is not supported in production builds of React.")},mt.cache=function(J){return function(){return J.apply(null,arguments)}},mt.cloneElement=function(J,Ie,Fe){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Ue=q({},J.props),Pe=J.key,lt=void 0;if(Ie!=null)for(Ne in Ie.ref!==void 0&&(lt=void 0),Ie.key!==void 0&&(Pe=""+Ie.key),Ie)!ke.call(Ie,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&Ie.ref===void 0||(Ue[Ne]=Ie[Ne]);var Ne=arguments.length-2;if(Ne===1)Ue.children=Fe;else if(1<Ne){for(var xn=Array(Ne),et=0;et<Ne;et++)xn[et]=arguments[et+2];Ue.children=xn}return H(J.type,Pe,void 0,void 0,lt,Ue)},mt.createContext=function(J){return J={$$typeof:E,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:f,_context:J},J},mt.createElement=function(J,Ie,Fe){var Ue,Pe={},lt=null;if(Ie!=null)for(Ue in Ie.key!==void 0&&(lt=""+Ie.key),Ie)ke.call(Ie,Ue)&&Ue!=="key"&&Ue!=="__self"&&Ue!=="__source"&&(Pe[Ue]=Ie[Ue]);var Ne=arguments.length-2;if(Ne===1)Pe.children=Fe;else if(1<Ne){for(var xn=Array(Ne),et=0;et<Ne;et++)xn[et]=arguments[et+2];Pe.children=xn}if(J&&J.defaultProps)for(Ue in Ne=J.defaultProps,Ne)Pe[Ue]===void 0&&(Pe[Ue]=Ne[Ue]);return H(J,lt,void 0,void 0,null,Pe)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(J){return{$$typeof:x,render:J}},mt.isValidElement=L,mt.lazy=function(J){return{$$typeof:I,_payload:{_status:-1,_result:J},_init:Oe}},mt.memo=function(J,Ie){return{$$typeof:A,type:J,compare:Ie===void 0?null:Ie}},mt.startTransition=function(J){var Ie=Ve.T,Fe={};Ve.T=Fe;try{var Ue=J(),Pe=Ve.S;Pe!==null&&Pe(Fe,Ue),typeof Ue=="object"&&Ue!==null&&typeof Ue.then=="function"&&Ue.then(Et,Ye)}catch(lt){Ye(lt)}finally{Ve.T=Ie}},mt.unstable_useCacheRefresh=function(){return Ve.H.useCacheRefresh()},mt.use=function(J){return Ve.H.use(J)},mt.useActionState=function(J,Ie,Fe){return Ve.H.useActionState(J,Ie,Fe)},mt.useCallback=function(J,Ie){return Ve.H.useCallback(J,Ie)},mt.useContext=function(J){return Ve.H.useContext(J)},mt.useDebugValue=function(){},mt.useDeferredValue=function(J,Ie){return Ve.H.useDeferredValue(J,Ie)},mt.useEffect=function(J,Ie){return Ve.H.useEffect(J,Ie)},mt.useId=function(){return Ve.H.useId()},mt.useImperativeHandle=function(J,Ie,Fe){return Ve.H.useImperativeHandle(J,Ie,Fe)},mt.useInsertionEffect=function(J,Ie){return Ve.H.useInsertionEffect(J,Ie)},mt.useLayoutEffect=function(J,Ie){return Ve.H.useLayoutEffect(J,Ie)},mt.useMemo=function(J,Ie){return Ve.H.useMemo(J,Ie)},mt.useOptimistic=function(J,Ie){return Ve.H.useOptimistic(J,Ie)},mt.useReducer=function(J,Ie,Fe){return Ve.H.useReducer(J,Ie,Fe)},mt.useRef=function(J){return Ve.H.useRef(J)},mt.useState=function(J){return Ve.H.useState(J)},mt.useSyncExternalStore=function(J,Ie,Fe){return Ve.H.useSyncExternalStore(J,Ie,Fe)},mt.useTransition=function(){return Ve.H.useTransition()},mt.version="19.0.0",mt}var d2;function uc(){return d2||(d2=1,A0.exports=Hx()),A0.exports}var Ee=uc(),w0={exports:{}},Hu={},x0={exports:{}},T0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g2;function jx(){return g2||(g2=1,function(i){function e(Se,Oe){var Ye=Se.length;Se.push(Oe);e:for(;0<Ye;){var Et=Ye-1>>>1,J=Se[Et];if(0<u(J,Oe))Se[Et]=Oe,Se[Ye]=J,Ye=Et;else break e}}function t(Se){return Se.length===0?null:Se[0]}function a(Se){if(Se.length===0)return null;var Oe=Se[0],Ye=Se.pop();if(Ye!==Oe){Se[0]=Ye;e:for(var Et=0,J=Se.length,Ie=J>>>1;Et<Ie;){var Fe=2*(Et+1)-1,Ue=Se[Fe],Pe=Fe+1,lt=Se[Pe];if(0>u(Ue,Ye))Pe<J&&0>u(lt,Ue)?(Se[Et]=lt,Se[Pe]=Ye,Et=Pe):(Se[Et]=Ue,Se[Fe]=Ye,Et=Fe);else if(Pe<J&&0>u(lt,Ye))Se[Et]=lt,Se[Pe]=Ye,Et=Pe;else break e}}return Oe}function u(Se,Oe){var Ye=Se.sortIndex-Oe.sortIndex;return Ye!==0?Ye:Se.id-Oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;i.unstable_now=function(){return f.now()}}else{var E=Date,x=E.now();i.unstable_now=function(){return E.now()-x}}var T=[],A=[],I=1,R=null,B=3,j=!1,q=!1,$=!1,te=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function ue(Se){for(var Oe=t(A);Oe!==null;){if(Oe.callback===null)a(A);else if(Oe.startTime<=Se)a(A),Oe.sortIndex=Oe.expirationTime,e(T,Oe);else break;Oe=t(A)}}function De(Se){if($=!1,ue(Se),!q)if(t(T)!==null)q=!0,ft();else{var Oe=t(A);Oe!==null&&ce(De,Oe.startTime-Se)}}var Ve=!1,ke=-1,H=5,F=-1;function L(){return!(i.unstable_now()-F<H)}function X(){if(Ve){var Se=i.unstable_now();F=Se;var Oe=!0;try{e:{q=!1,$&&($=!1,ie(ke),ke=-1),j=!0;var Ye=B;try{t:{for(ue(Se),R=t(T);R!==null&&!(R.expirationTime>Se&&L());){var Et=R.callback;if(typeof Et=="function"){R.callback=null,B=R.priorityLevel;var J=Et(R.expirationTime<=Se);if(Se=i.unstable_now(),typeof J=="function"){R.callback=J,ue(Se),Oe=!0;break t}R===t(T)&&a(T),ue(Se)}else a(T);R=t(T)}if(R!==null)Oe=!0;else{var Ie=t(A);Ie!==null&&ce(De,Ie.startTime-Se),Oe=!1}}break e}finally{R=null,B=Ye,j=!1}Oe=void 0}}finally{Oe?Z():Ve=!1}}}var Z;if(typeof me=="function")Z=function(){me(X)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,G=Q.port2;Q.port1.onmessage=X,Z=function(){G.postMessage(null)}}else Z=function(){te(X,0)};function ft(){Ve||(Ve=!0,Z())}function ce(Se,Oe){ke=te(function(){Se(i.unstable_now())},Oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Se){Se.callback=null},i.unstable_continueExecution=function(){q||j||(q=!0,ft())},i.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<Se?Math.floor(1e3/Se):5},i.unstable_getCurrentPriorityLevel=function(){return B},i.unstable_getFirstCallbackNode=function(){return t(T)},i.unstable_next=function(Se){switch(B){case 1:case 2:case 3:var Oe=3;break;default:Oe=B}var Ye=B;B=Oe;try{return Se()}finally{B=Ye}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Se,Oe){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var Ye=B;B=Se;try{return Oe()}finally{B=Ye}},i.unstable_scheduleCallback=function(Se,Oe,Ye){var Et=i.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?Et+Ye:Et):Ye=Et,Se){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=Ye+J,Se={id:I++,callback:Oe,priorityLevel:Se,startTime:Ye,expirationTime:J,sortIndex:-1},Ye>Et?(Se.sortIndex=Ye,e(A,Se),t(T)===null&&Se===t(A)&&($?(ie(ke),ke=-1):$=!0,ce(De,Ye-Et))):(Se.sortIndex=J,e(T,Se),q||j||(q=!0,ft())),Se},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(Se){var Oe=B;return function(){var Ye=B;B=Oe;try{return Se.apply(this,arguments)}finally{B=Ye}}}}(T0)),T0}var m2;function Gx(){return m2||(m2=1,x0.exports=jx()),x0.exports}var v0={exports:{}},Br={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function qx(){if(p2)return Br;p2=1;var i=uc();function e(T){var A="https://react.dev/errors/"+T;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var I=2;I<arguments.length;I++)A+="&args[]="+encodeURIComponent(arguments[I])}return"Minified React error #"+T+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(T,A,I){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:R==null?null:""+R,children:T,containerInfo:A,implementation:I}}var E=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(T,A){if(T==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Br.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Br.createPortal=function(T,A){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(e(299));return f(T,A,null,I)},Br.flushSync=function(T){var A=E.T,I=a.p;try{if(E.T=null,a.p=2,T)return T()}finally{E.T=A,a.p=I,a.d.f()}},Br.preconnect=function(T,A){typeof T=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,a.d.C(T,A))},Br.prefetchDNS=function(T){typeof T=="string"&&a.d.D(T)},Br.preinit=function(T,A){if(typeof T=="string"&&A&&typeof A.as=="string"){var I=A.as,R=x(I,A.crossOrigin),B=typeof A.integrity=="string"?A.integrity:void 0,j=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;I==="style"?a.d.S(T,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:R,integrity:B,fetchPriority:j}):I==="script"&&a.d.X(T,{crossOrigin:R,integrity:B,fetchPriority:j,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Br.preinitModule=function(T,A){if(typeof T=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var I=x(A.as,A.crossOrigin);a.d.M(T,{crossOrigin:I,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&a.d.M(T)},Br.preload=function(T,A){if(typeof T=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var I=A.as,R=x(I,A.crossOrigin);a.d.L(T,I,{crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Br.preloadModule=function(T,A){if(typeof T=="string")if(A){var I=x(A.as,A.crossOrigin);a.d.m(T,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:I,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else a.d.m(T)},Br.requestFormReset=function(T){a.d.r(T)},Br.unstable_batchedUpdates=function(T,A){return T(A)},Br.useFormState=function(T,A,I){return E.H.useFormState(T,A,I)},Br.useFormStatus=function(){return E.H.useHostTransitionStatus()},Br.version="19.0.0",Br}var y2;function Yx(){if(y2)return v0.exports;y2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),v0.exports=qx(),v0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2;function Xx(){if(E2)return Hu;E2=1;var i=Gx(),e=uc(),t=Yx();function a(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var f=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),j=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),De=Symbol.for("react.memo_cache_sentinel"),Ve=Symbol.iterator;function ke(n){return n===null||typeof n!="object"?null:(n=Ve&&n[Ve]||n["@@iterator"],typeof n=="function"?n:null)}var H=Symbol.for("react.client.reference");function F(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===H?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case T:return"Fragment";case x:return"Portal";case I:return"Profiler";case A:return"StrictMode";case $:return"Suspense";case te:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case j:return(n.displayName||"Context")+".Provider";case B:return(n._context.displayName||"Context")+".Consumer";case q:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ie:return s=n.displayName||null,s!==null?s:F(n.type)||"Memo";case me:s=n._payload,n=n._init;try{return F(n(s))}catch{}}return null}var L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=Object.assign,Z,Q;function G(n){if(Z===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);Z=s&&s[1]||"",Q=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Z+n+Q}var ft=!1;function ce(n,s){if(!n||ft)return"";ft=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(pe){var he=pe}Reflect.construct(n,[],ve)}else{try{ve.call()}catch(pe){he=pe}n.call(ve.prototype)}}else{try{throw Error()}catch(pe){he=pe}(ve=n())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(pe){if(pe&&he&&typeof pe.stack=="string")return[pe.stack,he.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=g.DetermineComponentFrameRoot(),D=v[0],k=v[1];if(D&&k){var Y=D.split(`
`),ne=k.split(`
`);for(_=g=0;g<Y.length&&!Y[g].includes("DetermineComponentFrameRoot");)g++;for(;_<ne.length&&!ne[_].includes("DetermineComponentFrameRoot");)_++;if(g===Y.length||_===ne.length)for(g=Y.length-1,_=ne.length-1;1<=g&&0<=_&&Y[g]!==ne[_];)_--;for(;1<=g&&0<=_;g--,_--)if(Y[g]!==ne[_]){if(g!==1||_!==1)do if(g--,_--,0>_||Y[g]!==ne[_]){var ye=`
`+Y[g].replace(" at new "," at ");return n.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",n.displayName)),ye}while(1<=g&&0<=_);break}}}finally{ft=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?G(c):""}function Se(n){switch(n.tag){case 26:case 27:case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 15:return n=ce(n.type,!1),n;case 11:return n=ce(n.type.render,!1),n;case 1:return n=ce(n.type,!0),n;default:return""}}function Oe(n){try{var s="";do s+=Se(n),n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Ye(n){var s=n,c=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(c=s.return),n=s.return;while(n)}return s.tag===3?c:null}function Et(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function J(n){if(Ye(n)!==n)throw Error(a(188))}function Ie(n){var s=n.alternate;if(!s){if(s=Ye(n),s===null)throw Error(a(188));return s!==n?null:n}for(var c=n,g=s;;){var _=c.return;if(_===null)break;var v=_.alternate;if(v===null){if(g=_.return,g!==null){c=g;continue}break}if(_.child===v.child){for(v=_.child;v;){if(v===c)return J(_),n;if(v===g)return J(_),s;v=v.sibling}throw Error(a(188))}if(c.return!==g.return)c=_,g=v;else{for(var D=!1,k=_.child;k;){if(k===c){D=!0,c=_,g=v;break}if(k===g){D=!0,g=_,c=v;break}k=k.sibling}if(!D){for(k=v.child;k;){if(k===c){D=!0,c=v,g=_;break}if(k===g){D=!0,g=v,c=_;break}k=k.sibling}if(!D)throw Error(a(189))}}if(c.alternate!==g)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?n:s}function Fe(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=Fe(n),s!==null)return s;n=n.sibling}return null}var Ue=Array.isArray,Pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},Ne=[],xn=-1;function et(n){return{current:n}}function rn(n){0>xn||(n.current=Ne[xn],Ne[xn]=null,xn--)}function Mt(n,s){xn++,Ne[xn]=n.current,n.current=s}var Qt=et(null),$r=et(null),ut=et(null),zr=et(null);function ir(n,s){switch(Mt(ut,s),Mt($r,n),Mt(Qt,null),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?Vp(s):0;break;default:if(n=n===8?s.parentNode:s,s=n.tagName,n=n.namespaceURI)n=Vp(n),s=Fp(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}rn(Qt),Mt(Qt,s)}function Hr(){rn(Qt),rn($r),rn(ut)}function bn(n){n.memoizedState!==null&&Mt(zr,n);var s=Qt.current,c=Fp(s,n.type);s!==c&&(Mt($r,n),Mt(Qt,c))}function Vt(n){$r.current===n&&(rn(Qt),rn($r)),zr.current===n&&(rn(zr),Bu._currentValue=lt)}var pt=Object.prototype.hasOwnProperty,Ri=i.unstable_scheduleCallback,ze=i.unstable_cancelCallback,ma=i.unstable_shouldYield,pa=i.unstable_requestPaint,Tn=i.unstable_now,ya=i.unstable_getCurrentPriorityLevel,Wt=i.unstable_ImmediatePriority,Hn=i.unstable_UserBlockingPriority,fr=i.unstable_NormalPriority,Qn=i.unstable_LowPriority,Ea=i.unstable_IdlePriority,_a=i.log,Os=i.unstable_setDisableYieldValue,Jt=null,be=null;function gn(n){if(be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(Jt,n,void 0,(n.current.flags&128)===128)}catch{}}function wt(n){if(typeof _a=="function"&&Os(n),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(Jt,n)}catch{}}var xt=Math.clz32?Math.clz32:go,Qi=Math.log,Aa=Math.LN2;function go(n){return n>>>=0,n===0?32:31-(Qi(n)/Aa|0)|0}var dt=128,Rr=4194304;function ei(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function jr(n,s){var c=n.pendingLanes;if(c===0)return 0;var g=0,_=n.suspendedLanes,v=n.pingedLanes,D=n.warmLanes;n=n.finishedLanes!==0;var k=c&134217727;return k!==0?(c=k&~_,c!==0?g=ei(c):(v&=k,v!==0?g=ei(v):n||(D=k&~D,D!==0&&(g=ei(D))))):(k=c&~_,k!==0?g=ei(k):v!==0?g=ei(v):n||(D=c&~D,D!==0&&(g=ei(D)))),g===0?0:s!==0&&s!==g&&(s&_)===0&&(_=g&-g,D=s&-s,_>=D||_===32&&(D&4194176)!==0)?s:g}function Kn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function ls(n,s){switch(n){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ln(){var n=dt;return dt<<=1,(dt&4194176)===0&&(dt=128),n}function Gr(){var n=Rr;return Rr<<=1,(Rr&62914560)===0&&(Rr=4194304),n}function Ki(n){for(var s=[],c=0;31>c;c++)s.push(n);return s}function Ht(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function qo(n,s,c,g,_,v){var D=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var k=n.entanglements,Y=n.expirationTimes,ne=n.hiddenUpdates;for(c=D&~c;0<c;){var ye=31-xt(c),ve=1<<ye;k[ye]=0,Y[ye]=-1;var he=ne[ye];if(he!==null)for(ne[ye]=null,ye=0;ye<he.length;ye++){var pe=he[ye];pe!==null&&(pe.lane&=-536870913)}c&=~ve}g!==0&&Nr(n,g,0),v!==0&&_===0&&n.tag!==0&&(n.suspendedLanes|=v&~(D&~s))}function Nr(n,s,c){n.pendingLanes|=s,n.suspendedLanes&=~s;var g=31-xt(s);n.entangledLanes|=s,n.entanglements[g]=n.entanglements[g]|1073741824|c&4194218}function Ni(n,s){var c=n.entangledLanes|=s;for(n=n.entanglements;c;){var g=31-xt(c),_=1<<g;_&s|n[g]&s&&(n[g]|=s),c&=~_}}function sr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Di(){var n=Pe.p;return n!==0?n:(n=window.event,n===void 0?32:i2(n.type))}function jn(n,s){var c=Pe.p;try{return Pe.p=n,s()}finally{Pe.p=c}}var Be=Math.random().toString(36).slice(2),mn="__reactFiber$"+Be,Rn="__reactProps$"+Be,vn="__reactContainer$"+Be,ti="__reactEvents$"+Be,Zi="__reactListeners$"+Be,qr="__reactHandles$"+Be,Dr="__reactResources$"+Be,us="__reactMarker$"+Be;function Ms(n){delete n[mn],delete n[Rn],delete n[ti],delete n[Zi],delete n[qr]}function Pn(n){var s=n[mn];if(s)return s;for(var c=n.parentNode;c;){if(s=c[vn]||c[mn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(n=jp(n);n!==null;){if(c=n[mn])return c;n=jp(n)}return s}n=c,c=n.parentNode}return null}function pn(n){if(n=n[mn]||n[vn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Ft(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(a(33))}function Ji(n){var s=n[Dr];return s||(s=n[Dr]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function jt(n){n[us]=!0}var Ls=new Set,_e={};function Yr(n,s){vt(n,s),vt(n+"Capture",s)}function vt(n,s){for(_e[n]=s,n=0;n<s.length;n++)Ls.add(s[n])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),It={},Ct={};function yt(n){return pt.call(Ct,n)?!0:pt.call(It,n)?!1:eu.test(n)?Ct[n]=!0:(It[n]=!0,!1)}function Oi(n,s,c){if(yt(s))if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+c)}}function Mi(n,s,c){if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+c)}}function Or(n,s,c,g){if(g===null)n.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(s,c,""+g)}}function Lt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mi(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function tu(n){var s=mi(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),g=""+n[s];if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var _=c.get,v=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return _.call(this)},set:function(D){g=""+D,v.call(this,D)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(D){g=""+D},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function $t(n){n._valueTracker||(n._valueTracker=tu(n))}function ni(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var c=s.getValue(),g="";return n&&(g=mi(n)?n.checked?"true":"false":n.value),n=g,n!==c?(s.setValue(n),!0):!1}function wa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Mr=/[\n"\\]/g;function rt(n){return n.replace(Mr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function yn(n,s,c,g,_,v,D,k){n.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?n.type=D:n.removeAttribute("type"),s!=null?D==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Lt(s)):n.value!==""+Lt(s)&&(n.value=""+Lt(s)):D!=="submit"&&D!=="reset"||n.removeAttribute("value"),s!=null?V(n,D,Lt(s)):c!=null?V(n,D,Lt(c)):g!=null&&n.removeAttribute("value"),_==null&&v!=null&&(n.defaultChecked=!!v),_!=null&&(n.checked=_&&typeof _!="function"&&typeof _!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.name=""+Lt(k):n.removeAttribute("name")}function ae(n,s,c,g,_,v,D,k){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),s!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||s!=null))return;c=c!=null?""+Lt(c):"",s=s!=null?""+Lt(s):c,k||s===n.value||(n.value=s),n.defaultValue=s}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,n.checked=k?n.checked:!!g,n.defaultChecked=!!g,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(n.name=D)}function V(n,s,c){s==="number"&&wa(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function Me(n,s,c,g){if(n=n.options,s){s={};for(var _=0;_<c.length;_++)s["$"+c[_]]=!0;for(c=0;c<n.length;c++)_=s.hasOwnProperty("$"+n[c].value),n[c].selected!==_&&(n[c].selected=_),_&&g&&(n[c].defaultSelected=!0)}else{for(c=""+Lt(c),s=null,_=0;_<n.length;_++){if(n[_].value===c){n[_].selected=!0,g&&(n[_].defaultSelected=!0);return}s!==null||n[_].disabled||(s=n[_])}s!==null&&(s.selected=!0)}}function hn(n,s,c){if(s!=null&&(s=""+Lt(s),s!==n.value&&(n.value=s),c==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=c!=null?""+Lt(c):""}function Gn(n,s,c,g){if(s==null){if(g!=null){if(c!=null)throw Error(a(92));if(Ue(g)){if(1<g.length)throw Error(a(93));g=g[0]}c=g}c==null&&(c=""),s=c}c=Lt(s),n.defaultValue=c,g=n.textContent,g===c&&g!==""&&g!==null&&(n.value=g)}function ri(n,s){if(s){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=s;return}}n.textContent=s}var mo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dr(n,s,c){var g=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":g?n.setProperty(s,c):typeof c!="number"||c===0||mo.has(s)?s==="float"?n.cssFloat=c:n[s]=(""+c).trim():n[s]=c+"px"}function We(n,s,c){if(s!=null&&typeof s!="object")throw Error(a(62));if(n=n.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?n.setProperty(g,""):g==="float"?n.cssFloat="":n[g]="");for(var _ in s)g=s[_],s.hasOwnProperty(_)&&c[_]!==g&&dr(n,_,g)}else for(var v in s)s.hasOwnProperty(v)&&dr(n,v,s[v])}function en(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ii(n){return nu.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Er=null;function cs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $i=null,sn=null;function Xr(n){var s=pn(n);if(s&&(n=s.stateNode)){var c=n[Rn]||null;e:switch(n=s.stateNode,s.type){case"input":if(yn(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+rt(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var g=c[s];if(g!==n&&g.form===n.form){var _=g[Rn]||null;if(!_)throw Error(a(90));yn(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(s=0;s<c.length;s++)g=c[s],g.form===n.form&&ni(g)}break e;case"textarea":hn(n,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Me(n,!!c.multiple,s,!1)}}}var si=!1;function Ze(n,s,c){if(si)return n(s,c);si=!0;try{var g=n(s);return g}finally{if(si=!1,($i!==null||sn!==null)&&(nh(),$i&&(s=$i,n=sn,sn=$i=null,Xr(s),n)))for(s=0;s<n.length;s++)Xr(n[s])}}function Ps(n,s){var c=n.stateNode;if(c===null)return null;var g=c[Rn]||null;if(g===null)return null;c=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(a(231,s,typeof c));return c}var $e=!1;if(Zn)try{var En={};Object.defineProperty(En,"passive",{get:function(){$e=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{$e=!1}var Li=null,Pi=null,Bi=null;function pi(){if(Bi)return Bi;var n,s=Pi,c=s.length,g,_="value"in Li?Li.value:Li.textContent,v=_.length;for(n=0;n<c&&s[n]===_[n];n++);var D=c-n;for(g=1;g<=D&&s[c-g]===_[v-g];g++);return Bi=_.slice(n,1<g?1-g:void 0)}function ki(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Lr(){return!0}function es(){return!1}function Cn(n){function s(c,g,_,v,D){this._reactName=c,this._targetInst=_,this.type=g,this.nativeEvent=v,this.target=D,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(c=n[k],this[k]=c?c(v):v[k]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Lr:es,this.isPropagationStopped=es,this}return X(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Lr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Lr)},persist:function(){},isPersistent:Lr}),s}var zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=Cn(zt),yi=X({},zt,{view:0,detail:0}),ar=Cn(yi),Bs,ks,Ei,Us=X({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ns,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ei&&(Ei&&n.type==="mousemove"?(Bs=n.screenX-Ei.screenX,ks=n.screenY-Ei.screenY):ks=Bs=0,Ei=n),Bs)},movementY:function(n){return"movementY"in n?n.movementY:ks}}),ai=Cn(Us),Xo=X({},Us,{dataTransfer:0}),Gt=Cn(Xo),hs=X({},yi,{relatedTarget:0}),ts=Cn(hs),oi=X({},zt,{animationName:0,elapsedTime:0,pseudoElement:0}),xa=Cn(oi),fe=X({},zt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),at=Cn(fe),qn=X({},zt,{data:0}),fs=Cn(qn),ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function po(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Qo[n])?!!s[n]:!1}function ns(){return po}var Sn=X({},yi,{key:function(n){if(n.key){var s=ds[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ki(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Wo[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ns,charCode:function(n){return n.type==="keypress"?ki(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ki(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),gs=Cn(Sn),ln=X({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ms=Cn(ln),_r=X({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ns}),qt=Cn(_r),Qe=X({},zt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ko=Cn(Qe),Kt=X({},Us,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),li=Cn(Kt),Bn=X({},zt,{newState:0,oldState:0}),Zo=Cn(Bn),Wr=[9,13,27,32],ui=Zn&&"CompositionEvent"in window,y=null;Zn&&"documentMode"in document&&(y=document.documentMode);var S=Zn&&"TextEvent"in window&&!y,N=Zn&&(!ui||y&&8<y&&11>=y),U=" ",se=!1;function de(n,s){switch(n){case"keyup":return Wr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Le(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var bt=!1;function _n(n,s){switch(n){case"compositionend":return Le(s);case"keypress":return s.which!==32?null:(se=!0,U);case"textInput":return n=s.data,n===U&&se?null:n;default:return null}}function Rt(n,s){if(bt)return n==="compositionend"||!ui&&de(n,s)?(n=pi(),Bi=Pi=Li=null,bt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return N&&s.locale!=="ko"?null:s.data;default:return null}}var un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!un[n.type]:s==="textarea"}function kn(n,s,c,g){$i?sn?sn.push(g):sn=[g]:$i=g,s=oh(s,"onChange"),0<s.length&&(c=new Ui("onChange","change",null,c,g),n.push({event:c,listeners:s}))}var Jn=null,Yn=null;function yo(n){Lp(n,0)}function Ta(n){var s=Ft(n);if(ni(s))return n}function vc(n,s){if(n==="change")return s}var ru=!1;if(Zn){var ci;if(Zn){var iu="oninput"in document;if(!iu){var Jo=document.createElement("div");Jo.setAttribute("oninput","return;"),iu=typeof Jo.oninput=="function"}ci=iu}else ci=!1;ru=ci&&(!document.documentMode||9<document.documentMode)}function va(){Jn&&(Jn.detachEvent("onpropertychange",Nt),Yn=Jn=null)}function Nt(n){if(n.propertyName==="value"&&Ta(Yn)){var s=[];kn(s,Yn,n,cs(n)),Ze(yo,s)}}function $o(n,s,c){n==="focusin"?(va(),Jn=s,Yn=c,Jn.attachEvent("onpropertychange",Nt)):n==="focusout"&&va()}function O(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ta(Yn)}function r(n,s){if(n==="click")return Ta(s)}function o(n,s){if(n==="input"||n==="change")return Ta(s)}function l(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var h=typeof Object.is=="function"?Object.is:l;function d(n,s){if(h(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var c=Object.keys(n),g=Object.keys(s);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var _=c[g];if(!pt.call(s,_)||!h(n[_],s[_]))return!1}return!0}function m(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function p(n,s){var c=m(n);n=0;for(var g;c;){if(c.nodeType===3){if(g=n+c.textContent.length,n<=s&&g>=s)return{node:c,offset:s-n};n=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=m(c)}}function w(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?w(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function C(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=wa(n.document);s instanceof n.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)n=s.contentWindow;else break;s=wa(n.document)}return s}function b(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function M(n,s){var c=C(s);s=n.focusedElem;var g=n.selectionRange;if(c!==s&&s&&s.ownerDocument&&w(s.ownerDocument.documentElement,s)){if(g!==null&&b(s)){if(n=g.start,c=g.end,c===void 0&&(c=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(c,s.value.length);else if(c=(n=s.ownerDocument||document)&&n.defaultView||window,c.getSelection){c=c.getSelection();var _=s.textContent.length,v=Math.min(g.start,_);g=g.end===void 0?v:Math.min(g.end,_),!c.extend&&v>g&&(_=g,g=v,v=_),_=p(s,v);var D=p(s,g);_&&D&&(c.rangeCount!==1||c.anchorNode!==_.node||c.anchorOffset!==_.offset||c.focusNode!==D.node||c.focusOffset!==D.offset)&&(n=n.createRange(),n.setStart(_.node,_.offset),c.removeAllRanges(),v>g?(c.addRange(n),c.extend(D.node,D.offset)):(n.setEnd(D.node,D.offset),c.addRange(n)))}}for(n=[],c=s;c=c.parentNode;)c.nodeType===1&&n.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)c=n[s],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var P=Zn&&"documentMode"in document&&11>=document.documentMode,z=null,W=null,K=null,oe=!1;function ge(n,s,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;oe||z==null||z!==wa(g)||(g=z,"selectionStart"in g&&b(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),K&&d(K,g)||(K=g,g=oh(W,"onSelect"),0<g.length&&(s=new Ui("onSelect","select",null,s,c),n.push({event:s,listeners:g}),s.target=z)))}function Ce(n,s){var c={};return c[n.toLowerCase()]=s.toLowerCase(),c["Webkit"+n]="webkit"+s,c["Moz"+n]="moz"+s,c}var Re={animationend:Ce("Animation","AnimationEnd"),animationiteration:Ce("Animation","AnimationIteration"),animationstart:Ce("Animation","AnimationStart"),transitionrun:Ce("Transition","TransitionRun"),transitionstart:Ce("Transition","TransitionStart"),transitioncancel:Ce("Transition","TransitionCancel"),transitionend:Ce("Transition","TransitionEnd")},Te={},_t={};Zn&&(_t=document.createElement("div").style,"AnimationEvent"in window||(delete Re.animationend.animation,delete Re.animationiteration.animation,delete Re.animationstart.animation),"TransitionEvent"in window||delete Re.transitionend.transition);function tt(n){if(Te[n])return Te[n];if(!Re[n])return n;var s=Re[n],c;for(c in s)if(s.hasOwnProperty(c)&&c in _t)return Te[n]=s[c];return n}var Ar=tt("animationend"),hi=tt("animationiteration"),wr=tt("animationstart"),tn=tt("transitionrun"),or=tt("transitionstart"),Qr=tt("transitioncancel"),Vs=tt("transitionend"),Fs=new Map,Cc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function _i(n,s){Fs.set(n,s),Yr(s,[n])}var Vi=[],el=0,Bf=0;function Sc(){for(var n=el,s=Bf=el=0;s<n;){var c=Vi[s];Vi[s++]=null;var g=Vi[s];Vi[s++]=null;var _=Vi[s];Vi[s++]=null;var v=Vi[s];if(Vi[s++]=null,g!==null&&_!==null){var D=g.pending;D===null?_.next=_:(_.next=D.next,D.next=_),g.pending=_}v!==0&&Sg(c,_,v)}}function Ic(n,s,c,g){Vi[el++]=n,Vi[el++]=s,Vi[el++]=c,Vi[el++]=g,Bf|=g,n.lanes|=g,n=n.alternate,n!==null&&(n.lanes|=g)}function kf(n,s,c,g){return Ic(n,s,c,g),bc(n)}function Ca(n,s){return Ic(n,null,null,s),bc(n)}function Sg(n,s,c){n.lanes|=c;var g=n.alternate;g!==null&&(g.lanes|=c);for(var _=!1,v=n.return;v!==null;)v.childLanes|=c,g=v.alternate,g!==null&&(g.childLanes|=c),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(_=!0)),n=v,v=v.return;_&&s!==null&&n.tag===3&&(v=n.stateNode,_=31-xt(c),v=v.hiddenUpdates,n=v[_],n===null?v[_]=[s]:n.push(s),s.lane=c|536870912)}function bc(n){if(50<Ru)throw Ru=0,jd=null,Error(a(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var tl={},Ig=new WeakMap;function Fi(n,s){if(typeof n=="object"&&n!==null){var c=Ig.get(n);return c!==void 0?c:(s={value:n,source:s,stack:Oe(s)},Ig.set(n,s),s)}return{value:n,source:s,stack:Oe(s)}}var nl=[],rl=0,Rc=null,Nc=0,zi=[],Hi=0,Eo=null,zs=1,Hs="";function _o(n,s){nl[rl++]=Nc,nl[rl++]=Rc,Rc=n,Nc=s}function bg(n,s,c){zi[Hi++]=zs,zi[Hi++]=Hs,zi[Hi++]=Eo,Eo=n;var g=zs;n=Hs;var _=32-xt(g)-1;g&=~(1<<_),c+=1;var v=32-xt(s)+_;if(30<v){var D=_-_%5;v=(g&(1<<D)-1).toString(32),g>>=D,_-=D,zs=1<<32-xt(s)+_|c<<_|g,Hs=v+n}else zs=1<<v|c<<_|g,Hs=n}function Uf(n){n.return!==null&&(_o(n,1),bg(n,1,0))}function Vf(n){for(;n===Rc;)Rc=nl[--rl],nl[rl]=null,Nc=nl[--rl],nl[rl]=null;for(;n===Eo;)Eo=zi[--Hi],zi[Hi]=null,Hs=zi[--Hi],zi[Hi]=null,zs=zi[--Hi],zi[Hi]=null}var Kr=null,xr=null,Yt=!1,rs=null,ps=!1,Ff=Error(a(519));function Ao(n){var s=Error(a(418,""));throw ou(Fi(s,n)),Ff}function Rg(n){var s=n.stateNode,c=n.type,g=n.memoizedProps;switch(s[mn]=n,s[Rn]=g,c){case"dialog":Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":case"embed":Pt("load",s);break;case"video":case"audio":for(c=0;c<Du.length;c++)Pt(Du[c],s);break;case"source":Pt("error",s);break;case"img":case"image":case"link":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"input":Pt("invalid",s),ae(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),$t(s);break;case"select":Pt("invalid",s);break;case"textarea":Pt("invalid",s),Gn(s,g.value,g.defaultValue,g.children),$t(s)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||g.suppressHydrationWarning===!0||Up(s.textContent,c)?(g.popover!=null&&(Pt("beforetoggle",s),Pt("toggle",s)),g.onScroll!=null&&Pt("scroll",s),g.onScrollEnd!=null&&Pt("scrollend",s),g.onClick!=null&&(s.onclick=lh),s=!0):s=!1,s||Ao(n)}function Ng(n){for(Kr=n.return;Kr;)switch(Kr.tag){case 3:case 27:ps=!0;return;case 5:case 13:ps=!1;return;default:Kr=Kr.return}}function su(n){if(n!==Kr)return!1;if(!Yt)return Ng(n),Yt=!0,!1;var s=!1,c;if((c=n.tag!==3&&n.tag!==27)&&((c=n.tag===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||a0(n.type,n.memoizedProps)),c=!c),c&&(s=!0),s&&xr&&Ao(n),Ng(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(c=n.data,c==="/$"){if(s===0){xr=ss(n.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;n=n.nextSibling}xr=null}}else xr=Kr?ss(n.stateNode.nextSibling):null;return!0}function au(){xr=Kr=null,Yt=!1}function ou(n){rs===null?rs=[n]:rs.push(n)}var lu=Error(a(460)),Dg=Error(a(474)),zf={then:function(){}};function Og(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Dc(){}function Mg(n,s,c){switch(c=n[c],c===void 0?n.push(s):c!==s&&(s.then(Dc,Dc),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===lu?Error(a(483)):n;default:if(typeof s.status=="string")s.then(Dc,Dc);else{if(n=fn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=s,n.status="pending",n.then(function(g){if(s.status==="pending"){var _=s;_.status="fulfilled",_.value=g}},function(g){if(s.status==="pending"){var _=s;_.status="rejected",_.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===lu?Error(a(483)):n}throw uu=s,lu}}var uu=null;function Lg(){if(uu===null)throw Error(a(459));var n=uu;return uu=null,n}var il=null,cu=0;function Oc(n){var s=cu;return cu+=1,il===null&&(il=[]),Mg(il,n,s)}function hu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Mc(n,s){throw s.$$typeof===f?Error(a(525)):(n=Object.prototype.toString.call(s),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Pg(n){var s=n._init;return s(n._payload)}function Bg(n){function s(re,ee){if(n){var le=re.deletions;le===null?(re.deletions=[ee],re.flags|=16):le.push(ee)}}function c(re,ee){if(!n)return null;for(;ee!==null;)s(re,ee),ee=ee.sibling;return null}function g(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function _(re,ee){return re=ka(re,ee),re.index=0,re.sibling=null,re}function v(re,ee,le){return re.index=le,n?(le=re.alternate,le!==null?(le=le.index,le<ee?(re.flags|=33554434,ee):le):(re.flags|=33554434,ee)):(re.flags|=1048576,ee)}function D(re){return n&&re.alternate===null&&(re.flags|=33554434),re}function k(re,ee,le,Ae){return ee===null||ee.tag!==6?(ee=Pd(le,re.mode,Ae),ee.return=re,ee):(ee=_(ee,le),ee.return=re,ee)}function Y(re,ee,le,Ae){var Ge=le.type;return Ge===T?ye(re,ee,le.props.children,Ae,le.key):ee!==null&&(ee.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===me&&Pg(Ge)===ee.type)?(ee=_(ee,le.props),hu(ee,le),ee.return=re,ee):(ee=Zc(le.type,le.key,le.props,null,re.mode,Ae),hu(ee,le),ee.return=re,ee)}function ne(re,ee,le,Ae){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==le.containerInfo||ee.stateNode.implementation!==le.implementation?(ee=Bd(le,re.mode,Ae),ee.return=re,ee):(ee=_(ee,le.children||[]),ee.return=re,ee)}function ye(re,ee,le,Ae,Ge){return ee===null||ee.tag!==7?(ee=No(le,re.mode,Ae,Ge),ee.return=re,ee):(ee=_(ee,le),ee.return=re,ee)}function ve(re,ee,le){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Pd(""+ee,re.mode,le),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case E:return le=Zc(ee.type,ee.key,ee.props,null,re.mode,le),hu(le,ee),le.return=re,le;case x:return ee=Bd(ee,re.mode,le),ee.return=re,ee;case me:var Ae=ee._init;return ee=Ae(ee._payload),ve(re,ee,le)}if(Ue(ee)||ke(ee))return ee=No(ee,re.mode,le,null),ee.return=re,ee;if(typeof ee.then=="function")return ve(re,Oc(ee),le);if(ee.$$typeof===j)return ve(re,Wc(re,ee),le);Mc(re,ee)}return null}function he(re,ee,le,Ae){var Ge=ee!==null?ee.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Ge!==null?null:k(re,ee,""+le,Ae);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case E:return le.key===Ge?Y(re,ee,le,Ae):null;case x:return le.key===Ge?ne(re,ee,le,Ae):null;case me:return Ge=le._init,le=Ge(le._payload),he(re,ee,le,Ae)}if(Ue(le)||ke(le))return Ge!==null?null:ye(re,ee,le,Ae,null);if(typeof le.then=="function")return he(re,ee,Oc(le),Ae);if(le.$$typeof===j)return he(re,ee,Wc(re,le),Ae);Mc(re,le)}return null}function pe(re,ee,le,Ae,Ge){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return re=re.get(le)||null,k(ee,re,""+Ae,Ge);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case E:return re=re.get(Ae.key===null?le:Ae.key)||null,Y(ee,re,Ae,Ge);case x:return re=re.get(Ae.key===null?le:Ae.key)||null,ne(ee,re,Ae,Ge);case me:var Tt=Ae._init;return Ae=Tt(Ae._payload),pe(re,ee,le,Ae,Ge)}if(Ue(Ae)||ke(Ae))return re=re.get(le)||null,ye(ee,re,Ae,Ge,null);if(typeof Ae.then=="function")return pe(re,ee,le,Oc(Ae),Ge);if(Ae.$$typeof===j)return pe(re,ee,le,Wc(ee,Ae),Ge);Mc(ee,Ae)}return null}function Xe(re,ee,le,Ae){for(var Ge=null,Tt=null,Ke=ee,nt=ee=0,pr=null;Ke!==null&&nt<le.length;nt++){Ke.index>nt?(pr=Ke,Ke=null):pr=Ke.sibling;var Xt=he(re,Ke,le[nt],Ae);if(Xt===null){Ke===null&&(Ke=pr);break}n&&Ke&&Xt.alternate===null&&s(re,Ke),ee=v(Xt,ee,nt),Tt===null?Ge=Xt:Tt.sibling=Xt,Tt=Xt,Ke=pr}if(nt===le.length)return c(re,Ke),Yt&&_o(re,nt),Ge;if(Ke===null){for(;nt<le.length;nt++)Ke=ve(re,le[nt],Ae),Ke!==null&&(ee=v(Ke,ee,nt),Tt===null?Ge=Ke:Tt.sibling=Ke,Tt=Ke);return Yt&&_o(re,nt),Ge}for(Ke=g(Ke);nt<le.length;nt++)pr=pe(Ke,re,nt,le[nt],Ae),pr!==null&&(n&&pr.alternate!==null&&Ke.delete(pr.key===null?nt:pr.key),ee=v(pr,ee,nt),Tt===null?Ge=pr:Tt.sibling=pr,Tt=pr);return n&&Ke.forEach(function(Ga){return s(re,Ga)}),Yt&&_o(re,nt),Ge}function ct(re,ee,le,Ae){if(le==null)throw Error(a(151));for(var Ge=null,Tt=null,Ke=ee,nt=ee=0,pr=null,Xt=le.next();Ke!==null&&!Xt.done;nt++,Xt=le.next()){Ke.index>nt?(pr=Ke,Ke=null):pr=Ke.sibling;var Ga=he(re,Ke,Xt.value,Ae);if(Ga===null){Ke===null&&(Ke=pr);break}n&&Ke&&Ga.alternate===null&&s(re,Ke),ee=v(Ga,ee,nt),Tt===null?Ge=Ga:Tt.sibling=Ga,Tt=Ga,Ke=pr}if(Xt.done)return c(re,Ke),Yt&&_o(re,nt),Ge;if(Ke===null){for(;!Xt.done;nt++,Xt=le.next())Xt=ve(re,Xt.value,Ae),Xt!==null&&(ee=v(Xt,ee,nt),Tt===null?Ge=Xt:Tt.sibling=Xt,Tt=Xt);return Yt&&_o(re,nt),Ge}for(Ke=g(Ke);!Xt.done;nt++,Xt=le.next())Xt=pe(Ke,re,nt,Xt.value,Ae),Xt!==null&&(n&&Xt.alternate!==null&&Ke.delete(Xt.key===null?nt:Xt.key),ee=v(Xt,ee,nt),Tt===null?Ge=Xt:Tt.sibling=Xt,Tt=Xt);return n&&Ke.forEach(function(Ux){return s(re,Ux)}),Yt&&_o(re,nt),Ge}function Fn(re,ee,le,Ae){if(typeof le=="object"&&le!==null&&le.type===T&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case E:e:{for(var Ge=le.key;ee!==null;){if(ee.key===Ge){if(Ge=le.type,Ge===T){if(ee.tag===7){c(re,ee.sibling),Ae=_(ee,le.props.children),Ae.return=re,re=Ae;break e}}else if(ee.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===me&&Pg(Ge)===ee.type){c(re,ee.sibling),Ae=_(ee,le.props),hu(Ae,le),Ae.return=re,re=Ae;break e}c(re,ee);break}else s(re,ee);ee=ee.sibling}le.type===T?(Ae=No(le.props.children,re.mode,Ae,le.key),Ae.return=re,re=Ae):(Ae=Zc(le.type,le.key,le.props,null,re.mode,Ae),hu(Ae,le),Ae.return=re,re=Ae)}return D(re);case x:e:{for(Ge=le.key;ee!==null;){if(ee.key===Ge)if(ee.tag===4&&ee.stateNode.containerInfo===le.containerInfo&&ee.stateNode.implementation===le.implementation){c(re,ee.sibling),Ae=_(ee,le.children||[]),Ae.return=re,re=Ae;break e}else{c(re,ee);break}else s(re,ee);ee=ee.sibling}Ae=Bd(le,re.mode,Ae),Ae.return=re,re=Ae}return D(re);case me:return Ge=le._init,le=Ge(le._payload),Fn(re,ee,le,Ae)}if(Ue(le))return Xe(re,ee,le,Ae);if(ke(le)){if(Ge=ke(le),typeof Ge!="function")throw Error(a(150));return le=Ge.call(le),ct(re,ee,le,Ae)}if(typeof le.then=="function")return Fn(re,ee,Oc(le),Ae);if(le.$$typeof===j)return Fn(re,ee,Wc(re,le),Ae);Mc(re,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,ee!==null&&ee.tag===6?(c(re,ee.sibling),Ae=_(ee,le),Ae.return=re,re=Ae):(c(re,ee),Ae=Pd(le,re.mode,Ae),Ae.return=re,re=Ae),D(re)):c(re,ee)}return function(re,ee,le,Ae){try{cu=0;var Ge=Fn(re,ee,le,Ae);return il=null,Ge}catch(Ke){if(Ke===lu)throw Ke;var Tt=Yi(29,Ke,null,re.mode);return Tt.lanes=Ae,Tt.return=re,Tt}finally{}}}var wo=Bg(!0),kg=Bg(!1),sl=et(null),Lc=et(0);function Ug(n,s){n=$s,Mt(Lc,n),Mt(sl,s),$s=n|s.baseLanes}function Hf(){Mt(Lc,$s),Mt(sl,sl.current)}function jf(){$s=Lc.current,rn(sl),rn(Lc)}var ji=et(null),ys=null;function Sa(n){var s=n.alternate;Mt(lr,lr.current&1),Mt(ji,n),ys===null&&(s===null||sl.current!==null||s.memoizedState!==null)&&(ys=n)}function Vg(n){if(n.tag===22){if(Mt(lr,lr.current),Mt(ji,n),ys===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(ys=n)}}else Ia()}function Ia(){Mt(lr,lr.current),Mt(ji,ji.current)}function js(n){rn(ji),ys===n&&(ys=null),rn(lr)}var lr=et(0);function Pc(n){for(var s=n;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Cw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(c,g){n.push(g)}};this.abort=function(){s.aborted=!0,n.forEach(function(c){return c()})}},Sw=i.unstable_scheduleCallback,Iw=i.unstable_NormalPriority,ur={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gf(){return{controller:new Cw,data:new Map,refCount:0}}function fu(n){n.refCount--,n.refCount===0&&Sw(Iw,function(){n.controller.abort()})}var du=null,qf=0,al=0,ol=null;function bw(n,s){if(du===null){var c=du=[];qf=0,al=Zd(),ol={status:"pending",value:void 0,then:function(g){c.push(g)}}}return qf++,s.then(Fg,Fg),s}function Fg(){if(--qf===0&&du!==null){ol!==null&&(ol.status="fulfilled");var n=du;du=null,al=0,ol=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Rw(n,s){var c=[],g={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return n.then(function(){g.status="fulfilled",g.value=s;for(var _=0;_<c.length;_++)(0,c[_])(s)},function(_){for(g.status="rejected",g.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),g}var zg=L.S;L.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&bw(n,s),zg!==null&&zg(n,s)};var xo=et(null);function Yf(){var n=xo.current;return n!==null?n:fn.pooledCache}function Bc(n,s){s===null?Mt(xo,xo.current):Mt(xo,s.pool)}function Hg(){var n=Yf();return n===null?null:{parent:ur._currentValue,pool:n}}var ba=0,At=null,an=null,$n=null,kc=!1,ll=!1,To=!1,Uc=0,gu=0,ul=null,Nw=0;function Xn(){throw Error(a(321))}function Xf(n,s){if(s===null)return!1;for(var c=0;c<s.length&&c<n.length;c++)if(!h(n[c],s[c]))return!1;return!0}function Wf(n,s,c,g,_,v){return ba=v,At=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,L.H=n===null||n.memoizedState===null?vo:Ra,To=!1,v=c(g,_),To=!1,ll&&(v=Gg(s,c,g,_)),jg(n),v}function jg(n){L.H=Es;var s=an!==null&&an.next!==null;if(ba=0,$n=an=At=null,kc=!1,gu=0,ul=null,s)throw Error(a(300));n===null||gr||(n=n.dependencies,n!==null&&Xc(n)&&(gr=!0))}function Gg(n,s,c,g){At=n;var _=0;do{if(ll&&(ul=null),gu=0,ll=!1,25<=_)throw Error(a(301));if(_+=1,$n=an=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}L.H=Co,v=s(c,g)}while(ll);return v}function Dw(){var n=L.H,s=n.useState()[0];return s=typeof s.then=="function"?mu(s):s,n=n.useState()[0],(an!==null?an.memoizedState:null)!==n&&(At.flags|=1024),s}function Qf(){var n=Uc!==0;return Uc=0,n}function Kf(n,s,c){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~c}function Zf(n){if(kc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}kc=!1}ba=0,$n=an=At=null,ll=!1,gu=Uc=0,ul=null}function fi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?At.memoizedState=$n=n:$n=$n.next=n,$n}function er(){if(an===null){var n=At.alternate;n=n!==null?n.memoizedState:null}else n=an.next;var s=$n===null?At.memoizedState:$n.next;if(s!==null)$n=s,an=n;else{if(n===null)throw At.alternate===null?Error(a(467)):Error(a(310));an=n,n={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},$n===null?At.memoizedState=$n=n:$n=$n.next=n}return $n}var Vc;Vc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function mu(n){var s=gu;return gu+=1,ul===null&&(ul=[]),n=Mg(ul,n,s),s=At,($n===null?s.memoizedState:$n.next)===null&&(s=s.alternate,L.H=s===null||s.memoizedState===null?vo:Ra),n}function Fc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return mu(n);if(n.$$typeof===j)return Pr(n)}throw Error(a(438,String(n)))}function Jf(n){var s=null,c=At.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var g=At.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(_){return _.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Vc(),At.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(n),g=0;g<n;g++)c[g]=De;return s.index++,c}function Gs(n,s){return typeof s=="function"?s(n):s}function zc(n){var s=er();return $f(s,an,n)}function $f(n,s,c){var g=n.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=c;var _=n.baseQueue,v=g.pending;if(v!==null){if(_!==null){var D=_.next;_.next=v.next,v.next=D}s.baseQueue=_=v,g.pending=null}if(v=n.baseState,_===null)n.memoizedState=v;else{s=_.next;var k=D=null,Y=null,ne=s,ye=!1;do{var ve=ne.lane&-536870913;if(ve!==ne.lane?(kt&ve)===ve:(ba&ve)===ve){var he=ne.revertLane;if(he===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),ve===al&&(ye=!0);else if((ba&he)===he){ne=ne.next,he===al&&(ye=!0);continue}else ve={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(k=Y=ve,D=v):Y=Y.next=ve,At.lanes|=he,Ua|=he;ve=ne.action,To&&c(v,ve),v=ne.hasEagerState?ne.eagerState:c(v,ve)}else he={lane:ve,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(k=Y=he,D=v):Y=Y.next=he,At.lanes|=ve,Ua|=ve;ne=ne.next}while(ne!==null&&ne!==s);if(Y===null?D=v:Y.next=k,!h(v,n.memoizedState)&&(gr=!0,ye&&(c=ol,c!==null)))throw c;n.memoizedState=v,n.baseState=D,n.baseQueue=Y,g.lastRenderedState=v}return _===null&&(g.lanes=0),[n.memoizedState,g.dispatch]}function ed(n){var s=er(),c=s.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=n;var g=c.dispatch,_=c.pending,v=s.memoizedState;if(_!==null){c.pending=null;var D=_=_.next;do v=n(v,D.action),D=D.next;while(D!==_);h(v,s.memoizedState)||(gr=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),c.lastRenderedState=v}return[v,g]}function qg(n,s,c){var g=At,_=er(),v=Yt;if(v){if(c===void 0)throw Error(a(407));c=c()}else c=s();var D=!h((an||_).memoizedState,c);if(D&&(_.memoizedState=c,gr=!0),_=_.queue,rd(Wg.bind(null,g,_,n),[n]),_.getSnapshot!==s||D||$n!==null&&$n.memoizedState.tag&1){if(g.flags|=2048,cl(9,Xg.bind(null,g,_,c,s),{destroy:void 0},null),fn===null)throw Error(a(349));v||(ba&60)!==0||Yg(g,s,c)}return c}function Yg(n,s,c){n.flags|=16384,n={getSnapshot:s,value:c},s=At.updateQueue,s===null?(s=Vc(),At.updateQueue=s,s.stores=[n]):(c=s.stores,c===null?s.stores=[n]:c.push(n))}function Xg(n,s,c,g){s.value=c,s.getSnapshot=g,Qg(s)&&Kg(n)}function Wg(n,s,c){return c(function(){Qg(s)&&Kg(n)})}function Qg(n){var s=n.getSnapshot;n=n.value;try{var c=s();return!h(n,c)}catch{return!0}}function Kg(n){var s=Ca(n,2);s!==null&&Zr(s,n,2)}function td(n){var s=fi();if(typeof n=="function"){var c=n;if(n=c(),To){wt(!0);try{c()}finally{wt(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:n},s}function Zg(n,s,c,g){return n.baseState=c,$f(n,an,typeof g=="function"?g:Gs)}function Ow(n,s,c,g,_){if(Gc(n))throw Error(a(485));if(n=s.action,n!==null){var v={payload:_,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){v.listeners.push(D)}};L.T!==null?c(!0):v.isTransition=!1,g(v),c=s.pending,c===null?(v.next=s.pending=v,Jg(s,v)):(v.next=c.next,s.pending=c.next=v)}}function Jg(n,s){var c=s.action,g=s.payload,_=n.state;if(s.isTransition){var v=L.T,D={};L.T=D;try{var k=c(_,g),Y=L.S;Y!==null&&Y(D,k),$g(n,s,k)}catch(ne){nd(n,s,ne)}finally{L.T=v}}else try{v=c(_,g),$g(n,s,v)}catch(ne){nd(n,s,ne)}}function $g(n,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){em(n,s,g)},function(g){return nd(n,s,g)}):em(n,s,c)}function em(n,s,c){s.status="fulfilled",s.value=c,tm(s),n.state=c,s=n.pending,s!==null&&(c=s.next,c===s?n.pending=null:(c=c.next,s.next=c,Jg(n,c)))}function nd(n,s,c){var g=n.pending;if(n.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=c,tm(s),s=s.next;while(s!==g)}n.action=null}function tm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function nm(n,s){return s}function rm(n,s){if(Yt){var c=fn.formState;if(c!==null){e:{var g=At;if(Yt){if(xr){t:{for(var _=xr,v=ps;_.nodeType!==8;){if(!v){_=null;break t}if(_=ss(_.nextSibling),_===null){_=null;break t}}v=_.data,_=v==="F!"||v==="F"?_:null}if(_){xr=ss(_.nextSibling),g=_.data==="F!";break e}}Ao(g)}g=!1}g&&(s=c[0])}}return c=fi(),c.memoizedState=c.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nm,lastRenderedState:s},c.queue=g,c=wm.bind(null,At,g),g.dispatch=c,g=td(!1),v=ld.bind(null,At,!1,g.queue),g=fi(),_={state:s,dispatch:null,action:n,pending:null},g.queue=_,c=Ow.bind(null,At,_,v,c),_.dispatch=c,g.memoizedState=n,[s,c,!1]}function im(n){var s=er();return sm(s,an,n)}function sm(n,s,c){s=$f(n,s,nm)[0],n=zc(Gs)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?mu(s):s;var g=er(),_=g.queue,v=_.dispatch;return c!==g.memoizedState&&(At.flags|=2048,cl(9,Mw.bind(null,_,c),{destroy:void 0},null)),[s,v,n]}function Mw(n,s){n.action=s}function am(n){var s=er(),c=an;if(c!==null)return sm(s,c,n);er(),s=s.memoizedState,c=er();var g=c.queue.dispatch;return c.memoizedState=n,[s,g,!1]}function cl(n,s,c,g){return n={tag:n,create:s,inst:c,deps:g,next:null},s=At.updateQueue,s===null&&(s=Vc(),At.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=n.next=n:(g=c.next,c.next=n,n.next=g,s.lastEffect=n),n}function om(){return er().memoizedState}function Hc(n,s,c,g){var _=fi();At.flags|=n,_.memoizedState=cl(1|s,c,{destroy:void 0},g===void 0?null:g)}function jc(n,s,c,g){var _=er();g=g===void 0?null:g;var v=_.memoizedState.inst;an!==null&&g!==null&&Xf(g,an.memoizedState.deps)?_.memoizedState=cl(s,c,v,g):(At.flags|=n,_.memoizedState=cl(1|s,c,v,g))}function lm(n,s){Hc(8390656,8,n,s)}function rd(n,s){jc(2048,8,n,s)}function um(n,s){return jc(4,2,n,s)}function cm(n,s){return jc(4,4,n,s)}function hm(n,s){if(typeof s=="function"){n=n();var c=s(n);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function fm(n,s,c){c=c!=null?c.concat([n]):null,jc(4,4,hm.bind(null,s,n),c)}function id(){}function dm(n,s){var c=er();s=s===void 0?null:s;var g=c.memoizedState;return s!==null&&Xf(s,g[1])?g[0]:(c.memoizedState=[n,s],n)}function gm(n,s){var c=er();s=s===void 0?null:s;var g=c.memoizedState;if(s!==null&&Xf(s,g[1]))return g[0];if(g=n(),To){wt(!0);try{n()}finally{wt(!1)}}return c.memoizedState=[g,s],g}function sd(n,s,c){return c===void 0||(ba&1073741824)!==0?n.memoizedState=s:(n.memoizedState=c,n=pp(),At.lanes|=n,Ua|=n,c)}function mm(n,s,c,g){return h(c,s)?c:sl.current!==null?(n=sd(n,c,g),h(n,s)||(gr=!0),n):(ba&42)===0?(gr=!0,n.memoizedState=c):(n=pp(),At.lanes|=n,Ua|=n,s)}function pm(n,s,c,g,_){var v=Pe.p;Pe.p=v!==0&&8>v?v:8;var D=L.T,k={};L.T=k,ld(n,!1,s,c);try{var Y=_(),ne=L.S;if(ne!==null&&ne(k,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ye=Rw(Y,g);pu(n,s,ye,Ti(n))}else pu(n,s,g,Ti(n))}catch(ve){pu(n,s,{then:function(){},status:"rejected",reason:ve},Ti())}finally{Pe.p=v,L.T=D}}function Lw(){}function ad(n,s,c,g){if(n.tag!==5)throw Error(a(476));var _=ym(n).queue;pm(n,_,s,lt,c===null?Lw:function(){return Em(n),c(g)})}function ym(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:lt},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:c},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Em(n){var s=ym(n).next.queue;pu(n,s,{},Ti())}function od(){return Pr(Bu)}function _m(){return er().memoizedState}function Am(){return er().memoizedState}function Pw(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var c=Ti();n=Oa(c);var g=Ma(s,n,c);g!==null&&(Zr(g,s,c),_u(g,s,c)),s={cache:Gf()},n.payload=s;return}s=s.return}}function Bw(n,s,c){var g=Ti();c={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Gc(n)?xm(s,c):(c=kf(n,s,c,g),c!==null&&(Zr(c,n,g),Tm(c,s,g)))}function wm(n,s,c){var g=Ti();pu(n,s,c,g)}function pu(n,s,c,g){var _={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Gc(n))xm(s,_);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var D=s.lastRenderedState,k=v(D,c);if(_.hasEagerState=!0,_.eagerState=k,h(k,D))return Ic(n,s,_,0),fn===null&&Sc(),!1}catch{}finally{}if(c=kf(n,s,_,g),c!==null)return Zr(c,n,g),Tm(c,s,g),!0}return!1}function ld(n,s,c,g){if(g={lane:2,revertLane:Zd(),action:g,hasEagerState:!1,eagerState:null,next:null},Gc(n)){if(s)throw Error(a(479))}else s=kf(n,c,g,2),s!==null&&Zr(s,n,2)}function Gc(n){var s=n.alternate;return n===At||s!==null&&s===At}function xm(n,s){ll=kc=!0;var c=n.pending;c===null?s.next=s:(s.next=c.next,c.next=s),n.pending=s}function Tm(n,s,c){if((c&4194176)!==0){var g=s.lanes;g&=n.pendingLanes,c|=g,s.lanes=c,Ni(n,c)}}var Es={readContext:Pr,use:Fc,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useLayoutEffect:Xn,useInsertionEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useSyncExternalStore:Xn,useId:Xn};Es.useCacheRefresh=Xn,Es.useMemoCache=Xn,Es.useHostTransitionStatus=Xn,Es.useFormState=Xn,Es.useActionState=Xn,Es.useOptimistic=Xn;var vo={readContext:Pr,use:Fc,useCallback:function(n,s){return fi().memoizedState=[n,s===void 0?null:s],n},useContext:Pr,useEffect:lm,useImperativeHandle:function(n,s,c){c=c!=null?c.concat([n]):null,Hc(4194308,4,hm.bind(null,s,n),c)},useLayoutEffect:function(n,s){return Hc(4194308,4,n,s)},useInsertionEffect:function(n,s){Hc(4,2,n,s)},useMemo:function(n,s){var c=fi();s=s===void 0?null:s;var g=n();if(To){wt(!0);try{n()}finally{wt(!1)}}return c.memoizedState=[g,s],g},useReducer:function(n,s,c){var g=fi();if(c!==void 0){var _=c(s);if(To){wt(!0);try{c(s)}finally{wt(!1)}}}else _=s;return g.memoizedState=g.baseState=_,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:_},g.queue=n,n=n.dispatch=Bw.bind(null,At,n),[g.memoizedState,n]},useRef:function(n){var s=fi();return n={current:n},s.memoizedState=n},useState:function(n){n=td(n);var s=n.queue,c=wm.bind(null,At,s);return s.dispatch=c,[n.memoizedState,c]},useDebugValue:id,useDeferredValue:function(n,s){var c=fi();return sd(c,n,s)},useTransition:function(){var n=td(!1);return n=pm.bind(null,At,n.queue,!0,!1),fi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,c){var g=At,_=fi();if(Yt){if(c===void 0)throw Error(a(407));c=c()}else{if(c=s(),fn===null)throw Error(a(349));(kt&60)!==0||Yg(g,s,c)}_.memoizedState=c;var v={value:c,getSnapshot:s};return _.queue=v,lm(Wg.bind(null,g,v,n),[n]),g.flags|=2048,cl(9,Xg.bind(null,g,v,c,s),{destroy:void 0},null),c},useId:function(){var n=fi(),s=fn.identifierPrefix;if(Yt){var c=Hs,g=zs;c=(g&~(1<<32-xt(g)-1)).toString(32)+c,s=":"+s+"R"+c,c=Uc++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=Nw++,s=":"+s+"r"+c.toString(32)+":";return n.memoizedState=s},useCacheRefresh:function(){return fi().memoizedState=Pw.bind(null,At)}};vo.useMemoCache=Jf,vo.useHostTransitionStatus=od,vo.useFormState=rm,vo.useActionState=rm,vo.useOptimistic=function(n){var s=fi();s.memoizedState=s.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=ld.bind(null,At,!0,c),c.dispatch=s,[n,s]};var Ra={readContext:Pr,use:Fc,useCallback:dm,useContext:Pr,useEffect:rd,useImperativeHandle:fm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:gm,useReducer:zc,useRef:om,useState:function(){return zc(Gs)},useDebugValue:id,useDeferredValue:function(n,s){var c=er();return mm(c,an.memoizedState,n,s)},useTransition:function(){var n=zc(Gs)[0],s=er().memoizedState;return[typeof n=="boolean"?n:mu(n),s]},useSyncExternalStore:qg,useId:_m};Ra.useCacheRefresh=Am,Ra.useMemoCache=Jf,Ra.useHostTransitionStatus=od,Ra.useFormState=im,Ra.useActionState=im,Ra.useOptimistic=function(n,s){var c=er();return Zg(c,an,n,s)};var Co={readContext:Pr,use:Fc,useCallback:dm,useContext:Pr,useEffect:rd,useImperativeHandle:fm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:gm,useReducer:ed,useRef:om,useState:function(){return ed(Gs)},useDebugValue:id,useDeferredValue:function(n,s){var c=er();return an===null?sd(c,n,s):mm(c,an.memoizedState,n,s)},useTransition:function(){var n=ed(Gs)[0],s=er().memoizedState;return[typeof n=="boolean"?n:mu(n),s]},useSyncExternalStore:qg,useId:_m};Co.useCacheRefresh=Am,Co.useMemoCache=Jf,Co.useHostTransitionStatus=od,Co.useFormState=am,Co.useActionState=am,Co.useOptimistic=function(n,s){var c=er();return an!==null?Zg(c,an,n,s):(c.baseState=n,[n,c.queue.dispatch])};function ud(n,s,c,g){s=n.memoizedState,c=c(g,s),c=c==null?s:X({},s,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var cd={isMounted:function(n){return(n=n._reactInternals)?Ye(n)===n:!1},enqueueSetState:function(n,s,c){n=n._reactInternals;var g=Ti(),_=Oa(g);_.payload=s,c!=null&&(_.callback=c),s=Ma(n,_,g),s!==null&&(Zr(s,n,g),_u(s,n,g))},enqueueReplaceState:function(n,s,c){n=n._reactInternals;var g=Ti(),_=Oa(g);_.tag=1,_.payload=s,c!=null&&(_.callback=c),s=Ma(n,_,g),s!==null&&(Zr(s,n,g),_u(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var c=Ti(),g=Oa(c);g.tag=2,s!=null&&(g.callback=s),s=Ma(n,g,c),s!==null&&(Zr(s,n,c),_u(s,n,c))}};function vm(n,s,c,g,_,v,D){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,v,D):s.prototype&&s.prototype.isPureReactComponent?!d(c,g)||!d(_,v):!0}function Cm(n,s,c,g){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,g),s.state!==n&&cd.enqueueReplaceState(s,s.state,null)}function So(n,s){var c=s;if("ref"in s){c={};for(var g in s)g!=="ref"&&(c[g]=s[g])}if(n=n.defaultProps){c===s&&(c=X({},c));for(var _ in n)c[_]===void 0&&(c[_]=n[_])}return c}var qc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Sm(n){qc(n)}function Im(n){console.error(n)}function bm(n){qc(n)}function Yc(n,s){try{var c=n.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function Rm(n,s,c){try{var g=n.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function hd(n,s,c){return c=Oa(c),c.tag=3,c.payload={element:null},c.callback=function(){Yc(n,s)},c}function Nm(n){return n=Oa(n),n.tag=3,n}function Dm(n,s,c,g){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var v=g.value;n.payload=function(){return _(v)},n.callback=function(){Rm(s,c,g)}}var D=c.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(n.callback=function(){Rm(s,c,g),typeof _!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var k=g.stack;this.componentDidCatch(g.value,{componentStack:k!==null?k:""})})}function kw(n,s,c,g,_){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=c.alternate,s!==null&&Eu(s,c,_,!0),c=ji.current,c!==null){switch(c.tag){case 13:return ys===null?Yd():c.alternate===null&&Vn===0&&(Vn=3),c.flags&=-257,c.flags|=65536,c.lanes=_,g===zf?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([g]):s.add(g),Wd(n,g,_)),!1;case 22:return c.flags|=65536,g===zf?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([g]):c.add(g)),Wd(n,g,_)),!1}throw Error(a(435,c.tag))}return Wd(n,g,_),Yd(),!1}if(Yt)return s=ji.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=_,g!==Ff&&(n=Error(a(422),{cause:g}),ou(Fi(n,c)))):(g!==Ff&&(s=Error(a(423),{cause:g}),ou(Fi(s,c))),n=n.current.alternate,n.flags|=65536,_&=-_,n.lanes|=_,g=Fi(g,c),_=hd(n.stateNode,g,_),Sd(n,_),Vn!==4&&(Vn=2)),!1;var v=Error(a(520),{cause:g});if(v=Fi(v,c),Iu===null?Iu=[v]:Iu.push(v),Vn!==4&&(Vn=2),s===null)return!0;g=Fi(g,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,n=_&-_,c.lanes|=n,n=hd(c.stateNode,g,n),Sd(c,n),!1;case 1:if(s=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Va===null||!Va.has(v))))return c.flags|=65536,_&=-_,c.lanes|=_,_=Nm(_),Dm(_,n,c,g),Sd(c,_),!1}c=c.return}while(c!==null);return!1}var Om=Error(a(461)),gr=!1;function Tr(n,s,c,g){s.child=n===null?kg(s,null,c,g):wo(s,n.child,c,g)}function Mm(n,s,c,g,_){c=c.render;var v=s.ref;if("ref"in g){var D={};for(var k in g)k!=="ref"&&(D[k]=g[k])}else D=g;return bo(s),g=Wf(n,s,c,D,v,_),k=Qf(),n!==null&&!gr?(Kf(n,s,_),qs(n,s,_)):(Yt&&k&&Uf(s),s.flags|=1,Tr(n,s,g,_),s.child)}function Lm(n,s,c,g,_){if(n===null){var v=c.type;return typeof v=="function"&&!Ld(v)&&v.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=v,Pm(n,s,v,g,_)):(n=Zc(c.type,null,g,s,s.mode,_),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!Ad(n,_)){var D=v.memoizedProps;if(c=c.compare,c=c!==null?c:d,c(D,g)&&n.ref===s.ref)return qs(n,s,_)}return s.flags|=1,n=ka(v,g),n.ref=s.ref,n.return=s,s.child=n}function Pm(n,s,c,g,_){if(n!==null){var v=n.memoizedProps;if(d(v,g)&&n.ref===s.ref)if(gr=!1,s.pendingProps=g=v,Ad(n,_))(n.flags&131072)!==0&&(gr=!0);else return s.lanes=n.lanes,qs(n,s,_)}return fd(n,s,c,g,_)}function Bm(n,s,c){var g=s.pendingProps,_=g.children,v=(s.stateNode._pendingVisibility&2)!==0,D=n!==null?n.memoizedState:null;if(yu(n,s),g.mode==="hidden"||v){if((s.flags&128)!==0){if(g=D!==null?D.baseLanes|c:c,n!==null){for(_=s.child=n.child,v=0;_!==null;)v=v|_.lanes|_.childLanes,_=_.sibling;s.childLanes=v&~g}else s.childLanes=0,s.child=null;return km(n,s,g,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Bc(s,D!==null?D.cachePool:null),D!==null?Ug(s,D):Hf(),Vg(s);else return s.lanes=s.childLanes=536870912,km(n,s,D!==null?D.baseLanes|c:c,c)}else D!==null?(Bc(s,D.cachePool),Ug(s,D),Ia(),s.memoizedState=null):(n!==null&&Bc(s,null),Hf(),Ia());return Tr(n,s,_,c),s.child}function km(n,s,c,g){var _=Yf();return _=_===null?null:{parent:ur._currentValue,pool:_},s.memoizedState={baseLanes:c,cachePool:_},n!==null&&Bc(s,null),Hf(),Vg(s),n!==null&&Eu(n,s,g,!0),null}function yu(n,s){var c=s.ref;if(c===null)n!==null&&n.ref!==null&&(s.flags|=2097664);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(n===null||n.ref!==c)&&(s.flags|=2097664)}}function fd(n,s,c,g,_){return bo(s),c=Wf(n,s,c,g,void 0,_),g=Qf(),n!==null&&!gr?(Kf(n,s,_),qs(n,s,_)):(Yt&&g&&Uf(s),s.flags|=1,Tr(n,s,c,_),s.child)}function Um(n,s,c,g,_,v){return bo(s),s.updateQueue=null,c=Gg(s,g,c,_),jg(n),g=Qf(),n!==null&&!gr?(Kf(n,s,v),qs(n,s,v)):(Yt&&g&&Uf(s),s.flags|=1,Tr(n,s,c,v),s.child)}function Vm(n,s,c,g,_){if(bo(s),s.stateNode===null){var v=tl,D=c.contextType;typeof D=="object"&&D!==null&&(v=Pr(D)),v=new c(g,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=cd,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=g,v.state=s.memoizedState,v.refs={},vd(s),D=c.contextType,v.context=typeof D=="object"&&D!==null?Pr(D):tl,v.state=s.memoizedState,D=c.getDerivedStateFromProps,typeof D=="function"&&(ud(s,c,D,g),v.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(D=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),D!==v.state&&cd.enqueueReplaceState(v,v.state,null),wu(s,g,v,_),Au(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(n===null){v=s.stateNode;var k=s.memoizedProps,Y=So(c,k);v.props=Y;var ne=v.context,ye=c.contextType;D=tl,typeof ye=="object"&&ye!==null&&(D=Pr(ye));var ve=c.getDerivedStateFromProps;ye=typeof ve=="function"||typeof v.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,ye||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(k||ne!==D)&&Cm(s,v,g,D),Da=!1;var he=s.memoizedState;v.state=he,wu(s,g,v,_),Au(),ne=s.memoizedState,k||he!==ne||Da?(typeof ve=="function"&&(ud(s,c,ve,g),ne=s.memoizedState),(Y=Da||vm(s,c,Y,g,he,ne,D))?(ye||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=ne),v.props=g,v.state=ne,v.context=D,g=Y):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{v=s.stateNode,Cd(n,s),D=s.memoizedProps,ye=So(c,D),v.props=ye,ve=s.pendingProps,he=v.context,ne=c.contextType,Y=tl,typeof ne=="object"&&ne!==null&&(Y=Pr(ne)),k=c.getDerivedStateFromProps,(ne=typeof k=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D!==ve||he!==Y)&&Cm(s,v,g,Y),Da=!1,he=s.memoizedState,v.state=he,wu(s,g,v,_),Au();var pe=s.memoizedState;D!==ve||he!==pe||Da||n!==null&&n.dependencies!==null&&Xc(n.dependencies)?(typeof k=="function"&&(ud(s,c,k,g),pe=s.memoizedState),(ye=Da||vm(s,c,ye,g,he,pe,Y)||n!==null&&n.dependencies!==null&&Xc(n.dependencies))?(ne||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(g,pe,Y),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(g,pe,Y)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||D===n.memoizedProps&&he===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&he===n.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=pe),v.props=g,v.state=pe,v.context=Y,g=ye):(typeof v.componentDidUpdate!="function"||D===n.memoizedProps&&he===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&he===n.memoizedState||(s.flags|=1024),g=!1)}return v=g,yu(n,s),g=(s.flags&128)!==0,v||g?(v=s.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,n!==null&&g?(s.child=wo(s,n.child,null,_),s.child=wo(s,null,c,_)):Tr(n,s,c,_),s.memoizedState=v.state,n=s.child):n=qs(n,s,_),n}function Fm(n,s,c,g){return au(),s.flags|=256,Tr(n,s,c,g),s.child}var dd={dehydrated:null,treeContext:null,retryLane:0};function gd(n){return{baseLanes:n,cachePool:Hg()}}function md(n,s,c){return n=n!==null?n.childLanes&~c:0,s&&(n|=Xi),n}function zm(n,s,c){var g=s.pendingProps,_=!1,v=(s.flags&128)!==0,D;if((D=v)||(D=n!==null&&n.memoizedState===null?!1:(lr.current&2)!==0),D&&(_=!0,s.flags&=-129),D=(s.flags&32)!==0,s.flags&=-33,n===null){if(Yt){if(_?Sa(s):Ia(),Yt){var k=xr,Y;if(Y=k){e:{for(Y=k,k=ps;Y.nodeType!==8;){if(!k){k=null;break e}if(Y=ss(Y.nextSibling),Y===null){k=null;break e}}k=Y}k!==null?(s.memoizedState={dehydrated:k,treeContext:Eo!==null?{id:zs,overflow:Hs}:null,retryLane:536870912},Y=Yi(18,null,null,0),Y.stateNode=k,Y.return=s,s.child=Y,Kr=s,xr=null,Y=!0):Y=!1}Y||Ao(s)}if(k=s.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return k.data==="$!"?s.lanes=16:s.lanes=536870912,null;js(s)}return k=g.children,g=g.fallback,_?(Ia(),_=s.mode,k=yd({mode:"hidden",children:k},_),g=No(g,_,c,null),k.return=s,g.return=s,k.sibling=g,s.child=k,_=s.child,_.memoizedState=gd(c),_.childLanes=md(n,D,c),s.memoizedState=dd,g):(Sa(s),pd(s,k))}if(Y=n.memoizedState,Y!==null&&(k=Y.dehydrated,k!==null)){if(v)s.flags&256?(Sa(s),s.flags&=-257,s=Ed(n,s,c)):s.memoizedState!==null?(Ia(),s.child=n.child,s.flags|=128,s=null):(Ia(),_=g.fallback,k=s.mode,g=yd({mode:"visible",children:g.children},k),_=No(_,k,c,null),_.flags|=2,g.return=s,_.return=s,g.sibling=_,s.child=g,wo(s,n.child,null,c),g=s.child,g.memoizedState=gd(c),g.childLanes=md(n,D,c),s.memoizedState=dd,s=_);else if(Sa(s),k.data==="$!"){if(D=k.nextSibling&&k.nextSibling.dataset,D)var ne=D.dgst;D=ne,g=Error(a(419)),g.stack="",g.digest=D,ou({value:g,source:null,stack:null}),s=Ed(n,s,c)}else if(gr||Eu(n,s,c,!1),D=(c&n.childLanes)!==0,gr||D){if(D=fn,D!==null){if(g=c&-c,(g&42)!==0)g=1;else switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=64;break;case 268435456:g=134217728;break;default:g=0}if(g=(g&(D.suspendedLanes|c))!==0?0:g,g!==0&&g!==Y.retryLane)throw Y.retryLane=g,Ca(n,g),Zr(D,n,g),Om}k.data==="$?"||Yd(),s=Ed(n,s,c)}else k.data==="$?"?(s.flags|=128,s.child=n.child,s=Jw.bind(null,n),k._reactRetry=s,s=null):(n=Y.treeContext,xr=ss(k.nextSibling),Kr=s,Yt=!0,rs=null,ps=!1,n!==null&&(zi[Hi++]=zs,zi[Hi++]=Hs,zi[Hi++]=Eo,zs=n.id,Hs=n.overflow,Eo=s),s=pd(s,g.children),s.flags|=4096);return s}return _?(Ia(),_=g.fallback,k=s.mode,Y=n.child,ne=Y.sibling,g=ka(Y,{mode:"hidden",children:g.children}),g.subtreeFlags=Y.subtreeFlags&31457280,ne!==null?_=ka(ne,_):(_=No(_,k,c,null),_.flags|=2),_.return=s,g.return=s,g.sibling=_,s.child=g,g=_,_=s.child,k=n.child.memoizedState,k===null?k=gd(c):(Y=k.cachePool,Y!==null?(ne=ur._currentValue,Y=Y.parent!==ne?{parent:ne,pool:ne}:Y):Y=Hg(),k={baseLanes:k.baseLanes|c,cachePool:Y}),_.memoizedState=k,_.childLanes=md(n,D,c),s.memoizedState=dd,g):(Sa(s),c=n.child,n=c.sibling,c=ka(c,{mode:"visible",children:g.children}),c.return=s,c.sibling=null,n!==null&&(D=s.deletions,D===null?(s.deletions=[n],s.flags|=16):D.push(n)),s.child=c,s.memoizedState=null,c)}function pd(n,s){return s=yd({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function yd(n,s){return dp(n,s,0,null)}function Ed(n,s,c){return wo(s,n.child,null,c),n=pd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Hm(n,s,c){n.lanes|=s;var g=n.alternate;g!==null&&(g.lanes|=s),xd(n.return,s,c)}function _d(n,s,c,g,_){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:_}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=g,v.tail=c,v.tailMode=_)}function jm(n,s,c){var g=s.pendingProps,_=g.revealOrder,v=g.tail;if(Tr(n,s,g.children,c),g=lr.current,(g&2)!==0)g=g&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Hm(n,c,s);else if(n.tag===19)Hm(n,c,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}switch(Mt(lr,g),_){case"forwards":for(c=s.child,_=null;c!==null;)n=c.alternate,n!==null&&Pc(n)===null&&(_=c),c=c.sibling;c=_,c===null?(_=s.child,s.child=null):(_=c.sibling,c.sibling=null),_d(s,!1,_,c,v);break;case"backwards":for(c=null,_=s.child,s.child=null;_!==null;){if(n=_.alternate,n!==null&&Pc(n)===null){s.child=_;break}n=_.sibling,_.sibling=c,c=_,_=n}_d(s,!0,c,null,v);break;case"together":_d(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function qs(n,s,c){if(n!==null&&(s.dependencies=n.dependencies),Ua|=s.lanes,(c&s.childLanes)===0)if(n!==null){if(Eu(n,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(a(153));if(s.child!==null){for(n=s.child,c=ka(n,n.pendingProps),s.child=c,c.return=s;n.sibling!==null;)n=n.sibling,c=c.sibling=ka(n,n.pendingProps),c.return=s;c.sibling=null}return s.child}function Ad(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Xc(n)))}function Uw(n,s,c){switch(s.tag){case 3:ir(s,s.stateNode.containerInfo),Na(s,ur,n.memoizedState.cache),au();break;case 27:case 5:bn(s);break;case 4:ir(s,s.stateNode.containerInfo);break;case 10:Na(s,s.type,s.memoizedProps.value);break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(Sa(s),s.flags|=128,null):(c&s.child.childLanes)!==0?zm(n,s,c):(Sa(s),n=qs(n,s,c),n!==null?n.sibling:null);Sa(s);break;case 19:var _=(n.flags&128)!==0;if(g=(c&s.childLanes)!==0,g||(Eu(n,s,c,!1),g=(c&s.childLanes)!==0),_){if(g)return jm(n,s,c);s.flags|=128}if(_=s.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Mt(lr,lr.current),g)break;return null;case 22:case 23:return s.lanes=0,Bm(n,s,c);case 24:Na(s,ur,n.memoizedState.cache)}return qs(n,s,c)}function Gm(n,s,c){if(n!==null)if(n.memoizedProps!==s.pendingProps)gr=!0;else{if(!Ad(n,c)&&(s.flags&128)===0)return gr=!1,Uw(n,s,c);gr=(n.flags&131072)!==0}else gr=!1,Yt&&(s.flags&1048576)!==0&&bg(s,Nc,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var g=s.elementType,_=g._init;if(g=_(g._payload),s.type=g,typeof g=="function")Ld(g)?(n=So(g,n),s.tag=1,s=Vm(null,s,g,n,c)):(s.tag=0,s=fd(null,s,g,n,c));else{if(g!=null){if(_=g.$$typeof,_===q){s.tag=11,s=Mm(null,s,g,n,c);break e}else if(_===ie){s.tag=14,s=Lm(null,s,g,n,c);break e}}throw s=F(g)||g,Error(a(306,s,""))}}return s;case 0:return fd(n,s,s.type,s.pendingProps,c);case 1:return g=s.type,_=So(g,s.pendingProps),Vm(n,s,g,_,c);case 3:e:{if(ir(s,s.stateNode.containerInfo),n===null)throw Error(a(387));var v=s.pendingProps;_=s.memoizedState,g=_.element,Cd(n,s),wu(s,v,null,c);var D=s.memoizedState;if(v=D.cache,Na(s,ur,v),v!==_.cache&&Td(s,[ur],c,!0),Au(),v=D.element,_.isDehydrated)if(_={element:v,isDehydrated:!1,cache:D.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=Fm(n,s,v,c);break e}else if(v!==g){g=Fi(Error(a(424)),s),ou(g),s=Fm(n,s,v,c);break e}else for(xr=ss(s.stateNode.containerInfo.firstChild),Kr=s,Yt=!0,rs=null,ps=!0,c=kg(s,null,v,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(au(),v===g){s=qs(n,s,c);break e}Tr(n,s,v,c)}s=s.child}return s;case 26:return yu(n,s),n===null?(c=Xp(s.type,null,s.pendingProps,null))?s.memoizedState=c:Yt||(c=s.type,n=s.pendingProps,g=uh(ut.current).createElement(c),g[mn]=s,g[Rn]=n,vr(g,c,n),jt(g),s.stateNode=g):s.memoizedState=Xp(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return bn(s),n===null&&Yt&&(g=s.stateNode=Gp(s.type,s.pendingProps,ut.current),Kr=s,ps=!0,xr=ss(g.firstChild)),g=s.pendingProps.children,n!==null||Yt?Tr(n,s,g,c):s.child=wo(s,null,g,c),yu(n,s),s.child;case 5:return n===null&&Yt&&((_=g=xr)&&(g=gx(g,s.type,s.pendingProps,ps),g!==null?(s.stateNode=g,Kr=s,xr=ss(g.firstChild),ps=!1,_=!0):_=!1),_||Ao(s)),bn(s),_=s.type,v=s.pendingProps,D=n!==null?n.memoizedProps:null,g=v.children,a0(_,v)?g=null:D!==null&&a0(_,D)&&(s.flags|=32),s.memoizedState!==null&&(_=Wf(n,s,Dw,null,null,c),Bu._currentValue=_),yu(n,s),Tr(n,s,g,c),s.child;case 6:return n===null&&Yt&&((n=c=xr)&&(c=mx(c,s.pendingProps,ps),c!==null?(s.stateNode=c,Kr=s,xr=null,n=!0):n=!1),n||Ao(s)),null;case 13:return zm(n,s,c);case 4:return ir(s,s.stateNode.containerInfo),g=s.pendingProps,n===null?s.child=wo(s,null,g,c):Tr(n,s,g,c),s.child;case 11:return Mm(n,s,s.type,s.pendingProps,c);case 7:return Tr(n,s,s.pendingProps,c),s.child;case 8:return Tr(n,s,s.pendingProps.children,c),s.child;case 12:return Tr(n,s,s.pendingProps.children,c),s.child;case 10:return g=s.pendingProps,Na(s,s.type,g.value),Tr(n,s,g.children,c),s.child;case 9:return _=s.type._context,g=s.pendingProps.children,bo(s),_=Pr(_),g=g(_),s.flags|=1,Tr(n,s,g,c),s.child;case 14:return Lm(n,s,s.type,s.pendingProps,c);case 15:return Pm(n,s,s.type,s.pendingProps,c);case 19:return jm(n,s,c);case 22:return Bm(n,s,c);case 24:return bo(s),g=Pr(ur),n===null?(_=Yf(),_===null&&(_=fn,v=Gf(),_.pooledCache=v,v.refCount++,v!==null&&(_.pooledCacheLanes|=c),_=v),s.memoizedState={parent:g,cache:_},vd(s),Na(s,ur,_)):((n.lanes&c)!==0&&(Cd(n,s),wu(s,null,null,c),Au()),_=n.memoizedState,v=s.memoizedState,_.parent!==g?(_={parent:g,cache:g},s.memoizedState=_,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=_),Na(s,ur,g)):(g=v.cache,Na(s,ur,g),g!==_.cache&&Td(s,[ur],c,!0))),Tr(n,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}var wd=et(null),Io=null,Ys=null;function Na(n,s,c){Mt(wd,s._currentValue),s._currentValue=c}function Xs(n){n._currentValue=wd.current,rn(wd)}function xd(n,s,c){for(;n!==null;){var g=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),n===c)break;n=n.return}}function Td(n,s,c,g){var _=n.child;for(_!==null&&(_.return=n);_!==null;){var v=_.dependencies;if(v!==null){var D=_.child;v=v.firstContext;e:for(;v!==null;){var k=v;v=_;for(var Y=0;Y<s.length;Y++)if(k.context===s[Y]){v.lanes|=c,k=v.alternate,k!==null&&(k.lanes|=c),xd(v.return,c,n),g||(D=null);break e}v=k.next}}else if(_.tag===18){if(D=_.return,D===null)throw Error(a(341));D.lanes|=c,v=D.alternate,v!==null&&(v.lanes|=c),xd(D,c,n),D=null}else D=_.child;if(D!==null)D.return=_;else for(D=_;D!==null;){if(D===n){D=null;break}if(_=D.sibling,_!==null){_.return=D.return,D=_;break}D=D.return}_=D}}function Eu(n,s,c,g){n=null;for(var _=s,v=!1;_!==null;){if(!v){if((_.flags&524288)!==0)v=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var D=_.alternate;if(D===null)throw Error(a(387));if(D=D.memoizedProps,D!==null){var k=_.type;h(_.pendingProps.value,D.value)||(n!==null?n.push(k):n=[k])}}else if(_===zr.current){if(D=_.alternate,D===null)throw Error(a(387));D.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(n!==null?n.push(Bu):n=[Bu])}_=_.return}n!==null&&Td(s,n,c,g),s.flags|=262144}function Xc(n){for(n=n.firstContext;n!==null;){if(!h(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function bo(n){Io=n,Ys=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Pr(n){return qm(Io,n)}function Wc(n,s){return Io===null&&bo(n),qm(n,s)}function qm(n,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Ys===null){if(n===null)throw Error(a(308));Ys=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ys=Ys.next=s;return c}var Da=!1;function vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Oa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ma(n,s,c){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,(Dn&2)!==0){var _=g.pending;return _===null?s.next=s:(s.next=_.next,_.next=s),g.pending=s,s=bc(n),Sg(n,null,c),s}return Ic(n,g,s,c),bc(n)}function _u(n,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194176)!==0)){var g=s.lanes;g&=n.pendingLanes,c|=g,s.lanes=c,Ni(n,c)}}function Sd(n,s){var c=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var _=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var D={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?_=v=D:v=v.next=D,c=c.next}while(c!==null);v===null?_=v=s:v=v.next=s}else _=v=s;c={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:v,shared:g.shared,callbacks:g.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=s:n.next=s,c.lastBaseUpdate=s}var Id=!1;function Au(){if(Id){var n=ol;if(n!==null)throw n}}function wu(n,s,c,g){Id=!1;var _=n.updateQueue;Da=!1;var v=_.firstBaseUpdate,D=_.lastBaseUpdate,k=_.shared.pending;if(k!==null){_.shared.pending=null;var Y=k,ne=Y.next;Y.next=null,D===null?v=ne:D.next=ne,D=Y;var ye=n.alternate;ye!==null&&(ye=ye.updateQueue,k=ye.lastBaseUpdate,k!==D&&(k===null?ye.firstBaseUpdate=ne:k.next=ne,ye.lastBaseUpdate=Y))}if(v!==null){var ve=_.baseState;D=0,ye=ne=Y=null,k=v;do{var he=k.lane&-536870913,pe=he!==k.lane;if(pe?(kt&he)===he:(g&he)===he){he!==0&&he===al&&(Id=!0),ye!==null&&(ye=ye.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Xe=n,ct=k;he=s;var Fn=c;switch(ct.tag){case 1:if(Xe=ct.payload,typeof Xe=="function"){ve=Xe.call(Fn,ve,he);break e}ve=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=ct.payload,he=typeof Xe=="function"?Xe.call(Fn,ve,he):Xe,he==null)break e;ve=X({},ve,he);break e;case 2:Da=!0}}he=k.callback,he!==null&&(n.flags|=64,pe&&(n.flags|=8192),pe=_.callbacks,pe===null?_.callbacks=[he]:pe.push(he))}else pe={lane:he,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ye===null?(ne=ye=pe,Y=ve):ye=ye.next=pe,D|=he;if(k=k.next,k===null){if(k=_.shared.pending,k===null)break;pe=k,k=pe.next,pe.next=null,_.lastBaseUpdate=pe,_.shared.pending=null}}while(!0);ye===null&&(Y=ve),_.baseState=Y,_.firstBaseUpdate=ne,_.lastBaseUpdate=ye,v===null&&(_.shared.lanes=0),Ua|=D,n.lanes=D,n.memoizedState=ve}}function Ym(n,s){if(typeof n!="function")throw Error(a(191,n));n.call(s)}function Xm(n,s){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)Ym(c[n],s)}function xu(n,s){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var _=g.next;c=_;do{if((c.tag&n)===n){g=void 0;var v=c.create,D=c.inst;g=v(),D.destroy=g}c=c.next}while(c!==_)}}catch(k){cn(s,s.return,k)}}function La(n,s,c){try{var g=s.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var v=_.next;g=v;do{if((g.tag&n)===n){var D=g.inst,k=D.destroy;if(k!==void 0){D.destroy=void 0,_=s;var Y=c;try{k()}catch(ne){cn(_,Y,ne)}}}g=g.next}while(g!==v)}}catch(ne){cn(s,s.return,ne)}}function Wm(n){var s=n.updateQueue;if(s!==null){var c=n.stateNode;try{Xm(s,c)}catch(g){cn(n,n.return,g)}}}function Qm(n,s,c){c.props=So(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(g){cn(n,s,g)}}function Ro(n,s){try{var c=n.ref;if(c!==null){var g=n.stateNode;switch(n.tag){case 26:case 27:case 5:var _=g;break;default:_=g}typeof c=="function"?n.refCleanup=c(_):c.current=_}}catch(v){cn(n,s,v)}}function Ai(n,s){var c=n.ref,g=n.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(_){cn(n,s,_)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){cn(n,s,_)}else c.current=null}function Km(n){var s=n.type,c=n.memoizedProps,g=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(_){cn(n,n.return,_)}}function Zm(n,s,c){try{var g=n.stateNode;ux(g,n.type,c,s),g[Rn]=s}catch(_){cn(n,n.return,_)}}function Jm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function bd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Jm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rd(n,s,c){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(n,s):c.insertBefore(n,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(n,c)):(s=c,s.appendChild(n)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=lh));else if(g!==4&&g!==27&&(n=n.child,n!==null))for(Rd(n,s,c),n=n.sibling;n!==null;)Rd(n,s,c),n=n.sibling}function Qc(n,s,c){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?c.insertBefore(n,s):c.appendChild(n);else if(g!==4&&g!==27&&(n=n.child,n!==null))for(Qc(n,s,c),n=n.sibling;n!==null;)Qc(n,s,c),n=n.sibling}var Ws=!1,Un=!1,Nd=!1,$m=typeof WeakSet=="function"?WeakSet:Set,mr=null,ep=!1;function Vw(n,s){if(n=n.containerInfo,i0=mh,n=C(n),b(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var _=g.anchorOffset,v=g.focusNode;g=g.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var D=0,k=-1,Y=-1,ne=0,ye=0,ve=n,he=null;t:for(;;){for(var pe;ve!==c||_!==0&&ve.nodeType!==3||(k=D+_),ve!==v||g!==0&&ve.nodeType!==3||(Y=D+g),ve.nodeType===3&&(D+=ve.nodeValue.length),(pe=ve.firstChild)!==null;)he=ve,ve=pe;for(;;){if(ve===n)break t;if(he===c&&++ne===_&&(k=D),he===v&&++ye===g&&(Y=D),(pe=ve.nextSibling)!==null)break;ve=he,he=ve.parentNode}ve=pe}c=k===-1||Y===-1?null:{start:k,end:Y}}else c=null}c=c||{start:0,end:0}}else c=null;for(s0={focusedElem:n,selectionRange:c},mh=!1,mr=s;mr!==null;)if(s=mr,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,mr=n;else for(;mr!==null;){switch(s=mr,v=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,c=s,_=v.memoizedProps,v=v.memoizedState,g=c.stateNode;try{var Xe=So(c.type,_,c.elementType===c.type);n=g.getSnapshotBeforeUpdate(Xe,v),g.__reactInternalSnapshotBeforeUpdate=n}catch(ct){cn(c,c.return,ct)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,c=n.nodeType,c===9)u0(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":u0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=s.sibling,n!==null){n.return=s.return,mr=n;break}mr=s.return}return Xe=ep,ep=!1,Xe}function tp(n,s,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:Ks(n,c),g&4&&xu(5,c);break;case 1:if(Ks(n,c),g&4)if(n=c.stateNode,s===null)try{n.componentDidMount()}catch(k){cn(c,c.return,k)}else{var _=So(c.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(_,s,n.__reactInternalSnapshotBeforeUpdate)}catch(k){cn(c,c.return,k)}}g&64&&Wm(c),g&512&&Ro(c,c.return);break;case 3:if(Ks(n,c),g&64&&(g=c.updateQueue,g!==null)){if(n=null,c.child!==null)switch(c.child.tag){case 27:case 5:n=c.child.stateNode;break;case 1:n=c.child.stateNode}try{Xm(g,n)}catch(k){cn(c,c.return,k)}}break;case 26:Ks(n,c),g&512&&Ro(c,c.return);break;case 27:case 5:Ks(n,c),s===null&&g&4&&Km(c),g&512&&Ro(c,c.return);break;case 12:Ks(n,c);break;case 13:Ks(n,c),g&4&&ip(n,c);break;case 22:if(_=c.memoizedState!==null||Ws,!_){s=s!==null&&s.memoizedState!==null||Un;var v=Ws,D=Un;Ws=_,(Un=s)&&!D?Pa(n,c,(c.subtreeFlags&8772)!==0):Ks(n,c),Ws=v,Un=D}g&512&&(c.memoizedProps.mode==="manual"?Ro(c,c.return):Ai(c,c.return));break;default:Ks(n,c)}}function np(n){var s=n.alternate;s!==null&&(n.alternate=null,np(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ms(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var tr=null,wi=!1;function Qs(n,s,c){for(c=c.child;c!==null;)rp(n,s,c),c=c.sibling}function rp(n,s,c){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(Jt,c)}catch{}switch(c.tag){case 26:Un||Ai(c,s),Qs(n,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Un||Ai(c,s);var g=tr,_=wi;for(tr=c.stateNode,Qs(n,s,c),c=c.stateNode,s=c.attributes;s.length;)c.removeAttributeNode(s[0]);Ms(c),tr=g,wi=_;break;case 5:Un||Ai(c,s);case 6:_=tr;var v=wi;if(tr=null,Qs(n,s,c),tr=_,wi=v,tr!==null)if(wi)try{n=tr,g=c.stateNode,n.nodeType===8?n.parentNode.removeChild(g):n.removeChild(g)}catch(D){cn(c,s,D)}else try{tr.removeChild(c.stateNode)}catch(D){cn(c,s,D)}break;case 18:tr!==null&&(wi?(s=tr,c=c.stateNode,s.nodeType===8?l0(s.parentNode,c):s.nodeType===1&&l0(s,c),Fu(s)):l0(tr,c.stateNode));break;case 4:g=tr,_=wi,tr=c.stateNode.containerInfo,wi=!0,Qs(n,s,c),tr=g,wi=_;break;case 0:case 11:case 14:case 15:Un||La(2,c,s),Un||La(4,c,s),Qs(n,s,c);break;case 1:Un||(Ai(c,s),g=c.stateNode,typeof g.componentWillUnmount=="function"&&Qm(c,s,g)),Qs(n,s,c);break;case 21:Qs(n,s,c);break;case 22:Un||Ai(c,s),Un=(g=Un)||c.memoizedState!==null,Qs(n,s,c),Un=g;break;default:Qs(n,s,c)}}function ip(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Fu(n)}catch(c){cn(s,s.return,c)}}function Fw(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new $m),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new $m),s;default:throw Error(a(435,n.tag))}}function Dd(n,s){var c=Fw(n);s.forEach(function(g){var _=$w.bind(null,n,g);c.has(g)||(c.add(g),g.then(_,_))})}function Gi(n,s){var c=s.deletions;if(c!==null)for(var g=0;g<c.length;g++){var _=c[g],v=n,D=s,k=D;e:for(;k!==null;){switch(k.tag){case 27:case 5:tr=k.stateNode,wi=!1;break e;case 3:tr=k.stateNode.containerInfo,wi=!0;break e;case 4:tr=k.stateNode.containerInfo,wi=!0;break e}k=k.return}if(tr===null)throw Error(a(160));rp(v,D,_),tr=null,wi=!1,v=_.alternate,v!==null&&(v.return=null),_.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)sp(s,n),s=s.sibling}var is=null;function sp(n,s){var c=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gi(s,n),qi(n),g&4&&(La(3,n,n.return),xu(3,n),La(5,n,n.return));break;case 1:Gi(s,n),qi(n),g&512&&(Un||c===null||Ai(c,c.return)),g&64&&Ws&&(n=n.updateQueue,n!==null&&(g=n.callbacks,g!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var _=is;if(Gi(s,n),qi(n),g&512&&(Un||c===null||Ai(c,c.return)),g&4){var v=c!==null?c.memoizedState:null;if(g=n.memoizedState,c===null)if(g===null)if(n.stateNode===null){e:{g=n.type,c=n.memoizedProps,_=_.ownerDocument||_;t:switch(g){case"title":v=_.getElementsByTagName("title")[0],(!v||v[us]||v[mn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=_.createElement(g),_.head.insertBefore(v,_.querySelector("head > title"))),vr(v,g,c),v[mn]=n,jt(v),g=v;break e;case"link":var D=Kp("link","href",_).get(g+(c.href||""));if(D){for(var k=0;k<D.length;k++)if(v=D[k],v.getAttribute("href")===(c.href==null?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){D.splice(k,1);break t}}v=_.createElement(g),vr(v,g,c),_.head.appendChild(v);break;case"meta":if(D=Kp("meta","content",_).get(g+(c.content||""))){for(k=0;k<D.length;k++)if(v=D[k],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){D.splice(k,1);break t}}v=_.createElement(g),vr(v,g,c),_.head.appendChild(v);break;default:throw Error(a(468,g))}v[mn]=n,jt(v),g=v}n.stateNode=g}else Zp(_,n.type,n.stateNode);else n.stateNode=Qp(_,g,n.memoizedProps);else v!==g?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,g===null?Zp(_,n.type,n.stateNode):Qp(_,g,n.memoizedProps)):g===null&&n.stateNode!==null&&Zm(n,n.memoizedProps,c.memoizedProps)}break;case 27:if(g&4&&n.alternate===null){_=n.stateNode,v=n.memoizedProps;try{for(var Y=_.firstChild;Y;){var ne=Y.nextSibling,ye=Y.nodeName;Y[us]||ye==="HEAD"||ye==="BODY"||ye==="SCRIPT"||ye==="STYLE"||ye==="LINK"&&Y.rel.toLowerCase()==="stylesheet"||_.removeChild(Y),Y=ne}for(var ve=n.type,he=_.attributes;he.length;)_.removeAttributeNode(he[0]);vr(_,ve,v),_[mn]=n,_[Rn]=v}catch(Xe){cn(n,n.return,Xe)}}case 5:if(Gi(s,n),qi(n),g&512&&(Un||c===null||Ai(c,c.return)),n.flags&32){_=n.stateNode;try{ri(_,"")}catch(Xe){cn(n,n.return,Xe)}}g&4&&n.stateNode!=null&&(_=n.memoizedProps,Zm(n,_,c!==null?c.memoizedProps:_)),g&1024&&(Nd=!0);break;case 6:if(Gi(s,n),qi(n),g&4){if(n.stateNode===null)throw Error(a(162));g=n.memoizedProps,c=n.stateNode;try{c.nodeValue=g}catch(Xe){cn(n,n.return,Xe)}}break;case 3:if(fh=null,_=is,is=ch(s.containerInfo),Gi(s,n),is=_,qi(n),g&4&&c!==null&&c.memoizedState.isDehydrated)try{Fu(s.containerInfo)}catch(Xe){cn(n,n.return,Xe)}Nd&&(Nd=!1,ap(n));break;case 4:g=is,is=ch(n.stateNode.containerInfo),Gi(s,n),qi(n),is=g;break;case 12:Gi(s,n),qi(n);break;case 13:Gi(s,n),qi(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Fd=Tn()),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,Dd(n,g)));break;case 22:if(g&512&&(Un||c===null||Ai(c,c.return)),Y=n.memoizedState!==null,ne=c!==null&&c.memoizedState!==null,ye=Ws,ve=Un,Ws=ye||Y,Un=ve||ne,Gi(s,n),Un=ve,Ws=ye,qi(n),s=n.stateNode,s._current=n,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,g&8192&&(s._visibility=Y?s._visibility&-2:s._visibility|1,Y&&(s=Ws||Un,c===null||ne||s||hl(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(c=null,s=n;;){if(s.tag===5||s.tag===26||s.tag===27){if(c===null){ne=c=s;try{if(_=ne.stateNode,Y)v=_.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{D=ne.stateNode,k=ne.memoizedProps.style;var pe=k!=null&&k.hasOwnProperty("display")?k.display:null;D.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(Xe){cn(ne,ne.return,Xe)}}}else if(s.tag===6){if(c===null){ne=s;try{ne.stateNode.nodeValue=Y?"":ne.memoizedProps}catch(Xe){cn(ne,ne.return,Xe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=n.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,Dd(n,c))));break;case 19:Gi(s,n),qi(n),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,Dd(n,g)));break;case 21:break;default:Gi(s,n),qi(n)}}function qi(n){var s=n.flags;if(s&2){try{if(n.tag!==27){e:{for(var c=n.return;c!==null;){if(Jm(c)){var g=c;break e}c=c.return}throw Error(a(160))}switch(g.tag){case 27:var _=g.stateNode,v=bd(n);Qc(n,v,_);break;case 5:var D=g.stateNode;g.flags&32&&(ri(D,""),g.flags&=-33);var k=bd(n);Qc(n,k,D);break;case 3:case 4:var Y=g.stateNode.containerInfo,ne=bd(n);Rd(n,ne,Y);break;default:throw Error(a(161))}}}catch(ye){cn(n,n.return,ye)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function ap(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;ap(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Ks(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)tp(n,s.alternate,s),s=s.sibling}function hl(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:La(4,s,s.return),hl(s);break;case 1:Ai(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&Qm(s,s.return,c),hl(s);break;case 26:case 27:case 5:Ai(s,s.return),hl(s);break;case 22:Ai(s,s.return),s.memoizedState===null&&hl(s);break;default:hl(s)}n=n.sibling}}function Pa(n,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,_=n,v=s,D=v.flags;switch(v.tag){case 0:case 11:case 15:Pa(_,v,c),xu(4,v);break;case 1:if(Pa(_,v,c),g=v,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ne){cn(g,g.return,ne)}if(g=v,_=g.updateQueue,_!==null){var k=g.stateNode;try{var Y=_.shared.hiddenCallbacks;if(Y!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Y.length;_++)Ym(Y[_],k)}catch(ne){cn(g,g.return,ne)}}c&&D&64&&Wm(v),Ro(v,v.return);break;case 26:case 27:case 5:Pa(_,v,c),c&&g===null&&D&4&&Km(v),Ro(v,v.return);break;case 12:Pa(_,v,c);break;case 13:Pa(_,v,c),c&&D&4&&ip(_,v);break;case 22:v.memoizedState===null&&Pa(_,v,c),Ro(v,v.return);break;default:Pa(_,v,c)}s=s.sibling}}function Od(n,s){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&fu(c))}function Md(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&fu(n))}function Ba(n,s,c,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)op(n,s,c,g),s=s.sibling}function op(n,s,c,g){var _=s.flags;switch(s.tag){case 0:case 11:case 15:Ba(n,s,c,g),_&2048&&xu(9,s);break;case 3:Ba(n,s,c,g),_&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&fu(n)));break;case 12:if(_&2048){Ba(n,s,c,g),n=s.stateNode;try{var v=s.memoizedProps,D=v.id,k=v.onPostCommit;typeof k=="function"&&k(D,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Y){cn(s,s.return,Y)}}else Ba(n,s,c,g);break;case 23:break;case 22:v=s.stateNode,s.memoizedState!==null?v._visibility&4?Ba(n,s,c,g):Tu(n,s):v._visibility&4?Ba(n,s,c,g):(v._visibility|=4,fl(n,s,c,g,(s.subtreeFlags&10256)!==0)),_&2048&&Od(s.alternate,s);break;case 24:Ba(n,s,c,g),_&2048&&Md(s.alternate,s);break;default:Ba(n,s,c,g)}}function fl(n,s,c,g,_){for(_=_&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var v=n,D=s,k=c,Y=g,ne=D.flags;switch(D.tag){case 0:case 11:case 15:fl(v,D,k,Y,_),xu(8,D);break;case 23:break;case 22:var ye=D.stateNode;D.memoizedState!==null?ye._visibility&4?fl(v,D,k,Y,_):Tu(v,D):(ye._visibility|=4,fl(v,D,k,Y,_)),_&&ne&2048&&Od(D.alternate,D);break;case 24:fl(v,D,k,Y,_),_&&ne&2048&&Md(D.alternate,D);break;default:fl(v,D,k,Y,_)}s=s.sibling}}function Tu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=n,g=s,_=g.flags;switch(g.tag){case 22:Tu(c,g),_&2048&&Od(g.alternate,g);break;case 24:Tu(c,g),_&2048&&Md(g.alternate,g);break;default:Tu(c,g)}s=s.sibling}}var vu=8192;function dl(n){if(n.subtreeFlags&vu)for(n=n.child;n!==null;)lp(n),n=n.sibling}function lp(n){switch(n.tag){case 26:dl(n),n.flags&vu&&n.memoizedState!==null&&bx(is,n.memoizedState,n.memoizedProps);break;case 5:dl(n);break;case 3:case 4:var s=is;is=ch(n.stateNode.containerInfo),dl(n),is=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=vu,vu=16777216,dl(n),vu=s):dl(n));break;default:dl(n)}}function up(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Cu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];mr=g,hp(g,n)}up(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)cp(n),n=n.sibling}function cp(n){switch(n.tag){case 0:case 11:case 15:Cu(n),n.flags&2048&&La(9,n,n.return);break;case 3:Cu(n);break;case 12:Cu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&4&&(n.return===null||n.return.tag!==13)?(s._visibility&=-5,Kc(n)):Cu(n);break;default:Cu(n)}}function Kc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];mr=g,hp(g,n)}up(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:La(8,s,s.return),Kc(s);break;case 22:c=s.stateNode,c._visibility&4&&(c._visibility&=-5,Kc(s));break;default:Kc(s)}n=n.sibling}}function hp(n,s){for(;mr!==null;){var c=mr;switch(c.tag){case 0:case 11:case 15:La(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:fu(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,mr=g;else e:for(c=n;mr!==null;){g=mr;var _=g.sibling,v=g.return;if(np(g),g===c){mr=null;break e}if(_!==null){_.return=v,mr=_;break e}mr=v}}}function zw(n,s,c,g){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(n,s,c,g){return new zw(n,s,c,g)}function Ld(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ka(n,s){var c=n.alternate;return c===null?(c=Yi(n.tag,s,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=s,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&31457280,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,s=n.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function fp(n,s){n.flags&=31457282;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,s=c.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Zc(n,s,c,g,_,v){var D=0;if(g=n,typeof n=="function")Ld(n)&&(D=1);else if(typeof n=="string")D=Sx(n,c,Qt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case T:return No(c.children,_,v,s);case A:D=8,_|=24;break;case I:return n=Yi(12,c,s,_|2),n.elementType=I,n.lanes=v,n;case $:return n=Yi(13,c,s,_),n.elementType=$,n.lanes=v,n;case te:return n=Yi(19,c,s,_),n.elementType=te,n.lanes=v,n;case ue:return dp(c,_,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:case j:D=10;break e;case B:D=9;break e;case q:D=11;break e;case ie:D=14;break e;case me:D=16,g=null;break e}D=29,c=Error(a(130,n===null?"null":typeof n,"")),g=null}return s=Yi(D,c,s,_),s.elementType=n,s.type=g,s.lanes=v,s}function No(n,s,c,g){return n=Yi(7,n,g,s),n.lanes=c,n}function dp(n,s,c,g){n=Yi(22,n,g,s),n.elementType=ue,n.lanes=c;var _={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var v=_._current;if(v===null)throw Error(a(456));if((_._pendingVisibility&2)===0){var D=Ca(v,2);D!==null&&(_._pendingVisibility|=2,Zr(D,v,2))}},attach:function(){var v=_._current;if(v===null)throw Error(a(456));if((_._pendingVisibility&2)!==0){var D=Ca(v,2);D!==null&&(_._pendingVisibility&=-3,Zr(D,v,2))}}};return n.stateNode=_,n}function Pd(n,s,c){return n=Yi(6,n,null,s),n.lanes=c,n}function Bd(n,s,c){return s=Yi(4,n.children!==null?n.children:[],n.key,s),s.lanes=c,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Zs(n){n.flags|=4}function gp(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Jp(s)){if(s=ji.current,s!==null&&((kt&4194176)===kt?ys!==null:(kt&62914560)!==kt&&(kt&536870912)===0||s!==ys))throw uu=zf,Dg;n.flags|=8192}}function Jc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Gr():536870912,n.lanes|=s,ml|=s)}function Su(n,s){if(!Yt)switch(n.tailMode){case"hidden":s=n.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function Nn(n){var s=n.alternate!==null&&n.alternate.child===n.child,c=0,g=0;if(s)for(var _=n.child;_!==null;)c|=_.lanes|_.childLanes,g|=_.subtreeFlags&31457280,g|=_.flags&31457280,_.return=n,_=_.sibling;else for(_=n.child;_!==null;)c|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=n,_=_.sibling;return n.subtreeFlags|=g,n.childLanes=c,s}function Hw(n,s,c){var g=s.pendingProps;switch(Vf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(s),null;case 1:return Nn(s),null;case 3:return c=s.stateNode,g=null,n!==null&&(g=n.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),Xs(ur),Hr(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(su(s)?Zs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,rs!==null&&(Gd(rs),rs=null))),Nn(s),null;case 26:return c=s.memoizedState,n===null?(Zs(s),c!==null?(Nn(s),gp(s,c)):(Nn(s),s.flags&=-16777217)):c?c!==n.memoizedState?(Zs(s),Nn(s),gp(s,c)):(Nn(s),s.flags&=-16777217):(n.memoizedProps!==g&&Zs(s),Nn(s),s.flags&=-16777217),null;case 27:Vt(s),c=ut.current;var _=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==g&&Zs(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Nn(s),null}n=Qt.current,su(s)?Rg(s):(n=Gp(_,g,c),s.stateNode=n,Zs(s))}return Nn(s),null;case 5:if(Vt(s),c=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==g&&Zs(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Nn(s),null}if(n=Qt.current,su(s))Rg(s);else{switch(_=uh(ut.current),n){case 1:n=_.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:n=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":n=_.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":n=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof g.is=="string"?_.createElement("select",{is:g.is}):_.createElement("select"),g.multiple?n.multiple=!0:g.size&&(n.size=g.size);break;default:n=typeof g.is=="string"?_.createElement(c,{is:g.is}):_.createElement(c)}}n[mn]=s,n[Rn]=g;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)n.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=n;e:switch(vr(n,c,g),c){case"button":case"input":case"select":case"textarea":n=!!g.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Zs(s)}}return Nn(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==g&&Zs(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(n=ut.current,su(s)){if(n=s.stateNode,c=s.memoizedProps,g=null,_=Kr,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}n[mn]=s,n=!!(n.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||Up(n.nodeValue,c)),n||Ao(s)}else n=uh(n).createTextNode(g),n[mn]=s,s.stateNode=n}return Nn(s),null;case 13:if(g=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_=su(s),g!==null&&g.dehydrated!==null){if(n===null){if(!_)throw Error(a(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(a(317));_[mn]=s}else au(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nn(s),_=!1}else rs!==null&&(Gd(rs),rs=null),_=!0;if(!_)return s.flags&256?(js(s),s):(js(s),null)}if(js(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=g!==null,n=n!==null&&n.memoizedState!==null,c){g=s.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool);var v=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(v=g.memoizedState.cachePool.pool),v!==_&&(g.flags|=2048)}return c!==n&&c&&(s.child.flags|=8192),Jc(s,s.updateQueue),Nn(s),null;case 4:return Hr(),n===null&&t0(s.stateNode.containerInfo),Nn(s),null;case 10:return Xs(s.type),Nn(s),null;case 19:if(rn(lr),_=s.memoizedState,_===null)return Nn(s),null;if(g=(s.flags&128)!==0,v=_.rendering,v===null)if(g)Su(_,!1);else{if(Vn!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=Pc(n),v!==null){for(s.flags|=128,Su(_,!1),n=v.updateQueue,s.updateQueue=n,Jc(s,n),s.subtreeFlags=0,n=c,c=s.child;c!==null;)fp(c,n),c=c.sibling;return Mt(lr,lr.current&1|2),s.child}n=n.sibling}_.tail!==null&&Tn()>$c&&(s.flags|=128,g=!0,Su(_,!1),s.lanes=4194304)}else{if(!g)if(n=Pc(v),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,Jc(s,n),Su(_,!0),_.tail===null&&_.tailMode==="hidden"&&!v.alternate&&!Yt)return Nn(s),null}else 2*Tn()-_.renderingStartTime>$c&&c!==536870912&&(s.flags|=128,g=!0,Su(_,!1),s.lanes=4194304);_.isBackwards?(v.sibling=s.child,s.child=v):(n=_.last,n!==null?n.sibling=v:s.child=v,_.last=v)}return _.tail!==null?(s=_.tail,_.rendering=s,_.tail=s.sibling,_.renderingStartTime=Tn(),s.sibling=null,n=lr.current,Mt(lr,g?n&1|2:n&1),s):(Nn(s),null);case 22:case 23:return js(s),jf(),g=s.memoizedState!==null,n!==null?n.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(c&536870912)!==0&&(s.flags&128)===0&&(Nn(s),s.subtreeFlags&6&&(s.flags|=8192)):Nn(s),c=s.updateQueue,c!==null&&Jc(s,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==c&&(s.flags|=2048),n!==null&&rn(xo),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Xs(ur),Nn(s),null;case 25:return null}throw Error(a(156,s.tag))}function jw(n,s){switch(Vf(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Xs(ur),Hr(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Vt(s),null;case 13:if(js(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(a(340));au()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return rn(lr),null;case 4:return Hr(),null;case 10:return Xs(s.type),null;case 22:case 23:return js(s),jf(),n!==null&&rn(xo),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Xs(ur),null;case 25:return null;default:return null}}function mp(n,s){switch(Vf(s),s.tag){case 3:Xs(ur),Hr();break;case 26:case 27:case 5:Vt(s);break;case 4:Hr();break;case 13:js(s);break;case 19:rn(lr);break;case 10:Xs(s.type);break;case 22:case 23:js(s),jf(),n!==null&&rn(xo);break;case 24:Xs(ur)}}var Gw={getCacheForType:function(n){var s=Pr(ur),c=s.data.get(n);return c===void 0&&(c=n(),s.data.set(n,c)),c}},qw=typeof WeakMap=="function"?WeakMap:Map,Dn=0,fn=null,St=null,kt=0,dn=0,xi=null,Js=!1,gl=!1,kd=!1,$s=0,Vn=0,Ua=0,Do=0,Ud=0,Xi=0,ml=0,Iu=null,_s=null,Vd=!1,Fd=0,$c=1/0,eh=null,Va=null,th=!1,Oo=null,bu=0,zd=0,Hd=null,Ru=0,jd=null;function Ti(){if((Dn&2)!==0&&kt!==0)return kt&-kt;if(L.T!==null){var n=al;return n!==0?n:Zd()}return Di()}function pp(){Xi===0&&(Xi=(kt&536870912)===0||Yt?Ln():536870912);var n=ji.current;return n!==null&&(n.flags|=32),Xi}function Zr(n,s,c){(n===fn&&dn===2||n.cancelPendingCommit!==null)&&(pl(n,0),ea(n,kt,Xi,!1)),Ht(n,c),((Dn&2)===0||n!==fn)&&(n===fn&&((Dn&2)===0&&(Do|=c),Vn===4&&ea(n,kt,Xi,!1)),As(n))}function yp(n,s,c){if((Dn&6)!==0)throw Error(a(327));var g=!c&&(s&60)===0&&(s&n.expiredLanes)===0||Kn(n,s),_=g?Ww(n,s):Xd(n,s,!0),v=g;do{if(_===0){gl&&!g&&ea(n,s,0,!1);break}else if(_===6)ea(n,s,0,!Js);else{if(c=n.current.alternate,v&&!Yw(c)){_=Xd(n,s,!1),v=!1;continue}if(_===2){if(v=s,n.errorRecoveryDisabledLanes&v)var D=0;else D=n.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){s=D;e:{var k=n;_=Iu;var Y=k.current.memoizedState.isDehydrated;if(Y&&(pl(k,D).flags|=256),D=Xd(k,D,!1),D!==2){if(kd&&!Y){k.errorRecoveryDisabledLanes|=v,Do|=v,_=4;break e}v=_s,_s=_,v!==null&&Gd(v)}_=D}if(v=!1,_!==2)continue}}if(_===1){pl(n,0),ea(n,s,0,!0);break}e:{switch(g=n,_){case 0:case 1:throw Error(a(345));case 4:if((s&4194176)===s){ea(g,s,Xi,!Js);break e}break;case 2:_s=null;break;case 3:case 5:break;default:throw Error(a(329))}if(g.finishedWork=c,g.finishedLanes=s,(s&62914560)===s&&(v=Fd+300-Tn(),10<v)){if(ea(g,s,Xi,!Js),jr(g,0)!==0)break e;g.timeoutHandle=zp(Ep.bind(null,g,c,_s,eh,Vd,s,Xi,Do,ml,Js,2,-0,0),v);break e}Ep(g,c,_s,eh,Vd,s,Xi,Do,ml,Js,0,-0,0)}}break}while(!0);As(n)}function Gd(n){_s===null?_s=n:_s.push.apply(_s,n)}function Ep(n,s,c,g,_,v,D,k,Y,ne,ye,ve,he){var pe=s.subtreeFlags;if((pe&8192||(pe&16785408)===16785408)&&(Pu={stylesheets:null,count:0,unsuspend:Ix},lp(s),s=Rx(),s!==null)){n.cancelPendingCommit=s(Cp.bind(null,n,c,g,_,D,k,Y,1,ve,he)),ea(n,v,D,!ne);return}Cp(n,c,g,_,D,k,Y,ye,ve,he)}function Yw(n){for(var s=n;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var _=c[g],v=_.getSnapshot;_=_.value;try{if(!h(v(),_))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ea(n,s,c,g){s&=~Ud,s&=~Do,n.suspendedLanes|=s,n.pingedLanes&=~s,g&&(n.warmLanes|=s),g=n.expirationTimes;for(var _=s;0<_;){var v=31-xt(_),D=1<<v;g[v]=-1,_&=~D}c!==0&&Nr(n,c,s)}function nh(){return(Dn&6)===0?(Nu(0),!1):!0}function qd(){if(St!==null){if(dn===0)var n=St.return;else n=St,Ys=Io=null,Zf(n),il=null,cu=0,n=St;for(;n!==null;)mp(n.alternate,n),n=n.return;St=null}}function pl(n,s){n.finishedWork=null,n.finishedLanes=0;var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,hx(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),qd(),fn=n,St=c=ka(n.current,null),kt=s,dn=0,xi=null,Js=!1,gl=Kn(n,s),kd=!1,ml=Xi=Ud=Do=Ua=Vn=0,_s=Iu=null,Vd=!1,(s&8)!==0&&(s|=s&32);var g=n.entangledLanes;if(g!==0)for(n=n.entanglements,g&=s;0<g;){var _=31-xt(g),v=1<<_;s|=n[_],g&=~v}return $s=s,Sc(),c}function _p(n,s){At=null,L.H=Es,s===lu?(s=Lg(),dn=3):s===Dg?(s=Lg(),dn=4):dn=s===Om?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,xi=s,St===null&&(Vn=1,Yc(n,Fi(s,n.current)))}function Ap(){var n=L.H;return L.H=Es,n===null?Es:n}function wp(){var n=L.A;return L.A=Gw,n}function Yd(){Vn=4,Js||(kt&4194176)!==kt&&ji.current!==null||(gl=!0),(Ua&134217727)===0&&(Do&134217727)===0||fn===null||ea(fn,kt,Xi,!1)}function Xd(n,s,c){var g=Dn;Dn|=2;var _=Ap(),v=wp();(fn!==n||kt!==s)&&(eh=null,pl(n,s)),s=!1;var D=Vn;e:do try{if(dn!==0&&St!==null){var k=St,Y=xi;switch(dn){case 8:qd(),D=6;break e;case 3:case 2:case 6:ji.current===null&&(s=!0);var ne=dn;if(dn=0,xi=null,yl(n,k,Y,ne),c&&gl){D=0;break e}break;default:ne=dn,dn=0,xi=null,yl(n,k,Y,ne)}}Xw(),D=Vn;break}catch(ye){_p(n,ye)}while(!0);return s&&n.shellSuspendCounter++,Ys=Io=null,Dn=g,L.H=_,L.A=v,St===null&&(fn=null,kt=0,Sc()),D}function Xw(){for(;St!==null;)xp(St)}function Ww(n,s){var c=Dn;Dn|=2;var g=Ap(),_=wp();fn!==n||kt!==s?(eh=null,$c=Tn()+500,pl(n,s)):gl=Kn(n,s);e:do try{if(dn!==0&&St!==null){s=St;var v=xi;t:switch(dn){case 1:dn=0,xi=null,yl(n,s,v,1);break;case 2:if(Og(v)){dn=0,xi=null,Tp(s);break}s=function(){dn===2&&fn===n&&(dn=7),As(n)},v.then(s,s);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:Og(v)?(dn=0,xi=null,Tp(s)):(dn=0,xi=null,yl(n,s,v,7));break;case 5:var D=null;switch(St.tag){case 26:D=St.memoizedState;case 5:case 27:var k=St;if(!D||Jp(D)){dn=0,xi=null;var Y=k.sibling;if(Y!==null)St=Y;else{var ne=k.return;ne!==null?(St=ne,rh(ne)):St=null}break t}}dn=0,xi=null,yl(n,s,v,5);break;case 6:dn=0,xi=null,yl(n,s,v,6);break;case 8:qd(),Vn=6;break e;default:throw Error(a(462))}}Qw();break}catch(ye){_p(n,ye)}while(!0);return Ys=Io=null,L.H=g,L.A=_,Dn=c,St!==null?0:(fn=null,kt=0,Sc(),Vn)}function Qw(){for(;St!==null&&!ma();)xp(St)}function xp(n){var s=Gm(n.alternate,n,$s);n.memoizedProps=n.pendingProps,s===null?rh(n):St=s}function Tp(n){var s=n,c=s.alternate;switch(s.tag){case 15:case 0:s=Um(c,s,s.pendingProps,s.type,void 0,kt);break;case 11:s=Um(c,s,s.pendingProps,s.type.render,s.ref,kt);break;case 5:Zf(s);default:mp(c,s),s=St=fp(s,$s),s=Gm(c,s,$s)}n.memoizedProps=n.pendingProps,s===null?rh(n):St=s}function yl(n,s,c,g){Ys=Io=null,Zf(s),il=null,cu=0;var _=s.return;try{if(kw(n,_,s,c,kt)){Vn=1,Yc(n,Fi(c,n.current)),St=null;return}}catch(v){if(_!==null)throw St=_,v;Vn=1,Yc(n,Fi(c,n.current)),St=null;return}s.flags&32768?(Yt||g===1?n=!0:gl||(kt&536870912)!==0?n=!1:(Js=n=!0,(g===2||g===3||g===6)&&(g=ji.current,g!==null&&g.tag===13&&(g.flags|=16384))),vp(s,n)):rh(s)}function rh(n){var s=n;do{if((s.flags&32768)!==0){vp(s,Js);return}n=s.return;var c=Hw(s.alternate,s,$s);if(c!==null){St=c;return}if(s=s.sibling,s!==null){St=s;return}St=s=n}while(s!==null);Vn===0&&(Vn=5)}function vp(n,s){do{var c=jw(n.alternate,n);if(c!==null){c.flags&=32767,St=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(n=n.sibling,n!==null)){St=n;return}St=n=c}while(n!==null);Vn=6,St=null}function Cp(n,s,c,g,_,v,D,k,Y,ne){var ye=L.T,ve=Pe.p;try{Pe.p=2,L.T=null,Kw(n,s,c,g,ve,_,v,D,k,Y,ne)}finally{L.T=ye,Pe.p=ve}}function Kw(n,s,c,g,_,v,D,k){do El();while(Oo!==null);if((Dn&6)!==0)throw Error(a(327));var Y=n.finishedWork;if(g=n.finishedLanes,Y===null)return null;if(n.finishedWork=null,n.finishedLanes=0,Y===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var ne=Y.lanes|Y.childLanes;if(ne|=Bf,qo(n,g,ne,v,D,k),n===fn&&(St=fn=null,kt=0),(Y.subtreeFlags&10256)===0&&(Y.flags&10256)===0||th||(th=!0,zd=ne,Hd=c,ex(fr,function(){return El(),null})),c=(Y.flags&15990)!==0,(Y.subtreeFlags&15990)!==0||c?(c=L.T,L.T=null,v=Pe.p,Pe.p=2,D=Dn,Dn|=4,Vw(n,Y),sp(Y,n),M(s0,n.containerInfo),mh=!!i0,s0=i0=null,n.current=Y,tp(n,Y.alternate,Y),pa(),Dn=D,Pe.p=v,L.T=c):n.current=Y,th?(th=!1,Oo=n,bu=g):Sp(n,ne),ne=n.pendingLanes,ne===0&&(Va=null),gn(Y.stateNode),As(n),s!==null)for(_=n.onRecoverableError,Y=0;Y<s.length;Y++)ne=s[Y],_(ne.value,{componentStack:ne.stack});return(bu&3)!==0&&El(),ne=n.pendingLanes,(g&4194218)!==0&&(ne&42)!==0?n===jd?Ru++:(Ru=0,jd=n):Ru=0,Nu(0),null}function Sp(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,fu(s)))}function El(){if(Oo!==null){var n=Oo,s=zd;zd=0;var c=sr(bu),g=L.T,_=Pe.p;try{if(Pe.p=32>c?32:c,L.T=null,Oo===null)var v=!1;else{c=Hd,Hd=null;var D=Oo,k=bu;if(Oo=null,bu=0,(Dn&6)!==0)throw Error(a(331));var Y=Dn;if(Dn|=4,cp(D.current),op(D,D.current,k,c),Dn=Y,Nu(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(Jt,D)}catch{}v=!0}return v}finally{Pe.p=_,L.T=g,Sp(n,s)}}return!1}function Ip(n,s,c){s=Fi(c,s),s=hd(n.stateNode,s,2),n=Ma(n,s,2),n!==null&&(Ht(n,2),As(n))}function cn(n,s,c){if(n.tag===3)Ip(n,n,c);else for(;s!==null;){if(s.tag===3){Ip(s,n,c);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Va===null||!Va.has(g))){n=Fi(c,n),c=Nm(2),g=Ma(s,c,2),g!==null&&(Dm(c,g,s,n),Ht(g,2),As(g));break}}s=s.return}}function Wd(n,s,c){var g=n.pingCache;if(g===null){g=n.pingCache=new qw;var _=new Set;g.set(s,_)}else _=g.get(s),_===void 0&&(_=new Set,g.set(s,_));_.has(c)||(kd=!0,_.add(c),n=Zw.bind(null,n,s,c),s.then(n,n))}function Zw(n,s,c){var g=n.pingCache;g!==null&&g.delete(s),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,fn===n&&(kt&c)===c&&(Vn===4||Vn===3&&(kt&62914560)===kt&&300>Tn()-Fd?(Dn&2)===0&&pl(n,0):Ud|=c,ml===kt&&(ml=0)),As(n)}function bp(n,s){s===0&&(s=Gr()),n=Ca(n,s),n!==null&&(Ht(n,s),As(n))}function Jw(n){var s=n.memoizedState,c=0;s!==null&&(c=s.retryLane),bp(n,c)}function $w(n,s){var c=0;switch(n.tag){case 13:var g=n.stateNode,_=n.memoizedState;_!==null&&(c=_.retryLane);break;case 19:g=n.stateNode;break;case 22:g=n.stateNode._retryCache;break;default:throw Error(a(314))}g!==null&&g.delete(s),bp(n,c)}function ex(n,s){return Ri(n,s)}var ih=null,_l=null,Qd=!1,sh=!1,Kd=!1,Mo=0;function As(n){n!==_l&&n.next===null&&(_l===null?ih=_l=n:_l=_l.next=n),sh=!0,Qd||(Qd=!0,nx(tx))}function Nu(n,s){if(!Kd&&sh){Kd=!0;do for(var c=!1,g=ih;g!==null;){if(n!==0){var _=g.pendingLanes;if(_===0)var v=0;else{var D=g.suspendedLanes,k=g.pingedLanes;v=(1<<31-xt(42|n)+1)-1,v&=_&~(D&~k),v=v&201326677?v&201326677|1:v?v|2:0}v!==0&&(c=!0,Dp(g,v))}else v=kt,v=jr(g,g===fn?v:0),(v&3)===0||Kn(g,v)||(c=!0,Dp(g,v));g=g.next}while(c);Kd=!1}}function tx(){sh=Qd=!1;var n=0;Mo!==0&&(cx()&&(n=Mo),Mo=0);for(var s=Tn(),c=null,g=ih;g!==null;){var _=g.next,v=Rp(g,s);v===0?(g.next=null,c===null?ih=_:c.next=_,_===null&&(_l=c)):(c=g,(n!==0||(v&3)!==0)&&(sh=!0)),g=_}Nu(n)}function Rp(n,s){for(var c=n.suspendedLanes,g=n.pingedLanes,_=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var D=31-xt(v),k=1<<D,Y=_[D];Y===-1?((k&c)===0||(k&g)!==0)&&(_[D]=ls(k,s)):Y<=s&&(n.expiredLanes|=k),v&=~k}if(s=fn,c=kt,c=jr(n,n===s?c:0),g=n.callbackNode,c===0||n===s&&dn===2||n.cancelPendingCommit!==null)return g!==null&&g!==null&&ze(g),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||Kn(n,c)){if(s=c&-c,s===n.callbackPriority)return s;switch(g!==null&&ze(g),sr(c)){case 2:case 8:c=Hn;break;case 32:c=fr;break;case 268435456:c=Ea;break;default:c=fr}return g=Np.bind(null,n),c=Ri(c,g),n.callbackPriority=s,n.callbackNode=c,s}return g!==null&&g!==null&&ze(g),n.callbackPriority=2,n.callbackNode=null,2}function Np(n,s){var c=n.callbackNode;if(El()&&n.callbackNode!==c)return null;var g=kt;return g=jr(n,n===fn?g:0),g===0?null:(yp(n,g,s),Rp(n,Tn()),n.callbackNode!=null&&n.callbackNode===c?Np.bind(null,n):null)}function Dp(n,s){if(El())return null;yp(n,s,!0)}function nx(n){fx(function(){(Dn&6)!==0?Ri(Wt,n):n()})}function Zd(){return Mo===0&&(Mo=Ln()),Mo}function Op(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ii(""+n)}function Mp(n,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,n.id&&c.setAttribute("form",n.id),s.parentNode.insertBefore(c,s),n=new FormData(n),c.parentNode.removeChild(c),n}function rx(n,s,c,g,_){if(s==="submit"&&c&&c.stateNode===_){var v=Op((_[Rn]||null).action),D=g.submitter;D&&(s=(s=D[Rn]||null)?Op(s.formAction):D.getAttribute("formAction"),s!==null&&(v=s,D=null));var k=new Ui("action","action",null,g,_);n.push({event:k,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Mo!==0){var Y=D?Mp(_,D):new FormData(_);ad(c,{pending:!0,data:Y,method:_.method,action:v},null,Y)}}else typeof v=="function"&&(k.preventDefault(),Y=D?Mp(_,D):new FormData(_),ad(c,{pending:!0,data:Y,method:_.method,action:v},v,Y))},currentTarget:_}]})}}for(var Jd=0;Jd<Cc.length;Jd++){var $d=Cc[Jd],ix=$d.toLowerCase(),sx=$d[0].toUpperCase()+$d.slice(1);_i(ix,"on"+sx)}_i(Ar,"onAnimationEnd"),_i(hi,"onAnimationIteration"),_i(wr,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(tn,"onTransitionRun"),_i(or,"onTransitionStart"),_i(Qr,"onTransitionCancel"),_i(Vs,"onTransitionEnd"),vt("onMouseEnter",["mouseout","mouseover"]),vt("onMouseLeave",["mouseout","mouseover"]),vt("onPointerEnter",["pointerout","pointerover"]),vt("onPointerLeave",["pointerout","pointerover"]),Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ax=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Du));function Lp(n,s){s=(s&4)!==0;for(var c=0;c<n.length;c++){var g=n[c],_=g.event;g=g.listeners;e:{var v=void 0;if(s)for(var D=g.length-1;0<=D;D--){var k=g[D],Y=k.instance,ne=k.currentTarget;if(k=k.listener,Y!==v&&_.isPropagationStopped())break e;v=k,_.currentTarget=ne;try{v(_)}catch(ye){qc(ye)}_.currentTarget=null,v=Y}else for(D=0;D<g.length;D++){if(k=g[D],Y=k.instance,ne=k.currentTarget,k=k.listener,Y!==v&&_.isPropagationStopped())break e;v=k,_.currentTarget=ne;try{v(_)}catch(ye){qc(ye)}_.currentTarget=null,v=Y}}}}function Pt(n,s){var c=s[ti];c===void 0&&(c=s[ti]=new Set);var g=n+"__bubble";c.has(g)||(Pp(s,n,2,!1),c.add(g))}function e0(n,s,c){var g=0;s&&(g|=4),Pp(c,n,g,s)}var ah="_reactListening"+Math.random().toString(36).slice(2);function t0(n){if(!n[ah]){n[ah]=!0,Ls.forEach(function(c){c!=="selectionchange"&&(ax.has(c)||e0(c,!1,n),e0(c,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ah]||(s[ah]=!0,e0("selectionchange",!1,s))}}function Pp(n,s,c,g){switch(i2(s)){case 2:var _=Ox;break;case 8:_=Mx;break;default:_=g0}c=_.bind(null,s,c,n),_=void 0,!$e||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(_=!0),g?_!==void 0?n.addEventListener(s,c,{capture:!0,passive:_}):n.addEventListener(s,c,!0):_!==void 0?n.addEventListener(s,c,{passive:_}):n.addEventListener(s,c,!1)}function n0(n,s,c,g,_){var v=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var D=g.tag;if(D===3||D===4){var k=g.stateNode.containerInfo;if(k===_||k.nodeType===8&&k.parentNode===_)break;if(D===4)for(D=g.return;D!==null;){var Y=D.tag;if((Y===3||Y===4)&&(Y=D.stateNode.containerInfo,Y===_||Y.nodeType===8&&Y.parentNode===_))return;D=D.return}for(;k!==null;){if(D=Pn(k),D===null)return;if(Y=D.tag,Y===5||Y===6||Y===26||Y===27){g=v=D;continue e}k=k.parentNode}}g=g.return}Ze(function(){var ne=v,ye=cs(c),ve=[];e:{var he=Fs.get(n);if(he!==void 0){var pe=Ui,Xe=n;switch(n){case"keypress":if(ki(c)===0)break e;case"keydown":case"keyup":pe=gs;break;case"focusin":Xe="focus",pe=ts;break;case"focusout":Xe="blur",pe=ts;break;case"beforeblur":case"afterblur":pe=ts;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=ai;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Gt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=qt;break;case Ar:case hi:case wr:pe=xa;break;case Vs:pe=Ko;break;case"scroll":case"scrollend":pe=ar;break;case"wheel":pe=li;break;case"copy":case"cut":case"paste":pe=at;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=ms;break;case"toggle":case"beforetoggle":pe=Zo}var ct=(s&4)!==0,Fn=!ct&&(n==="scroll"||n==="scrollend"),re=ct?he!==null?he+"Capture":null:he;ct=[];for(var ee=ne,le;ee!==null;){var Ae=ee;if(le=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||le===null||re===null||(Ae=Ps(ee,re),Ae!=null&&ct.push(Ou(ee,Ae,le))),Fn)break;ee=ee.return}0<ct.length&&(he=new pe(he,Xe,null,c,ye),ve.push({event:he,listeners:ct}))}}if((s&7)===0){e:{if(he=n==="mouseover"||n==="pointerover",pe=n==="mouseout"||n==="pointerout",he&&c!==Er&&(Xe=c.relatedTarget||c.fromElement)&&(Pn(Xe)||Xe[vn]))break e;if((pe||he)&&(he=ye.window===ye?ye:(he=ye.ownerDocument)?he.defaultView||he.parentWindow:window,pe?(Xe=c.relatedTarget||c.toElement,pe=ne,Xe=Xe?Pn(Xe):null,Xe!==null&&(Fn=Ye(Xe),ct=Xe.tag,Xe!==Fn||ct!==5&&ct!==27&&ct!==6)&&(Xe=null)):(pe=null,Xe=ne),pe!==Xe)){if(ct=ai,Ae="onMouseLeave",re="onMouseEnter",ee="mouse",(n==="pointerout"||n==="pointerover")&&(ct=ms,Ae="onPointerLeave",re="onPointerEnter",ee="pointer"),Fn=pe==null?he:Ft(pe),le=Xe==null?he:Ft(Xe),he=new ct(Ae,ee+"leave",pe,c,ye),he.target=Fn,he.relatedTarget=le,Ae=null,Pn(ye)===ne&&(ct=new ct(re,ee+"enter",Xe,c,ye),ct.target=le,ct.relatedTarget=Fn,Ae=ct),Fn=Ae,pe&&Xe)t:{for(ct=pe,re=Xe,ee=0,le=ct;le;le=Al(le))ee++;for(le=0,Ae=re;Ae;Ae=Al(Ae))le++;for(;0<ee-le;)ct=Al(ct),ee--;for(;0<le-ee;)re=Al(re),le--;for(;ee--;){if(ct===re||re!==null&&ct===re.alternate)break t;ct=Al(ct),re=Al(re)}ct=null}else ct=null;pe!==null&&Bp(ve,he,pe,ct,!1),Xe!==null&&Fn!==null&&Bp(ve,Fn,Xe,ct,!0)}}e:{if(he=ne?Ft(ne):window,pe=he.nodeName&&he.nodeName.toLowerCase(),pe==="select"||pe==="input"&&he.type==="file")var Ge=vc;else if(In(he))if(ru)Ge=o;else{Ge=O;var Tt=$o}else pe=he.nodeName,!pe||pe.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?ne&&en(ne.elementType)&&(Ge=vc):Ge=r;if(Ge&&(Ge=Ge(n,ne))){kn(ve,Ge,c,ye);break e}Tt&&Tt(n,he,ne),n==="focusout"&&ne&&he.type==="number"&&ne.memoizedProps.value!=null&&V(he,"number",he.value)}switch(Tt=ne?Ft(ne):window,n){case"focusin":(In(Tt)||Tt.contentEditable==="true")&&(z=Tt,W=ne,K=null);break;case"focusout":K=W=z=null;break;case"mousedown":oe=!0;break;case"contextmenu":case"mouseup":case"dragend":oe=!1,ge(ve,c,ye);break;case"selectionchange":if(P)break;case"keydown":case"keyup":ge(ve,c,ye)}var Ke;if(ui)e:{switch(n){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else bt?de(n,c)&&(nt="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(nt="onCompositionStart");nt&&(N&&c.locale!=="ko"&&(bt||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&bt&&(Ke=pi()):(Li=ye,Pi="value"in Li?Li.value:Li.textContent,bt=!0)),Tt=oh(ne,nt),0<Tt.length&&(nt=new fs(nt,n,null,c,ye),ve.push({event:nt,listeners:Tt}),Ke?nt.data=Ke:(Ke=Le(c),Ke!==null&&(nt.data=Ke)))),(Ke=S?_n(n,c):Rt(n,c))&&(nt=oh(ne,"onBeforeInput"),0<nt.length&&(Tt=new fs("onBeforeInput","beforeinput",null,c,ye),ve.push({event:Tt,listeners:nt}),Tt.data=Ke)),rx(ve,n,ne,c,ye)}Lp(ve,s)})}function Ou(n,s,c){return{instance:n,listener:s,currentTarget:c}}function oh(n,s){for(var c=s+"Capture",g=[];n!==null;){var _=n,v=_.stateNode;_=_.tag,_!==5&&_!==26&&_!==27||v===null||(_=Ps(n,c),_!=null&&g.unshift(Ou(n,_,v)),_=Ps(n,s),_!=null&&g.push(Ou(n,_,v))),n=n.return}return g}function Al(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Bp(n,s,c,g,_){for(var v=s._reactName,D=[];c!==null&&c!==g;){var k=c,Y=k.alternate,ne=k.stateNode;if(k=k.tag,Y!==null&&Y===g)break;k!==5&&k!==26&&k!==27||ne===null||(Y=ne,_?(ne=Ps(c,v),ne!=null&&D.unshift(Ou(c,ne,Y))):_||(ne=Ps(c,v),ne!=null&&D.push(Ou(c,ne,Y)))),c=c.return}D.length!==0&&n.push({event:s,listeners:D})}var ox=/\r\n?/g,lx=/\u0000|\uFFFD/g;function kp(n){return(typeof n=="string"?n:""+n).replace(ox,`
`).replace(lx,"")}function Up(n,s){return s=kp(s),kp(n)===s}function lh(){}function on(n,s,c,g,_,v){switch(c){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||ri(n,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&ri(n,""+g);break;case"className":Mi(n,"class",g);break;case"tabIndex":Mi(n,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Mi(n,c,g);break;case"style":We(n,g,v);break;case"data":if(s!=="object"){Mi(n,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||c!=="href")){n.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(c);break}g=ii(""+g),n.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(s!=="input"&&on(n,s,"name",_.name,_,null),on(n,s,"formEncType",_.formEncType,_,null),on(n,s,"formMethod",_.formMethod,_,null),on(n,s,"formTarget",_.formTarget,_,null)):(on(n,s,"encType",_.encType,_,null),on(n,s,"method",_.method,_,null),on(n,s,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(c);break}g=ii(""+g),n.setAttribute(c,g);break;case"onClick":g!=null&&(n.onclick=lh);break;case"onScroll":g!=null&&Pt("scroll",n);break;case"onScrollEnd":g!=null&&Pt("scrollend",n);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(c=g.__html,c!=null){if(_.children!=null)throw Error(a(60));n.innerHTML=c}}break;case"multiple":n.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":n.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){n.removeAttribute("xlink:href");break}c=ii(""+g),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(c,""+g):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":g===!0?n.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(c,g):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?n.setAttribute(c,g):n.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?n.removeAttribute(c):n.setAttribute(c,g);break;case"popover":Pt("beforetoggle",n),Pt("toggle",n),Oi(n,"popover",g);break;case"xlinkActuate":Or(n,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Or(n,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Or(n,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Or(n,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Or(n,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Or(n,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Or(n,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Or(n,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Or(n,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Oi(n,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Yo.get(c)||c,Oi(n,c,g))}}function r0(n,s,c,g,_,v){switch(c){case"style":We(n,g,v);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(c=g.__html,c!=null){if(_.children!=null)throw Error(a(60));n.innerHTML=c}}break;case"children":typeof g=="string"?ri(n,g):(typeof g=="number"||typeof g=="bigint")&&ri(n,""+g);break;case"onScroll":g!=null&&Pt("scroll",n);break;case"onScrollEnd":g!=null&&Pt("scrollend",n);break;case"onClick":g!=null&&(n.onclick=lh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_e.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),s=c.slice(2,_?c.length-7:void 0),v=n[Rn]||null,v=v!=null?v[c]:null,typeof v=="function"&&n.removeEventListener(s,v,_),typeof g=="function")){typeof v!="function"&&v!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(s,g,_);break e}c in n?n[c]=g:g===!0?n.setAttribute(c,""):Oi(n,c,g)}}}function vr(n,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",n),Pt("load",n);var g=!1,_=!1,v;for(v in c)if(c.hasOwnProperty(v)){var D=c[v];if(D!=null)switch(v){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:on(n,s,v,D,c,null)}}_&&on(n,s,"srcSet",c.srcSet,c,null),g&&on(n,s,"src",c.src,c,null);return;case"input":Pt("invalid",n);var k=v=D=_=null,Y=null,ne=null;for(g in c)if(c.hasOwnProperty(g)){var ye=c[g];if(ye!=null)switch(g){case"name":_=ye;break;case"type":D=ye;break;case"checked":Y=ye;break;case"defaultChecked":ne=ye;break;case"value":v=ye;break;case"defaultValue":k=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(a(137,s));break;default:on(n,s,g,ye,c,null)}}ae(n,v,k,Y,ne,D,_,!1),$t(n);return;case"select":Pt("invalid",n),g=D=v=null;for(_ in c)if(c.hasOwnProperty(_)&&(k=c[_],k!=null))switch(_){case"value":v=k;break;case"defaultValue":D=k;break;case"multiple":g=k;default:on(n,s,_,k,c,null)}s=v,c=D,n.multiple=!!g,s!=null?Me(n,!!g,s,!1):c!=null&&Me(n,!!g,c,!0);return;case"textarea":Pt("invalid",n),v=_=g=null;for(D in c)if(c.hasOwnProperty(D)&&(k=c[D],k!=null))switch(D){case"value":g=k;break;case"defaultValue":_=k;break;case"children":v=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(a(91));break;default:on(n,s,D,k,c,null)}Gn(n,g,_,v),$t(n);return;case"option":for(Y in c)if(c.hasOwnProperty(Y)&&(g=c[Y],g!=null))switch(Y){case"selected":n.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:on(n,s,Y,g,c,null)}return;case"dialog":Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":Pt("load",n);break;case"video":case"audio":for(g=0;g<Du.length;g++)Pt(Du[g],n);break;case"image":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"embed":case"source":case"link":Pt("error",n),Pt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in c)if(c.hasOwnProperty(ne)&&(g=c[ne],g!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:on(n,s,ne,g,c,null)}return;default:if(en(s)){for(ye in c)c.hasOwnProperty(ye)&&(g=c[ye],g!==void 0&&r0(n,s,ye,g,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(g=c[k],g!=null&&on(n,s,k,g,c,null))}function ux(n,s,c,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,v=null,D=null,k=null,Y=null,ne=null,ye=null;for(pe in c){var ve=c[pe];if(c.hasOwnProperty(pe)&&ve!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":Y=ve;default:g.hasOwnProperty(pe)||on(n,s,pe,null,g,ve)}}for(var he in g){var pe=g[he];if(ve=c[he],g.hasOwnProperty(he)&&(pe!=null||ve!=null))switch(he){case"type":v=pe;break;case"name":_=pe;break;case"checked":ne=pe;break;case"defaultChecked":ye=pe;break;case"value":D=pe;break;case"defaultValue":k=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(137,s));break;default:pe!==ve&&on(n,s,he,pe,g,ve)}}yn(n,D,k,Y,ne,ye,v,_);return;case"select":pe=D=k=he=null;for(v in c)if(Y=c[v],c.hasOwnProperty(v)&&Y!=null)switch(v){case"value":break;case"multiple":pe=Y;default:g.hasOwnProperty(v)||on(n,s,v,null,g,Y)}for(_ in g)if(v=g[_],Y=c[_],g.hasOwnProperty(_)&&(v!=null||Y!=null))switch(_){case"value":he=v;break;case"defaultValue":k=v;break;case"multiple":D=v;default:v!==Y&&on(n,s,_,v,g,Y)}s=k,c=D,g=pe,he!=null?Me(n,!!c,he,!1):!!g!=!!c&&(s!=null?Me(n,!!c,s,!0):Me(n,!!c,c?[]:"",!1));return;case"textarea":pe=he=null;for(k in c)if(_=c[k],c.hasOwnProperty(k)&&_!=null&&!g.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:on(n,s,k,null,g,_)}for(D in g)if(_=g[D],v=c[D],g.hasOwnProperty(D)&&(_!=null||v!=null))switch(D){case"value":he=_;break;case"defaultValue":pe=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(a(91));break;default:_!==v&&on(n,s,D,_,g,v)}hn(n,he,pe);return;case"option":for(var Xe in c)if(he=c[Xe],c.hasOwnProperty(Xe)&&he!=null&&!g.hasOwnProperty(Xe))switch(Xe){case"selected":n.selected=!1;break;default:on(n,s,Xe,null,g,he)}for(Y in g)if(he=g[Y],pe=c[Y],g.hasOwnProperty(Y)&&he!==pe&&(he!=null||pe!=null))switch(Y){case"selected":n.selected=he&&typeof he!="function"&&typeof he!="symbol";break;default:on(n,s,Y,he,g,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in c)he=c[ct],c.hasOwnProperty(ct)&&he!=null&&!g.hasOwnProperty(ct)&&on(n,s,ct,null,g,he);for(ne in g)if(he=g[ne],pe=c[ne],g.hasOwnProperty(ne)&&he!==pe&&(he!=null||pe!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(a(137,s));break;default:on(n,s,ne,he,g,pe)}return;default:if(en(s)){for(var Fn in c)he=c[Fn],c.hasOwnProperty(Fn)&&he!==void 0&&!g.hasOwnProperty(Fn)&&r0(n,s,Fn,void 0,g,he);for(ye in g)he=g[ye],pe=c[ye],!g.hasOwnProperty(ye)||he===pe||he===void 0&&pe===void 0||r0(n,s,ye,he,g,pe);return}}for(var re in c)he=c[re],c.hasOwnProperty(re)&&he!=null&&!g.hasOwnProperty(re)&&on(n,s,re,null,g,he);for(ve in g)he=g[ve],pe=c[ve],!g.hasOwnProperty(ve)||he===pe||he==null&&pe==null||on(n,s,ve,he,g,pe)}var i0=null,s0=null;function uh(n){return n.nodeType===9?n:n.ownerDocument}function Vp(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fp(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function a0(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var o0=null;function cx(){var n=window.event;return n&&n.type==="popstate"?n===o0?!1:(o0=n,!0):(o0=null,!1)}var zp=typeof setTimeout=="function"?setTimeout:void 0,hx=typeof clearTimeout=="function"?clearTimeout:void 0,Hp=typeof Promise=="function"?Promise:void 0,fx=typeof queueMicrotask=="function"?queueMicrotask:typeof Hp<"u"?function(n){return Hp.resolve(null).then(n).catch(dx)}:zp;function dx(n){setTimeout(function(){throw n})}function l0(n,s){var c=s,g=0;do{var _=c.nextSibling;if(n.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"){if(g===0){n.removeChild(_),Fu(s);return}g--}else c!=="$"&&c!=="$?"&&c!=="$!"||g++;c=_}while(c);Fu(s)}function u0(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":u0(c),Ms(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function gx(n,s,c,g){for(;n.nodeType===1;){var _=c;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(g){if(!n[us])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==_.rel||n.getAttribute("href")!==(_.href==null?null:_.href)||n.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||n.getAttribute("title")!==(_.title==null?null:_.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(_.src==null?null:_.src)||n.getAttribute("type")!==(_.type==null?null:_.type)||n.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var v=_.name==null?null:""+_.name;if(_.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=ss(n.nextSibling),n===null)break}return null}function mx(n,s,c){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=ss(n.nextSibling),n===null))return null;return n}function ss(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}function jp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return n;s--}else c==="/$"&&s++}n=n.previousSibling}return null}function Gp(n,s,c){switch(s=uh(c),n){case"html":if(n=s.documentElement,!n)throw Error(a(452));return n;case"head":if(n=s.head,!n)throw Error(a(453));return n;case"body":if(n=s.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}var Wi=new Map,qp=new Set;function ch(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var ta=Pe.d;Pe.d={f:px,r:yx,D:Ex,C:_x,L:Ax,m:wx,X:Tx,S:xx,M:vx};function px(){var n=ta.f(),s=nh();return n||s}function yx(n){var s=pn(n);s!==null&&s.tag===5&&s.type==="form"?Em(s):ta.r(n)}var wl=typeof document>"u"?null:document;function Yp(n,s,c){var g=wl;if(g&&typeof s=="string"&&s){var _=rt(s);_='link[rel="'+n+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),qp.has(_)||(qp.add(_),n={rel:n,crossOrigin:c,href:s},g.querySelector(_)===null&&(s=g.createElement("link"),vr(s,"link",n),jt(s),g.head.appendChild(s)))}}function Ex(n){ta.D(n),Yp("dns-prefetch",n,null)}function _x(n,s){ta.C(n,s),Yp("preconnect",n,s)}function Ax(n,s,c){ta.L(n,s,c);var g=wl;if(g&&n&&s){var _='link[rel="preload"][as="'+rt(s)+'"]';s==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+rt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+rt(c.imageSizes)+'"]')):_+='[href="'+rt(n)+'"]';var v=_;switch(s){case"style":v=xl(n);break;case"script":v=Tl(n)}Wi.has(v)||(n=X({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:n,as:s},c),Wi.set(v,n),g.querySelector(_)!==null||s==="style"&&g.querySelector(Mu(v))||s==="script"&&g.querySelector(Lu(v))||(s=g.createElement("link"),vr(s,"link",n),jt(s),g.head.appendChild(s)))}}function wx(n,s){ta.m(n,s);var c=wl;if(c&&n){var g=s&&typeof s.as=="string"?s.as:"script",_='link[rel="modulepreload"][as="'+rt(g)+'"][href="'+rt(n)+'"]',v=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Tl(n)}if(!Wi.has(v)&&(n=X({rel:"modulepreload",href:n},s),Wi.set(v,n),c.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Lu(v)))return}g=c.createElement("link"),vr(g,"link",n),jt(g),c.head.appendChild(g)}}}function xx(n,s,c){ta.S(n,s,c);var g=wl;if(g&&n){var _=Ji(g).hoistableStyles,v=xl(n);s=s||"default";var D=_.get(v);if(!D){var k={loading:0,preload:null};if(D=g.querySelector(Mu(v)))k.loading=5;else{n=X({rel:"stylesheet",href:n,"data-precedence":s},c),(c=Wi.get(v))&&c0(n,c);var Y=D=g.createElement("link");jt(Y),vr(Y,"link",n),Y._p=new Promise(function(ne,ye){Y.onload=ne,Y.onerror=ye}),Y.addEventListener("load",function(){k.loading|=1}),Y.addEventListener("error",function(){k.loading|=2}),k.loading|=4,hh(D,s,g)}D={type:"stylesheet",instance:D,count:1,state:k},_.set(v,D)}}}function Tx(n,s){ta.X(n,s);var c=wl;if(c&&n){var g=Ji(c).hoistableScripts,_=Tl(n),v=g.get(_);v||(v=c.querySelector(Lu(_)),v||(n=X({src:n,async:!0},s),(s=Wi.get(_))&&h0(n,s),v=c.createElement("script"),jt(v),vr(v,"link",n),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},g.set(_,v))}}function vx(n,s){ta.M(n,s);var c=wl;if(c&&n){var g=Ji(c).hoistableScripts,_=Tl(n),v=g.get(_);v||(v=c.querySelector(Lu(_)),v||(n=X({src:n,async:!0,type:"module"},s),(s=Wi.get(_))&&h0(n,s),v=c.createElement("script"),jt(v),vr(v,"link",n),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},g.set(_,v))}}function Xp(n,s,c,g){var _=(_=ut.current)?ch(_):null;if(!_)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=xl(c.href),c=Ji(_).hoistableStyles,g=c.get(s),g||(g={type:"style",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=xl(c.href);var v=Ji(_).hoistableStyles,D=v.get(n);if(D||(_=_.ownerDocument||_,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,D),(v=_.querySelector(Mu(n)))&&!v._p&&(D.instance=v,D.state.loading=5),Wi.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Wi.set(n,c),v||Cx(_,n,c,D.state))),s&&g===null)throw Error(a(528,""));return D}if(s&&g!==null)throw Error(a(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Tl(c),c=Ji(_).hoistableScripts,g=c.get(s),g||(g={type:"script",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function xl(n){return'href="'+rt(n)+'"'}function Mu(n){return'link[rel="stylesheet"]['+n+"]"}function Wp(n){return X({},n,{"data-precedence":n.precedence,precedence:null})}function Cx(n,s,c,g){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=n.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),vr(s,"link",c),jt(s),n.head.appendChild(s))}function Tl(n){return'[src="'+rt(n)+'"]'}function Lu(n){return"script[async]"+n}function Qp(n,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var g=n.querySelector('style[data-href~="'+rt(c.href)+'"]');if(g)return s.instance=g,jt(g),g;var _=X({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(n.ownerDocument||n).createElement("style"),jt(g),vr(g,"style",_),hh(g,c.precedence,n),s.instance=g;case"stylesheet":_=xl(c.href);var v=n.querySelector(Mu(_));if(v)return s.state.loading|=4,s.instance=v,jt(v),v;g=Wp(c),(_=Wi.get(_))&&c0(g,_),v=(n.ownerDocument||n).createElement("link"),jt(v);var D=v;return D._p=new Promise(function(k,Y){D.onload=k,D.onerror=Y}),vr(v,"link",g),s.state.loading|=4,hh(v,c.precedence,n),s.instance=v;case"script":return v=Tl(c.src),(_=n.querySelector(Lu(v)))?(s.instance=_,jt(_),_):(g=c,(_=Wi.get(v))&&(g=X({},c),h0(g,_)),n=n.ownerDocument||n,_=n.createElement("script"),jt(_),vr(_,"link",g),n.head.appendChild(_),s.instance=_);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,hh(g,c.precedence,n));return s.instance}function hh(n,s,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,v=_,D=0;D<g.length;D++){var k=g[D];if(k.dataset.precedence===s)v=k;else if(v!==_)break}v?v.parentNode.insertBefore(n,v.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(n,s.firstChild))}function c0(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function h0(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var fh=null;function Kp(n,s,c){if(fh===null){var g=new Map,_=fh=new Map;_.set(c,g)}else _=fh,g=_.get(c),g||(g=new Map,_.set(c,g));if(g.has(n))return g;for(g.set(n,null),c=c.getElementsByTagName(n),_=0;_<c.length;_++){var v=c[_];if(!(v[us]||v[mn]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var D=v.getAttribute(s)||"";D=n+D;var k=g.get(D);k?k.push(v):g.set(D,[v])}}return g}function Zp(n,s,c){n=n.ownerDocument||n,n.head.insertBefore(c,s==="title"?n.querySelector("head > title"):null)}function Sx(n,s,c){if(c===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Jp(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Pu=null;function Ix(){}function bx(n,s,c){if(Pu===null)throw Error(a(475));var g=Pu;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var _=xl(c.href),v=n.querySelector(Mu(_));if(v){n=v._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(g.count++,g=dh.bind(g),n.then(g,g)),s.state.loading|=4,s.instance=v,jt(v);return}v=n.ownerDocument||n,c=Wp(c),(_=Wi.get(_))&&c0(c,_),v=v.createElement("link"),jt(v);var D=v;D._p=new Promise(function(k,Y){D.onload=k,D.onerror=Y}),vr(v,"link",c),s.instance=v}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(g.count++,s=dh.bind(g),n.addEventListener("load",s),n.addEventListener("error",s))}}function Rx(){if(Pu===null)throw Error(a(475));var n=Pu;return n.stylesheets&&n.count===0&&f0(n,n.stylesheets),0<n.count?function(s){var c=setTimeout(function(){if(n.stylesheets&&f0(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(c)}}:null}function dh(){if(this.count--,this.count===0){if(this.stylesheets)f0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var gh=null;function f0(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,gh=new Map,s.forEach(Nx,n),gh=null,dh.call(n))}function Nx(n,s){if(!(s.state.loading&4)){var c=gh.get(n);if(c)var g=c.get(null);else{c=new Map,gh.set(n,c);for(var _=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<_.length;v++){var D=_[v];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(c.set(D.dataset.precedence,D),g=D)}g&&c.set(null,g)}_=s.instance,D=_.getAttribute("data-precedence"),v=c.get(D)||g,v===g&&c.set(null,_),c.set(D,_),this.count++,g=dh.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),v?v.parentNode.insertBefore(_,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(_,n.firstChild)),s.state.loading|=4}}var Bu={$$typeof:j,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function Dx(n,s,c,g,_,v,D,k){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ki(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ki(0),this.hiddenUpdates=Ki(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=v,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function $p(n,s,c,g,_,v,D,k,Y,ne,ye,ve){return n=new Dx(n,s,c,D,k,Y,ne,ve),s=1,v===!0&&(s|=24),v=Yi(3,null,null,s),n.current=v,v.stateNode=n,s=Gf(),s.refCount++,n.pooledCache=s,s.refCount++,v.memoizedState={element:g,isDehydrated:c,cache:s},vd(v),n}function e2(n){return n?(n=tl,n):tl}function t2(n,s,c,g,_,v){_=e2(_),g.context===null?g.context=_:g.pendingContext=_,g=Oa(s),g.payload={element:c},v=v===void 0?null:v,v!==null&&(g.callback=v),c=Ma(n,g,s),c!==null&&(Zr(c,n,s),_u(c,n,s))}function n2(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<s?c:s}}function d0(n,s){n2(n,s),(n=n.alternate)&&n2(n,s)}function r2(n){if(n.tag===13){var s=Ca(n,67108864);s!==null&&Zr(s,n,67108864),d0(n,67108864)}}var mh=!0;function Ox(n,s,c,g){var _=L.T;L.T=null;var v=Pe.p;try{Pe.p=2,g0(n,s,c,g)}finally{Pe.p=v,L.T=_}}function Mx(n,s,c,g){var _=L.T;L.T=null;var v=Pe.p;try{Pe.p=8,g0(n,s,c,g)}finally{Pe.p=v,L.T=_}}function g0(n,s,c,g){if(mh){var _=m0(g);if(_===null)n0(n,s,g,ph,c),s2(n,g);else if(Px(_,n,s,c,g))g.stopPropagation();else if(s2(n,g),s&4&&-1<Lx.indexOf(n)){for(;_!==null;){var v=pn(_);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var D=ei(v.pendingLanes);if(D!==0){var k=v;for(k.pendingLanes|=2,k.entangledLanes|=2;D;){var Y=1<<31-xt(D);k.entanglements[1]|=Y,D&=~Y}As(v),(Dn&6)===0&&($c=Tn()+500,Nu(0))}}break;case 13:k=Ca(v,2),k!==null&&Zr(k,v,2),nh(),d0(v,2)}if(v=m0(g),v===null&&n0(n,s,g,ph,c),v===_)break;_=v}_!==null&&g.stopPropagation()}else n0(n,s,g,null,c)}}function m0(n){return n=cs(n),p0(n)}var ph=null;function p0(n){if(ph=null,n=Pn(n),n!==null){var s=Ye(n);if(s===null)n=null;else{var c=s.tag;if(c===13){if(n=Et(s),n!==null)return n;n=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ph=n,null}function i2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ya()){case Wt:return 2;case Hn:return 8;case fr:case Qn:return 32;case Ea:return 268435456;default:return 32}default:return 32}}var y0=!1,Fa=null,za=null,Ha=null,ku=new Map,Uu=new Map,ja=[],Lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s2(n,s){switch(n){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":ku.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(s.pointerId)}}function Vu(n,s,c,g,_,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:c,eventSystemFlags:g,nativeEvent:v,targetContainers:[_]},s!==null&&(s=pn(s),s!==null&&r2(s)),n):(n.eventSystemFlags|=g,s=n.targetContainers,_!==null&&s.indexOf(_)===-1&&s.push(_),n)}function Px(n,s,c,g,_){switch(s){case"focusin":return Fa=Vu(Fa,n,s,c,g,_),!0;case"dragenter":return za=Vu(za,n,s,c,g,_),!0;case"mouseover":return Ha=Vu(Ha,n,s,c,g,_),!0;case"pointerover":var v=_.pointerId;return ku.set(v,Vu(ku.get(v)||null,n,s,c,g,_)),!0;case"gotpointercapture":return v=_.pointerId,Uu.set(v,Vu(Uu.get(v)||null,n,s,c,g,_)),!0}return!1}function a2(n){var s=Pn(n.target);if(s!==null){var c=Ye(s);if(c!==null){if(s=c.tag,s===13){if(s=Et(c),s!==null){n.blockedOn=s,jn(n.priority,function(){if(c.tag===13){var g=Ti(),_=Ca(c,g);_!==null&&Zr(_,c,g),d0(c,g)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var c=m0(n.nativeEvent);if(c===null){c=n.nativeEvent;var g=new c.constructor(c.type,c);Er=g,c.target.dispatchEvent(g),Er=null}else return s=pn(c),s!==null&&r2(s),n.blockedOn=c,!1;s.shift()}return!0}function o2(n,s,c){yh(n)&&c.delete(s)}function Bx(){y0=!1,Fa!==null&&yh(Fa)&&(Fa=null),za!==null&&yh(za)&&(za=null),Ha!==null&&yh(Ha)&&(Ha=null),ku.forEach(o2),Uu.forEach(o2)}function Eh(n,s){n.blockedOn===s&&(n.blockedOn=null,y0||(y0=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bx)))}var _h=null;function l2(n){_h!==n&&(_h=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){_h===n&&(_h=null);for(var s=0;s<n.length;s+=3){var c=n[s],g=n[s+1],_=n[s+2];if(typeof g!="function"){if(p0(g||c)===null)continue;break}var v=pn(c);v!==null&&(n.splice(s,3),s-=3,ad(v,{pending:!0,data:_,method:c.method,action:g},g,_))}}))}function Fu(n){function s(Y){return Eh(Y,n)}Fa!==null&&Eh(Fa,n),za!==null&&Eh(za,n),Ha!==null&&Eh(Ha,n),ku.forEach(s),Uu.forEach(s);for(var c=0;c<ja.length;c++){var g=ja[c];g.blockedOn===n&&(g.blockedOn=null)}for(;0<ja.length&&(c=ja[0],c.blockedOn===null);)a2(c),c.blockedOn===null&&ja.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var _=c[g],v=c[g+1],D=_[Rn]||null;if(typeof v=="function")D||l2(c);else if(D){var k=null;if(v&&v.hasAttribute("formAction")){if(_=v,D=v[Rn]||null)k=D.formAction;else if(p0(_)!==null)continue}else k=D.action;typeof k=="function"?c[g+1]=k:(c.splice(g,3),g-=3),l2(c)}}}function E0(n){this._internalRoot=n}Ah.prototype.render=E0.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(a(409));var c=s.current,g=Ti();t2(c,g,n,s,null,null)},Ah.prototype.unmount=E0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;n.tag===0&&El(),t2(n.current,2,null,n,null,null),nh(),s[vn]=null}};function Ah(n){this._internalRoot=n}Ah.prototype.unstable_scheduleHydration=function(n){if(n){var s=Di();n={blockedOn:null,target:n,priority:s};for(var c=0;c<ja.length&&s!==0&&s<ja[c].priority;c++);ja.splice(c,0,n),c===0&&a2(n)}};var u2=e.version;if(u2!=="19.0.0")throw Error(a(527,u2,"19.0.0"));Pe.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=Ie(s),n=n!==null?Fe(n):null,n=n===null?null:n.stateNode,n};var kx={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:L,findFiberByHostInstance:Pn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{Jt=wh.inject(kx),be=wh}catch{}}return Hu.createRoot=function(n,s){if(!u(n))throw Error(a(299));var c=!1,g="",_=Sm,v=Im,D=bm,k=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(_=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(D=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(k=s.unstable_transitionCallbacks)),s=$p(n,1,!1,null,null,c,g,_,v,D,k,null),n[vn]=s.current,t0(n.nodeType===8?n.parentNode:n),new E0(s)},Hu.hydrateRoot=function(n,s,c){if(!u(n))throw Error(a(299));var g=!1,_="",v=Sm,D=Im,k=bm,Y=null,ne=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Y=c.unstable_transitionCallbacks),c.formState!==void 0&&(ne=c.formState)),s=$p(n,1,!0,s,c??null,g,_,v,D,k,Y,ne),s.context=e2(null),c=s.current,g=Ti(),_=Oa(g),_.callback=null,Ma(c,_,g),s.current.lanes=g,Ht(s,g),As(s),n[vn]=s.current,t0(n),new Ah(s)},Hu.version="19.0.0",Hu}var _2;function Wx(){if(_2)return w0.exports;_2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),w0.exports=Xx(),w0.exports}var Qx=Wx(),ju={},A2;function Kx(){if(A2)return ju;A2=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.parse=E,ju.serialize=A;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,u=Object.prototype.toString,f=(()=>{const B=function(){};return B.prototype=Object.create(null),B})();function E(B,j){const q=new f,$=B.length;if($<2)return q;const te=(j==null?void 0:j.decode)||I;let ie=0;do{const me=B.indexOf("=",ie);if(me===-1)break;const ue=B.indexOf(";",ie),De=ue===-1?$:ue;if(me>De){ie=B.lastIndexOf(";",me-1)+1;continue}const Ve=x(B,ie,me),ke=T(B,me,Ve),H=B.slice(Ve,ke);if(q[H]===void 0){let F=x(B,me+1,De),L=T(B,De,F);const X=te(B.slice(F,L));q[H]=X}ie=De+1}while(ie<$);return q}function x(B,j,q){do{const $=B.charCodeAt(j);if($!==32&&$!==9)return j}while(++j<q);return q}function T(B,j,q){for(;j>q;){const $=B.charCodeAt(--j);if($!==32&&$!==9)return j+1}return q}function A(B,j,q){const $=(q==null?void 0:q.encode)||encodeURIComponent;if(!i.test(B))throw new TypeError(`argument name is invalid: ${B}`);const te=$(j);if(!e.test(te))throw new TypeError(`argument val is invalid: ${j}`);let ie=B+"="+te;if(!q)return ie;if(q.maxAge!==void 0){if(!Number.isInteger(q.maxAge))throw new TypeError(`option maxAge is invalid: ${q.maxAge}`);ie+="; Max-Age="+q.maxAge}if(q.domain){if(!t.test(q.domain))throw new TypeError(`option domain is invalid: ${q.domain}`);ie+="; Domain="+q.domain}if(q.path){if(!a.test(q.path))throw new TypeError(`option path is invalid: ${q.path}`);ie+="; Path="+q.path}if(q.expires){if(!R(q.expires)||!Number.isFinite(q.expires.valueOf()))throw new TypeError(`option expires is invalid: ${q.expires}`);ie+="; Expires="+q.expires.toUTCString()}if(q.httpOnly&&(ie+="; HttpOnly"),q.secure&&(ie+="; Secure"),q.partitioned&&(ie+="; Partitioned"),q.priority)switch(typeof q.priority=="string"?q.priority.toLowerCase():void 0){case"low":ie+="; Priority=Low";break;case"medium":ie+="; Priority=Medium";break;case"high":ie+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${q.priority}`)}if(q.sameSite)switch(typeof q.sameSite=="string"?q.sameSite.toLowerCase():q.sameSite){case!0:case"strict":ie+="; SameSite=Strict";break;case"lax":ie+="; SameSite=Lax";break;case"none":ie+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${q.sameSite}`)}return ie}function I(B){if(B.indexOf("%")===-1)return B;try{return decodeURIComponent(B)}catch{return B}}function R(B){return u.call(B)==="[object Date]"}return ju}Kx();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var w2="popstate";function Zx(i={}){function e(a,u){let{pathname:f,search:E,hash:x}=a.location;return Z0("",{pathname:f,search:E,hash:x},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(a,u){return typeof u=="string"?u:ec(u)}return $x(e,t,null,i)}function On(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Rs(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jx(){return Math.random().toString(36).substring(2,10)}function x2(i,e){return{usr:i.state,key:i.key,idx:e}}function Z0(i,e,t=null,a){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?ql(e):e,state:t,key:e&&e.key||a||Jx()}}function ec({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function ql(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let a=i.indexOf("?");a>=0&&(e.search=i.substring(a),i=i.substring(0,a)),i&&(e.pathname=i)}return e}function $x(i,e,t,a={}){let{window:u=document.defaultView,v5Compat:f=!1}=a,E=u.history,x="POP",T=null,A=I();A==null&&(A=0,E.replaceState({...E.state,idx:A},""));function I(){return(E.state||{idx:null}).idx}function R(){x="POP";let te=I(),ie=te==null?null:te-A;A=te,T&&T({action:x,location:$.location,delta:ie})}function B(te,ie){x="PUSH";let me=Z0($.location,te,ie);A=I()+1;let ue=x2(me,A),De=$.createHref(me);try{E.pushState(ue,"",De)}catch(Ve){if(Ve instanceof DOMException&&Ve.name==="DataCloneError")throw Ve;u.location.assign(De)}f&&T&&T({action:x,location:$.location,delta:1})}function j(te,ie){x="REPLACE";let me=Z0($.location,te,ie);A=I();let ue=x2(me,A),De=$.createHref(me);E.replaceState(ue,"",De),f&&T&&T({action:x,location:$.location,delta:0})}function q(te){let ie=u.location.origin!=="null"?u.location.origin:u.location.href,me=typeof te=="string"?te:ec(te);return me=me.replace(/ $/,"%20"),On(ie,`No window.location.(origin|href) available to create URL for href: ${me}`),new URL(me,ie)}let $={get action(){return x},get location(){return i(u,E)},listen(te){if(T)throw new Error("A history only accepts one active listener");return u.addEventListener(w2,R),T=te,()=>{u.removeEventListener(w2,R),T=null}},createHref(te){return e(u,te)},createURL:q,encodeLocation(te){let ie=q(te);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:B,replace:j,go(te){return E.go(te)}};return $}function RE(i,e,t="/"){return eT(i,e,t,!1)}function eT(i,e,t,a){let u=typeof e=="string"?ql(e):e,f=oa(u.pathname||"/",t);if(f==null)return null;let E=NE(i);tT(E);let x=null;for(let T=0;x==null&&T<E.length;++T){let A=fT(f);x=cT(E[T],A,a)}return x}function NE(i,e=[],t=[],a=""){let u=(f,E,x)=>{let T={relativePath:x===void 0?f.path||"":x,caseSensitive:f.caseSensitive===!0,childrenIndex:E,route:f};T.relativePath.startsWith("/")&&(On(T.relativePath.startsWith(a),`Absolute route path "${T.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),T.relativePath=T.relativePath.slice(a.length));let A=aa([a,T.relativePath]),I=t.concat(T);f.children&&f.children.length>0&&(On(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${A}".`),NE(f.children,e,I,A)),!(f.path==null&&!f.index)&&e.push({path:A,score:lT(A,f.index),routesMeta:I})};return i.forEach((f,E)=>{var x;if(f.path===""||!((x=f.path)!=null&&x.includes("?")))u(f,E);else for(let T of DE(f.path))u(f,E,T)}),e}function DE(i){let e=i.split("/");if(e.length===0)return[];let[t,...a]=e,u=t.endsWith("?"),f=t.replace(/\?$/,"");if(a.length===0)return u?[f,""]:[f];let E=DE(a.join("/")),x=[];return x.push(...E.map(T=>T===""?f:[f,T].join("/"))),u&&x.push(...E),x.map(T=>i.startsWith("/")&&T===""?"/":T)}function tT(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:uT(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var nT=/^:[\w-]+$/,rT=3,iT=2,sT=1,aT=10,oT=-2,T2=i=>i==="*";function lT(i,e){let t=i.split("/"),a=t.length;return t.some(T2)&&(a+=oT),e&&(a+=iT),t.filter(u=>!T2(u)).reduce((u,f)=>u+(nT.test(f)?rT:f===""?sT:aT),a)}function uT(i,e){return i.length===e.length&&i.slice(0,-1).every((a,u)=>a===e[u])?i[i.length-1]-e[e.length-1]:0}function cT(i,e,t=!1){let{routesMeta:a}=i,u={},f="/",E=[];for(let x=0;x<a.length;++x){let T=a[x],A=x===a.length-1,I=f==="/"?e:e.slice(f.length)||"/",R=qh({path:T.relativePath,caseSensitive:T.caseSensitive,end:A},I),B=T.route;if(!R&&A&&t&&!a[a.length-1].route.index&&(R=qh({path:T.relativePath,caseSensitive:T.caseSensitive,end:!1},I)),!R)return null;Object.assign(u,R.params),E.push({params:u,pathname:aa([f,R.pathname]),pathnameBase:pT(aa([f,R.pathnameBase])),route:B}),R.pathnameBase!=="/"&&(f=aa([f,R.pathnameBase]))}return E}function qh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,a]=hT(i.path,i.caseSensitive,i.end),u=e.match(t);if(!u)return null;let f=u[0],E=f.replace(/(.)\/+$/,"$1"),x=u.slice(1);return{params:a.reduce((A,{paramName:I,isOptional:R},B)=>{if(I==="*"){let q=x[B]||"";E=f.slice(0,f.length-q.length).replace(/(.)\/+$/,"$1")}const j=x[B];return R&&!j?A[I]=void 0:A[I]=(j||"").replace(/%2F/g,"/"),A},{}),pathname:f,pathnameBase:E,pattern:i}}function hT(i,e=!1,t=!0){Rs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let a=[],u="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(E,x,T)=>(a.push({paramName:x,isOptional:T!=null}),T?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(a.push({paramName:"*"}),u+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?u+="\\/*$":i!==""&&i!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),a]}function fT(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function oa(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=i.charAt(t);return a&&a!=="/"?null:i.slice(t)||"/"}function dT(i,e="/"){let{pathname:t,search:a="",hash:u=""}=typeof i=="string"?ql(i):i;return{pathname:t?t.startsWith("/")?t:gT(t,e):e,search:yT(a),hash:ET(u)}}function gT(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(u=>{u===".."?t.length>1&&t.pop():u!=="."&&t.push(u)}),t.length>1?t.join("/"):"/"}function C0(i,e,t,a){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mT(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function OE(i){let e=mT(i);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function ME(i,e,t,a=!1){let u;typeof i=="string"?u=ql(i):(u={...i},On(!u.pathname||!u.pathname.includes("?"),C0("?","pathname","search",u)),On(!u.pathname||!u.pathname.includes("#"),C0("#","pathname","hash",u)),On(!u.search||!u.search.includes("#"),C0("#","search","hash",u)));let f=i===""||u.pathname==="",E=f?"/":u.pathname,x;if(E==null)x=t;else{let R=e.length-1;if(!a&&E.startsWith("..")){let B=E.split("/");for(;B[0]==="..";)B.shift(),R-=1;u.pathname=B.join("/")}x=R>=0?e[R]:"/"}let T=dT(u,x),A=E&&E!=="/"&&E.endsWith("/"),I=(f||E===".")&&t.endsWith("/");return!T.pathname.endsWith("/")&&(A||I)&&(T.pathname+="/"),T}var aa=i=>i.join("/").replace(/\/\/+/g,"/"),pT=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),yT=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,ET=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function _T(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var LE=["POST","PUT","PATCH","DELETE"];new Set(LE);var AT=["GET",...LE];new Set(AT);var Yl=Ee.createContext(null);Yl.displayName="DataRouter";var gf=Ee.createContext(null);gf.displayName="DataRouterState";var PE=Ee.createContext({isTransitioning:!1});PE.displayName="ViewTransition";var wT=Ee.createContext(new Map);wT.displayName="Fetchers";var xT=Ee.createContext(null);xT.displayName="Await";var Ds=Ee.createContext(null);Ds.displayName="Navigation";var cc=Ee.createContext(null);cc.displayName="Location";var da=Ee.createContext({outlet:null,matches:[],isDataRoute:!1});da.displayName="Route";var C1=Ee.createContext(null);C1.displayName="RouteError";function TT(i,{relative:e}={}){On(hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=Ee.useContext(Ds),{hash:u,pathname:f,search:E}=fc(i,{relative:e}),x=f;return t!=="/"&&(x=f==="/"?t:aa([t,f])),a.createHref({pathname:x,search:E,hash:u})}function hc(){return Ee.useContext(cc)!=null}function Ho(){return On(hc(),"useLocation() may be used only in the context of a <Router> component."),Ee.useContext(cc).location}var BE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kE(i){Ee.useContext(Ds).static||Ee.useLayoutEffect(i)}function S1(){let{isDataRoute:i}=Ee.useContext(da);return i?BT():vT()}function vT(){On(hc(),"useNavigate() may be used only in the context of a <Router> component.");let i=Ee.useContext(Yl),{basename:e,navigator:t}=Ee.useContext(Ds),{matches:a}=Ee.useContext(da),{pathname:u}=Ho(),f=JSON.stringify(OE(a)),E=Ee.useRef(!1);return kE(()=>{E.current=!0}),Ee.useCallback((T,A={})=>{if(Rs(E.current,BE),!E.current)return;if(typeof T=="number"){t.go(T);return}let I=ME(T,JSON.parse(f),u,A.relative==="path");i==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:aa([e,I.pathname])),(A.replace?t.replace:t.push)(I,A.state,A)},[e,t,f,u,i])}Ee.createContext(null);function fc(i,{relative:e}={}){let{matches:t}=Ee.useContext(da),{pathname:a}=Ho(),u=JSON.stringify(OE(t));return Ee.useMemo(()=>ME(i,JSON.parse(u),a,e==="path"),[i,u,a,e])}function CT(i,e){return UE(i,e)}function UE(i,e,t,a){var me;On(hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u,static:f}=Ee.useContext(Ds),{matches:E}=Ee.useContext(da),x=E[E.length-1],T=x?x.params:{},A=x?x.pathname:"/",I=x?x.pathnameBase:"/",R=x&&x.route;{let ue=R&&R.path||"";VE(A,!R||ue.endsWith("*")||ue.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${A}" (under <Route path="${ue}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ue}"> to <Route path="${ue==="/"?"*":`${ue}/*`}">.`)}let B=Ho(),j;if(e){let ue=typeof e=="string"?ql(e):e;On(I==="/"||((me=ue.pathname)==null?void 0:me.startsWith(I)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${I}" but pathname "${ue.pathname}" was given in the \`location\` prop.`),j=ue}else j=B;let q=j.pathname||"/",$=q;if(I!=="/"){let ue=I.replace(/^\//,"").split("/");$="/"+q.replace(/^\//,"").split("/").slice(ue.length).join("/")}let te=!f&&t&&t.matches&&t.matches.length>0?t.matches:RE(i,{pathname:$});Rs(R||te!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Rs(te==null||te[te.length-1].route.element!==void 0||te[te.length-1].route.Component!==void 0||te[te.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ie=NT(te&&te.map(ue=>Object.assign({},ue,{params:Object.assign({},T,ue.params),pathname:aa([I,u.encodeLocation?u.encodeLocation(ue.pathname).pathname:ue.pathname]),pathnameBase:ue.pathnameBase==="/"?I:aa([I,u.encodeLocation?u.encodeLocation(ue.pathnameBase).pathname:ue.pathnameBase])})),E,t,a);return e&&ie?Ee.createElement(cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},ie):ie}function ST(){let i=PT(),e=_T(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,a="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:a},f={padding:"2px 4px",backgroundColor:a},E=null;return console.error("Error handled by React Router default ErrorBoundary:",i),E=Ee.createElement(Ee.Fragment,null,Ee.createElement("p",null," Hey developer "),Ee.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Ee.createElement("code",{style:f},"ErrorBoundary")," or"," ",Ee.createElement("code",{style:f},"errorElement")," prop on your route.")),Ee.createElement(Ee.Fragment,null,Ee.createElement("h2",null,"Unexpected Application Error!"),Ee.createElement("h3",{style:{fontStyle:"italic"}},e),t?Ee.createElement("pre",{style:u},t):null,E)}var IT=Ee.createElement(ST,null),bT=class extends Ee.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?Ee.createElement(da.Provider,{value:this.props.routeContext},Ee.createElement(C1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RT({routeContext:i,match:e,children:t}){let a=Ee.useContext(Yl);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),Ee.createElement(da.Provider,{value:i},t)}function NT(i,e=[],t=null,a=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let u=i,f=t==null?void 0:t.errors;if(f!=null){let T=u.findIndex(A=>A.route.id&&(f==null?void 0:f[A.route.id])!==void 0);On(T>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,T+1))}let E=!1,x=-1;if(t)for(let T=0;T<u.length;T++){let A=u[T];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(x=T),A.route.id){let{loaderData:I,errors:R}=t,B=A.route.loader&&!I.hasOwnProperty(A.route.id)&&(!R||R[A.route.id]===void 0);if(A.route.lazy||B){E=!0,x>=0?u=u.slice(0,x+1):u=[u[0]];break}}}return u.reduceRight((T,A,I)=>{let R,B=!1,j=null,q=null;t&&(R=f&&A.route.id?f[A.route.id]:void 0,j=A.route.errorElement||IT,E&&(x<0&&I===0?(VE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,q=null):x===I&&(B=!0,q=A.route.hydrateFallbackElement||null)));let $=e.concat(u.slice(0,I+1)),te=()=>{let ie;return R?ie=j:B?ie=q:A.route.Component?ie=Ee.createElement(A.route.Component,null):A.route.element?ie=A.route.element:ie=T,Ee.createElement(RT,{match:A,routeContext:{outlet:T,matches:$,isDataRoute:t!=null},children:ie})};return t&&(A.route.ErrorBoundary||A.route.errorElement||I===0)?Ee.createElement(bT,{location:t.location,revalidation:t.revalidation,component:j,error:R,children:te(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):te()},null)}function I1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DT(i){let e=Ee.useContext(Yl);return On(e,I1(i)),e}function OT(i){let e=Ee.useContext(gf);return On(e,I1(i)),e}function MT(i){let e=Ee.useContext(da);return On(e,I1(i)),e}function b1(i){let e=MT(i),t=e.matches[e.matches.length-1];return On(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function LT(){return b1("useRouteId")}function PT(){var a;let i=Ee.useContext(C1),e=OT("useRouteError"),t=b1("useRouteError");return i!==void 0?i:(a=e.errors)==null?void 0:a[t]}function BT(){let{router:i}=DT("useNavigate"),e=b1("useNavigate"),t=Ee.useRef(!1);return kE(()=>{t.current=!0}),Ee.useCallback(async(u,f={})=>{Rs(t.current,BE),t.current&&(typeof u=="number"?i.navigate(u):await i.navigate(u,{fromRouteId:e,...f}))},[i,e])}var v2={};function VE(i,e,t){!e&&!v2[i]&&(v2[i]=!0,Rs(!1,t))}Ee.memo(kT);function kT({routes:i,future:e,state:t}){return UE(i,void 0,t,e)}function Oh(i){On(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UT({basename:i="/",children:e=null,location:t,navigationType:a="POP",navigator:u,static:f=!1}){On(!hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let E=i.replace(/^\/*/,"/"),x=Ee.useMemo(()=>({basename:E,navigator:u,static:f,future:{}}),[E,u,f]);typeof t=="string"&&(t=ql(t));let{pathname:T="/",search:A="",hash:I="",state:R=null,key:B="default"}=t,j=Ee.useMemo(()=>{let q=oa(T,E);return q==null?null:{location:{pathname:q,search:A,hash:I,state:R,key:B},navigationType:a}},[E,T,A,I,R,B,a]);return Rs(j!=null,`<Router basename="${E}"> is not able to match the URL "${T}${A}${I}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:Ee.createElement(Ds.Provider,{value:x},Ee.createElement(cc.Provider,{children:e,value:j}))}function VT({children:i,location:e}){return CT(J0(i),e)}function J0(i,e=[]){let t=[];return Ee.Children.forEach(i,(a,u)=>{if(!Ee.isValidElement(a))return;let f=[...e,u];if(a.type===Ee.Fragment){t.push.apply(t,J0(a.props.children,f));return}On(a.type===Oh,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),On(!a.props.index||!a.props.children,"An index route cannot have child routes.");let E={id:a.props.id||f.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(E.children=J0(a.props.children,f)),t.push(E)}),t}var Mh="get",Lh="application/x-www-form-urlencoded";function mf(i){return i!=null&&typeof i.tagName=="string"}function FT(i){return mf(i)&&i.tagName.toLowerCase()==="button"}function zT(i){return mf(i)&&i.tagName.toLowerCase()==="form"}function HT(i){return mf(i)&&i.tagName.toLowerCase()==="input"}function jT(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function GT(i,e){return i.button===0&&(!e||e==="_self")&&!jT(i)}var Th=null;function qT(){if(Th===null)try{new FormData(document.createElement("form"),0),Th=!1}catch{Th=!0}return Th}var YT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function S0(i){return i!=null&&!YT.has(i)?(Rs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lh}"`),null):i}function XT(i,e){let t,a,u,f,E;if(zT(i)){let x=i.getAttribute("action");a=x?oa(x,e):null,t=i.getAttribute("method")||Mh,u=S0(i.getAttribute("enctype"))||Lh,f=new FormData(i)}else if(FT(i)||HT(i)&&(i.type==="submit"||i.type==="image")){let x=i.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let T=i.getAttribute("formaction")||x.getAttribute("action");if(a=T?oa(T,e):null,t=i.getAttribute("formmethod")||x.getAttribute("method")||Mh,u=S0(i.getAttribute("formenctype"))||S0(x.getAttribute("enctype"))||Lh,f=new FormData(x,i),!qT()){let{name:A,type:I,value:R}=i;if(I==="image"){let B=A?`${A}.`:"";f.append(`${B}x`,"0"),f.append(`${B}y`,"0")}else A&&f.append(A,R)}}else{if(mf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Mh,a=null,u=Lh,E=i}return f&&u==="text/plain"&&(E=f,f=void 0),{action:a,method:t.toLowerCase(),encType:u,formData:f,body:E}}function R1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function WT(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function KT(i,e,t){let a=await Promise.all(i.map(async u=>{let f=e.routes[u.route.id];if(f){let E=await WT(f,t);return E.links?E.links():[]}return[]}));return ev(a.flat(1).filter(QT).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function C2(i,e,t,a,u,f){let E=(T,A)=>t[A]?T.route.id!==t[A].route.id:!0,x=(T,A)=>{var I;return t[A].pathname!==T.pathname||((I=t[A].route.path)==null?void 0:I.endsWith("*"))&&t[A].params["*"]!==T.params["*"]};return f==="assets"?e.filter((T,A)=>E(T,A)||x(T,A)):f==="data"?e.filter((T,A)=>{var R;let I=a.routes[T.route.id];if(!I||!I.hasLoader)return!1;if(E(T,A)||x(T,A))return!0;if(T.route.shouldRevalidate){let B=T.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((R=t[0])==null?void 0:R.params)||{},nextUrl:new URL(i,window.origin),nextParams:T.params,defaultShouldRevalidate:!0});if(typeof B=="boolean")return B}return!0}):[]}function ZT(i,e,{includeHydrateFallback:t}={}){return JT(i.map(a=>{let u=e.routes[a.route.id];if(!u)return[];let f=[u.module];return u.clientActionModule&&(f=f.concat(u.clientActionModule)),u.clientLoaderModule&&(f=f.concat(u.clientLoaderModule)),t&&u.hydrateFallbackModule&&(f=f.concat(u.hydrateFallbackModule)),u.imports&&(f=f.concat(u.imports)),f}).flat(1))}function JT(i){return[...new Set(i)]}function $T(i){let e={},t=Object.keys(i).sort();for(let a of t)e[a]=i[a];return e}function ev(i,e){let t=new Set;return new Set(e),i.reduce((a,u)=>{let f=JSON.stringify($T(u));return t.has(f)||(t.add(f),a.push({key:f,link:u})),a},[])}function tv(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&oa(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function FE(){let i=Ee.useContext(Yl);return R1(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function nv(){let i=Ee.useContext(gf);return R1(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var N1=Ee.createContext(void 0);N1.displayName="FrameworkContext";function zE(){let i=Ee.useContext(N1);return R1(i,"You must render this element inside a <HydratedRouter> element"),i}function rv(i,e){let t=Ee.useContext(N1),[a,u]=Ee.useState(!1),[f,E]=Ee.useState(!1),{onFocus:x,onBlur:T,onMouseEnter:A,onMouseLeave:I,onTouchStart:R}=e,B=Ee.useRef(null);Ee.useEffect(()=>{if(i==="render"&&E(!0),i==="viewport"){let $=ie=>{ie.forEach(me=>{E(me.isIntersecting)})},te=new IntersectionObserver($,{threshold:.5});return B.current&&te.observe(B.current),()=>{te.disconnect()}}},[i]),Ee.useEffect(()=>{if(a){let $=setTimeout(()=>{E(!0)},100);return()=>{clearTimeout($)}}},[a]);let j=()=>{u(!0)},q=()=>{u(!1),E(!1)};return t?i!=="intent"?[f,B,{}]:[f,B,{onFocus:Gu(x,j),onBlur:Gu(T,q),onMouseEnter:Gu(A,j),onMouseLeave:Gu(I,q),onTouchStart:Gu(R,j)}]:[!1,B,{}]}function Gu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function iv({page:i,...e}){let{router:t}=FE(),a=Ee.useMemo(()=>RE(t.routes,i,t.basename),[t.routes,i,t.basename]);return a?Ee.createElement(av,{page:i,matches:a,...e}):null}function sv(i){let{manifest:e,routeModules:t}=zE(),[a,u]=Ee.useState([]);return Ee.useEffect(()=>{let f=!1;return KT(i,e,t).then(E=>{f||u(E)}),()=>{f=!0}},[i,e,t]),a}function av({page:i,matches:e,...t}){let a=Ho(),{manifest:u,routeModules:f}=zE(),{basename:E}=FE(),{loaderData:x,matches:T}=nv(),A=Ee.useMemo(()=>C2(i,e,T,u,a,"data"),[i,e,T,u,a]),I=Ee.useMemo(()=>C2(i,e,T,u,a,"assets"),[i,e,T,u,a]),R=Ee.useMemo(()=>{if(i===a.pathname+a.search+a.hash)return[];let q=new Set,$=!1;if(e.forEach(ie=>{var ue;let me=u.routes[ie.route.id];!me||!me.hasLoader||(!A.some(De=>De.route.id===ie.route.id)&&ie.route.id in x&&((ue=f[ie.route.id])!=null&&ue.shouldRevalidate)||me.hasClientLoader?$=!0:q.add(ie.route.id))}),q.size===0)return[];let te=tv(i,E);return $&&q.size>0&&te.searchParams.set("_routes",e.filter(ie=>q.has(ie.route.id)).map(ie=>ie.route.id).join(",")),[te.pathname+te.search]},[E,x,a,u,A,e,i,f]),B=Ee.useMemo(()=>ZT(I,u),[I,u]),j=sv(I);return Ee.createElement(Ee.Fragment,null,R.map(q=>Ee.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...t})),B.map(q=>Ee.createElement("link",{key:q,rel:"modulepreload",href:q,...t})),j.map(({key:q,link:$})=>Ee.createElement("link",{key:q,...$})))}function ov(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var HE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{HE&&(window.__reactRouterVersion="7.3.0")}catch{}function lv({basename:i,children:e,window:t}){let a=Ee.useRef();a.current==null&&(a.current=Zx({window:t,v5Compat:!0}));let u=a.current,[f,E]=Ee.useState({action:u.action,location:u.location}),x=Ee.useCallback(T=>{Ee.startTransition(()=>E(T))},[E]);return Ee.useLayoutEffect(()=>u.listen(x),[u,x]),Ee.createElement(UT,{basename:i,children:e,location:f.location,navigationType:f.action,navigator:u})}var jE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GE=Ee.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:u,reloadDocument:f,replace:E,state:x,target:T,to:A,preventScrollReset:I,viewTransition:R,...B},j){let{basename:q}=Ee.useContext(Ds),$=typeof A=="string"&&jE.test(A),te,ie=!1;if(typeof A=="string"&&$&&(te=A,HE))try{let L=new URL(window.location.href),X=A.startsWith("//")?new URL(L.protocol+A):new URL(A),Z=oa(X.pathname,q);X.origin===L.origin&&Z!=null?A=Z+X.search+X.hash:ie=!0}catch{Rs(!1,`<Link to="${A}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let me=TT(A,{relative:u}),[ue,De,Ve]=rv(a,B),ke=fv(A,{replace:E,state:x,target:T,preventScrollReset:I,relative:u,viewTransition:R});function H(L){e&&e(L),L.defaultPrevented||ke(L)}let F=Ee.createElement("a",{...B,...Ve,href:te||me,onClick:ie||f?e:H,ref:ov(j,De),target:T,"data-discover":!$&&t==="render"?"true":void 0});return ue&&!$?Ee.createElement(Ee.Fragment,null,F,Ee.createElement(iv,{page:me})):F});GE.displayName="Link";var uv=Ee.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:u=!1,style:f,to:E,viewTransition:x,children:T,...A},I){let R=fc(E,{relative:A.relative}),B=Ho(),j=Ee.useContext(gf),{navigator:q,basename:$}=Ee.useContext(Ds),te=j!=null&&yv(R)&&x===!0,ie=q.encodeLocation?q.encodeLocation(R).pathname:R.pathname,me=B.pathname,ue=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;t||(me=me.toLowerCase(),ue=ue?ue.toLowerCase():null,ie=ie.toLowerCase()),ue&&$&&(ue=oa(ue,$)||ue);const De=ie!=="/"&&ie.endsWith("/")?ie.length-1:ie.length;let Ve=me===ie||!u&&me.startsWith(ie)&&me.charAt(De)==="/",ke=ue!=null&&(ue===ie||!u&&ue.startsWith(ie)&&ue.charAt(ie.length)==="/"),H={isActive:Ve,isPending:ke,isTransitioning:te},F=Ve?e:void 0,L;typeof a=="function"?L=a(H):L=[a,Ve?"active":null,ke?"pending":null,te?"transitioning":null].filter(Boolean).join(" ");let X=typeof f=="function"?f(H):f;return Ee.createElement(GE,{...A,"aria-current":F,className:L,ref:I,style:X,to:E,viewTransition:x},typeof T=="function"?T(H):T)});uv.displayName="NavLink";var cv=Ee.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:u,state:f,method:E=Mh,action:x,onSubmit:T,relative:A,preventScrollReset:I,viewTransition:R,...B},j)=>{let q=mv(),$=pv(x,{relative:A}),te=E.toLowerCase()==="get"?"get":"post",ie=typeof x=="string"&&jE.test(x),me=ue=>{if(T&&T(ue),ue.defaultPrevented)return;ue.preventDefault();let De=ue.nativeEvent.submitter,Ve=(De==null?void 0:De.getAttribute("formmethod"))||E;q(De||ue.currentTarget,{fetcherKey:e,method:Ve,navigate:t,replace:u,state:f,relative:A,preventScrollReset:I,viewTransition:R})};return Ee.createElement("form",{ref:j,method:te,action:$,onSubmit:a?T:me,...B,"data-discover":!ie&&i==="render"?"true":void 0})});cv.displayName="Form";function hv(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qE(i){let e=Ee.useContext(Yl);return On(e,hv(i)),e}function fv(i,{target:e,replace:t,state:a,preventScrollReset:u,relative:f,viewTransition:E}={}){let x=S1(),T=Ho(),A=fc(i,{relative:f});return Ee.useCallback(I=>{if(GT(I,e)){I.preventDefault();let R=t!==void 0?t:ec(T)===ec(A);x(i,{replace:R,state:a,preventScrollReset:u,relative:f,viewTransition:E})}},[T,x,A,t,a,e,i,u,f,E])}var dv=0,gv=()=>`__${String(++dv)}__`;function mv(){let{router:i}=qE("useSubmit"),{basename:e}=Ee.useContext(Ds),t=LT();return Ee.useCallback(async(a,u={})=>{let{action:f,method:E,encType:x,formData:T,body:A}=XT(a,e);if(u.navigate===!1){let I=u.fetcherKey||gv();await i.fetch(I,t,u.action||f,{preventScrollReset:u.preventScrollReset,formData:T,body:A,formMethod:u.method||E,formEncType:u.encType||x,flushSync:u.flushSync})}else await i.navigate(u.action||f,{preventScrollReset:u.preventScrollReset,formData:T,body:A,formMethod:u.method||E,formEncType:u.encType||x,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,e,t])}function pv(i,{relative:e}={}){let{basename:t}=Ee.useContext(Ds),a=Ee.useContext(da);On(a,"useFormAction must be used inside a RouteContext");let[u]=a.matches.slice(-1),f={...fc(i||".",{relative:e})},E=Ho();if(i==null){f.search=E.search;let x=new URLSearchParams(f.search),T=x.getAll("index");if(T.some(I=>I==="")){x.delete("index"),T.filter(R=>R).forEach(R=>x.append("index",R));let I=x.toString();f.search=I?`?${I}`:""}}return(!i||i===".")&&u.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(f.pathname=f.pathname==="/"?t:aa([t,f.pathname])),ec(f)}function yv(i,e={}){let t=Ee.useContext(PE);On(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=qE("useViewTransitionState"),u=fc(i,{relative:e.relative});if(!t.isTransitioning)return!1;let f=oa(t.currentLocation.pathname,a)||t.currentLocation.pathname,E=oa(t.nextLocation.pathname,a)||t.nextLocation.pathname;return qh(u.pathname,E)!=null||qh(u.pathname,f)!=null}new TextEncoder;const Ev=()=>{const i=S1();return gt.jsxs("div",{className:"homepage-container",children:[gt.jsx("h1",{children:" Banco de Monopoly Online"}),gt.jsx("p",{children:"Administra el dinero de los jugadores de Monopoly de forma digital."}),gt.jsx("button",{style:{marginBottom:"10px"},onClick:()=>i("/crear-jugador"),className:"btn",children:" Crear Jugador"}),gt.jsx("button",{onClick:()=>i("/modificar-dinero"),className:"btn",children:" Modificar Dinero"})]})},_v=()=>{};var S2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=function(i){const e=[];let t=0;for(let a=0;a<i.length;a++){let u=i.charCodeAt(a);u<128?e[t++]=u:u<2048?(e[t++]=u>>6|192,e[t++]=u&63|128):(u&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(u=65536+((u&1023)<<10)+(i.charCodeAt(++a)&1023),e[t++]=u>>18|240,e[t++]=u>>12&63|128,e[t++]=u>>6&63|128,e[t++]=u&63|128):(e[t++]=u>>12|224,e[t++]=u>>6&63|128,e[t++]=u&63|128)}return e},Av=function(i){const e=[];let t=0,a=0;for(;t<i.length;){const u=i[t++];if(u<128)e[a++]=String.fromCharCode(u);else if(u>191&&u<224){const f=i[t++];e[a++]=String.fromCharCode((u&31)<<6|f&63)}else if(u>239&&u<365){const f=i[t++],E=i[t++],x=i[t++],T=((u&7)<<18|(f&63)<<12|(E&63)<<6|x&63)-65536;e[a++]=String.fromCharCode(55296+(T>>10)),e[a++]=String.fromCharCode(56320+(T&1023))}else{const f=i[t++],E=i[t++];e[a++]=String.fromCharCode((u&15)<<12|(f&63)<<6|E&63)}}return e.join("")},XE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let u=0;u<i.length;u+=3){const f=i[u],E=u+1<i.length,x=E?i[u+1]:0,T=u+2<i.length,A=T?i[u+2]:0,I=f>>2,R=(f&3)<<4|x>>4;let B=(x&15)<<2|A>>6,j=A&63;T||(j=64,E||(B=64)),a.push(t[I],t[R],t[B],t[j])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(YE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Av(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let u=0;u<i.length;){const f=t[i.charAt(u++)],x=u<i.length?t[i.charAt(u)]:0;++u;const A=u<i.length?t[i.charAt(u)]:64;++u;const R=u<i.length?t[i.charAt(u)]:64;if(++u,f==null||x==null||A==null||R==null)throw new wv;const B=f<<2|x>>4;if(a.push(B),A!==64){const j=x<<4&240|A>>2;if(a.push(j),R!==64){const q=A<<6&192|R;a.push(q)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class wv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xv=function(i){const e=YE(i);return XE.encodeByteArray(e,!0)},Yh=function(i){return xv(i).replace(/\./g,"")},WE=function(i){try{return XE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=()=>Tv().__FIREBASE_DEFAULTS__,Cv=()=>{if(typeof process>"u"||typeof S2>"u")return;const i=S2.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Sv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&WE(i[1]);return e&&JSON.parse(e)},pf=()=>{try{return _v()||vv()||Cv()||Sv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},QE=i=>{var e,t;return(t=(e=pf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},Iv=i=>{const e=QE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},KE=()=>{var i;return(i=pf())===null||i===void 0?void 0:i.config},ZE=i=>{var e;return(e=pf())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",u=i.iat||0,f=i.sub||i.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const E=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:u,exp:u+3600,auth_time:u,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Yh(JSON.stringify(t)),Yh(JSON.stringify(E)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fr())}function Dv(){var i;const e=(i=pf())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ov(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mv(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Lv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Pv(){const i=Fr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Bv(){return!Dv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kv(){try{return typeof indexedDB=="object"}catch{return!1}}function Uv(){return new Promise((i,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(a);u.onsuccess=()=>{u.result.close(),t||self.indexedDB.deleteDatabase(a),i(!0)},u.onupgradeneeded=()=>{t=!1},u.onerror=()=>{var f;e(((f=u.error)===null||f===void 0?void 0:f.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="FirebaseError";class ga extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=Vv,Object.setPrototypeOf(this,ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dc.prototype.create)}}class dc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},u=`${this.service}/${e}`,f=this.errors[e],E=f?Fv(f,a):"Error",x=`${this.serviceName}: ${E} (${u}).`;return new ga(u,x,a)}}function Fv(i,e){return i.replace(zv,(t,a)=>{const u=e[a];return u!=null?String(u):`<${a}?>`})}const zv=/\{\$([^}]+)}/g;function Hv(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ko(i,e){if(i===e)return!0;const t=Object.keys(i),a=Object.keys(e);for(const u of t){if(!a.includes(u))return!1;const f=i[u],E=e[u];if(I2(f)&&I2(E)){if(!ko(f,E))return!1}else if(f!==E)return!1}for(const u of a)if(!t.includes(u))return!1;return!0}function I2(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(i){const e=[];for(const[t,a]of Object.entries(i))Array.isArray(a)?a.forEach(u=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(u))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function jv(i,e){const t=new Gv(i,e);return t.subscribe.bind(t)}class Gv{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let u;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");qv(e,["next","error","complete"])?u=e:u={next:e,error:t,complete:a},u.next===void 0&&(u.next=I0),u.error===void 0&&(u.error=I0),u.complete===void 0&&(u.complete=I0);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch{}}),this.observers.push(u),f}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qv(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function I0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(i){return i&&i._delegate?i._delegate:i}class Uo{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new bv;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:t});u&&a.resolve(u)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),u=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(f){if(u)return null;throw f}else{if(u)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wv(e))try{this.getOrInitializeService({instanceIdentifier:Lo})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(t);try{const f=this.getOrInitializeService({instanceIdentifier:u});a.resolve(f)}catch{}}}}clearInstance(e=Lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lo){return this.instances.has(e)}getOptions(e=Lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[f,E]of this.instancesDeferred.entries()){const x=this.normalizeInstanceIdentifier(f);a===x&&E.resolve(u)}return u}onInit(e,t){var a;const u=this.normalizeInstanceIdentifier(t),f=(a=this.onInitCallbacks.get(u))!==null&&a!==void 0?a:new Set;f.add(e),this.onInitCallbacks.set(u,f);const E=this.instances.get(u);return E&&e(E,u),()=>{f.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const u of a)try{u(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Xv(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Lo){return this.component?this.component.multipleInstances?e:Lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xv(i){return i===Lo?void 0:i}function Wv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Yv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Dt||(Dt={}));const Kv={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},Zv=Dt.INFO,Jv={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},$v=(i,e,...t)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),u=Jv[e];if(u)console[u](`[${a}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class D1{constructor(e){this.name=e,this._logLevel=Zv,this._logHandler=$v,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...e),this._logHandler(this,Dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...e),this._logHandler(this,Dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...e),this._logHandler(this,Dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...e),this._logHandler(this,Dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...e),this._logHandler(this,Dt.ERROR,...e)}}const eC=(i,e)=>e.some(t=>i instanceof t);let b2,R2;function tC(){return b2||(b2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nC(){return R2||(R2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JE=new WeakMap,$0=new WeakMap,$E=new WeakMap,b0=new WeakMap,O1=new WeakMap;function rC(i){const e=new Promise((t,a)=>{const u=()=>{i.removeEventListener("success",f),i.removeEventListener("error",E)},f=()=>{t(Ja(i.result)),u()},E=()=>{a(i.error),u()};i.addEventListener("success",f),i.addEventListener("error",E)});return e.then(t=>{t instanceof IDBCursor&&JE.set(t,i)}).catch(()=>{}),O1.set(e,i),e}function iC(i){if($0.has(i))return;const e=new Promise((t,a)=>{const u=()=>{i.removeEventListener("complete",f),i.removeEventListener("error",E),i.removeEventListener("abort",E)},f=()=>{t(),u()},E=()=>{a(i.error||new DOMException("AbortError","AbortError")),u()};i.addEventListener("complete",f),i.addEventListener("error",E),i.addEventListener("abort",E)});$0.set(i,e)}let e1={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return $0.get(i);if(e==="objectStoreNames")return i.objectStoreNames||$E.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ja(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function sC(i){e1=i(e1)}function aC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=i.call(R0(this),e,...t);return $E.set(a,e.sort?e.sort():[e]),Ja(a)}:nC().includes(i)?function(...e){return i.apply(R0(this),e),Ja(JE.get(this))}:function(...e){return Ja(i.apply(R0(this),e))}}function oC(i){return typeof i=="function"?aC(i):(i instanceof IDBTransaction&&iC(i),eC(i,tC())?new Proxy(i,e1):i)}function Ja(i){if(i instanceof IDBRequest)return rC(i);if(b0.has(i))return b0.get(i);const e=oC(i);return e!==i&&(b0.set(i,e),O1.set(e,i)),e}const R0=i=>O1.get(i);function lC(i,e,{blocked:t,upgrade:a,blocking:u,terminated:f}={}){const E=indexedDB.open(i,e),x=Ja(E);return a&&E.addEventListener("upgradeneeded",T=>{a(Ja(E.result),T.oldVersion,T.newVersion,Ja(E.transaction),T)}),t&&E.addEventListener("blocked",T=>t(T.oldVersion,T.newVersion,T)),x.then(T=>{f&&T.addEventListener("close",()=>f()),u&&T.addEventListener("versionchange",A=>u(A.oldVersion,A.newVersion,A))}).catch(()=>{}),x}const uC=["get","getKey","getAll","getAllKeys","count"],cC=["put","add","delete","clear"],N0=new Map;function N2(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(N0.get(e))return N0.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,u=cC.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(u||uC.includes(t)))return;const f=async function(E,...x){const T=this.transaction(E,u?"readwrite":"readonly");let A=T.store;return a&&(A=A.index(x.shift())),(await Promise.all([A[t](...x),u&&T.done]))[0]};return N0.set(e,f),f}sC(i=>({...i,get:(e,t,a)=>N2(e,t)||i.get(e,t,a),has:(e,t)=>!!N2(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fC(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function fC(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const t1="@firebase/app",D2="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new D1("@firebase/app"),dC="@firebase/app-compat",gC="@firebase/analytics-compat",mC="@firebase/analytics",pC="@firebase/app-check-compat",yC="@firebase/app-check",EC="@firebase/auth",_C="@firebase/auth-compat",AC="@firebase/database",wC="@firebase/data-connect",xC="@firebase/database-compat",TC="@firebase/functions",vC="@firebase/functions-compat",CC="@firebase/installations",SC="@firebase/installations-compat",IC="@firebase/messaging",bC="@firebase/messaging-compat",RC="@firebase/performance",NC="@firebase/performance-compat",DC="@firebase/remote-config",OC="@firebase/remote-config-compat",MC="@firebase/storage",LC="@firebase/storage-compat",PC="@firebase/firestore",BC="@firebase/vertexai",kC="@firebase/firestore-compat",UC="firebase",VC="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="[DEFAULT]",FC={[t1]:"fire-core",[dC]:"fire-core-compat",[mC]:"fire-analytics",[gC]:"fire-analytics-compat",[yC]:"fire-app-check",[pC]:"fire-app-check-compat",[EC]:"fire-auth",[_C]:"fire-auth-compat",[AC]:"fire-rtdb",[wC]:"fire-data-connect",[xC]:"fire-rtdb-compat",[TC]:"fire-fn",[vC]:"fire-fn-compat",[CC]:"fire-iid",[SC]:"fire-iid-compat",[IC]:"fire-fcm",[bC]:"fire-fcm-compat",[RC]:"fire-perf",[NC]:"fire-perf-compat",[DC]:"fire-rc",[OC]:"fire-rc-compat",[MC]:"fire-gcs",[LC]:"fire-gcs-compat",[PC]:"fire-fst",[kC]:"fire-fst-compat",[BC]:"fire-vertex","fire-js":"fire-js",[UC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=new Map,zC=new Map,r1=new Map;function O2(i,e){try{i.container.addComponent(e)}catch(t){la.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Pl(i){const e=i.name;if(r1.has(e))return la.debug(`There were multiple attempts to register component ${e}.`),!1;r1.set(e,i);for(const t of Xh.values())O2(t,i);for(const t of zC.values())O2(t,i);return!0}function M1(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ts(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$a=new dc("app","Firebase",HC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,t,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $a.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=VC;function e_(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const a=Object.assign({name:n1,automaticDataCollectionEnabled:!1},e),u=a.name;if(typeof u!="string"||!u)throw $a.create("bad-app-name",{appName:String(u)});if(t||(t=KE()),!t)throw $a.create("no-options");const f=Xh.get(u);if(f){if(ko(t,f.options)&&ko(a,f.config))return f;throw $a.create("duplicate-app",{appName:u})}const E=new Qv(u);for(const T of r1.values())E.addComponent(T);const x=new jC(t,a,E);return Xh.set(u,x),x}function t_(i=n1){const e=Xh.get(i);if(!e&&i===n1&&KE())return e_();if(!e)throw $a.create("no-app",{appName:i});return e}function eo(i,e,t){var a;let u=(a=FC[i])!==null&&a!==void 0?a:i;t&&(u+=`-${t}`);const f=u.match(/\s|\//),E=e.match(/\s|\//);if(f||E){const x=[`Unable to register library "${u}" with version "${e}":`];f&&x.push(`library name "${u}" contains illegal characters (whitespace or "/")`),f&&E&&x.push("and"),E&&x.push(`version name "${e}" contains illegal characters (whitespace or "/")`),la.warn(x.join(" "));return}Pl(new Uo(`${u}-version`,()=>({library:u,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="firebase-heartbeat-database",qC=1,tc="firebase-heartbeat-store";let D0=null;function n_(){return D0||(D0=lC(GC,qC,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(tc)}catch(t){console.warn(t)}}}}).catch(i=>{throw $a.create("idb-open",{originalErrorMessage:i.message})})),D0}async function YC(i){try{const t=(await n_()).transaction(tc),a=await t.objectStore(tc).get(r_(i));return await t.done,a}catch(e){if(e instanceof ga)la.warn(e.message);else{const t=$a.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});la.warn(t.message)}}}async function M2(i,e){try{const a=(await n_()).transaction(tc,"readwrite");await a.objectStore(tc).put(e,r_(i)),await a.done}catch(t){if(t instanceof ga)la.warn(t.message);else{const a=$a.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});la.warn(a.message)}}}function r_(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=1024,WC=30;class QC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ZC(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=L2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(E=>E.date===f))return;if(this._heartbeatsCache.heartbeats.push({date:f,agent:u}),this._heartbeatsCache.heartbeats.length>WC){const E=JC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(E,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){la.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=L2(),{heartbeatsToSend:a,unsentEntries:u}=KC(this._heartbeatsCache.heartbeats),f=Yh(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}catch(t){return la.warn(t),""}}}function L2(){return new Date().toISOString().substring(0,10)}function KC(i,e=XC){const t=[];let a=i.slice();for(const u of i){const f=t.find(E=>E.agent===u.agent);if(f){if(f.dates.push(u.date),P2(t)>e){f.dates.pop();break}}else if(t.push({agent:u.agent,dates:[u.date]}),P2(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class ZC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kv()?Uv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await YC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const u=await this.read();return M2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:u.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const u=await this.read();return M2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...e.heartbeats]})}else return}}function P2(i){return Yh(JSON.stringify({version:2,heartbeats:i})).length}function JC(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let a=1;a<i.length;a++)i[a].date<t&&(t=i[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(i){Pl(new Uo("platform-logger",e=>new hC(e),"PRIVATE")),Pl(new Uo("heartbeat",e=>new QC(e),"PRIVATE")),eo(t1,D2,i),eo(t1,D2,"esm2017"),eo("fire-js","")}$C("");var B2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var to,i_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(H,F){function L(){}L.prototype=F.prototype,H.D=F.prototype,H.prototype=new L,H.prototype.constructor=H,H.C=function(X,Z,Q){for(var G=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)G[ft-2]=arguments[ft];return F.prototype[Z].apply(X,G)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,t),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(H,F,L){L||(L=0);var X=Array(16);if(typeof F=="string")for(var Z=0;16>Z;++Z)X[Z]=F.charCodeAt(L++)|F.charCodeAt(L++)<<8|F.charCodeAt(L++)<<16|F.charCodeAt(L++)<<24;else for(Z=0;16>Z;++Z)X[Z]=F[L++]|F[L++]<<8|F[L++]<<16|F[L++]<<24;F=H.g[0],L=H.g[1],Z=H.g[2];var Q=H.g[3],G=F+(Q^L&(Z^Q))+X[0]+3614090360&4294967295;F=L+(G<<7&4294967295|G>>>25),G=Q+(Z^F&(L^Z))+X[1]+3905402710&4294967295,Q=F+(G<<12&4294967295|G>>>20),G=Z+(L^Q&(F^L))+X[2]+606105819&4294967295,Z=Q+(G<<17&4294967295|G>>>15),G=L+(F^Z&(Q^F))+X[3]+3250441966&4294967295,L=Z+(G<<22&4294967295|G>>>10),G=F+(Q^L&(Z^Q))+X[4]+4118548399&4294967295,F=L+(G<<7&4294967295|G>>>25),G=Q+(Z^F&(L^Z))+X[5]+1200080426&4294967295,Q=F+(G<<12&4294967295|G>>>20),G=Z+(L^Q&(F^L))+X[6]+2821735955&4294967295,Z=Q+(G<<17&4294967295|G>>>15),G=L+(F^Z&(Q^F))+X[7]+4249261313&4294967295,L=Z+(G<<22&4294967295|G>>>10),G=F+(Q^L&(Z^Q))+X[8]+1770035416&4294967295,F=L+(G<<7&4294967295|G>>>25),G=Q+(Z^F&(L^Z))+X[9]+2336552879&4294967295,Q=F+(G<<12&4294967295|G>>>20),G=Z+(L^Q&(F^L))+X[10]+4294925233&4294967295,Z=Q+(G<<17&4294967295|G>>>15),G=L+(F^Z&(Q^F))+X[11]+2304563134&4294967295,L=Z+(G<<22&4294967295|G>>>10),G=F+(Q^L&(Z^Q))+X[12]+1804603682&4294967295,F=L+(G<<7&4294967295|G>>>25),G=Q+(Z^F&(L^Z))+X[13]+4254626195&4294967295,Q=F+(G<<12&4294967295|G>>>20),G=Z+(L^Q&(F^L))+X[14]+2792965006&4294967295,Z=Q+(G<<17&4294967295|G>>>15),G=L+(F^Z&(Q^F))+X[15]+1236535329&4294967295,L=Z+(G<<22&4294967295|G>>>10),G=F+(Z^Q&(L^Z))+X[1]+4129170786&4294967295,F=L+(G<<5&4294967295|G>>>27),G=Q+(L^Z&(F^L))+X[6]+3225465664&4294967295,Q=F+(G<<9&4294967295|G>>>23),G=Z+(F^L&(Q^F))+X[11]+643717713&4294967295,Z=Q+(G<<14&4294967295|G>>>18),G=L+(Q^F&(Z^Q))+X[0]+3921069994&4294967295,L=Z+(G<<20&4294967295|G>>>12),G=F+(Z^Q&(L^Z))+X[5]+3593408605&4294967295,F=L+(G<<5&4294967295|G>>>27),G=Q+(L^Z&(F^L))+X[10]+38016083&4294967295,Q=F+(G<<9&4294967295|G>>>23),G=Z+(F^L&(Q^F))+X[15]+3634488961&4294967295,Z=Q+(G<<14&4294967295|G>>>18),G=L+(Q^F&(Z^Q))+X[4]+3889429448&4294967295,L=Z+(G<<20&4294967295|G>>>12),G=F+(Z^Q&(L^Z))+X[9]+568446438&4294967295,F=L+(G<<5&4294967295|G>>>27),G=Q+(L^Z&(F^L))+X[14]+3275163606&4294967295,Q=F+(G<<9&4294967295|G>>>23),G=Z+(F^L&(Q^F))+X[3]+4107603335&4294967295,Z=Q+(G<<14&4294967295|G>>>18),G=L+(Q^F&(Z^Q))+X[8]+1163531501&4294967295,L=Z+(G<<20&4294967295|G>>>12),G=F+(Z^Q&(L^Z))+X[13]+2850285829&4294967295,F=L+(G<<5&4294967295|G>>>27),G=Q+(L^Z&(F^L))+X[2]+4243563512&4294967295,Q=F+(G<<9&4294967295|G>>>23),G=Z+(F^L&(Q^F))+X[7]+1735328473&4294967295,Z=Q+(G<<14&4294967295|G>>>18),G=L+(Q^F&(Z^Q))+X[12]+2368359562&4294967295,L=Z+(G<<20&4294967295|G>>>12),G=F+(L^Z^Q)+X[5]+4294588738&4294967295,F=L+(G<<4&4294967295|G>>>28),G=Q+(F^L^Z)+X[8]+2272392833&4294967295,Q=F+(G<<11&4294967295|G>>>21),G=Z+(Q^F^L)+X[11]+1839030562&4294967295,Z=Q+(G<<16&4294967295|G>>>16),G=L+(Z^Q^F)+X[14]+4259657740&4294967295,L=Z+(G<<23&4294967295|G>>>9),G=F+(L^Z^Q)+X[1]+2763975236&4294967295,F=L+(G<<4&4294967295|G>>>28),G=Q+(F^L^Z)+X[4]+1272893353&4294967295,Q=F+(G<<11&4294967295|G>>>21),G=Z+(Q^F^L)+X[7]+4139469664&4294967295,Z=Q+(G<<16&4294967295|G>>>16),G=L+(Z^Q^F)+X[10]+3200236656&4294967295,L=Z+(G<<23&4294967295|G>>>9),G=F+(L^Z^Q)+X[13]+681279174&4294967295,F=L+(G<<4&4294967295|G>>>28),G=Q+(F^L^Z)+X[0]+3936430074&4294967295,Q=F+(G<<11&4294967295|G>>>21),G=Z+(Q^F^L)+X[3]+3572445317&4294967295,Z=Q+(G<<16&4294967295|G>>>16),G=L+(Z^Q^F)+X[6]+76029189&4294967295,L=Z+(G<<23&4294967295|G>>>9),G=F+(L^Z^Q)+X[9]+3654602809&4294967295,F=L+(G<<4&4294967295|G>>>28),G=Q+(F^L^Z)+X[12]+3873151461&4294967295,Q=F+(G<<11&4294967295|G>>>21),G=Z+(Q^F^L)+X[15]+530742520&4294967295,Z=Q+(G<<16&4294967295|G>>>16),G=L+(Z^Q^F)+X[2]+3299628645&4294967295,L=Z+(G<<23&4294967295|G>>>9),G=F+(Z^(L|~Q))+X[0]+4096336452&4294967295,F=L+(G<<6&4294967295|G>>>26),G=Q+(L^(F|~Z))+X[7]+1126891415&4294967295,Q=F+(G<<10&4294967295|G>>>22),G=Z+(F^(Q|~L))+X[14]+2878612391&4294967295,Z=Q+(G<<15&4294967295|G>>>17),G=L+(Q^(Z|~F))+X[5]+4237533241&4294967295,L=Z+(G<<21&4294967295|G>>>11),G=F+(Z^(L|~Q))+X[12]+1700485571&4294967295,F=L+(G<<6&4294967295|G>>>26),G=Q+(L^(F|~Z))+X[3]+2399980690&4294967295,Q=F+(G<<10&4294967295|G>>>22),G=Z+(F^(Q|~L))+X[10]+4293915773&4294967295,Z=Q+(G<<15&4294967295|G>>>17),G=L+(Q^(Z|~F))+X[1]+2240044497&4294967295,L=Z+(G<<21&4294967295|G>>>11),G=F+(Z^(L|~Q))+X[8]+1873313359&4294967295,F=L+(G<<6&4294967295|G>>>26),G=Q+(L^(F|~Z))+X[15]+4264355552&4294967295,Q=F+(G<<10&4294967295|G>>>22),G=Z+(F^(Q|~L))+X[6]+2734768916&4294967295,Z=Q+(G<<15&4294967295|G>>>17),G=L+(Q^(Z|~F))+X[13]+1309151649&4294967295,L=Z+(G<<21&4294967295|G>>>11),G=F+(Z^(L|~Q))+X[4]+4149444226&4294967295,F=L+(G<<6&4294967295|G>>>26),G=Q+(L^(F|~Z))+X[11]+3174756917&4294967295,Q=F+(G<<10&4294967295|G>>>22),G=Z+(F^(Q|~L))+X[2]+718787259&4294967295,Z=Q+(G<<15&4294967295|G>>>17),G=L+(Q^(Z|~F))+X[9]+3951481745&4294967295,H.g[0]=H.g[0]+F&4294967295,H.g[1]=H.g[1]+(Z+(G<<21&4294967295|G>>>11))&4294967295,H.g[2]=H.g[2]+Z&4294967295,H.g[3]=H.g[3]+Q&4294967295}a.prototype.u=function(H,F){F===void 0&&(F=H.length);for(var L=F-this.blockSize,X=this.B,Z=this.h,Q=0;Q<F;){if(Z==0)for(;Q<=L;)u(this,H,Q),Q+=this.blockSize;if(typeof H=="string"){for(;Q<F;)if(X[Z++]=H.charCodeAt(Q++),Z==this.blockSize){u(this,X),Z=0;break}}else for(;Q<F;)if(X[Z++]=H[Q++],Z==this.blockSize){u(this,X),Z=0;break}}this.h=Z,this.o+=F},a.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var F=1;F<H.length-8;++F)H[F]=0;var L=8*this.o;for(F=H.length-8;F<H.length;++F)H[F]=L&255,L/=256;for(this.u(H),H=Array(16),F=L=0;4>F;++F)for(var X=0;32>X;X+=8)H[L++]=this.g[F]>>>X&255;return H};function f(H,F){var L=x;return Object.prototype.hasOwnProperty.call(L,H)?L[H]:L[H]=F(H)}function E(H,F){this.h=F;for(var L=[],X=!0,Z=H.length-1;0<=Z;Z--){var Q=H[Z]|0;X&&Q==F||(L[Z]=Q,X=!1)}this.g=L}var x={};function T(H){return-128<=H&&128>H?f(H,function(F){return new E([F|0],0>F?-1:0)}):new E([H|0],0>H?-1:0)}function A(H){if(isNaN(H)||!isFinite(H))return R;if(0>H)return te(A(-H));for(var F=[],L=1,X=0;H>=L;X++)F[X]=H/L|0,L*=4294967296;return new E(F,0)}function I(H,F){if(H.length==0)throw Error("number format error: empty string");if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(H.charAt(0)=="-")return te(I(H.substring(1),F));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=A(Math.pow(F,8)),X=R,Z=0;Z<H.length;Z+=8){var Q=Math.min(8,H.length-Z),G=parseInt(H.substring(Z,Z+Q),F);8>Q?(Q=A(Math.pow(F,Q)),X=X.j(Q).add(A(G))):(X=X.j(L),X=X.add(A(G)))}return X}var R=T(0),B=T(1),j=T(16777216);i=E.prototype,i.m=function(){if($(this))return-te(this).m();for(var H=0,F=1,L=0;L<this.g.length;L++){var X=this.i(L);H+=(0<=X?X:4294967296+X)*F,F*=4294967296}return H},i.toString=function(H){if(H=H||10,2>H||36<H)throw Error("radix out of range: "+H);if(q(this))return"0";if($(this))return"-"+te(this).toString(H);for(var F=A(Math.pow(H,6)),L=this,X="";;){var Z=De(L,F).g;L=ie(L,Z.j(F));var Q=((0<L.g.length?L.g[0]:L.h)>>>0).toString(H);if(L=Z,q(L))return Q+X;for(;6>Q.length;)Q="0"+Q;X=Q+X}},i.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h};function q(H){if(H.h!=0)return!1;for(var F=0;F<H.g.length;F++)if(H.g[F]!=0)return!1;return!0}function $(H){return H.h==-1}i.l=function(H){return H=ie(this,H),$(H)?-1:q(H)?0:1};function te(H){for(var F=H.g.length,L=[],X=0;X<F;X++)L[X]=~H.g[X];return new E(L,~H.h).add(B)}i.abs=function(){return $(this)?te(this):this},i.add=function(H){for(var F=Math.max(this.g.length,H.g.length),L=[],X=0,Z=0;Z<=F;Z++){var Q=X+(this.i(Z)&65535)+(H.i(Z)&65535),G=(Q>>>16)+(this.i(Z)>>>16)+(H.i(Z)>>>16);X=G>>>16,Q&=65535,G&=65535,L[Z]=G<<16|Q}return new E(L,L[L.length-1]&-2147483648?-1:0)};function ie(H,F){return H.add(te(F))}i.j=function(H){if(q(this)||q(H))return R;if($(this))return $(H)?te(this).j(te(H)):te(te(this).j(H));if($(H))return te(this.j(te(H)));if(0>this.l(j)&&0>H.l(j))return A(this.m()*H.m());for(var F=this.g.length+H.g.length,L=[],X=0;X<2*F;X++)L[X]=0;for(X=0;X<this.g.length;X++)for(var Z=0;Z<H.g.length;Z++){var Q=this.i(X)>>>16,G=this.i(X)&65535,ft=H.i(Z)>>>16,ce=H.i(Z)&65535;L[2*X+2*Z]+=G*ce,me(L,2*X+2*Z),L[2*X+2*Z+1]+=Q*ce,me(L,2*X+2*Z+1),L[2*X+2*Z+1]+=G*ft,me(L,2*X+2*Z+1),L[2*X+2*Z+2]+=Q*ft,me(L,2*X+2*Z+2)}for(X=0;X<F;X++)L[X]=L[2*X+1]<<16|L[2*X];for(X=F;X<2*F;X++)L[X]=0;return new E(L,0)};function me(H,F){for(;(H[F]&65535)!=H[F];)H[F+1]+=H[F]>>>16,H[F]&=65535,F++}function ue(H,F){this.g=H,this.h=F}function De(H,F){if(q(F))throw Error("division by zero");if(q(H))return new ue(R,R);if($(H))return F=De(te(H),F),new ue(te(F.g),te(F.h));if($(F))return F=De(H,te(F)),new ue(te(F.g),F.h);if(30<H.g.length){if($(H)||$(F))throw Error("slowDivide_ only works with positive integers.");for(var L=B,X=F;0>=X.l(H);)L=Ve(L),X=Ve(X);var Z=ke(L,1),Q=ke(X,1);for(X=ke(X,2),L=ke(L,2);!q(X);){var G=Q.add(X);0>=G.l(H)&&(Z=Z.add(L),Q=G),X=ke(X,1),L=ke(L,1)}return F=ie(H,Z.j(F)),new ue(Z,F)}for(Z=R;0<=H.l(F);){for(L=Math.max(1,Math.floor(H.m()/F.m())),X=Math.ceil(Math.log(L)/Math.LN2),X=48>=X?1:Math.pow(2,X-48),Q=A(L),G=Q.j(F);$(G)||0<G.l(H);)L-=X,Q=A(L),G=Q.j(F);q(Q)&&(Q=B),Z=Z.add(Q),H=ie(H,G)}return new ue(Z,H)}i.A=function(H){return De(this,H).h},i.and=function(H){for(var F=Math.max(this.g.length,H.g.length),L=[],X=0;X<F;X++)L[X]=this.i(X)&H.i(X);return new E(L,this.h&H.h)},i.or=function(H){for(var F=Math.max(this.g.length,H.g.length),L=[],X=0;X<F;X++)L[X]=this.i(X)|H.i(X);return new E(L,this.h|H.h)},i.xor=function(H){for(var F=Math.max(this.g.length,H.g.length),L=[],X=0;X<F;X++)L[X]=this.i(X)^H.i(X);return new E(L,this.h^H.h)};function Ve(H){for(var F=H.g.length+1,L=[],X=0;X<F;X++)L[X]=H.i(X)<<1|H.i(X-1)>>>31;return new E(L,H.h)}function ke(H,F){var L=F>>5;F%=32;for(var X=H.g.length-L,Z=[],Q=0;Q<X;Q++)Z[Q]=0<F?H.i(Q+L)>>>F|H.i(Q+L+1)<<32-F:H.i(Q+L);return new E(Z,H.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,i_=a,E.prototype.add=E.prototype.add,E.prototype.multiply=E.prototype.j,E.prototype.modulo=E.prototype.A,E.prototype.compare=E.prototype.l,E.prototype.toNumber=E.prototype.m,E.prototype.toString=E.prototype.toString,E.prototype.getBits=E.prototype.i,E.fromNumber=A,E.fromString=I,to=E}).apply(typeof B2<"u"?B2:typeof self<"u"?self:typeof window<"u"?window:{});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s_,qu,a_,Ph,i1,o_,l_,u_;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,S,N){return y==Array.prototype||y==Object.prototype||(y[S]=N.value),y};function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof vh=="object"&&vh];for(var S=0;S<y.length;++S){var N=y[S];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var a=t(this);function u(y,S){if(S)e:{var N=a;y=y.split(".");for(var U=0;U<y.length-1;U++){var se=y[U];if(!(se in N))break e;N=N[se]}y=y[y.length-1],U=N[y],S=S(U),S!=U&&S!=null&&e(N,y,{configurable:!0,writable:!0,value:S})}}function f(y,S){y instanceof String&&(y+="");var N=0,U=!1,se={next:function(){if(!U&&N<y.length){var de=N++;return{value:S(de,y[de]),done:!1}}return U=!0,{done:!0,value:void 0}}};return se[Symbol.iterator]=function(){return se},se}u("Array.prototype.values",function(y){return y||function(){return f(this,function(S,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var E=E||{},x=this||self;function T(y){var S=typeof y;return S=S!="object"?S:y?Array.isArray(y)?"array":S:"null",S=="array"||S=="object"&&typeof y.length=="number"}function A(y){var S=typeof y;return S=="object"&&y!=null||S=="function"}function I(y,S,N){return y.call.apply(y.bind,arguments)}function R(y,S,N){if(!y)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(se,U),y.apply(S,se)}}return function(){return y.apply(S,arguments)}}function B(y,S,N){return B=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:R,B.apply(null,arguments)}function j(y,S){var N=Array.prototype.slice.call(arguments,1);return function(){var U=N.slice();return U.push.apply(U,arguments),y.apply(this,U)}}function q(y,S){function N(){}N.prototype=S.prototype,y.aa=S.prototype,y.prototype=new N,y.prototype.constructor=y,y.Qb=function(U,se,de){for(var Le=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)Le[bt-2]=arguments[bt];return S.prototype[se].apply(U,Le)}}function $(y){const S=y.length;if(0<S){const N=Array(S);for(let U=0;U<S;U++)N[U]=y[U];return N}return[]}function te(y,S){for(let N=1;N<arguments.length;N++){const U=arguments[N];if(T(U)){const se=y.length||0,de=U.length||0;y.length=se+de;for(let Le=0;Le<de;Le++)y[se+Le]=U[Le]}else y.push(U)}}class ie{constructor(S,N){this.i=S,this.j=N,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function me(y){return/^[\s\xa0]*$/.test(y)}function ue(){var y=x.navigator;return y&&(y=y.userAgent)?y:""}function De(y){return De[" "](y),y}De[" "]=function(){};var Ve=ue().indexOf("Gecko")!=-1&&!(ue().toLowerCase().indexOf("webkit")!=-1&&ue().indexOf("Edge")==-1)&&!(ue().indexOf("Trident")!=-1||ue().indexOf("MSIE")!=-1)&&ue().indexOf("Edge")==-1;function ke(y,S,N){for(const U in y)S.call(N,y[U],U,y)}function H(y,S){for(const N in y)S.call(void 0,y[N],N,y)}function F(y){const S={};for(const N in y)S[N]=y[N];return S}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(y,S){let N,U;for(let se=1;se<arguments.length;se++){U=arguments[se];for(N in U)y[N]=U[N];for(let de=0;de<L.length;de++)N=L[de],Object.prototype.hasOwnProperty.call(U,N)&&(y[N]=U[N])}}function Z(y){var S=1;y=y.split(":");const N=[];for(;0<S&&y.length;)N.push(y.shift()),S--;return y.length&&N.push(y.join(":")),N}function Q(y){x.setTimeout(()=>{throw y},0)}function G(){var y=Et;let S=null;return y.g&&(S=y.g,y.g=y.g.next,y.g||(y.h=null),S.next=null),S}class ft{constructor(){this.h=this.g=null}add(S,N){const U=ce.get();U.set(S,N),this.h?this.h.next=U:this.g=U,this.h=U}}var ce=new ie(()=>new Se,y=>y.reset());class Se{constructor(){this.next=this.g=this.h=null}set(S,N){this.h=S,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,Ye=!1,Et=new ft,J=()=>{const y=x.Promise.resolve(void 0);Oe=()=>{y.then(Ie)}};var Ie=()=>{for(var y;y=G();){try{y.h.call(y.g)}catch(N){Q(N)}var S=ce;S.j(y),100>S.h&&(S.h++,y.next=S.g,S.g=y)}Ye=!1};function Fe(){this.s=this.s,this.C=this.C}Fe.prototype.s=!1,Fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ue(y,S){this.type=y,this.g=this.target=S,this.defaultPrevented=!1}Ue.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!x.addEventListener||!Object.defineProperty)return!1;var y=!1,S=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const N=()=>{};x.addEventListener("test",N,S),x.removeEventListener("test",N,S)}catch{}return y}();function lt(y,S){if(Ue.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var N=this.type=y.type,U=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=S,S=y.relatedTarget){if(Ve){e:{try{De(S.nodeName);var se=!0;break e}catch{}se=!1}se||(S=null)}}else N=="mouseover"?S=y.fromElement:N=="mouseout"&&(S=y.toElement);this.relatedTarget=S,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Ne[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&lt.aa.h.call(this)}}q(lt,Ue);var Ne={2:"touch",3:"pen",4:"mouse"};lt.prototype.h=function(){lt.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var xn="closure_listenable_"+(1e6*Math.random()|0),et=0;function rn(y,S,N,U,se){this.listener=y,this.proxy=null,this.src=S,this.type=N,this.capture=!!U,this.ha=se,this.key=++et,this.da=this.fa=!1}function Mt(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Qt(y){this.src=y,this.g={},this.h=0}Qt.prototype.add=function(y,S,N,U,se){var de=y.toString();y=this.g[de],y||(y=this.g[de]=[],this.h++);var Le=ut(y,S,U,se);return-1<Le?(S=y[Le],N||(S.fa=!1)):(S=new rn(S,this.src,de,!!U,se),S.fa=N,y.push(S)),S};function $r(y,S){var N=S.type;if(N in y.g){var U=y.g[N],se=Array.prototype.indexOf.call(U,S,void 0),de;(de=0<=se)&&Array.prototype.splice.call(U,se,1),de&&(Mt(S),y.g[N].length==0&&(delete y.g[N],y.h--))}}function ut(y,S,N,U){for(var se=0;se<y.length;++se){var de=y[se];if(!de.da&&de.listener==S&&de.capture==!!N&&de.ha==U)return se}return-1}var zr="closure_lm_"+(1e6*Math.random()|0),ir={};function Hr(y,S,N,U,se){if(Array.isArray(S)){for(var de=0;de<S.length;de++)Hr(y,S[de],N,U,se);return null}return N=ya(N),y&&y[xn]?y.K(S,N,A(U)?!!U.capture:!1,se):bn(y,S,N,!1,U,se)}function bn(y,S,N,U,se,de){if(!S)throw Error("Invalid event type");var Le=A(se)?!!se.capture:!!se,bt=pa(y);if(bt||(y[zr]=bt=new Qt(y)),N=bt.add(S,N,U,Le,de),N.proxy)return N;if(U=Vt(),N.proxy=U,U.src=y,U.listener=N,y.addEventListener)Pe||(se=Le),se===void 0&&(se=!1),y.addEventListener(S.toString(),U,se);else if(y.attachEvent)y.attachEvent(ze(S.toString()),U);else if(y.addListener&&y.removeListener)y.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Vt(){function y(N){return S.call(y.src,y.listener,N)}const S=ma;return y}function pt(y,S,N,U,se){if(Array.isArray(S))for(var de=0;de<S.length;de++)pt(y,S[de],N,U,se);else U=A(U)?!!U.capture:!!U,N=ya(N),y&&y[xn]?(y=y.i,S=String(S).toString(),S in y.g&&(de=y.g[S],N=ut(de,N,U,se),-1<N&&(Mt(de[N]),Array.prototype.splice.call(de,N,1),de.length==0&&(delete y.g[S],y.h--)))):y&&(y=pa(y))&&(S=y.g[S.toString()],y=-1,S&&(y=ut(S,N,U,se)),(N=-1<y?S[y]:null)&&Ri(N))}function Ri(y){if(typeof y!="number"&&y&&!y.da){var S=y.src;if(S&&S[xn])$r(S.i,y);else{var N=y.type,U=y.proxy;S.removeEventListener?S.removeEventListener(N,U,y.capture):S.detachEvent?S.detachEvent(ze(N),U):S.addListener&&S.removeListener&&S.removeListener(U),(N=pa(S))?($r(N,y),N.h==0&&(N.src=null,S[zr]=null)):Mt(y)}}}function ze(y){return y in ir?ir[y]:ir[y]="on"+y}function ma(y,S){if(y.da)y=!0;else{S=new lt(S,this);var N=y.listener,U=y.ha||y.src;y.fa&&Ri(y),y=N.call(U,S)}return y}function pa(y){return y=y[zr],y instanceof Qt?y:null}var Tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ya(y){return typeof y=="function"?y:(y[Tn]||(y[Tn]=function(S){return y.handleEvent(S)}),y[Tn])}function Wt(){Fe.call(this),this.i=new Qt(this),this.M=this,this.F=null}q(Wt,Fe),Wt.prototype[xn]=!0,Wt.prototype.removeEventListener=function(y,S,N,U){pt(this,y,S,N,U)};function Hn(y,S){var N,U=y.F;if(U)for(N=[];U;U=U.F)N.push(U);if(y=y.M,U=S.type||S,typeof S=="string")S=new Ue(S,y);else if(S instanceof Ue)S.target=S.target||y;else{var se=S;S=new Ue(U,y),X(S,se)}if(se=!0,N)for(var de=N.length-1;0<=de;de--){var Le=S.g=N[de];se=fr(Le,U,!0,S)&&se}if(Le=S.g=y,se=fr(Le,U,!0,S)&&se,se=fr(Le,U,!1,S)&&se,N)for(de=0;de<N.length;de++)Le=S.g=N[de],se=fr(Le,U,!1,S)&&se}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var y=this.i,S;for(S in y.g){for(var N=y.g[S],U=0;U<N.length;U++)Mt(N[U]);delete y.g[S],y.h--}}this.F=null},Wt.prototype.K=function(y,S,N,U){return this.i.add(String(y),S,!1,N,U)},Wt.prototype.L=function(y,S,N,U){return this.i.add(String(y),S,!0,N,U)};function fr(y,S,N,U){if(S=y.i.g[String(S)],!S)return!0;S=S.concat();for(var se=!0,de=0;de<S.length;++de){var Le=S[de];if(Le&&!Le.da&&Le.capture==N){var bt=Le.listener,_n=Le.ha||Le.src;Le.fa&&$r(y.i,Le),se=bt.call(_n,U)!==!1&&se}}return se&&!U.defaultPrevented}function Qn(y,S,N){if(typeof y=="function")N&&(y=B(y,N));else if(y&&typeof y.handleEvent=="function")y=B(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:x.setTimeout(y,S||0)}function Ea(y){y.g=Qn(()=>{y.g=null,y.i&&(y.i=!1,Ea(y))},y.l);const S=y.h;y.h=null,y.m.apply(null,S)}class _a extends Fe{constructor(S,N){super(),this.m=S,this.l=N,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Ea(this)}N(){super.N(),this.g&&(x.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(y){Fe.call(this),this.h=y,this.g={}}q(Os,Fe);var Jt=[];function be(y){ke(y.g,function(S,N){this.g.hasOwnProperty(N)&&Ri(S)},y),y.g={}}Os.prototype.N=function(){Os.aa.N.call(this),be(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=x.JSON.stringify,wt=x.JSON.parse,xt=class{stringify(y){return x.JSON.stringify(y,void 0)}parse(y){return x.JSON.parse(y,void 0)}};function Qi(){}Qi.prototype.h=null;function Aa(y){return y.h||(y.h=y.i())}function go(){}var dt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rr(){Ue.call(this,"d")}q(Rr,Ue);function ei(){Ue.call(this,"c")}q(ei,Ue);var jr={},Kn=null;function ls(){return Kn=Kn||new Wt}jr.La="serverreachability";function Ln(y){Ue.call(this,jr.La,y)}q(Ln,Ue);function Gr(y){const S=ls();Hn(S,new Ln(S))}jr.STAT_EVENT="statevent";function Ki(y,S){Ue.call(this,jr.STAT_EVENT,y),this.stat=S}q(Ki,Ue);function Ht(y){const S=ls();Hn(S,new Ki(S,y))}jr.Ma="timingevent";function qo(y,S){Ue.call(this,jr.Ma,y),this.size=S}q(qo,Ue);function Nr(y,S){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return x.setTimeout(function(){y()},S)}function Ni(){this.g=!0}Ni.prototype.xa=function(){this.g=!1};function sr(y,S,N,U,se,de){y.info(function(){if(y.g)if(de)for(var Le="",bt=de.split("&"),_n=0;_n<bt.length;_n++){var Rt=bt[_n].split("=");if(1<Rt.length){var un=Rt[0];Rt=Rt[1];var In=un.split("_");Le=2<=In.length&&In[1]=="type"?Le+(un+"="+Rt+"&"):Le+(un+"=redacted&")}}else Le=null;else Le=de;return"XMLHTTP REQ ("+U+") [attempt "+se+"]: "+S+`
`+N+`
`+Le})}function Di(y,S,N,U,se,de,Le){y.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+se+"]: "+S+`
`+N+`
`+de+" "+Le})}function jn(y,S,N,U){y.info(function(){return"XMLHTTP TEXT ("+S+"): "+mn(y,N)+(U?" "+U:"")})}function Be(y,S){y.info(function(){return"TIMEOUT: "+S})}Ni.prototype.info=function(){};function mn(y,S){if(!y.g)return S;if(!S)return null;try{var N=JSON.parse(S);if(N){for(y=0;y<N.length;y++)if(Array.isArray(N[y])){var U=N[y];if(!(2>U.length)){var se=U[1];if(Array.isArray(se)&&!(1>se.length)){var de=se[0];if(de!="noop"&&de!="stop"&&de!="close")for(var Le=1;Le<se.length;Le++)se[Le]=""}}}}return gn(N)}catch{return S}}var Rn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function Zi(){}q(Zi,Qi),Zi.prototype.g=function(){return new XMLHttpRequest},Zi.prototype.i=function(){return{}},ti=new Zi;function qr(y,S,N,U){this.j=y,this.i=S,this.l=N,this.R=U||1,this.U=new Os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dr}function Dr(){this.i=null,this.g="",this.h=!1}var us={},Ms={};function Pn(y,S,N){y.L=1,y.v=hn(rt(S)),y.m=N,y.P=!0,pn(y,null)}function pn(y,S){y.F=Date.now(),jt(y),y.A=rt(y.v);var N=y.A,U=y.R;Array.isArray(U)||(U=[String(U)]),sn(N.i,"t",U),y.C=0,N=y.j.J,y.h=new Dr,y.g=Ko(y.j,N?S:null,!y.m),0<y.O&&(y.M=new _a(B(y.Y,y,y.g),y.O)),S=y.U,N=y.g,U=y.ca;var se="readystatechange";Array.isArray(se)||(se&&(Jt[0]=se.toString()),se=Jt);for(var de=0;de<se.length;de++){var Le=Hr(N,se[de],U||S.handleEvent,!1,S.h||S);if(!Le)break;S.g[Le.key]=Le}S=y.H?F(y.H):{},y.m?(y.u||(y.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,S)):(y.u="GET",y.g.ea(y.A,y.u,null,S)),Gr(),sr(y.i,y.u,y.A,y.l,y.R,y.m)}qr.prototype.ca=function(y){y=y.target;const S=this.M;S&&ai(y)==3?S.j():this.Y(y)},qr.prototype.Y=function(y){try{if(y==this.g)e:{const In=ai(this.g);var S=this.g.Ba();const kn=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||Xo(this.g)))){this.J||In!=4||S==7||(S==8||0>=kn?Gr(3):Gr(2)),_e(this);var N=this.g.Z();this.X=N;t:if(Ft(this)){var U=Xo(this.g);y="";var se=U.length,de=ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vt(this),Yr(this);var Le="";break t}this.h.i=new x.TextDecoder}for(S=0;S<se;S++)this.h.h=!0,y+=this.h.i.decode(U[S],{stream:!(de&&S==se-1)});U.length=0,this.h.g+=y,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=N==200,Di(this.i,this.u,this.A,this.l,this.R,In,N),this.o){if(this.T&&!this.K){t:{if(this.g){var bt,_n=this.g;if((bt=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!me(bt)){var Rt=bt;break t}}Rt=null}if(N=Rt)jn(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zn(this,N);else{this.o=!1,this.s=3,Ht(12),vt(this),Yr(this);break e}}if(this.P){N=!0;let Jn;for(;!this.J&&this.C<Le.length;)if(Jn=Ji(this,Le),Jn==Ms){In==4&&(this.s=4,Ht(14),N=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Jn==us){this.s=4,Ht(15),jn(this.i,this.l,Le,"[Invalid Chunk]"),N=!1;break}else jn(this.i,this.l,Jn,null),Zn(this,Jn);if(Ft(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||Le.length!=0||this.h.h||(this.s=1,Ht(16),N=!1),this.o=this.o&&N,!N)jn(this.i,this.l,Le,"[Invalid Chunked Response]"),vt(this),Yr(this);else if(0<Le.length&&!this.W){this.W=!0;var un=this.j;un.g==this&&un.ba&&!un.M&&(un.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),ns(un),un.M=!0,Ht(11))}}else jn(this.i,this.l,Le,null),Zn(this,Le);In==4&&vt(this),this.o&&!this.J&&(In==4?ln(this.j,this):(this.o=!1,jt(this)))}else Gt(this.g),N==400&&0<Le.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),vt(this),Yr(this)}}}catch{}finally{}};function Ft(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Ji(y,S){var N=y.C,U=S.indexOf(`
`,N);return U==-1?Ms:(N=Number(S.substring(N,U)),isNaN(N)?us:(U+=1,U+N>S.length?Ms:(S=S.slice(U,U+N),y.C=U+N,S)))}qr.prototype.cancel=function(){this.J=!0,vt(this)};function jt(y){y.S=Date.now()+y.I,Ls(y,y.I)}function Ls(y,S){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Nr(B(y.ba,y),S)}function _e(y){y.B&&(x.clearTimeout(y.B),y.B=null)}qr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Be(this.i,this.A),this.L!=2&&(Gr(),Ht(17)),vt(this),this.s=2,Yr(this)):Ls(this,this.S-y)};function Yr(y){y.j.G==0||y.J||ln(y.j,y)}function vt(y){_e(y);var S=y.M;S&&typeof S.ma=="function"&&S.ma(),y.M=null,be(y.U),y.g&&(S=y.g,y.g=null,S.abort(),S.ma())}function Zn(y,S){try{var N=y.j;if(N.G!=0&&(N.g==y||Oi(N.h,y))){if(!y.K&&Oi(N.h,y)&&N.G==3){try{var U=N.Da.g.parse(S)}catch{U=null}if(Array.isArray(U)&&U.length==3){var se=U;if(se[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<y.F)gs(N),xa(N);else break e;po(N),Ht(18)}}else N.za=se[1],0<N.za-N.T&&37500>se[2]&&N.F&&N.v==0&&!N.C&&(N.C=Nr(B(N.Za,N),6e3));if(1>=yt(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else _r(N,11)}else if((y.K||N.g==y)&&gs(N),!me(S))for(se=N.Da.g.parse(S),S=0;S<se.length;S++){let Rt=se[S];if(N.T=Rt[0],Rt=Rt[1],N.G==2)if(Rt[0]=="c"){N.K=Rt[1],N.ia=Rt[2];const un=Rt[3];un!=null&&(N.la=un,N.j.info("VER="+N.la));const In=Rt[4];In!=null&&(N.Aa=In,N.j.info("SVER="+N.Aa));const kn=Rt[5];kn!=null&&typeof kn=="number"&&0<kn&&(U=1.5*kn,N.L=U,N.j.info("backChannelRequestTimeoutMs_="+U)),U=N;const Jn=y.g;if(Jn){const Yn=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yn){var de=U.h;de.g||Yn.indexOf("spdy")==-1&&Yn.indexOf("quic")==-1&&Yn.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(Mi(de,de.h),de.h=null))}if(U.D){const yo=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(U.ya=yo,Me(U.I,U.D,yo))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-y.F,N.j.info("Handshake RTT: "+N.R+"ms")),U=N;var Le=y;if(U.qa=Qe(U,U.J?U.ia:null,U.W),Le.K){Or(U.h,Le);var bt=Le,_n=U.L;_n&&(bt.I=_n),bt.B&&(_e(bt),jt(bt)),U.g=Le}else Qo(U);0<N.i.length&&at(N)}else Rt[0]!="stop"&&Rt[0]!="close"||_r(N,7);else N.G==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?_r(N,7):oi(N):Rt[0]!="noop"&&N.l&&N.l.ta(Rt),N.v=0)}}Gr(4)}catch{}}var eu=class{constructor(y,S){this.g=y,this.map=S}};function It(y){this.l=y||10,x.PerformanceNavigationTiming?(y=x.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(x.chrome&&x.chrome.loadTimes&&x.chrome.loadTimes()&&x.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ct(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function yt(y){return y.h?1:y.g?y.g.size:0}function Oi(y,S){return y.h?y.h==S:y.g?y.g.has(S):!1}function Mi(y,S){y.g?y.g.add(S):y.h=S}function Or(y,S){y.h&&y.h==S?y.h=null:y.g&&y.g.has(S)&&y.g.delete(S)}It.prototype.cancel=function(){if(this.i=Lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Lt(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let S=y.i;for(const N of y.g.values())S=S.concat(N.D);return S}return $(y.i)}function mi(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(T(y)){for(var S=[],N=y.length,U=0;U<N;U++)S.push(y[U]);return S}S=[],N=0;for(U in y)S[N++]=y[U];return S}function tu(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(T(y)||typeof y=="string"){var S=[];y=y.length;for(var N=0;N<y;N++)S.push(N);return S}S=[],N=0;for(const U in y)S[N++]=U;return S}}}function $t(y,S){if(y.forEach&&typeof y.forEach=="function")y.forEach(S,void 0);else if(T(y)||typeof y=="string")Array.prototype.forEach.call(y,S,void 0);else for(var N=tu(y),U=mi(y),se=U.length,de=0;de<se;de++)S.call(void 0,U[de],N&&N[de],y)}var ni=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wa(y,S){if(y){y=y.split("&");for(var N=0;N<y.length;N++){var U=y[N].indexOf("="),se=null;if(0<=U){var de=y[N].substring(0,U);se=y[N].substring(U+1)}else de=y[N];S(de,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function Mr(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Mr){this.h=y.h,yn(this,y.j),this.o=y.o,this.g=y.g,ae(this,y.s),this.l=y.l;var S=y.i,N=new ii;N.i=S.i,S.g&&(N.g=new Map(S.g),N.h=S.h),V(this,N),this.m=y.m}else y&&(S=String(y).match(ni))?(this.h=!1,yn(this,S[1]||"",!0),this.o=Gn(S[2]||""),this.g=Gn(S[3]||"",!0),ae(this,S[4]),this.l=Gn(S[5]||"",!0),V(this,S[6]||"",!0),this.m=Gn(S[7]||"")):(this.h=!1,this.i=new ii(null,this.h))}Mr.prototype.toString=function(){var y=[],S=this.j;S&&y.push(ri(S,dr,!0),":");var N=this.g;return(N||S=="file")&&(y.push("//"),(S=this.o)&&y.push(ri(S,dr,!0),"@"),y.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&y.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&y.push("/"),y.push(ri(N,N.charAt(0)=="/"?en:We,!0))),(N=this.i.toString())&&y.push("?",N),(N=this.m)&&y.push("#",ri(N,nu)),y.join("")};function rt(y){return new Mr(y)}function yn(y,S,N){y.j=N?Gn(S,!0):S,y.j&&(y.j=y.j.replace(/:$/,""))}function ae(y,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);y.s=S}else y.s=null}function V(y,S,N){S instanceof ii?(y.i=S,si(y.i,y.h)):(N||(S=ri(S,Yo)),y.i=new ii(S,y.h))}function Me(y,S,N){y.i.set(S,N)}function hn(y){return Me(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Gn(y,S){return y?S?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function ri(y,S,N){return typeof y=="string"?(y=encodeURI(y).replace(S,mo),N&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function mo(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var dr=/[#\/\?@]/g,We=/[#\?:]/g,en=/[#\?]/g,Yo=/[#\?@]/g,nu=/#/g;function ii(y,S){this.h=this.g=null,this.i=y||null,this.j=!!S}function Er(y){y.g||(y.g=new Map,y.h=0,y.i&&wa(y.i,function(S,N){y.add(decodeURIComponent(S.replace(/\+/g," ")),N)}))}i=ii.prototype,i.add=function(y,S){Er(this),this.i=null,y=Xr(this,y);var N=this.g.get(y);return N||this.g.set(y,N=[]),N.push(S),this.h+=1,this};function cs(y,S){Er(y),S=Xr(y,S),y.g.has(S)&&(y.i=null,y.h-=y.g.get(S).length,y.g.delete(S))}function $i(y,S){return Er(y),S=Xr(y,S),y.g.has(S)}i.forEach=function(y,S){Er(this),this.g.forEach(function(N,U){N.forEach(function(se){y.call(S,se,U,this)},this)},this)},i.na=function(){Er(this);const y=Array.from(this.g.values()),S=Array.from(this.g.keys()),N=[];for(let U=0;U<S.length;U++){const se=y[U];for(let de=0;de<se.length;de++)N.push(S[U])}return N},i.V=function(y){Er(this);let S=[];if(typeof y=="string")$i(this,y)&&(S=S.concat(this.g.get(Xr(this,y))));else{y=Array.from(this.g.values());for(let N=0;N<y.length;N++)S=S.concat(y[N])}return S},i.set=function(y,S){return Er(this),this.i=null,y=Xr(this,y),$i(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[S]),this.h+=1,this},i.get=function(y,S){return y?(y=this.V(y),0<y.length?String(y[0]):S):S};function sn(y,S,N){cs(y,S),0<N.length&&(y.i=null,y.g.set(Xr(y,S),$(N)),y.h+=N.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],S=Array.from(this.g.keys());for(var N=0;N<S.length;N++){var U=S[N];const de=encodeURIComponent(String(U)),Le=this.V(U);for(U=0;U<Le.length;U++){var se=de;Le[U]!==""&&(se+="="+encodeURIComponent(String(Le[U]))),y.push(se)}}return this.i=y.join("&")};function Xr(y,S){return S=String(S),y.j&&(S=S.toLowerCase()),S}function si(y,S){S&&!y.j&&(Er(y),y.i=null,y.g.forEach(function(N,U){var se=U.toLowerCase();U!=se&&(cs(this,U),sn(this,se,N))},y)),y.j=S}function Ze(y,S){const N=new Ni;if(x.Image){const U=new Image;U.onload=j($e,N,"TestLoadImage: loaded",!0,S,U),U.onerror=j($e,N,"TestLoadImage: error",!1,S,U),U.onabort=j($e,N,"TestLoadImage: abort",!1,S,U),U.ontimeout=j($e,N,"TestLoadImage: timeout",!1,S,U),x.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=y}else S(!1)}function Ps(y,S){const N=new Ni,U=new AbortController,se=setTimeout(()=>{U.abort(),$e(N,"TestPingServer: timeout",!1,S)},1e4);fetch(y,{signal:U.signal}).then(de=>{clearTimeout(se),de.ok?$e(N,"TestPingServer: ok",!0,S):$e(N,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(se),$e(N,"TestPingServer: error",!1,S)})}function $e(y,S,N,U,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),U(N)}catch{}}function En(){this.g=new xt}function Li(y,S,N){const U=N||"";try{$t(y,function(se,de){let Le=se;A(se)&&(Le=gn(se)),S.push(U+de+"="+encodeURIComponent(Le))})}catch(se){throw S.push(U+"type="+encodeURIComponent("_badmap")),se}}function Pi(y){this.l=y.Ub||null,this.j=y.eb||!1}q(Pi,Qi),Pi.prototype.g=function(){return new Bi(this.l,this.j)},Pi.prototype.i=function(y){return function(){return y}}({});function Bi(y,S){Wt.call(this),this.D=y,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Bi,Wt),i=Bi.prototype,i.open=function(y,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=S,this.readyState=1,Lr(this)},i.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(S.body=y),(this.D||x).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},i.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof x.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pi(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function pi(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}i.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var S=y.value?y.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!y.done}))&&(this.response=this.responseText+=S)}y.done?ki(this):Lr(this),this.readyState==3&&pi(this)}},i.Ra=function(y){this.g&&(this.response=this.responseText=y,ki(this))},i.Qa=function(y){this.g&&(this.response=y,ki(this))},i.ga=function(){this.g&&ki(this)};function ki(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Lr(y)}i.setRequestHeader=function(y,S){this.u.append(y,S)},i.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],S=this.h.entries();for(var N=S.next();!N.done;)N=N.value,y.push(N[0]+": "+N[1]),N=S.next();return y.join(`\r
`)};function Lr(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function es(y){let S="";return ke(y,function(N,U){S+=U,S+=":",S+=N,S+=`\r
`}),S}function Cn(y,S,N){e:{for(U in N){var U=!1;break e}U=!0}U||(N=es(N),typeof y=="string"?N!=null&&encodeURIComponent(String(N)):Me(y,S,N))}function zt(y){Wt.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(zt,Wt);var Ui=/^https?$/i,yi=["POST","PUT"];i=zt.prototype,i.Ha=function(y){this.J=y},i.ea=function(y,S,N,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);S=S?S.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?Aa(this.o):Aa(ti),this.g.onreadystatechange=B(this.Ea,this);try{this.B=!0,this.g.open(S,String(y),!0),this.B=!1}catch(de){ar(this,de);return}if(y=N||"",N=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var se in U)N.set(se,U[se]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const de of U.keys())N.set(de,U.get(de));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(N.keys()).find(de=>de.toLowerCase()=="content-type"),se=x.FormData&&y instanceof x.FormData,!(0<=Array.prototype.indexOf.call(yi,S,void 0))||U||se||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Le]of N)this.g.setRequestHeader(de,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Us(this),this.u=!0,this.g.send(y),this.u=!1}catch(de){ar(this,de)}};function ar(y,S){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=S,y.m=5,Bs(y),Ei(y)}function Bs(y){y.A||(y.A=!0,Hn(y,"complete"),Hn(y,"error"))}i.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Hn(this,"complete"),Hn(this,"abort"),Ei(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),zt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ks(this):this.bb())},i.bb=function(){ks(this)};function ks(y){if(y.h&&typeof E<"u"&&(!y.v[1]||ai(y)!=4||y.Z()!=2)){if(y.u&&ai(y)==4)Qn(y.Ea,0,y);else if(Hn(y,"readystatechange"),ai(y)==4){y.h=!1;try{const Le=y.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var N;if(!(N=S)){var U;if(U=Le===0){var se=String(y.D).match(ni)[1]||null;!se&&x.self&&x.self.location&&(se=x.self.location.protocol.slice(0,-1)),U=!Ui.test(se?se.toLowerCase():"")}N=U}if(N)Hn(y,"complete"),Hn(y,"success");else{y.m=6;try{var de=2<ai(y)?y.g.statusText:""}catch{de=""}y.l=de+" ["+y.Z()+"]",Bs(y)}}finally{Ei(y)}}}}function Ei(y,S){if(y.g){Us(y);const N=y.g,U=y.v[0]?()=>{}:null;y.g=null,y.v=null,S||Hn(y,"ready");try{N.onreadystatechange=U}catch{}}}function Us(y){y.I&&(x.clearTimeout(y.I),y.I=null)}i.isActive=function(){return!!this.g};function ai(y){return y.g?y.g.readyState:0}i.Z=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(y){if(this.g){var S=this.g.responseText;return y&&S.indexOf(y)==0&&(S=S.substring(y.length)),wt(S)}};function Xo(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Gt(y){const S={};y=(y.g&&2<=ai(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<y.length;U++){if(me(y[U]))continue;var N=Z(y[U]);const se=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const de=S[se]||[];S[se]=de,de.push(N)}H(S,function(U){return U.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(y,S,N){return N&&N.internalChannelParams&&N.internalChannelParams[y]||S}function ts(y){this.Aa=0,this.i=[],this.j=new Ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hs("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hs("baseRetryDelayMs",5e3,y),this.cb=hs("retryDelaySeedMs",1e4,y),this.Wa=hs("forwardChannelMaxRetries",2,y),this.wa=hs("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new It(y&&y.concurrentRequestLimit),this.Da=new En,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ts.prototype,i.la=8,i.G=1,i.connect=function(y,S,N,U){Ht(0),this.W=y,this.H=S||{},N&&U!==void 0&&(this.H.OSID=N,this.H.OAID=U),this.F=this.X,this.I=Qe(this,null,this.W),at(this)};function oi(y){if(fe(y),y.G==3){var S=y.U++,N=rt(y.I);if(Me(N,"SID",y.K),Me(N,"RID",S),Me(N,"TYPE","terminate"),ds(y,N),S=new qr(y,y.j,S),S.L=2,S.v=hn(rt(N)),N=!1,x.navigator&&x.navigator.sendBeacon)try{N=x.navigator.sendBeacon(S.v.toString(),"")}catch{}!N&&x.Image&&(new Image().src=S.v,N=!0),N||(S.g=Ko(S.j,null),S.g.ea(S.v)),S.F=Date.now(),jt(S)}qt(y)}function xa(y){y.g&&(ns(y),y.g.cancel(),y.g=null)}function fe(y){xa(y),y.u&&(x.clearTimeout(y.u),y.u=null),gs(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&x.clearTimeout(y.s),y.s=null)}function at(y){if(!Ct(y.h)&&!y.s){y.s=!0;var S=y.Ga;Oe||J(),Ye||(Oe(),Ye=!0),Et.add(S,y),y.B=0}}function qn(y,S){return yt(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=S.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Nr(B(y.Ga,y,S),ms(y,y.B)),y.B++,!0)}i.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const se=new qr(this,this.j,y);let de=this.o;if(this.S&&(de?(de=F(de),X(de,this.S)):de=this.S),this.m!==null||this.O||(se.H=de,de=null),this.P)e:{for(var S=0,N=0;N<this.i.length;N++){t:{var U=this.i[N];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(S+=U,4096<S){S=N;break e}if(S===4096||N===this.i.length-1){S=N+1;break e}}S=1e3}else S=1e3;S=Wo(this,se,S),N=rt(this.I),Me(N,"RID",y),Me(N,"CVER",22),this.D&&Me(N,"X-HTTP-Session-Id",this.D),ds(this,N),de&&(this.O?S="headers="+encodeURIComponent(String(es(de)))+"&"+S:this.m&&Cn(N,this.m,de)),Mi(this.h,se),this.Ua&&Me(N,"TYPE","init"),this.P?(Me(N,"$req",S),Me(N,"SID","null"),se.T=!0,Pn(se,N,null)):Pn(se,N,S),this.G=2}}else this.G==3&&(y?fs(this,y):this.i.length==0||Ct(this.h)||fs(this))};function fs(y,S){var N;S?N=S.l:N=y.U++;const U=rt(y.I);Me(U,"SID",y.K),Me(U,"RID",N),Me(U,"AID",y.T),ds(y,U),y.m&&y.o&&Cn(U,y.m,y.o),N=new qr(y,y.j,N,y.B+1),y.m===null&&(N.H=y.o),S&&(y.i=S.D.concat(y.i)),S=Wo(y,N,1e3),N.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Mi(y.h,N),Pn(N,U,S)}function ds(y,S){y.H&&ke(y.H,function(N,U){Me(S,U,N)}),y.l&&$t({},function(N,U){Me(S,U,N)})}function Wo(y,S,N){N=Math.min(y.i.length,N);var U=y.l?B(y.l.Na,y.l,y):null;e:{var se=y.i;let de=-1;for(;;){const Le=["count="+N];de==-1?0<N?(de=se[0].g,Le.push("ofs="+de)):de=0:Le.push("ofs="+de);let bt=!0;for(let _n=0;_n<N;_n++){let Rt=se[_n].g;const un=se[_n].map;if(Rt-=de,0>Rt)de=Math.max(0,se[_n].g-100),bt=!1;else try{Li(un,Le,"req"+Rt+"_")}catch{U&&U(un)}}if(bt){U=Le.join("&");break e}}}return y=y.i.splice(0,N),S.D=y,U}function Qo(y){if(!y.g&&!y.u){y.Y=1;var S=y.Fa;Oe||J(),Ye||(Oe(),Ye=!0),Et.add(S,y),y.v=0}}function po(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Nr(B(y.Fa,y),ms(y,y.v)),y.v++,!0)}i.Fa=function(){if(this.u=null,Sn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Nr(B(this.ab,this),y)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),xa(this),Sn(this))};function ns(y){y.A!=null&&(x.clearTimeout(y.A),y.A=null)}function Sn(y){y.g=new qr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var S=rt(y.qa);Me(S,"RID","rpc"),Me(S,"SID",y.K),Me(S,"AID",y.T),Me(S,"CI",y.F?"0":"1"),!y.F&&y.ja&&Me(S,"TO",y.ja),Me(S,"TYPE","xmlhttp"),ds(y,S),y.m&&y.o&&Cn(S,y.m,y.o),y.L&&(y.g.I=y.L);var N=y.g;y=y.ia,N.L=1,N.v=hn(rt(S)),N.m=null,N.P=!0,pn(N,y)}i.Za=function(){this.C!=null&&(this.C=null,xa(this),po(this),Ht(19))};function gs(y){y.C!=null&&(x.clearTimeout(y.C),y.C=null)}function ln(y,S){var N=null;if(y.g==S){gs(y),ns(y),y.g=null;var U=2}else if(Oi(y.h,S))N=S.D,Or(y.h,S),U=1;else return;if(y.G!=0){if(S.o)if(U==1){N=S.m?S.m.length:0,S=Date.now()-S.F;var se=y.B;U=ls(),Hn(U,new qo(U,N)),at(y)}else Qo(y);else if(se=S.s,se==3||se==0&&0<S.X||!(U==1&&qn(y,S)||U==2&&po(y)))switch(N&&0<N.length&&(S=y.h,S.i=S.i.concat(N)),se){case 1:_r(y,5);break;case 4:_r(y,10);break;case 3:_r(y,6);break;default:_r(y,2)}}}function ms(y,S){let N=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(N*=2),N*S}function _r(y,S){if(y.j.info("Error code "+S),S==2){var N=B(y.fb,y),U=y.Xa;const se=!U;U=new Mr(U||"//www.google.com/images/cleardot.gif"),x.location&&x.location.protocol=="http"||yn(U,"https"),hn(U),se?Ze(U.toString(),N):Ps(U.toString(),N)}else Ht(2);y.G=0,y.l&&y.l.sa(S),qt(y),fe(y)}i.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function qt(y){if(y.G=0,y.ka=[],y.l){const S=Lt(y.h);(S.length!=0||y.i.length!=0)&&(te(y.ka,S),te(y.ka,y.i),y.h.i.length=0,$(y.i),y.i.length=0),y.l.ra()}}function Qe(y,S,N){var U=N instanceof Mr?rt(N):new Mr(N);if(U.g!="")S&&(U.g=S+"."+U.g),ae(U,U.s);else{var se=x.location;U=se.protocol,S=S?S+"."+se.hostname:se.hostname,se=+se.port;var de=new Mr(null);U&&yn(de,U),S&&(de.g=S),se&&ae(de,se),N&&(de.l=N),U=de}return N=y.D,S=y.ya,N&&S&&Me(U,N,S),Me(U,"VER",y.la),ds(y,U),U}function Ko(y,S,N){if(S&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=y.Ca&&!y.pa?new zt(new Pi({eb:N})):new zt(y.pa),S.Ha(y.J),S}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kt(){}i=Kt.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function li(){}li.prototype.g=function(y,S){return new Bn(y,S)};function Bn(y,S){Wt.call(this),this.g=new ts(S),this.l=y,this.h=S&&S.messageUrlParams||null,y=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(y?y["X-WebChannel-Content-Type"]=S.messageContentType:y={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(y?y["X-WebChannel-Client-Profile"]=S.va:y={"X-WebChannel-Client-Profile":S.va}),this.g.S=y,(y=S&&S.Sb)&&!me(y)&&(this.g.m=y),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!me(S)&&(this.g.D=S,y=this.h,y!==null&&S in y&&(y=this.h,S in y&&delete y[S])),this.j=new ui(this)}q(Bn,Wt),Bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){oi(this.g)},Bn.prototype.o=function(y){var S=this.g;if(typeof y=="string"){var N={};N.__data__=y,y=N}else this.u&&(N={},N.__data__=gn(y),y=N);S.i.push(new eu(S.Ya++,y)),S.G==3&&at(S)},Bn.prototype.N=function(){this.g.l=null,delete this.j,oi(this.g),delete this.g,Bn.aa.N.call(this)};function Zo(y){Rr.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var S=y.__sm__;if(S){e:{for(const N in S){y=N;break e}y=void 0}(this.i=y)&&(y=this.i,S=S!==null&&y in S?S[y]:void 0),this.data=S}else this.data=y}q(Zo,Rr);function Wr(){ei.call(this),this.status=1}q(Wr,ei);function ui(y){this.g=y}q(ui,Kt),ui.prototype.ua=function(){Hn(this.g,"a")},ui.prototype.ta=function(y){Hn(this.g,new Zo(y))},ui.prototype.sa=function(y){Hn(this.g,new Wr)},ui.prototype.ra=function(){Hn(this.g,"b")},li.prototype.createWebChannel=li.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,u_=function(){return new li},l_=function(){return ls()},o_=jr,i1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rn.NO_ERROR=0,Rn.TIMEOUT=8,Rn.HTTP_ERROR=6,Ph=Rn,vn.COMPLETE="complete",a_=vn,go.EventType=dt,dt.OPEN="a",dt.CLOSE="b",dt.ERROR="c",dt.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,qu=go,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,s_=zt}).apply(typeof vh<"u"?vh:typeof self<"u"?self:typeof window<"u"?window:{});const k2="@firebase/firestore",U2="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new D1("@firebase/firestore");function Cl(){return Vo.logLevel}function He(i,...e){if(Vo.logLevel<=Dt.DEBUG){const t=e.map(L1);Vo.debug(`Firestore (${Wl}): ${i}`,...t)}}function ua(i,...e){if(Vo.logLevel<=Dt.ERROR){const t=e.map(L1);Vo.error(`Firestore (${Wl}): ${i}`,...t)}}function Bl(i,...e){if(Vo.logLevel<=Dt.WARN){const t=e.map(L1);Vo.warn(`Firestore (${Wl}): ${i}`,...t)}}function L1(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(i="Unexpected state"){const e=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: `+i;throw ua(e),new Error(e)}function Zt(i,e){i||it()}function ht(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends ga{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ur.UNAUTHENTICATED))}shutdown(){}}class tS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nS{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Zt(this.o===void 0);let a=this.i;const u=T=>this.i!==a?(a=this.i,t(T)):Promise.resolve();let f=new no;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new no,e.enqueueRetryable(()=>u(this.currentUser))};const E=()=>{const T=f;e.enqueueRetryable(async()=>{await T.promise,await u(this.currentUser)})},x=T=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.o&&(this.auth.addAuthTokenListener(this.o),E())};this.t.onInit(T=>x(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?x(T):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new no)}},0),E()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Zt(typeof a.accessToken=="string"),new c_(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string"),new Ur(e)}}class rS{constructor(e,t,a){this.l=e,this.h=t,this.P=a,this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class iS{constructor(e,t,a){this.l=e,this.h=t,this.P=a}getToken(){return Promise.resolve(new rS(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sS{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ts(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Zt(this.o===void 0);const a=f=>{f.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const E=f.token!==this.R;return this.R=f.token,He("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>a(f))};const u=f=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(f=>u(f)),setTimeout(()=>{if(!this.appCheck){const f=this.A.getImmediate({optional:!0});f?u(f):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new V2(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Zt(typeof t.token=="string"),this.R=t.token,new V2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const u=aS(40);for(let f=0;f<u.length;++f)a.length<20&&u[f]<t&&(a+=e.charAt(u[f]%62))}return a}}function Bt(i,e){return i<e?-1:i>e?1:0}function kl(i,e,t){return i.length===e.length&&i.every((a,u)=>t(a,e[u]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=-62135596800,z2=1e6;class cr{static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*z2);return new cr(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<F2)throw new qe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/z2}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-F2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new cr(0,0))}static max(){return new ot(new cr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="__name__";class xs{constructor(e,t,a){t===void 0?t=0:t>e.length&&it(),a===void 0?a=e.length-t:a>e.length-t&&it(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return xs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xs?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let u=0;u<a;u++){const f=xs.compareSegments(e.get(u),t.get(u));if(f!==0)return f}return Math.sign(e.length-t.length)}static compareSegments(e,t){const a=xs.isNumericId(e),u=xs.isNumericId(t);return a&&!u?-1:!a&&u?1:a&&u?xs.extractNumericId(e).compare(xs.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return to.fromString(e.substring(4,e.length-2))}}class wn extends xs{construct(e,t,a){return new wn(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new qe(xe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(u=>u.length>0))}return new wn(t)}static emptyPath(){return new wn([])}}const oS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ir extends xs{construct(e,t,a){return new Ir(e,t,a)}static isValidIdentifier(e){return oS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H2}static keyField(){return new Ir([H2])}static fromServerFormat(e){const t=[];let a="",u=0;const f=()=>{if(a.length===0)throw new qe(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let E=!1;for(;u<e.length;){const x=e[u];if(x==="\\"){if(u+1===e.length)throw new qe(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const T=e[u+1];if(T!=="\\"&&T!=="."&&T!=="`")throw new qe(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=T,u+=2}else x==="`"?(E=!E,u++):x!=="."||E?(a+=x,u++):(f(),u++)}if(f(),E)throw new qe(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ir(t)}static emptyPath(){return new Ir([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(wn.fromString(e))}static fromName(e){return new Je(wn.fromString(e).popFirst(5))}static empty(){return new Je(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new wn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=-1;function lS(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,u=ot.fromTimestamp(a===1e9?new cr(t+1,0):new cr(t,a));return new io(u,Je.empty(),e)}function uS(i){return new io(i.readTime,i.key,nc)}class io{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new io(ot.min(),Je.empty(),nc)}static max(){return new io(ot.max(),Je.empty(),nc)}}function cS(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Je.comparator(i.documentKey,e.documentKey),t!==0?t:Bt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(i){if(i.code!==xe.FAILED_PRECONDITION||i.message!==hS)throw i;He("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new we((a,u)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(a,u)},this.catchCallback=f=>{this.wrapFailure(t,f).next(a,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof we?t:we.resolve(t)}catch(t){return we.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):we.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):we.reject(t)}static resolve(e){return new we((t,a)=>{t(e)})}static reject(e){return new we((t,a)=>{a(e)})}static waitFor(e){return new we((t,a)=>{let u=0,f=0,E=!1;e.forEach(x=>{++u,x.next(()=>{++f,E&&f===u&&t()},T=>a(T))}),E=!0,f===u&&t()})}static or(e){let t=we.resolve(!1);for(const a of e)t=t.next(u=>u?we.resolve(u):a());return t}static forEach(e,t){const a=[];return e.forEach((u,f)=>{a.push(t.call(this,u,f))}),this.waitFor(a)}static mapArray(e,t){return new we((a,u)=>{const f=e.length,E=new Array(f);let x=0;for(let T=0;T<f;T++){const A=T;t(e[A]).next(I=>{E[A]=I,++x,x===f&&a(E)},I=>u(I))}})}static doWhile(e,t){return new we((a,u)=>{const f=()=>{e()===!0?t().next(()=>{f()},u):a()};f()})}}function dS(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Kl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.oe(a),this._e=a=>t.writeSequenceNumber(a))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}yf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=-1;function Ef(i){return i==null}function Wh(i){return i===0&&1/i==-1/0}function gS(i){return typeof i=="number"&&Number.isInteger(i)&&!Wh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="";function mS(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=j2(e)),e=pS(i.get(t),e);return j2(e)}function pS(i,e){let t=e;const a=i.length;for(let u=0;u<a;u++){const f=i.charAt(u);switch(f){case"\0":t+="";break;case f_:t+="";break;default:t+=f}}return t}function j2(i){return i+f_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ho(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function d_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.comparator=e,this.root=t||Sr.EMPTY}insert(e,t){return new Mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const u=this.comparator(e,a.key);if(u===0)return t+a.left.size;u<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ch(this.root,e,this.comparator,!0)}}class Ch{constructor(e,t,a,u){this.isReverse=u,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?a(e.key,t):1,t&&u&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(f===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sr{constructor(e,t,a,u,f){this.key=e,this.value=t,this.color=a??Sr.RED,this.left=u??Sr.EMPTY,this.right=f??Sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,u,f){return new Sr(e??this.key,t??this.value,a??this.color,u??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let u=this;const f=a(e,u.key);return u=f<0?u.copy(null,null,null,u.left.insert(e,t,a),null):f===0?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,a)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),t(e,u.key)===0){if(u.right.isEmpty())return Sr.EMPTY;a=u.right.min(),u=u.copy(a.key,a.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1;Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(e,t,a,u,f){return this}insert(e,t,a){return new Sr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const u=a.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new q2(this.data.getIterator())}getIteratorFrom(e){return new q2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,f=a.getNext().key;if(this.comparator(u,f)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hr(this.comparator);return t.data=e,t}}class q2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.fields=e,e.sort(Ir.comparator)}static empty(){return new Ii([])}unionWith(e){let t=new hr(Ir.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,(t,a)=>t.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(u){try{return atob(u)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new g_("Invalid base64 string: "+f):f}}(e);return new br(t)}static fromUint8Array(e){const t=function(u){let f="";for(let E=0;E<u.length;++E)f+=String.fromCharCode(u[E]);return f}(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const a=new Uint8Array(t.length);for(let u=0;u<t.length;u++)a[u]=t.charCodeAt(u);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const yS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function so(i){if(Zt(!!i),typeof i=="string"){let e=0;const t=yS.exec(i);if(Zt(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Wn(i.seconds),nanos:Wn(i.nanos)}}function Wn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ao(i){return typeof i=="string"?br.fromBase64String(i):br.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="server_timestamp",p_="__type__",y_="__previous_value__",E_="__local_write_time__";function B1(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[p_])===null||t===void 0?void 0:t.stringValue)===m_}function _f(i){const e=i.mapValue.fields[y_];return B1(e)?_f(e):e}function rc(i){const e=so(i.mapValue.fields[E_].timestampValue);return new cr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t,a,u,f,E,x,T,A){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=u,this.ssl=f,this.forceLongPolling=E,this.autoDetectLongPolling=x,this.longPollingOptions=T,this.useFetchStreams=A}}const Qh="(default)";class ic{constructor(e,t){this.projectId=e,this.database=t||Qh}static empty(){return new ic("","")}get isDefaultDatabase(){return this.database===Qh}isEqual(e){return e instanceof ic&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="__type__",_S="__max__",Sh={mapValue:{}},A_="__vector__",Kh="value";function oo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?B1(i)?4:wS(i)?9007199254740991:AS(i)?10:11:it()}function Ns(i,e){if(i===e)return!0;const t=oo(i);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return rc(i).isEqual(rc(e));case 3:return function(u,f){if(typeof u.timestampValue=="string"&&typeof f.timestampValue=="string"&&u.timestampValue.length===f.timestampValue.length)return u.timestampValue===f.timestampValue;const E=so(u.timestampValue),x=so(f.timestampValue);return E.seconds===x.seconds&&E.nanos===x.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(u,f){return ao(u.bytesValue).isEqual(ao(f.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,f){return Wn(u.geoPointValue.latitude)===Wn(f.geoPointValue.latitude)&&Wn(u.geoPointValue.longitude)===Wn(f.geoPointValue.longitude)}(i,e);case 2:return function(u,f){if("integerValue"in u&&"integerValue"in f)return Wn(u.integerValue)===Wn(f.integerValue);if("doubleValue"in u&&"doubleValue"in f){const E=Wn(u.doubleValue),x=Wn(f.doubleValue);return E===x?Wh(E)===Wh(x):isNaN(E)&&isNaN(x)}return!1}(i,e);case 9:return kl(i.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return function(u,f){const E=u.mapValue.fields||{},x=f.mapValue.fields||{};if(G2(E)!==G2(x))return!1;for(const T in E)if(E.hasOwnProperty(T)&&(x[T]===void 0||!Ns(E[T],x[T])))return!1;return!0}(i,e);default:return it()}}function sc(i,e){return(i.values||[]).find(t=>Ns(t,e))!==void 0}function Ul(i,e){if(i===e)return 0;const t=oo(i),a=oo(e);if(t!==a)return Bt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(i.booleanValue,e.booleanValue);case 2:return function(f,E){const x=Wn(f.integerValue||f.doubleValue),T=Wn(E.integerValue||E.doubleValue);return x<T?-1:x>T?1:x===T?0:isNaN(x)?isNaN(T)?0:-1:1}(i,e);case 3:return Y2(i.timestampValue,e.timestampValue);case 4:return Y2(rc(i),rc(e));case 5:return Bt(i.stringValue,e.stringValue);case 6:return function(f,E){const x=ao(f),T=ao(E);return x.compareTo(T)}(i.bytesValue,e.bytesValue);case 7:return function(f,E){const x=f.split("/"),T=E.split("/");for(let A=0;A<x.length&&A<T.length;A++){const I=Bt(x[A],T[A]);if(I!==0)return I}return Bt(x.length,T.length)}(i.referenceValue,e.referenceValue);case 8:return function(f,E){const x=Bt(Wn(f.latitude),Wn(E.latitude));return x!==0?x:Bt(Wn(f.longitude),Wn(E.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return X2(i.arrayValue,e.arrayValue);case 10:return function(f,E){var x,T,A,I;const R=f.fields||{},B=E.fields||{},j=(x=R[Kh])===null||x===void 0?void 0:x.arrayValue,q=(T=B[Kh])===null||T===void 0?void 0:T.arrayValue,$=Bt(((A=j==null?void 0:j.values)===null||A===void 0?void 0:A.length)||0,((I=q==null?void 0:q.values)===null||I===void 0?void 0:I.length)||0);return $!==0?$:X2(j,q)}(i.mapValue,e.mapValue);case 11:return function(f,E){if(f===Sh.mapValue&&E===Sh.mapValue)return 0;if(f===Sh.mapValue)return 1;if(E===Sh.mapValue)return-1;const x=f.fields||{},T=Object.keys(x),A=E.fields||{},I=Object.keys(A);T.sort(),I.sort();for(let R=0;R<T.length&&R<I.length;++R){const B=Bt(T[R],I[R]);if(B!==0)return B;const j=Ul(x[T[R]],A[I[R]]);if(j!==0)return j}return Bt(T.length,I.length)}(i.mapValue,e.mapValue);default:throw it()}}function Y2(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Bt(i,e);const t=so(i),a=so(e),u=Bt(t.seconds,a.seconds);return u!==0?u:Bt(t.nanos,a.nanos)}function X2(i,e){const t=i.values||[],a=e.values||[];for(let u=0;u<t.length&&u<a.length;++u){const f=Ul(t[u],a[u]);if(f)return f}return Bt(t.length,a.length)}function Vl(i){return s1(i)}function s1(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const a=so(t);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return ao(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return Je.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let a="[",u=!0;for(const f of t.values||[])u?u=!1:a+=",",a+=s1(f);return a+"]"}(i.arrayValue):"mapValue"in i?function(t){const a=Object.keys(t.fields||{}).sort();let u="{",f=!0;for(const E of a)f?f=!1:u+=",",u+=`${E}:${s1(t.fields[E])}`;return u+"}"}(i.mapValue):it()}function Bh(i){switch(oo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_f(i);return e?16+Bh(e):16;case 5:return 2*i.stringValue.length;case 6:return ao(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((u,f)=>u+Bh(f),0)}(i.arrayValue);case 10:case 11:return function(a){let u=0;return ho(a.fields,(f,E)=>{u+=f.length+Bh(E)}),u}(i.mapValue);default:throw it()}}function W2(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function a1(i){return!!i&&"integerValue"in i}function k1(i){return!!i&&"arrayValue"in i}function Q2(i){return!!i&&"nullValue"in i}function K2(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function kh(i){return!!i&&"mapValue"in i}function AS(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[__])===null||t===void 0?void 0:t.stringValue)===A_}function Qu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ho(i.mapValue.fields,(t,a)=>e.mapValue.fields[t]=Qu(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function wS(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===_S}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(t)}setAll(e){let t=Ir.emptyPath(),a={},u=[];e.forEach((E,x)=>{if(!t.isImmediateParentOf(x)){const T=this.getFieldsMap(t);this.applyChanges(T,a,u),a={},u=[],t=x.popLast()}E?a[x.lastSegment()]=Qu(E):u.push(x.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,a,u)}delete(e){const t=this.field(e.popLast());kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let u=t.mapValue.fields[e.get(a)];kh(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,a){ho(t,(u,f)=>e[u]=f);for(const u of a)delete e[u]}clone(){return new gi(Qu(this.value))}}function w_(i){const e=[];return ho(i.fields,(t,a)=>{const u=new Ir([t]);if(kh(a)){const f=w_(a.mapValue).fields;if(f.length===0)e.push(u);else for(const E of f)e.push(u.child(E))}else e.push(u)}),new Ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,t,a,u,f,E,x){this.key=e,this.documentType=t,this.version=a,this.readTime=u,this.createTime=f,this.data=E,this.documentState=x}static newInvalidDocument(e){return new Vr(e,0,ot.min(),ot.min(),ot.min(),gi.empty(),0)}static newFoundDocument(e,t,a,u){return new Vr(e,1,t,ot.min(),a,u,0)}static newNoDocument(e,t){return new Vr(e,2,t,ot.min(),ot.min(),gi.empty(),0)}static newUnknownDocument(e,t){return new Vr(e,3,t,ot.min(),ot.min(),gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.position=e,this.inclusive=t}}function Z2(i,e,t){let a=0;for(let u=0;u<i.position.length;u++){const f=e[u],E=i.position[u];if(f.field.isKeyField()?a=Je.comparator(Je.fromName(E.referenceValue),t.key):a=Ul(E,t.data.field(f.field)),f.dir==="desc"&&(a*=-1),a!==0)break}return a}function J2(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ns(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t="asc"){this.field=e,this.dir=t}}function xS(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{}class rr extends x_{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new vS(e,t,a):t==="array-contains"?new IS(e,a):t==="in"?new bS(e,a):t==="not-in"?new RS(e,a):t==="array-contains-any"?new NS(e,a):new rr(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new CS(e,a):new SS(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ul(t,this.value)):t!==null&&oo(this.value)===oo(t)&&this.matchesComparison(Ul(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class os extends x_{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new os(e,t)}matches(e){return T_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function T_(i){return i.op==="and"}function v_(i){return TS(i)&&T_(i)}function TS(i){for(const e of i.filters)if(e instanceof os)return!1;return!0}function o1(i){if(i instanceof rr)return i.field.canonicalString()+i.op.toString()+Vl(i.value);if(v_(i))return i.filters.map(e=>o1(e)).join(",");{const e=i.filters.map(t=>o1(t)).join(",");return`${i.op}(${e})`}}function C_(i,e){return i instanceof rr?function(a,u){return u instanceof rr&&a.op===u.op&&a.field.isEqual(u.field)&&Ns(a.value,u.value)}(i,e):i instanceof os?function(a,u){return u instanceof os&&a.op===u.op&&a.filters.length===u.filters.length?a.filters.reduce((f,E,x)=>f&&C_(E,u.filters[x]),!0):!1}(i,e):void it()}function S_(i){return i instanceof rr?function(t){return`${t.field.canonicalString()} ${t.op} ${Vl(t.value)}`}(i):i instanceof os?function(t){return t.op.toString()+" {"+t.getFilters().map(S_).join(" ,")+"}"}(i):"Filter"}class vS extends rr{constructor(e,t,a){super(e,t,a),this.key=Je.fromName(a.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class CS extends rr{constructor(e,t){super(e,"in",t),this.keys=I_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SS extends rr{constructor(e,t){super(e,"not-in",t),this.keys=I_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function I_(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(a=>Je.fromName(a.referenceValue))}class IS extends rr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return k1(t)&&sc(t.arrayValue,this.value)}}class bS extends rr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&sc(this.value.arrayValue,t)}}class RS extends rr{constructor(e,t){super(e,"not-in",t)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!sc(this.value.arrayValue,t)}}class NS extends rr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!k1(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>sc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t=null,a=[],u=[],f=null,E=null,x=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=u,this.limit=f,this.startAt=E,this.endAt=x,this.le=null}}function $2(i,e=null,t=[],a=[],u=null,f=null,E=null){return new DS(i,e,t,a,u,f,E)}function U1(i){const e=ht(i);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>o1(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>function(f){return f.field.canonicalString()+f.dir}(a)).join(","),Ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Vl(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Vl(a)).join(",")),e.le=t}return e.le}function V1(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!xS(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!C_(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!J2(i.startAt,e.startAt)&&J2(i.endAt,e.endAt)}function l1(i){return Je.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t=null,a=[],u=[],f=null,E="F",x=null,T=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=u,this.limit=f,this.limitType=E,this.startAt=x,this.endAt=T,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function OS(i,e,t,a,u,f,E,x){return new mc(i,e,t,a,u,f,E,x)}function b_(i){return new mc(i)}function ey(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function R_(i){return i.collectionGroup!==null}function Ku(i){const e=ht(i);if(e.he===null){e.he=[];const t=new Set;for(const f of e.explicitOrderBy)e.he.push(f),t.add(f.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(E){let x=new hr(Ir.comparator);return E.filters.forEach(T=>{T.getFlattenedFilters().forEach(A=>{A.isInequality()&&(x=x.add(A.field))})}),x})(e).forEach(f=>{t.has(f.canonicalString())||f.isKeyField()||e.he.push(new Jh(f,a))}),t.has(Ir.keyField().canonicalString())||e.he.push(new Jh(Ir.keyField(),a))}return e.he}function vs(i){const e=ht(i);return e.Pe||(e.Pe=MS(e,Ku(i))),e.Pe}function MS(i,e){if(i.limitType==="F")return $2(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>{const f=u.dir==="desc"?"asc":"desc";return new Jh(u.field,f)});const t=i.endAt?new Zh(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new Zh(i.startAt.position,i.startAt.inclusive):null;return $2(i.path,i.collectionGroup,e,i.filters,i.limit,t,a)}}function u1(i,e){const t=i.filters.concat([e]);return new mc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function c1(i,e,t){return new mc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Af(i,e){return V1(vs(i),vs(e))&&i.limitType===e.limitType}function N_(i){return`${U1(vs(i))}|lt:${i.limitType}`}function Sl(i){return`Query(target=${function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map(u=>S_(u)).join(", ")}]`),Ef(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map(u=>function(E){return`${E.field.canonicalString()} (${E.dir})`}(u)).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map(u=>Vl(u)).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map(u=>Vl(u)).join(",")),`Target(${a})`}(vs(i))}; limitType=${i.limitType})`}function wf(i,e){return e.isFoundDocument()&&function(a,u){const f=u.key.path;return a.collectionGroup!==null?u.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(f):Je.isDocumentKey(a.path)?a.path.isEqual(f):a.path.isImmediateParentOf(f)}(i,e)&&function(a,u){for(const f of Ku(a))if(!f.field.isKeyField()&&u.data.field(f.field)===null)return!1;return!0}(i,e)&&function(a,u){for(const f of a.filters)if(!f.matches(u))return!1;return!0}(i,e)&&function(a,u){return!(a.startAt&&!function(E,x,T){const A=Z2(E,x,T);return E.inclusive?A<=0:A<0}(a.startAt,Ku(a),u)||a.endAt&&!function(E,x,T){const A=Z2(E,x,T);return E.inclusive?A>=0:A>0}(a.endAt,Ku(a),u))}(i,e)}function LS(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function D_(i){return(e,t)=>{let a=!1;for(const u of Ku(i)){const f=PS(u,e,t);if(f!==0)return f;a=a||u.field.isKeyField()}return 0}}function PS(i,e,t){const a=i.field.isKeyField()?Je.comparator(e.key,t.key):function(f,E,x){const T=E.data.field(f),A=x.data.field(f);return T!==null&&A!==null?Ul(T,A):it()}(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return it()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[u,f]of a)if(this.equalsFn(u,e))return f}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),u=this.inner[a];if(u===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let f=0;f<u.length;f++)if(this.equalsFn(u[f][0],e))return void(u[f]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return a.length===1?delete this.inner[t]:a.splice(u,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(t,a)=>{for(const[u,f]of a)e(u,f)})}isEmpty(){return d_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Mn(Je.comparator);function ca(){return BS}const O_=new Mn(Je.comparator);function Yu(...i){let e=O_;for(const t of i)e=e.insert(t.key,t);return e}function M_(i){let e=O_;return i.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function Po(){return Zu()}function L_(){return Zu()}function Zu(){return new jo(i=>i.toString(),(i,e)=>i.isEqual(e))}const kS=new Mn(Je.comparator),US=new hr(Je.comparator);function Ot(...i){let e=US;for(const t of i)e=e.add(t);return e}const VS=new hr(Bt);function FS(){return VS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function P_(i){return{integerValue:""+i}}function zS(i,e){return gS(e)?P_(e):F1(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this._=void 0}}function HS(i,e,t){return i instanceof $h?function(u,f){const E={fields:{[p_]:{stringValue:m_},[E_]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return f&&B1(f)&&(f=_f(f)),f&&(E.fields[y_]=f),{mapValue:E}}(t,e):i instanceof ac?k_(i,e):i instanceof oc?U_(i,e):function(u,f){const E=B_(u,f),x=ty(E)+ty(u.Ie);return a1(E)&&a1(u.Ie)?P_(x):F1(u.serializer,x)}(i,e)}function jS(i,e,t){return i instanceof ac?k_(i,e):i instanceof oc?U_(i,e):t}function B_(i,e){return i instanceof ef?function(a){return a1(a)||function(f){return!!f&&"doubleValue"in f}(a)}(e)?e:{integerValue:0}:null}class $h extends xf{}class ac extends xf{constructor(e){super(),this.elements=e}}function k_(i,e){const t=V_(e);for(const a of i.elements)t.some(u=>Ns(u,a))||t.push(a);return{arrayValue:{values:t}}}class oc extends xf{constructor(e){super(),this.elements=e}}function U_(i,e){let t=V_(e);for(const a of i.elements)t=t.filter(u=>!Ns(u,a));return{arrayValue:{values:t}}}class ef extends xf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ty(i){return Wn(i.integerValue||i.doubleValue)}function V_(i){return k1(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function GS(i,e){return i.field.isEqual(e.field)&&function(a,u){return a instanceof ac&&u instanceof ac||a instanceof oc&&u instanceof oc?kl(a.elements,u.elements,Ns):a instanceof ef&&u instanceof ef?Ns(a.Ie,u.Ie):a instanceof $h&&u instanceof $h}(i.transform,e.transform)}class qS{constructor(e,t){this.version=e,this.transformResults=t}}class Cs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cs}static exists(e){return new Cs(void 0,e)}static updateTime(e){return new Cs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Tf{}function F_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new H_(i.key,Cs.none()):new pc(i.key,i.data,Cs.none());{const t=i.data,a=gi.empty();let u=new hr(Ir.comparator);for(let f of e.fields)if(!u.has(f)){let E=t.field(f);E===null&&f.length>1&&(f=f.popLast(),E=t.field(f)),E===null?a.delete(f):a.set(f,E),u=u.add(f)}return new fo(i.key,a,new Ii(u.toArray()),Cs.none())}}function YS(i,e,t){i instanceof pc?function(u,f,E){const x=u.value.clone(),T=ry(u.fieldTransforms,f,E.transformResults);x.setAll(T),f.convertToFoundDocument(E.version,x).setHasCommittedMutations()}(i,e,t):i instanceof fo?function(u,f,E){if(!Uh(u.precondition,f))return void f.convertToUnknownDocument(E.version);const x=ry(u.fieldTransforms,f,E.transformResults),T=f.data;T.setAll(z_(u)),T.setAll(x),f.convertToFoundDocument(E.version,T).setHasCommittedMutations()}(i,e,t):function(u,f,E){f.convertToNoDocument(E.version).setHasCommittedMutations()}(0,e,t)}function Ju(i,e,t,a){return i instanceof pc?function(f,E,x,T){if(!Uh(f.precondition,E))return x;const A=f.value.clone(),I=iy(f.fieldTransforms,T,E);return A.setAll(I),E.convertToFoundDocument(E.version,A).setHasLocalMutations(),null}(i,e,t,a):i instanceof fo?function(f,E,x,T){if(!Uh(f.precondition,E))return x;const A=iy(f.fieldTransforms,T,E),I=E.data;return I.setAll(z_(f)),I.setAll(A),E.convertToFoundDocument(E.version,I).setHasLocalMutations(),x===null?null:x.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(R=>R.field))}(i,e,t,a):function(f,E,x){return Uh(f.precondition,E)?(E.convertToNoDocument(E.version).setHasLocalMutations(),null):x}(i,e,t)}function XS(i,e){let t=null;for(const a of i.fieldTransforms){const u=e.data.field(a.field),f=B_(a.transform,u||null);f!=null&&(t===null&&(t=gi.empty()),t.set(a.field,f))}return t||null}function ny(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(a,u){return a===void 0&&u===void 0||!(!a||!u)&&kl(a,u,(f,E)=>GS(f,E))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class pc extends Tf{constructor(e,t,a,u=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class fo extends Tf{constructor(e,t,a,u,f=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=u,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function z_(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}}),e}function ry(i,e,t){const a=new Map;Zt(i.length===t.length);for(let u=0;u<t.length;u++){const f=i[u],E=f.transform,x=e.data.field(f.field);a.set(f.field,jS(E,x,t[u]))}return a}function iy(i,e,t){const a=new Map;for(const u of i){const f=u.transform,E=t.data.field(u.field);a.set(u.field,HS(f,E,e))}return a}class H_ extends Tf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WS extends Tf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t,a,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=u}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const f=this.mutations[u];f.key.isEqual(e.key)&&YS(f,e,a[u])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Ju(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Ju(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=L_();return this.mutations.forEach(u=>{const f=e.get(u.key),E=f.overlayedDocument;let x=this.applyToLocalView(E,f.mutatedFields);x=t.has(u.key)?null:x;const T=F_(E,x);T!==null&&a.set(u.key,T),E.isValidDocument()||E.convertToNoDocument(ot.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ot())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,(t,a)=>ny(t,a))&&kl(this.baseMutations,e.baseMutations,(t,a)=>ny(t,a))}}class z1{constructor(e,t,a,u){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=u}static from(e,t,a){Zt(e.mutations.length===a.length);let u=function(){return kS}();const f=e.mutations;for(let E=0;E<f.length;E++)u=u.insert(f[E].key,a[E].version);return new z1(e,t,a,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr,Ut;function JS(i){switch(i){case xe.OK:return it();case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return it()}}function j_(i){if(i===void 0)return ua("GRPC error has no .code"),xe.UNKNOWN;switch(i){case nr.OK:return xe.OK;case nr.CANCELLED:return xe.CANCELLED;case nr.UNKNOWN:return xe.UNKNOWN;case nr.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case nr.INTERNAL:return xe.INTERNAL;case nr.UNAVAILABLE:return xe.UNAVAILABLE;case nr.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case nr.NOT_FOUND:return xe.NOT_FOUND;case nr.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case nr.ABORTED:return xe.ABORTED;case nr.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case nr.DATA_LOSS:return xe.DATA_LOSS;default:return it()}}(Ut=nr||(nr={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new to([4294967295,4294967295],0);function sy(i){const e=$S().encode(i),t=new i_;return t.update(e),new Uint8Array(t.digest())}function ay(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),u=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new to([t,a],0),new to([u,f],0)]}class H1{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Xu(`Invalid padding: ${t}`);if(a<0)throw new Xu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Xu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new Xu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=to.fromNumber(this.Ee)}Ae(e,t,a){let u=e.add(t.multiply(to.fromNumber(a)));return u.compare(e3)===1&&(u=new to([u.getBits(0),u.getBits(1)],0)),u.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=sy(e),[a,u]=ay(t);for(let f=0;f<this.hashCount;f++){const E=this.Ae(a,u,f);if(!this.Re(E))return!1}return!0}static create(e,t,a){const u=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),E=new H1(f,u,t);return a.forEach(x=>E.insert(x)),E}insert(e){if(this.Ee===0)return;const t=sy(e),[a,u]=ay(t);for(let f=0;f<this.hashCount;f++){const E=this.Ae(a,u,f);this.Ve(E)}}Ve(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class Xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,a,u,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=u,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const u=new Map;return u.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new vf(ot.min(),u,new Mn(Bt),ca(),Ot())}}class yc{constructor(e,t,a,u,f){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=u,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new yc(a,t,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t,a,u){this.me=e,this.removedTargetIds=t,this.key=a,this.fe=u}}class G_{constructor(e,t){this.targetId=e,this.ge=t}}class q_{constructor(e,t,a=br.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=u}}class oy{constructor(){this.pe=0,this.ye=ly(),this.we=br.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ot(),t=Ot(),a=Ot();return this.ye.forEach((u,f)=>{switch(f){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:a=a.add(u);break;default:it()}}),new yc(this.we,this.be,e,t,a)}Me(){this.Se=!1,this.ye=ly()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Zt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class t3{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ca(),this.$e=Ih(),this.Ke=Ih(),this.Ue=new Mn(Bt)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const a=this.He(t);switch(e.state){case 0:this.Je(t)&&a.Ce(e.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(e.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(t);break;case 3:this.Je(t)&&(a.Le(),a.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),a.Ce(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((a,u)=>{this.Je(u)&&t(u)})}Ze(e){const t=e.targetId,a=e.ge.count,u=this.Xe(t);if(u){const f=u.target;if(l1(f))if(a===0){const E=new Je(f.path);this.ze(t,E,Vr.newNoDocument(E,ot.min()))}else Zt(a===1);else{const E=this.et(t);if(E!==a){const x=this.tt(e),T=x?this.nt(x,e,E):1;if(T!==0){this.Ye(t);const A=T===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,A)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:u=0},hashCount:f=0}=t;let E,x;try{E=ao(a).toUint8Array()}catch(T){if(T instanceof g_)return Bl("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw T}try{x=new H1(E,u,f)}catch(T){return Bl(T instanceof Xu?"BloomFilter error: ":"Applying bloom filter failed: ",T),null}return x.Ee===0?null:x}nt(e,t,a){return t.ge.count===a-this.st(e,t.targetId)?0:2}st(e,t){const a=this.ke.getRemoteKeysForTarget(t);let u=0;return a.forEach(f=>{const E=this.ke.it(),x=`projects/${E.projectId}/databases/${E.database}/documents/${f.path.canonicalString()}`;e.mightContain(x)||(this.ze(t,f,null),u++)}),u}ot(e){const t=new Map;this.qe.forEach((f,E)=>{const x=this.Xe(E);if(x){if(f.current&&l1(x.target)){const T=new Je(x.target.path);this._t(T).has(E)||this.ut(E,T)||this.ze(E,T,Vr.newNoDocument(T,e))}f.ve&&(t.set(E,f.Fe()),f.Me())}});let a=Ot();this.Ke.forEach((f,E)=>{let x=!0;E.forEachWhile(T=>{const A=this.Xe(T);return!A||A.purpose==="TargetPurposeLimboResolution"||(x=!1,!1)}),x&&(a=a.add(f))}),this.Qe.forEach((f,E)=>E.setReadTime(e));const u=new vf(e,t,this.Ue,this.Qe,a);return this.Qe=ca(),this.$e=Ih(),this.Ke=Ih(),this.Ue=new Mn(Bt),u}Ge(e,t){if(!this.Je(e))return;const a=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,a),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,a){if(!this.Je(e))return;const u=this.He(e);this.ut(e,t)?u.xe(t,1):u.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),a&&(this.Qe=this.Qe.insert(t,a))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new oy,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new hr(Bt),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new hr(Bt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||He("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new oy),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Ih(){return new Mn(Je.comparator)}function ly(){return new Mn(Je.comparator)}const n3={asc:"ASCENDING",desc:"DESCENDING"},r3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},i3={and:"AND",or:"OR"};class s3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function h1(i,e){return i.useProto3Json||Ef(e)?e:{value:e}}function tf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function a3(i,e){return tf(i,e.toTimestamp())}function Ss(i){return Zt(!!i),ot.fromTimestamp(function(t){const a=so(t);return new cr(a.seconds,a.nanos)}(i))}function j1(i,e){return f1(i,e).canonicalString()}function f1(i,e){const t=function(u){return new wn(["projects",u.projectId,"databases",u.database])}(i).child("documents");return e===void 0?t:t.child(e)}function X_(i){const e=wn.fromString(i);return Zt(J_(e)),e}function d1(i,e){return j1(i.databaseId,e.path)}function O0(i,e){const t=X_(e);if(t.get(1)!==i.databaseId.projectId)throw new qe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new qe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Je(Q_(t))}function W_(i,e){return j1(i.databaseId,e)}function o3(i){const e=X_(i);return e.length===4?wn.emptyPath():Q_(e)}function g1(i){return new wn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Q_(i){return Zt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function uy(i,e,t){return{name:d1(i,e),fields:t.value.mapValue.fields}}function l3(i,e){let t;if("targetChange"in e){e.targetChange;const a=function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:it()}(e.targetChange.targetChangeType||"NO_CHANGE"),u=e.targetChange.targetIds||[],f=function(A,I){return A.useProto3Json?(Zt(I===void 0||typeof I=="string"),br.fromBase64String(I||"")):(Zt(I===void 0||I instanceof Buffer||I instanceof Uint8Array),br.fromUint8Array(I||new Uint8Array))}(i,e.targetChange.resumeToken),E=e.targetChange.cause,x=E&&function(A){const I=A.code===void 0?xe.UNKNOWN:j_(A.code);return new qe(I,A.message||"")}(E);t=new q_(a,u,f,x||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const u=O0(i,a.document.name),f=Ss(a.document.updateTime),E=a.document.createTime?Ss(a.document.createTime):ot.min(),x=new gi({mapValue:{fields:a.document.fields}}),T=Vr.newFoundDocument(u,f,E,x),A=a.targetIds||[],I=a.removedTargetIds||[];t=new Vh(A,I,T.key,T)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const u=O0(i,a.document),f=a.readTime?Ss(a.readTime):ot.min(),E=Vr.newNoDocument(u,f),x=a.removedTargetIds||[];t=new Vh([],x,E.key,E)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const u=O0(i,a.document),f=a.removedTargetIds||[];t=new Vh([],f,u,null)}else{if(!("filter"in e))return it();{e.filter;const a=e.filter;a.targetId;const{count:u=0,unchangedNames:f}=a,E=new ZS(u,f),x=a.targetId;t=new G_(x,E)}}return t}function u3(i,e){let t;if(e instanceof pc)t={update:uy(i,e.key,e.value)};else if(e instanceof H_)t={delete:d1(i,e.key)};else if(e instanceof fo)t={update:uy(i,e.key,e.data),updateMask:E3(e.fieldMask)};else{if(!(e instanceof WS))return it();t={verify:d1(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(f,E){const x=E.transform;if(x instanceof $h)return{fieldPath:E.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(x instanceof ac)return{fieldPath:E.field.canonicalString(),appendMissingElements:{values:x.elements}};if(x instanceof oc)return{fieldPath:E.field.canonicalString(),removeAllFromArray:{values:x.elements}};if(x instanceof ef)return{fieldPath:E.field.canonicalString(),increment:x.Ie};throw it()}(0,a))),e.precondition.isNone||(t.currentDocument=function(u,f){return f.updateTime!==void 0?{updateTime:a3(u,f.updateTime)}:f.exists!==void 0?{exists:f.exists}:it()}(i,e.precondition)),t}function c3(i,e){return i&&i.length>0?(Zt(e!==void 0),i.map(t=>function(u,f){let E=u.updateTime?Ss(u.updateTime):Ss(f);return E.isEqual(ot.min())&&(E=Ss(f)),new qS(E,u.transformResults||[])}(t,e))):[]}function h3(i,e){return{documents:[W_(i,e.path)]}}function f3(i,e){const t={structuredQuery:{}},a=e.path;let u;e.collectionGroup!==null?(u=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=W_(i,u);const f=function(A){if(A.length!==0)return Z_(os.create(A,"and"))}(e.filters);f&&(t.structuredQuery.where=f);const E=function(A){if(A.length!==0)return A.map(I=>function(B){return{field:Il(B.field),direction:m3(B.dir)}}(I))}(e.orderBy);E&&(t.structuredQuery.orderBy=E);const x=h1(i,e.limit);return x!==null&&(t.structuredQuery.limit=x),e.startAt&&(t.structuredQuery.startAt=function(A){return{before:A.inclusive,values:A.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(A){return{before:!A.inclusive,values:A.position}}(e.endAt)),{ht:t,parent:u}}function d3(i){let e=o3(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let u=null;if(a>0){Zt(a===1);const I=t.from[0];I.allDescendants?u=I.collectionId:e=e.child(I.collectionId)}let f=[];t.where&&(f=function(R){const B=K_(R);return B instanceof os&&v_(B)?B.getFilters():[B]}(t.where));let E=[];t.orderBy&&(E=function(R){return R.map(B=>function(q){return new Jh(bl(q.field),function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(B))}(t.orderBy));let x=null;t.limit&&(x=function(R){let B;return B=typeof R=="object"?R.value:R,Ef(B)?null:B}(t.limit));let T=null;t.startAt&&(T=function(R){const B=!!R.before,j=R.values||[];return new Zh(j,B)}(t.startAt));let A=null;return t.endAt&&(A=function(R){const B=!R.before,j=R.values||[];return new Zh(j,B)}(t.endAt)),OS(e,u,E,f,x,"F",T,A)}function g3(i,e){const t=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function K_(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=bl(t.unaryFilter.field);return rr.create(a,"==",{doubleValue:NaN});case"IS_NULL":const u=bl(t.unaryFilter.field);return rr.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=bl(t.unaryFilter.field);return rr.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const E=bl(t.unaryFilter.field);return rr.create(E,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(i):i.fieldFilter!==void 0?function(t){return rr.create(bl(t.fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return os.create(t.compositeFilter.filters.map(a=>K_(a)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return it()}}(t.compositeFilter.op))}(i):it()}function m3(i){return n3[i]}function p3(i){return r3[i]}function y3(i){return i3[i]}function Il(i){return{fieldPath:i.canonicalString()}}function bl(i){return Ir.fromServerFormat(i.fieldPath)}function Z_(i){return i instanceof rr?function(t){if(t.op==="=="){if(K2(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NAN"}};if(Q2(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(K2(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NOT_NAN"}};if(Q2(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Il(t.field),op:p3(t.op),value:t.value}}}(i):i instanceof os?function(t){const a=t.getFilters().map(u=>Z_(u));return a.length===1?a[0]:{compositeFilter:{op:y3(t.op),filters:a}}}(i):it()}function E3(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function J_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t,a,u,f=ot.min(),E=ot.min(),x=br.EMPTY_BYTE_STRING,T=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=u,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=x,this.expectedCount=T}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.Tt=e}}function A3(i){const e=d3({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?c1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.Tn=new x3}addToCollectionParentIndex(e,t){return this.Tn.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(io.min())}getMinOffsetFromCollectionGroup(e,t){return we.resolve(io.min())}updateCollectionGroup(e,t,a){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}}class x3{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),u=this.index[t]||new hr(wn.comparator),f=!u.has(a);return this.index[t]=u.add(a),f}has(e){const t=e.lastSegment(),a=e.popLast(),u=this.index[t];return u&&u.has(a)}getEntries(e){return(this.index[e]||new hr(wn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$_=41943040;class di{static withCacheSize(e){return new di(e,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di.DEFAULT_COLLECTION_PERCENTILE=10,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,di.DEFAULT=new di($_,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),di.DISABLED=new di(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Fl(0)}static Un(){return new Fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="LruGarbageCollector",T3=1048576;function fy([i,e],[t,a]){const u=Bt(i,t);return u===0?Bt(e,a):u}class v3{constructor(e){this.Hn=e,this.buffer=new hr(fy),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();fy(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class C3{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){He(hy,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Kl(t)?He(hy,"Ignoring IndexedDB error during garbage collection: ",t):await Ql(t)}await this.er(3e5)})}}class S3{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(t===0)return we.resolve(yf.ae);const a=new v3(t);return this.tr.forEachTarget(e,u=>a.Zn(u.sequenceNumber)).next(()=>this.tr.rr(e,u=>a.Zn(u))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.tr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(cy)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cy):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let a,u,f,E,x,T,A;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),u=this.params.maximumSequenceNumbersToCollect):u=R,E=Date.now(),this.nthSequenceNumber(e,u))).next(R=>(a=R,x=Date.now(),this.removeTargets(e,a,t))).next(R=>(f=R,T=Date.now(),this.removeOrphanedDocuments(e,a))).next(R=>(A=Date.now(),Cl()<=Dt.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${E-I}ms
	Determined least recently used ${u} in `+(x-E)+`ms
	Removed ${f} targets in `+(T-x)+`ms
	Removed ${R} documents in `+(A-T)+`ms
Total Duration: ${A-I}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:f,documentsRemoved:R})))}}function I3(i,e){return new S3(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.changes=new jo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?we.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,t,a,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=u}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(a=u,this.remoteDocumentCache.getEntry(e,t))).next(u=>(a!==null&&Ju(a.mutation,u,Ii.empty(),cr.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Ot()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Ot()){const u=Po();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,a).next(f=>{let E=Yu();return f.forEach((x,T)=>{E=E.insert(x,T.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const a=Po();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Ot()))}populateOverlays(e,t,a){const u=[];return a.forEach(f=>{t.has(f)||u.push(f)}),this.documentOverlayCache.getOverlays(e,u).next(f=>{f.forEach((E,x)=>{t.set(E,x)})})}computeViews(e,t,a,u){let f=ca();const E=Zu(),x=function(){return Zu()}();return t.forEach((T,A)=>{const I=a.get(A.key);u.has(A.key)&&(I===void 0||I.mutation instanceof fo)?f=f.insert(A.key,A):I!==void 0?(E.set(A.key,I.mutation.getFieldMask()),Ju(I.mutation,A,I.mutation.getFieldMask(),cr.now())):E.set(A.key,Ii.empty())}),this.recalculateAndSaveOverlays(e,f).next(T=>(T.forEach((A,I)=>E.set(A,I)),t.forEach((A,I)=>{var R;return x.set(A,new R3(I,(R=E.get(A))!==null&&R!==void 0?R:null))}),x))}recalculateAndSaveOverlays(e,t){const a=Zu();let u=new Mn((E,x)=>E-x),f=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const x of E)x.keys().forEach(T=>{const A=t.get(T);if(A===null)return;let I=a.get(T)||Ii.empty();I=x.applyToLocalView(A,I),a.set(T,I);const R=(u.get(x.batchId)||Ot()).add(T);u=u.insert(x.batchId,R)})}).next(()=>{const E=[],x=u.getReverseIterator();for(;x.hasNext();){const T=x.getNext(),A=T.key,I=T.value,R=L_();I.forEach(B=>{if(!f.has(B)){const j=F_(t.get(B),a.get(B));j!==null&&R.set(B,j),f=f.add(B)}}),E.push(this.documentOverlayCache.saveOverlays(e,A,R))}return we.waitFor(E)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a,u){return function(E){return Je.isDocumentKey(E.path)&&E.collectionGroup===null&&E.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):R_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,u):this.getDocumentsMatchingCollectionQuery(e,t,a,u)}getNextDocuments(e,t,a,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,u).next(f=>{const E=u-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,u-f.size):we.resolve(Po());let x=nc,T=f;return E.next(A=>we.forEach(A,(I,R)=>(x<R.largestBatchId&&(x=R.largestBatchId),f.get(I)?we.resolve():this.remoteDocumentCache.getEntry(e,I).next(B=>{T=T.insert(I,B)}))).next(()=>this.populateOverlays(e,A,f)).next(()=>this.computeViews(e,T,A,Ot())).next(I=>({batchId:x,changes:M_(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(a=>{let u=Yu();return a.isFoundDocument()&&(u=u.insert(a.key,a)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,a,u){const f=t.collectionGroup;let E=Yu();return this.indexManager.getCollectionParents(e,f).next(x=>we.forEach(x,T=>{const A=function(R,B){return new mc(B,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(t,T.child(f));return this.getDocumentsMatchingCollectionQuery(e,A,a,u).next(I=>{I.forEach((R,B)=>{E=E.insert(R,B)})})}).next(()=>E))}getDocumentsMatchingCollectionQuery(e,t,a,u){let f;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(E=>(f=E,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,f,u))).next(E=>{f.forEach((T,A)=>{const I=A.getKey();E.get(I)===null&&(E=E.insert(I,Vr.newInvalidDocument(I)))});let x=Yu();return E.forEach((T,A)=>{const I=f.get(T);I!==void 0&&Ju(I.mutation,A,Ii.empty(),cr.now()),wf(t,A)&&(x=x.insert(T,A))}),x})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return we.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(u){return{id:u.id,version:u.version,createTime:Ss(u.createTime)}}(t)),we.resolve()}getNamedQuery(e,t){return we.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(u){return{name:u.name,query:A3(u.bundledQuery),readTime:Ss(u.readTime)}}(t)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.overlays=new Mn(Je.comparator),this.Rr=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Po();return we.forEach(t,u=>this.getOverlay(e,u).next(f=>{f!==null&&a.set(u,f)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((u,f)=>{this.Et(e,t,f)}),we.resolve()}removeOverlaysForBatchId(e,t,a){const u=this.Rr.get(a);return u!==void 0&&(u.forEach(f=>this.overlays=this.overlays.remove(f)),this.Rr.delete(a)),we.resolve()}getOverlaysForCollection(e,t,a){const u=Po(),f=t.length+1,E=new Je(t.child("")),x=this.overlays.getIteratorFrom(E);for(;x.hasNext();){const T=x.getNext().value,A=T.getKey();if(!t.isPrefixOf(A.path))break;A.path.length===f&&T.largestBatchId>a&&u.set(T.getKey(),T)}return we.resolve(u)}getOverlaysForCollectionGroup(e,t,a,u){let f=new Mn((A,I)=>A-I);const E=this.overlays.getIterator();for(;E.hasNext();){const A=E.getNext().value;if(A.getKey().getCollectionGroup()===t&&A.largestBatchId>a){let I=f.get(A.largestBatchId);I===null&&(I=Po(),f=f.insert(A.largestBatchId,I)),I.set(A.getKey(),A)}}const x=Po(),T=f.getIterator();for(;T.hasNext()&&(T.getNext().value.forEach((A,I)=>x.set(A,I)),!(x.size()>=u)););return we.resolve(x)}Et(e,t,a){const u=this.overlays.get(a.key);if(u!==null){const E=this.Rr.get(u.largestBatchId).delete(a.key);this.Rr.set(u.largestBatchId,E)}this.overlays=this.overlays.insert(a.key,new KS(t,a));let f=this.Rr.get(t);f===void 0&&(f=Ot(),this.Rr.set(t,f)),this.Rr.set(t,f.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.sessionToken=br.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.Vr=new hr(yr.mr),this.gr=new hr(yr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const a=new yr(e,t);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.wr(new yr(e,t))}br(e,t){e.forEach(a=>this.removeReference(a,t))}Sr(e){const t=new Je(new wn([])),a=new yr(t,e),u=new yr(t,e+1),f=[];return this.gr.forEachInRange([a,u],E=>{this.wr(E),f.push(E.key)}),f}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Je(new wn([])),a=new yr(t,e),u=new yr(t,e+1);let f=Ot();return this.gr.forEachInRange([a,u],E=>{f=f.add(E.key)}),f}containsKey(e){const t=new yr(e,0),a=this.Vr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class yr{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Je.comparator(e.key,t.key)||Bt(e.Cr,t.Cr)}static pr(e,t){return Bt(e.Cr,t.Cr)||Je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new hr(yr.mr)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,u){const f=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const E=new QS(f,t,a,u);this.mutationQueue.push(E);for(const x of u)this.Mr=this.Mr.add(new yr(x.key,f)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return we.resolve(E)}lookupMutationBatch(e,t){return we.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,u=this.Nr(a),f=u<0?0:u;return we.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?P1:this.Fr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new yr(t,0),u=new yr(t,Number.POSITIVE_INFINITY),f=[];return this.Mr.forEachInRange([a,u],E=>{const x=this.Or(E.Cr);f.push(x)}),we.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new hr(Bt);return t.forEach(u=>{const f=new yr(u,0),E=new yr(u,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([f,E],x=>{a=a.add(x.Cr)})}),we.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,u=a.length+1;let f=a;Je.isDocumentKey(f)||(f=f.child(""));const E=new yr(new Je(f),0);let x=new hr(Bt);return this.Mr.forEachWhile(T=>{const A=T.key.path;return!!a.isPrefixOf(A)&&(A.length===u&&(x=x.add(T.Cr)),!0)},E),we.resolve(this.Br(x))}Br(e){const t=[];return e.forEach(a=>{const u=this.Or(a);u!==null&&t.push(u)}),t}removeMutationBatch(e,t){Zt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return we.forEach(t.mutations,u=>{const f=new yr(u.key,t.batchId);return a=a.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Mr=a})}qn(e){}containsKey(e,t){const a=new yr(t,0),u=this.Mr.firstAfterOrEqual(a);return we.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.kr=e,this.docs=function(){return new Mn(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,u=this.docs.get(a),f=u?u.size:0,E=this.kr(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:E}),this.size+=E-f,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return we.resolve(a?a.document.mutableCopy():Vr.newInvalidDocument(t))}getEntries(e,t){let a=ca();return t.forEach(u=>{const f=this.docs.get(u);a=a.insert(u,f?f.document.mutableCopy():Vr.newInvalidDocument(u))}),we.resolve(a)}getDocumentsMatchingQuery(e,t,a,u){let f=ca();const E=t.path,x=new Je(E.child("__id-9223372036854775808__")),T=this.docs.getIteratorFrom(x);for(;T.hasNext();){const{key:A,value:{document:I}}=T.getNext();if(!E.isPrefixOf(A.path))break;A.path.length>E.length+1||cS(uS(I),a)<=0||(u.has(I.key)||wf(t,I))&&(f=f.insert(I.key,I.mutableCopy()))}return we.resolve(f)}getAllFromCollectionGroup(e,t,a,u){it()}qr(e,t){return we.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new B3(this)}getSize(e){return we.resolve(this.size)}}class B3 extends b3{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((a,u)=>{u.isValidDocument()?t.push(this.Ir.addEntry(e,u)):this.Ir.removeEntry(a)}),we.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.persistence=e,this.Qr=new jo(t=>U1(t),V1),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.$r=0,this.Kr=new G1,this.targetCount=0,this.Ur=Fl.Kn()}forEachTarget(e,t){return this.Qr.forEach((a,u)=>t(u)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.$r&&(this.$r=t),we.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Fl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.zn(t),we.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,a){let u=0;const f=[];return this.Qr.forEach((E,x)=>{x.sequenceNumber<=t&&a.get(x.targetId)===null&&(this.Qr.delete(E),f.push(this.removeMatchingKeysForTargetId(e,x.targetId)),u++)}),we.waitFor(f).next(()=>u)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){const a=this.Qr.get(t)||null;return we.resolve(a)}addMatchingKeys(e,t,a){return this.Kr.yr(t,a),we.resolve()}removeMatchingKeys(e,t,a){this.Kr.br(t,a);const u=this.persistence.referenceDelegate,f=[];return u&&t.forEach(E=>{f.push(u.markPotentiallyOrphaned(e,E))}),we.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),we.resolve()}getMatchingKeysForTargetId(e,t){const a=this.Kr.vr(t);return we.resolve(a)}containsKey(e,t){return we.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new yf(0),this.zr=!1,this.zr=!0,this.jr=new M3,this.referenceDelegate=e(this),this.Hr=new k3(this),this.indexManager=new w3,this.remoteDocumentCache=function(u){return new P3(u)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new _3(t),this.Yr=new D3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Wr[e.toKey()];return a||(a=new L3(t,this.referenceDelegate),this.Wr[e.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,a){He("MemoryPersistence","Starting transaction:",e);const u=new U3(this.Gr.next());return this.referenceDelegate.Zr(),a(u).next(f=>this.referenceDelegate.Xr(u).next(()=>f)).toPromise().then(f=>(u.raiseOnCommittedEvent(),f))}ei(e,t){return we.or(Object.values(this.Wr).map(a=>()=>a.containsKey(e,t)))}}class U3 extends fS{constructor(e){super(),this.currentSequenceNumber=e}}class q1{constructor(e){this.persistence=e,this.ti=new G1,this.ni=null}static ri(e){return new q1(e)}get ii(){if(this.ni)return this.ni;throw it()}addReference(e,t,a){return this.ti.addReference(a,t),this.ii.delete(a.toString()),we.resolve()}removeReference(e,t,a){return this.ti.removeReference(a,t),this.ii.add(a.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),we.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(u=>this.ii.add(u.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(f=>this.ii.add(f.toString()))}).next(()=>a.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.ii,a=>{const u=Je.fromPath(a);return this.si(e,u).next(f=>{f||t.removeEntry(u,ot.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(a=>{a?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return we.or([()=>we.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class nf{constructor(e,t){this.persistence=e,this.oi=new jo(a=>mS(a.path),(a,u)=>a.isEqual(u)),this.garbageCollector=I3(this,t)}static ri(e,t){return new nf(e,t)}Zr(){}Xr(e){return we.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>t.next(u=>a+u))}sr(e){let t=0;return this.rr(e,a=>{t++}).next(()=>t)}rr(e,t){return we.forEach(this.oi,(a,u)=>this.ar(e,a,u).next(f=>f?we.resolve():t(u)))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const u=this.persistence.getRemoteDocumentCache(),f=u.newChangeBuffer();return u.qr(e,E=>this.ar(e,E,t).next(x=>{x||(a++,f.removeEntry(E,ot.min()))})).next(()=>f.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),we.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.oi.set(a,e.currentSequenceNumber),we.resolve()}removeReference(e,t,a){return this.oi.set(a,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),we.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bh(e.data.value)),t}ar(e,t,a){return we.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const u=this.oi.get(t);return we.resolve(u!==void 0&&u>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t,a,u){this.targetId=e,this.fromCache=t,this.Hi=a,this.Ji=u}static Yi(e,t){let a=Ot(),u=Ot();for(const f of t.docChanges)switch(f.type){case 0:a=a.add(f.doc.key);break;case 1:u=u.add(f.doc.key)}return new Y1(e,t.fromCache,a,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Bv()?8:dS(Fr())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,a,u){const f={result:null};return this.rs(e,t).next(E=>{f.result=E}).next(()=>{if(!f.result)return this.ss(e,t,u,a).next(E=>{f.result=E})}).next(()=>{if(f.result)return;const E=new V3;return this._s(e,t,E).next(x=>{if(f.result=x,this.Xi)return this.us(e,t,E,x.size)})}).next(()=>f.result)}us(e,t,a,u){return a.documentReadCount<this.es?(Cl()<=Dt.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",Sl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),we.resolve()):(Cl()<=Dt.DEBUG&&He("QueryEngine","Query:",Sl(t),"scans",a.documentReadCount,"local documents and returns",u,"documents as results."),a.documentReadCount>this.ts*u?(Cl()<=Dt.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",Sl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(t))):we.resolve())}rs(e,t){if(ey(t))return we.resolve(null);let a=vs(t);return this.indexManager.getIndexType(e,a).next(u=>u===0?null:(t.limit!==null&&u===1&&(t=c1(t,null,"F"),a=vs(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(f=>{const E=Ot(...f);return this.ns.getDocuments(e,E).next(x=>this.indexManager.getMinOffset(e,a).next(T=>{const A=this.cs(t,x);return this.ls(t,A,E,T.readTime)?this.rs(e,c1(t,null,"F")):this.hs(e,A,t,T)}))})))}ss(e,t,a,u){return ey(t)||u.isEqual(ot.min())?we.resolve(null):this.ns.getDocuments(e,a).next(f=>{const E=this.cs(t,f);return this.ls(t,E,a,u)?we.resolve(null):(Cl()<=Dt.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Sl(t)),this.hs(e,E,t,lS(u,nc)).next(x=>x))})}cs(e,t){let a=new hr(D_(e));return t.forEach((u,f)=>{wf(e,f)&&(a=a.add(f))}),a}ls(e,t,a,u){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const f=e.limitType==="F"?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(u)>0)}_s(e,t,a){return Cl()<=Dt.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",Sl(t)),this.ns.getDocumentsMatchingQuery(e,t,io.min(),a)}hs(e,t,a,u){return this.ns.getDocumentsMatchingQuery(e,a,u).next(f=>(t.forEach(E=>{f=f.insert(E.key,E)}),f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="LocalStore",z3=3e8;class H3{constructor(e,t,a,u){this.persistence=e,this.Ps=t,this.serializer=u,this.Ts=new Mn(Bt),this.Is=new jo(f=>U1(f),V1),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(a)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N3(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function j3(i,e,t,a){return new H3(i,e,t,a)}async function tA(i,e){const t=ht(i);return await t.persistence.runTransaction("Handle user change","readonly",a=>{let u;return t.mutationQueue.getAllMutationBatches(a).next(f=>(u=f,t.As(e),t.mutationQueue.getAllMutationBatches(a))).next(f=>{const E=[],x=[];let T=Ot();for(const A of u){E.push(A.batchId);for(const I of A.mutations)T=T.add(I.key)}for(const A of f){x.push(A.batchId);for(const I of A.mutations)T=T.add(I.key)}return t.localDocuments.getDocuments(a,T).next(A=>({Rs:A,removedBatchIds:E,addedBatchIds:x}))})})}function G3(i,e){const t=ht(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const u=e.batch.keys(),f=t.ds.newChangeBuffer({trackRemovals:!0});return function(x,T,A,I){const R=A.batch,B=R.keys();let j=we.resolve();return B.forEach(q=>{j=j.next(()=>I.getEntry(T,q)).next($=>{const te=A.docVersions.get(q);Zt(te!==null),$.version.compareTo(te)<0&&(R.applyToRemoteDocument($,A),$.isValidDocument()&&($.setReadTime(A.commitVersion),I.addEntry($)))})}),j.next(()=>x.mutationQueue.removeMutationBatch(T,R))}(t,a,e,f).next(()=>f.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(x){let T=Ot();for(let A=0;A<x.mutationResults.length;++A)x.mutationResults[A].transformResults.length>0&&(T=T.add(x.batch.mutations[A].key));return T}(e))).next(()=>t.localDocuments.getDocuments(a,u))})}function nA(i){const e=ht(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function q3(i,e){const t=ht(i),a=e.snapshotVersion;let u=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const E=t.ds.newChangeBuffer({trackRemovals:!0});u=t.Ts;const x=[];e.targetChanges.forEach((I,R)=>{const B=u.get(R);if(!B)return;x.push(t.Hr.removeMatchingKeys(f,I.removedDocuments,R).next(()=>t.Hr.addMatchingKeys(f,I.addedDocuments,R)));let j=B.withSequenceNumber(f.currentSequenceNumber);e.targetMismatches.get(R)!==null?j=j.withResumeToken(br.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):I.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(I.resumeToken,a)),u=u.insert(R,j),function($,te,ie){return $.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=z3?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0}(B,j,I)&&x.push(t.Hr.updateTargetData(f,j))});let T=ca(),A=Ot();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&x.push(t.persistence.referenceDelegate.updateLimboDocument(f,I))}),x.push(Y3(f,E,e.documentUpdates).next(I=>{T=I.Vs,A=I.fs})),!a.isEqual(ot.min())){const I=t.Hr.getLastRemoteSnapshotVersion(f).next(R=>t.Hr.setTargetsMetadata(f,f.currentSequenceNumber,a));x.push(I)}return we.waitFor(x).next(()=>E.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,T,A)).next(()=>T)}).then(f=>(t.Ts=u,f))}function Y3(i,e,t){let a=Ot(),u=Ot();return t.forEach(f=>a=a.add(f)),e.getEntries(i,a).next(f=>{let E=ca();return t.forEach((x,T)=>{const A=f.get(x);T.isFoundDocument()!==A.isFoundDocument()&&(u=u.add(x)),T.isNoDocument()&&T.version.isEqual(ot.min())?(e.removeEntry(x,T.readTime),E=E.insert(x,T)):!A.isValidDocument()||T.version.compareTo(A.version)>0||T.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(T),E=E.insert(x,T)):He(X1,"Ignoring outdated watch update for ",x,". Current version:",A.version," Watch version:",T.version)}),{Vs:E,fs:u}})}function X3(i,e){const t=ht(i);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=P1),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function W3(i,e){const t=ht(i);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let u;return t.Hr.getTargetData(a,e).next(f=>f?(u=f,we.resolve(u)):t.Hr.allocateTargetId(a).next(E=>(u=new Za(e,E,"TargetPurposeListen",a.currentSequenceNumber),t.Hr.addTargetData(a,u).next(()=>u))))}).then(a=>{const u=t.Ts.get(a.targetId);return(u===null||a.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(a.targetId,a),t.Is.set(e,a.targetId)),a})}async function m1(i,e,t){const a=ht(i),u=a.Ts.get(e),f=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",f,E=>a.persistence.referenceDelegate.removeTarget(E,u))}catch(E){if(!Kl(E))throw E;He(X1,`Failed to update sequence numbers for target ${e}: ${E}`)}a.Ts=a.Ts.remove(e),a.Is.delete(u.target)}function dy(i,e,t){const a=ht(i);let u=ot.min(),f=Ot();return a.persistence.runTransaction("Execute query","readwrite",E=>function(T,A,I){const R=ht(T),B=R.Is.get(I);return B!==void 0?we.resolve(R.Ts.get(B)):R.Hr.getTargetData(A,I)}(a,E,vs(e)).next(x=>{if(x)return u=x.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(E,x.targetId).next(T=>{f=T})}).next(()=>a.Ps.getDocumentsMatchingQuery(E,e,t?u:ot.min(),t?f:Ot())).next(x=>(Q3(a,LS(e),x),{documents:x,gs:f})))}function Q3(i,e,t){let a=i.Es.get(e)||ot.min();t.forEach((u,f)=>{f.readTime.compareTo(a)>0&&(a=f.readTime)}),i.Es.set(e,a)}class gy{constructor(){this.activeTargetIds=FS()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K3{constructor(){this.ho=new gy,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,a){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new gy,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="ConnectivityMonitor";class py{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){He(my,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){He(my,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh=null;function p1(){return bh===null?bh=function(){return 268435456+Math.round(2147483648*Math.random())}():bh++,"0x"+bh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="RestConnection",J3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $3{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${a}/databases/${u}`,this.wo=this.databaseId.database===Qh?`project_id=${a}`:`project_id=${a}&database_id=${u}`}bo(e,t,a,u,f){const E=p1(),x=this.So(e,t.toUriEncodedString());He(M0,`Sending RPC '${e}' ${E}:`,x,a);const T={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(T,u,f),this.vo(e,x,T,a).then(A=>(He(M0,`Received RPC '${e}' ${E}: `,A),A),A=>{throw Bl(M0,`RPC '${e}' ${E} failed with error: `,A,"url: ",x,"request:",a),A})}Co(e,t,a,u,f,E){return this.bo(e,t,a,u,f)}Do(e,t,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,f)=>e[f]=u),a&&a.headers.forEach((u,f)=>e[f]=u)}So(e,t){const a=J3[e];return`${this.po}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="WebChannelConnection";class tI extends $3{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,a,u){const f=p1();return new Promise((E,x)=>{const T=new s_;T.setWithCredentials(!0),T.listenOnce(a_.COMPLETE,()=>{try{switch(T.getLastErrorCode()){case Ph.NO_ERROR:const I=T.getResponseJson();He(kr,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(I)),E(I);break;case Ph.TIMEOUT:He(kr,`RPC '${e}' ${f} timed out`),x(new qe(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Ph.HTTP_ERROR:const R=T.getStatus();if(He(kr,`RPC '${e}' ${f} failed with status:`,R,"response text:",T.getResponseText()),R>0){let B=T.getResponseJson();Array.isArray(B)&&(B=B[0]);const j=B==null?void 0:B.error;if(j&&j.status&&j.message){const q=function(te){const ie=te.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(ie)>=0?ie:xe.UNKNOWN}(j.status);x(new qe(q,j.message))}else x(new qe(xe.UNKNOWN,"Server responded with status "+T.getStatus()))}else x(new qe(xe.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{He(kr,`RPC '${e}' ${f} completed.`)}});const A=JSON.stringify(u);He(kr,`RPC '${e}' ${f} sending request:`,u),T.send(t,"POST",A,a,15)})}Wo(e,t,a){const u=p1(),f=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=u_(),x=l_(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(T.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(T.useFetchStreams=!0),this.Do(T.initMessageHeaders,t,a),T.encodeInitMessageHeaders=!0;const I=f.join("");He(kr,`Creating RPC '${e}' stream ${u}: ${I}`,T);const R=E.createWebChannel(I,T);let B=!1,j=!1;const q=new eI({Fo:te=>{j?He(kr,`Not sending because RPC '${e}' stream ${u} is closed:`,te):(B||(He(kr,`Opening RPC '${e}' stream ${u} transport.`),R.open(),B=!0),He(kr,`RPC '${e}' stream ${u} sending:`,te),R.send(te))},Mo:()=>R.close()}),$=(te,ie,me)=>{te.listen(ie,ue=>{try{me(ue)}catch(De){setTimeout(()=>{throw De},0)}})};return $(R,qu.EventType.OPEN,()=>{j||(He(kr,`RPC '${e}' stream ${u} transport opened.`),q.Qo())}),$(R,qu.EventType.CLOSE,()=>{j||(j=!0,He(kr,`RPC '${e}' stream ${u} transport closed`),q.Ko())}),$(R,qu.EventType.ERROR,te=>{j||(j=!0,Bl(kr,`RPC '${e}' stream ${u} transport errored:`,te),q.Ko(new qe(xe.UNAVAILABLE,"The operation could not be completed")))}),$(R,qu.EventType.MESSAGE,te=>{var ie;if(!j){const me=te.data[0];Zt(!!me);const ue=me,De=(ue==null?void 0:ue.error)||((ie=ue[0])===null||ie===void 0?void 0:ie.error);if(De){He(kr,`RPC '${e}' stream ${u} received error:`,De);const Ve=De.status;let ke=function(L){const X=nr[L];if(X!==void 0)return j_(X)}(Ve),H=De.message;ke===void 0&&(ke=xe.INTERNAL,H="Unknown error status: "+Ve+" with message "+De.message),j=!0,q.Ko(new qe(ke,H)),R.close()}else He(kr,`RPC '${e}' stream ${u} received:`,me),q.Uo(me)}}),$(x,o_.STAT_EVENT,te=>{te.stat===i1.PROXY?He(kr,`RPC '${e}' stream ${u} detected buffering proxy`):te.stat===i1.NOPROXY&&He(kr,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{q.$o()},0),q}}function L0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(i){return new s3(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t,a=1e3,u=1.5,f=6e4){this.Ti=e,this.timerId=t,this.Go=a,this.zo=u,this.jo=f,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),u=Math.max(0,t-a);u>0&&He("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,u,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="PersistentStream";class iA{constructor(e,t,a,u,f,E,x,T){this.Ti=e,this.n_=a,this.r_=u,this.connection=f,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=x,this.listener=T,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new rA(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===xe.RESOURCE_EXHAUSTED?(ua(t.toString()),ua("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,u])=>{this.i_===t&&this.V_(a,u)},a=>{e(()=>{const u=new qe(xe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(u)})})}V_(e,t){const a=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(u=>{a(()=>this.m_(u))}),this.stream.onMessage(u=>{a(()=>++this.__==1?this.g_(u):this.onNext(u))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return He(yy,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(He(yy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nI extends iA{constructor(e,t,a,u,f,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,u,E),this.serializer=f}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=l3(this.serializer,e),a=function(f){if(!("targetChange"in f))return ot.min();const E=f.targetChange;return E.targetIds&&E.targetIds.length?ot.min():E.readTime?Ss(E.readTime):ot.min()}(e);return this.listener.p_(t,a)}y_(e){const t={};t.database=g1(this.serializer),t.addTarget=function(f,E){let x;const T=E.target;if(x=l1(T)?{documents:h3(f,T)}:{query:f3(f,T).ht},x.targetId=E.targetId,E.resumeToken.approximateByteSize()>0){x.resumeToken=Y_(f,E.resumeToken);const A=h1(f,E.expectedCount);A!==null&&(x.expectedCount=A)}else if(E.snapshotVersion.compareTo(ot.min())>0){x.readTime=tf(f,E.snapshotVersion.toTimestamp());const A=h1(f,E.expectedCount);A!==null&&(x.expectedCount=A)}return x}(this.serializer,e);const a=g3(this.serializer,e);a&&(t.labels=a),this.I_(t)}w_(e){const t={};t.database=g1(this.serializer),t.removeTarget=e,this.I_(t)}}class rI extends iA{constructor(e,t,a,u,f,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,u,E),this.serializer=f}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=c3(e.writeResults,e.commitTime),a=Ss(e.commitTime);return this.listener.v_(a,t)}C_(){const e={};e.database=g1(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>u3(this.serializer,a))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{}class sI extends iI{constructor(e,t,a,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=u,this.F_=!1}M_(){if(this.F_)throw new qe(xe.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,a,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,E])=>this.connection.bo(e,f1(t,a),u,f,E)).catch(f=>{throw f.name==="FirebaseError"?(f.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new qe(xe.UNKNOWN,f.toString())})}Co(e,t,a,u,f){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([E,x])=>this.connection.Co(e,f1(t,a),u,E,x,f)).catch(E=>{throw E.name==="FirebaseError"?(E.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),E):new qe(xe.UNKNOWN,E.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class aI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ua(t),this.N_=!1):He("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="RemoteStore";class oI{constructor(e,t,a,u,f){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=f,this.z_.To(E=>{a.enqueueAndForget(async()=>{Go(this)&&(He(Fo,"Restarting streams for network reachability change."),await async function(T){const A=ht(T);A.W_.add(4),await Ec(A),A.j_.set("Unknown"),A.W_.delete(4),await Sf(A)}(this))})}),this.j_=new aI(a,u)}}async function Sf(i){if(Go(i))for(const e of i.G_)await e(!0)}async function Ec(i){for(const e of i.G_)await e(!1)}function sA(i,e){const t=ht(i);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Z1(t)?K1(t):Zl(t).c_()&&Q1(t,e))}function W1(i,e){const t=ht(i),a=Zl(t);t.U_.delete(e),a.c_()&&aA(t,e),t.U_.size===0&&(a.c_()?a.P_():Go(t)&&t.j_.set("Unknown"))}function Q1(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zl(i).y_(e)}function aA(i,e){i.H_.Ne(e),Zl(i).w_(e)}function K1(i){i.H_=new t3({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.U_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),Zl(i).start(),i.j_.B_()}function Z1(i){return Go(i)&&!Zl(i).u_()&&i.U_.size>0}function Go(i){return ht(i).W_.size===0}function oA(i){i.H_=void 0}async function lI(i){i.j_.set("Online")}async function uI(i){i.U_.forEach((e,t)=>{Q1(i,e)})}async function cI(i,e){oA(i),Z1(i)?(i.j_.q_(e),K1(i)):i.j_.set("Unknown")}async function hI(i,e,t){if(i.j_.set("Online"),e instanceof q_&&e.state===2&&e.cause)try{await async function(u,f){const E=f.cause;for(const x of f.targetIds)u.U_.has(x)&&(await u.remoteSyncer.rejectListen(x,E),u.U_.delete(x),u.H_.removeTarget(x))}(i,e)}catch(a){He(Fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await rf(i,a)}else if(e instanceof Vh?i.H_.We(e):e instanceof G_?i.H_.Ze(e):i.H_.je(e),!t.isEqual(ot.min()))try{const a=await nA(i.localStore);t.compareTo(a)>=0&&await function(f,E){const x=f.H_.ot(E);return x.targetChanges.forEach((T,A)=>{if(T.resumeToken.approximateByteSize()>0){const I=f.U_.get(A);I&&f.U_.set(A,I.withResumeToken(T.resumeToken,E))}}),x.targetMismatches.forEach((T,A)=>{const I=f.U_.get(T);if(!I)return;f.U_.set(T,I.withResumeToken(br.EMPTY_BYTE_STRING,I.snapshotVersion)),aA(f,T);const R=new Za(I.target,T,A,I.sequenceNumber);Q1(f,R)}),f.remoteSyncer.applyRemoteEvent(x)}(i,t)}catch(a){He(Fo,"Failed to raise snapshot:",a),await rf(i,a)}}async function rf(i,e,t){if(!Kl(e))throw e;i.W_.add(1),await Ec(i),i.j_.set("Offline"),t||(t=()=>nA(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{He(Fo,"Retrying IndexedDB access"),await t(),i.W_.delete(1),await Sf(i)})}function lA(i,e){return e().catch(t=>rf(i,t,e))}async function If(i){const e=ht(i),t=lo(e);let a=e.K_.length>0?e.K_[e.K_.length-1].batchId:P1;for(;fI(e);)try{const u=await X3(e.localStore,a);if(u===null){e.K_.length===0&&t.P_();break}a=u.batchId,dI(e,u)}catch(u){await rf(e,u)}uA(e)&&cA(e)}function fI(i){return Go(i)&&i.K_.length<10}function dI(i,e){i.K_.push(e);const t=lo(i);t.c_()&&t.b_&&t.S_(e.mutations)}function uA(i){return Go(i)&&!lo(i).u_()&&i.K_.length>0}function cA(i){lo(i).start()}async function gI(i){lo(i).C_()}async function mI(i){const e=lo(i);for(const t of i.K_)e.S_(t.mutations)}async function pI(i,e,t){const a=i.K_.shift(),u=z1.from(a,e,t);await lA(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),await If(i)}async function yI(i,e){e&&lo(i).b_&&await async function(a,u){if(function(E){return JS(E)&&E!==xe.ABORTED}(u.code)){const f=a.K_.shift();lo(a).h_(),await lA(a,()=>a.remoteSyncer.rejectFailedWrite(f.batchId,u)),await If(a)}}(i,e),uA(i)&&cA(i)}async function Ey(i,e){const t=ht(i);t.asyncQueue.verifyOperationInProgress(),He(Fo,"RemoteStore received new credentials");const a=Go(t);t.W_.add(3),await Ec(t),a&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Sf(t)}async function EI(i,e){const t=ht(i);e?(t.W_.delete(2),await Sf(t)):e||(t.W_.add(2),await Ec(t),t.j_.set("Unknown"))}function Zl(i){return i.J_||(i.J_=function(t,a,u){const f=ht(t);return f.M_(),new nI(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,u)}(i.datastore,i.asyncQueue,{xo:lI.bind(null,i),No:uI.bind(null,i),Lo:cI.bind(null,i),p_:hI.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Z1(i)?K1(i):i.j_.set("Unknown")):(await i.J_.stop(),oA(i))})),i.J_}function lo(i){return i.Y_||(i.Y_=function(t,a,u){const f=ht(t);return f.M_(),new rI(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,u)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:gI.bind(null,i),Lo:yI.bind(null,i),D_:mI.bind(null,i),v_:pI.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await If(i)):(await i.Y_.stop(),i.K_.length>0&&(He(Fo,`Stopping write stream with ${i.K_.length} pending writes`),i.K_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,t,a,u,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=u,this.removalCallback=f,this.deferred=new no,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,u,f){const E=Date.now()+a,x=new J1(e,t,E,u,f);return x.start(a),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $1(i,e){if(ua("AsyncQueue",`${e}: ${i}`),Kl(i))return new qe(xe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{static emptySet(e){return new Dl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Je.comparator(t.key,a.key):(t,a)=>Je.comparator(t.key,a.key),this.keyedMap=Yu(),this.sortedSet=new Mn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,f=a.getNext().key;if(!u.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Dl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.Z_=new Mn(Je.comparator)}track(e){const t=e.doc.key,a=this.Z_.get(t);a?e.type!==0&&a.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&a.type!==1?this.Z_=this.Z_.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Z_=this.Z_.remove(t):e.type===1&&a.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):it():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,a)=>{e.push(a)}),e}}class zl{constructor(e,t,a,u,f,E,x,T,A){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=u,this.mutatedKeys=f,this.fromCache=E,this.syncStateChanged=x,this.excludesMetadataChanges=T,this.hasCachedResults=A}static fromInitialDocuments(e,t,a,u,f){const E=[];return t.forEach(x=>{E.push({type:0,doc:x})}),new zl(e,t,Dl.emptySet(t),E,a,u,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==a[u].type||!t[u].doc.isEqual(a[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class AI{constructor(){this.queries=Ay(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,a){const u=ht(t),f=u.queries;u.queries=Ay(),f.forEach((E,x)=>{for(const T of x.ta)T.onError(a)})})(this,new qe(xe.ABORTED,"Firestore shutting down"))}}function Ay(){return new jo(i=>N_(i),Af)}async function wI(i,e){const t=ht(i);let a=3;const u=e.query;let f=t.queries.get(u);f?!f.na()&&e.ra()&&(a=2):(f=new _I,a=e.ra()?0:1);try{switch(a){case 0:f.ea=await t.onListen(u,!0);break;case 1:f.ea=await t.onListen(u,!1);break;case 2:await t.onFirstRemoteStoreListen(u)}}catch(E){const x=$1(E,`Initialization of query '${Sl(e.query)}' failed`);return void e.onError(x)}t.queries.set(u,f),f.ta.push(e),e.sa(t.onlineState),f.ea&&e.oa(f.ea)&&eg(t)}async function xI(i,e){const t=ht(i),a=e.query;let u=3;const f=t.queries.get(a);if(f){const E=f.ta.indexOf(e);E>=0&&(f.ta.splice(E,1),f.ta.length===0?u=e.ra()?0:1:!f.na()&&e.ra()&&(u=2))}switch(u){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function TI(i,e){const t=ht(i);let a=!1;for(const u of e){const f=u.query,E=t.queries.get(f);if(E){for(const x of E.ta)x.oa(u)&&(a=!0);E.ea=u}}a&&eg(t)}function vI(i,e,t){const a=ht(i),u=a.queries.get(e);if(u)for(const f of u.ta)f.onError(t);a.queries.delete(e)}function eg(i){i.ia.forEach(e=>{e.next()})}var y1,wy;(wy=y1||(y1={}))._a="default",wy.Cache="cache";class CI{constructor(e,t,a){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(e){if(!this.options.includeMetadataChanges){const a=[];for(const u of e.docChanges)u.type!==3&&a.push(u);e=new zl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const a=t!=="Offline";return(!this.options.Ta||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==y1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.key=e}}class fA{constructor(e){this.key=e}}class SI{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ot(),this.mutatedKeys=Ot(),this.ya=D_(e),this.wa=new Dl(this.ya)}get ba(){return this.fa}Sa(e,t){const a=t?t.Da:new _y,u=t?t.wa:this.wa;let f=t?t.mutatedKeys:this.mutatedKeys,E=u,x=!1;const T=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,A=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((I,R)=>{const B=u.get(I),j=wf(this.query,R)?R:null,q=!!B&&this.mutatedKeys.has(B.key),$=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let te=!1;B&&j?B.data.isEqual(j.data)?q!==$&&(a.track({type:3,doc:j}),te=!0):this.va(B,j)||(a.track({type:2,doc:j}),te=!0,(T&&this.ya(j,T)>0||A&&this.ya(j,A)<0)&&(x=!0)):!B&&j?(a.track({type:0,doc:j}),te=!0):B&&!j&&(a.track({type:1,doc:B}),te=!0,(T||A)&&(x=!0)),te&&(j?(E=E.add(j),f=$?f.add(I):f.delete(I)):(E=E.delete(I),f=f.delete(I)))}),this.query.limit!==null)for(;E.size>this.query.limit;){const I=this.query.limitType==="F"?E.last():E.first();E=E.delete(I.key),f=f.delete(I.key),a.track({type:1,doc:I})}return{wa:E,Da:a,ls:x,mutatedKeys:f}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,u){const f=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const E=e.Da.X_();E.sort((I,R)=>function(j,q){const $=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return $(j)-$(q)}(I.type,R.type)||this.ya(I.doc,R.doc)),this.Ca(a),u=u!=null&&u;const x=t&&!u?this.Fa():[],T=this.pa.size===0&&this.current&&!u?1:0,A=T!==this.ga;return this.ga=T,E.length!==0||A?{snapshot:new zl(this.query,e.wa,f,E,e.mutatedKeys,T===0,A,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:x}:{Ma:x}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new _y,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ot(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const t=[];return e.forEach(a=>{this.pa.has(a)||t.push(new fA(a))}),this.pa.forEach(a=>{e.has(a)||t.push(new hA(a))}),t}Oa(e){this.fa=e.gs,this.pa=Ot();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return zl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const tg="SyncEngine";class II{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class bI{constructor(e){this.key=e,this.Ba=!1}}class RI{constructor(e,t,a,u,f,E){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=u,this.currentUser=f,this.maxConcurrentLimboResolutions=E,this.La={},this.ka=new jo(x=>N_(x),Af),this.qa=new Map,this.Qa=new Set,this.$a=new Mn(Je.comparator),this.Ka=new Map,this.Ua=new G1,this.Wa={},this.Ga=new Map,this.za=Fl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function NI(i,e,t=!0){const a=EA(i);let u;const f=a.ka.get(e);return f?(a.sharedClientState.addLocalQueryTarget(f.targetId),u=f.view.Na()):u=await dA(a,e,t,!0),u}async function DI(i,e){const t=EA(i);await dA(t,e,!0,!1)}async function dA(i,e,t,a){const u=await W3(i.localStore,vs(e)),f=u.targetId,E=i.sharedClientState.addLocalQueryTarget(f,t);let x;return a&&(x=await OI(i,e,f,E==="current",u.resumeToken)),i.isPrimaryClient&&t&&sA(i.remoteStore,u),x}async function OI(i,e,t,a,u){i.Ha=(R,B,j)=>async function($,te,ie,me){let ue=te.view.Sa(ie);ue.ls&&(ue=await dy($.localStore,te.query,!1).then(({documents:H})=>te.view.Sa(H,ue)));const De=me&&me.targetChanges.get(te.targetId),Ve=me&&me.targetMismatches.get(te.targetId)!=null,ke=te.view.applyChanges(ue,$.isPrimaryClient,De,Ve);return Ty($,te.targetId,ke.Ma),ke.snapshot}(i,R,B,j);const f=await dy(i.localStore,e,!0),E=new SI(e,f.gs),x=E.Sa(f.documents),T=yc.createSynthesizedTargetChangeForCurrentChange(t,a&&i.onlineState!=="Offline",u),A=E.applyChanges(x,i.isPrimaryClient,T);Ty(i,t,A.Ma);const I=new II(e,t,E);return i.ka.set(e,I),i.qa.has(t)?i.qa.get(t).push(e):i.qa.set(t,[e]),A.snapshot}async function MI(i,e,t){const a=ht(i),u=a.ka.get(e),f=a.qa.get(u.targetId);if(f.length>1)return a.qa.set(u.targetId,f.filter(E=>!Af(E,e))),void a.ka.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(u.targetId),a.sharedClientState.isActiveQueryTarget(u.targetId)||await m1(a.localStore,u.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(u.targetId),t&&W1(a.remoteStore,u.targetId),E1(a,u.targetId)}).catch(Ql)):(E1(a,u.targetId),await m1(a.localStore,u.targetId,!0))}async function LI(i,e){const t=ht(i),a=t.ka.get(e),u=t.qa.get(a.targetId);t.isPrimaryClient&&u.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),W1(t.remoteStore,a.targetId))}async function PI(i,e,t){const a=HI(i);try{const u=await function(E,x){const T=ht(E),A=cr.now(),I=x.reduce((j,q)=>j.add(q.key),Ot());let R,B;return T.persistence.runTransaction("Locally write mutations","readwrite",j=>{let q=ca(),$=Ot();return T.ds.getEntries(j,I).next(te=>{q=te,q.forEach((ie,me)=>{me.isValidDocument()||($=$.add(ie))})}).next(()=>T.localDocuments.getOverlayedDocuments(j,q)).next(te=>{R=te;const ie=[];for(const me of x){const ue=XS(me,R.get(me.key).overlayedDocument);ue!=null&&ie.push(new fo(me.key,ue,w_(ue.value.mapValue),Cs.exists(!0)))}return T.mutationQueue.addMutationBatch(j,A,ie,x)}).next(te=>{B=te;const ie=te.applyToLocalDocumentSet(R,$);return T.documentOverlayCache.saveOverlays(j,te.batchId,ie)})}).then(()=>({batchId:B.batchId,changes:M_(R)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(u.batchId),function(E,x,T){let A=E.Wa[E.currentUser.toKey()];A||(A=new Mn(Bt)),A=A.insert(x,T),E.Wa[E.currentUser.toKey()]=A}(a,u.batchId,t),await _c(a,u.changes),await If(a.remoteStore)}catch(u){const f=$1(u,"Failed to persist write");t.reject(f)}}async function gA(i,e){const t=ht(i);try{const a=await q3(t.localStore,e);e.targetChanges.forEach((u,f)=>{const E=t.Ka.get(f);E&&(Zt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?E.Ba=!0:u.modifiedDocuments.size>0?Zt(E.Ba):u.removedDocuments.size>0&&(Zt(E.Ba),E.Ba=!1))}),await _c(t,a,e)}catch(a){await Ql(a)}}function xy(i,e,t){const a=ht(i);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const u=[];a.ka.forEach((f,E)=>{const x=E.view.sa(e);x.snapshot&&u.push(x.snapshot)}),function(E,x){const T=ht(E);T.onlineState=x;let A=!1;T.queries.forEach((I,R)=>{for(const B of R.ta)B.sa(x)&&(A=!0)}),A&&eg(T)}(a.eventManager,e),u.length&&a.La.p_(u),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function BI(i,e,t){const a=ht(i);a.sharedClientState.updateQueryState(e,"rejected",t);const u=a.Ka.get(e),f=u&&u.key;if(f){let E=new Mn(Je.comparator);E=E.insert(f,Vr.newNoDocument(f,ot.min()));const x=Ot().add(f),T=new vf(ot.min(),new Map,new Mn(Bt),E,x);await gA(a,T),a.$a=a.$a.remove(f),a.Ka.delete(e),ng(a)}else await m1(a.localStore,e,!1).then(()=>E1(a,e,t)).catch(Ql)}async function kI(i,e){const t=ht(i),a=e.batch.batchId;try{const u=await G3(t.localStore,e);pA(t,a,null),mA(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await _c(t,u)}catch(u){await Ql(u)}}async function UI(i,e,t){const a=ht(i);try{const u=await function(E,x){const T=ht(E);return T.persistence.runTransaction("Reject batch","readwrite-primary",A=>{let I;return T.mutationQueue.lookupMutationBatch(A,x).next(R=>(Zt(R!==null),I=R.keys(),T.mutationQueue.removeMutationBatch(A,R))).next(()=>T.mutationQueue.performConsistencyCheck(A)).next(()=>T.documentOverlayCache.removeOverlaysForBatchId(A,I,x)).next(()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,I)).next(()=>T.localDocuments.getDocuments(A,I))})}(a.localStore,e);pA(a,e,t),mA(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await _c(a,u)}catch(u){await Ql(u)}}function mA(i,e){(i.Ga.get(e)||[]).forEach(t=>{t.resolve()}),i.Ga.delete(e)}function pA(i,e,t){const a=ht(i);let u=a.Wa[a.currentUser.toKey()];if(u){const f=u.get(e);f&&(t?f.reject(t):f.resolve(),u=u.remove(e)),a.Wa[a.currentUser.toKey()]=u}}function E1(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.qa.get(e))i.ka.delete(a),t&&i.La.Ja(a,t);i.qa.delete(e),i.isPrimaryClient&&i.Ua.Sr(e).forEach(a=>{i.Ua.containsKey(a)||yA(i,a)})}function yA(i,e){i.Qa.delete(e.path.canonicalString());const t=i.$a.get(e);t!==null&&(W1(i.remoteStore,t),i.$a=i.$a.remove(e),i.Ka.delete(t),ng(i))}function Ty(i,e,t){for(const a of t)a instanceof hA?(i.Ua.addReference(a.key,e),VI(i,a)):a instanceof fA?(He(tg,"Document no longer in limbo: "+a.key),i.Ua.removeReference(a.key,e),i.Ua.containsKey(a.key)||yA(i,a.key)):it()}function VI(i,e){const t=e.key,a=t.path.canonicalString();i.$a.get(t)||i.Qa.has(a)||(He(tg,"New document in limbo: "+t),i.Qa.add(a),ng(i))}function ng(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const t=new Je(wn.fromString(e)),a=i.za.next();i.Ka.set(a,new bI(t)),i.$a=i.$a.insert(t,a),sA(i.remoteStore,new Za(vs(b_(t.path)),a,"TargetPurposeLimboResolution",yf.ae))}}async function _c(i,e,t){const a=ht(i),u=[],f=[],E=[];a.ka.isEmpty()||(a.ka.forEach((x,T)=>{E.push(a.Ha(T,e,t).then(A=>{var I;if((A||t)&&a.isPrimaryClient){const R=A?!A.fromCache:(I=t==null?void 0:t.targetChanges.get(T.targetId))===null||I===void 0?void 0:I.current;a.sharedClientState.updateQueryState(T.targetId,R?"current":"not-current")}if(A){u.push(A);const R=Y1.Yi(T.targetId,A);f.push(R)}}))}),await Promise.all(E),a.La.p_(u),await async function(T,A){const I=ht(T);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>we.forEach(A,B=>we.forEach(B.Hi,j=>I.persistence.referenceDelegate.addReference(R,B.targetId,j)).next(()=>we.forEach(B.Ji,j=>I.persistence.referenceDelegate.removeReference(R,B.targetId,j)))))}catch(R){if(!Kl(R))throw R;He(X1,"Failed to update sequence numbers: "+R)}for(const R of A){const B=R.targetId;if(!R.fromCache){const j=I.Ts.get(B),q=j.snapshotVersion,$=j.withLastLimboFreeSnapshotVersion(q);I.Ts=I.Ts.insert(B,$)}}}(a.localStore,f))}async function FI(i,e){const t=ht(i);if(!t.currentUser.isEqual(e)){He(tg,"User change. New user:",e.toKey());const a=await tA(t.localStore,e);t.currentUser=e,function(f,E){f.Ga.forEach(x=>{x.forEach(T=>{T.reject(new qe(xe.CANCELLED,E))})}),f.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await _c(t,a.Rs)}}function zI(i,e){const t=ht(i),a=t.Ka.get(e);if(a&&a.Ba)return Ot().add(a.key);{let u=Ot();const f=t.qa.get(e);if(!f)return u;for(const E of f){const x=t.ka.get(E);u=u.unionWith(x.view.ba)}return u}}function EA(i){const e=ht(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=gA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BI.bind(null,e),e.La.p_=TI.bind(null,e.eventManager),e.La.Ja=vI.bind(null,e.eventManager),e}function HI(i){const e=ht(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UI.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return j3(this.persistence,new F3,e.initialUser,this.serializer)}Xa(e){return new eA(q1.ri,this.serializer)}Za(e){return new K3}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class jI extends sf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Zt(this.persistence.referenceDelegate instanceof nf);const a=this.persistence.referenceDelegate.garbageCollector;return new C3(a,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?di.withCacheSize(this.cacheSizeBytes):di.DEFAULT;return new eA(a=>nf.ri(a,t),this.serializer)}}class _1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>xy(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=FI.bind(null,this.syncEngine),await EI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AI}()}createDatastore(e){const t=Cf(e.databaseInfo.databaseId),a=function(f){return new tI(f)}(e.databaseInfo);return function(f,E,x,T){return new sI(f,E,x,T)}(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return function(a,u,f,E,x){return new oI(a,u,f,E,x)}(this.localStore,this.datastore,e.asyncQueue,t=>xy(this.syncEngine,t,0),function(){return py.D()?new py:new Z3}())}createSyncEngine(e,t){return function(u,f,E,x,T,A,I){const R=new RI(u,f,E,x,T,A);return I&&(R.ja=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(u){const f=ht(u);He(Fo,"RemoteStore shutting down."),f.W_.add(5),await Ec(f),f.z_.shutdown(),f.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}_1.provider={build:()=>new _1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ua("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="FirestoreClient";class qI{constructor(e,t,a,u,f){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=u,this.user=Ur.UNAUTHENTICATED,this.clientId=h_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(a,async E=>{He(uo,"Received user=",E.uid),await this.authCredentialListener(E),this.user=E}),this.appCheckCredentials.start(a,E=>(He(uo,"Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new no;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=$1(t,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function P0(i,e){i.asyncQueue.verifyOperationInProgress(),He(uo,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener(async u=>{a.isEqual(u)||(await tA(e.localStore,u),a=u)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function vy(i,e){i.asyncQueue.verifyOperationInProgress();const t=await YI(i);He(uo,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(a=>Ey(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,u)=>Ey(e.remoteStore,u)),i._onlineComponents=e}async function YI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){He(uo,"Using user provided OfflineComponentProvider");try{await P0(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(u){return u.name==="FirebaseError"?u.code===xe.FAILED_PRECONDITION||u.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(t))throw t;Bl("Error using user provided cache. Falling back to memory cache: "+t),await P0(i,new sf)}}else He(uo,"Using default OfflineComponentProvider"),await P0(i,new jI(void 0));return i._offlineComponents}async function _A(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(He(uo,"Using user provided OnlineComponentProvider"),await vy(i,i._uninitializedComponentsProvider._online)):(He(uo,"Using default OnlineComponentProvider"),await vy(i,new _1))),i._onlineComponents}function XI(i){return _A(i).then(e=>e.syncEngine)}async function WI(i){const e=await _A(i),t=e.eventManager;return t.onListen=NI.bind(null,e.syncEngine),t.onUnlisten=MI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LI.bind(null,e.syncEngine),t}function QI(i,e,t={}){const a=new no;return i.asyncQueue.enqueueAndForget(async()=>function(f,E,x,T,A){const I=new GI({next:B=>{I.su(),E.enqueueAndForget(()=>xI(f,R)),B.fromCache&&T.source==="server"?A.reject(new qe(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(B)},error:B=>A.reject(B)}),R=new CI(x,I,{includeMetadataChanges:!0,Ta:!0});return wI(f,R)}(await WI(i),i.asyncQueue,e,t,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(i,e,t){if(!t)throw new qe(xe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function KI(i,e,t,a){if(e===!0&&a===!0)throw new qe(xe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Sy(i){if(!Je.isDocumentKey(i))throw new qe(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Iy(i){if(Je.isDocumentKey(i))throw new qe(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function bf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":it()}function Hl(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new qe(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bf(i);throw new qe(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="firestore.googleapis.com",by=!0;class Ry{constructor(e){var t,a;if(e.host===void 0){if(e.ssl!==void 0)throw new qe(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xA,this.ssl=by}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:by;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T3)throw new qe(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AA((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(f){if(f.timeoutSeconds!==void 0){if(isNaN(f.timeoutSeconds))throw new qe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new qe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new qe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,u){return a.timeoutSeconds===u.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rf{constructor(e,t,a,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ry({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ry(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new eS;switch(a.type){case"firstParty":return new iS(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new qe(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const a=Cy.get(t);a&&(He("ComponentProvider","Removing Datastore"),Cy.delete(t),a.terminate())}(this),Promise.resolve()}}function ZI(i,e,t,a={}){var u;const f=(i=Hl(i,Rf))._getSettings(),E=Object.assign(Object.assign({},f),{emulatorOptions:i._getEmulatorOptions()}),x=`${e}:${t}`;f.host!==xA&&f.host!==x&&Bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const T=Object.assign(Object.assign({},f),{host:x,ssl:!1,emulatorOptions:a});if(!ko(T,E)&&(i._setSettings(T),a.mockUserToken)){let A,I;if(typeof a.mockUserToken=="string")A=a.mockUserToken,I=Ur.MOCK_USER;else{A=Rv(a.mockUserToken,(u=i._app)===null||u===void 0?void 0:u.options.projectId);const R=a.mockUserToken.sub||a.mockUserToken.user_id;if(!R)throw new qe(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Ur(R)}i._authCredentials=new tS(new c_(A,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Jl(this.firestore,e,this._query)}}class bi{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bi(this.firestore,e,this._key)}}class ro extends Jl{constructor(e,t,a){super(e,t,b_(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bi(this.firestore,null,new Je(e))}withConverter(e){return new ro(this.firestore,e,this._path)}}function TA(i,e,...t){if(i=Jr(i),wA("collection","path",e),i instanceof Rf){const a=wn.fromString(e,...t);return Iy(a),new ro(i,null,a)}{if(!(i instanceof bi||i instanceof ro))throw new qe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(wn.fromString(e,...t));return Iy(a),new ro(i.firestore,null,a)}}function vA(i,e,...t){if(i=Jr(i),arguments.length===1&&(e=h_.newId()),wA("doc","path",e),i instanceof Rf){const a=wn.fromString(e,...t);return Sy(a),new bi(i,null,new Je(a))}{if(!(i instanceof bi||i instanceof ro))throw new qe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(wn.fromString(e,...t));return Sy(a),new bi(i.firestore,i instanceof ro?i.converter:null,new Je(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="AsyncQueue";class Dy{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new rA(this,"async_queue_retry"),this.bu=()=>{const a=L0();a&&He(Ny,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.Su=e;const t=L0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=L0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new no;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Kl(e))throw e;He(Ny,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(a=>{this.gu=a,this.pu=!1;const u=function(E){let x=E.message||"";return E.stack&&(x=E.stack.includes(E.message)?E.stack:E.message+`
`+E.stack),x}(a);throw ua("INTERNAL UNHANDLED ERROR: ",u),a}).then(a=>(this.pu=!1,a))));return this.Su=t,t}enqueueAfterDelay(e,t,a){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const u=J1.createAndSchedule(this,e,t,a,f=>this.Fu(f));return this.fu.push(u),u}Du(){this.gu&&it()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Nf extends Rf{constructor(e,t,a,u){super(e,t,a,u),this.type="firestore",this._queue=new Dy,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dy(e),this._firestoreClient=void 0,await e}}}function JI(i,e){const t=typeof i=="object"?i:t_(),a=typeof i=="string"?i:Qh,u=M1(t,"firestore").getImmediate({identifier:a});if(!u._initialized){const f=Iv("firestore");f&&ZI(u,...f)}return u}function CA(i){if(i._terminated)throw new qe(xe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||$I(i),i._firestoreClient}function $I(i){var e,t,a;const u=i._freezeSettings(),f=function(x,T,A,I){return new ES(x,T,A,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,AA(I.experimentalLongPollingOptions),I.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,u);i._componentsProvider||!((t=u.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((a=u.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(i._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),i._firestoreClient=new qI(i._authCredentials,i._appCheckCredentials,i._queue,f,i._componentsProvider&&function(x){const T=x==null?void 0:x._online.build();return{_offline:x==null?void 0:x._offline.build(T),_online:T}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jl(br.fromBase64String(e))}catch(t){throw new qe(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jl(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new qe(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,u){if(a.length!==u.length)return!1;for(let f=0;f<a.length;++f)if(a[f]!==u[f])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=/^__.*__$/;class tb{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new pc(e,this.data,t,this.fieldTransforms)}}class SA{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new fo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function IA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class ag{constructor(e,t,a,u,f,E){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=u,f===void 0&&this.Bu(),this.fieldTransforms=f||[],this.fieldMask=E||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),u=this.ku({path:a,Qu:!1});return u.$u(e),u}Ku(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),u=this.ku({path:a,Qu:!1});return u.Bu(),u}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return af(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(IA(this.Lu)&&eb.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class nb{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Cf(e)}ju(e,t,a,u=!1){return new ag({Lu:e,methodName:t,zu:a,path:Ir.emptyPath(),Qu:!1,Gu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function og(i){const e=i._freezeSettings(),t=Cf(i._databaseId);return new nb(i._databaseId,!!e.ignoreUndefinedProperties,t)}function rb(i,e,t,a,u,f={}){const E=i.ju(f.merge||f.mergeFields?2:0,e,t,u);lg("Data must be an object, but it was:",E,a);const x=bA(a,E);let T,A;if(f.merge)T=new Ii(E.fieldMask),A=E.fieldTransforms;else if(f.mergeFields){const I=[];for(const R of f.mergeFields){const B=A1(e,R,t);if(!E.contains(B))throw new qe(xe.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);NA(I,B)||I.push(B)}T=new Ii(I),A=E.fieldTransforms.filter(R=>T.covers(R.field))}else T=null,A=E.fieldTransforms;return new tb(new gi(x),T,A)}class Of extends rg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Of}}function ib(i,e,t,a){const u=i.ju(1,e,t);lg("Data must be an object, but it was:",u,a);const f=[],E=gi.empty();ho(a,(T,A)=>{const I=ug(e,T,t);A=Jr(A);const R=u.Ku(I);if(A instanceof Of)f.push(I);else{const B=Ac(A,R);B!=null&&(f.push(I),E.set(I,B))}});const x=new Ii(f);return new SA(E,x,u.fieldTransforms)}function sb(i,e,t,a,u,f){const E=i.ju(1,e,t),x=[A1(e,a,t)],T=[u];if(f.length%2!=0)throw new qe(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<f.length;B+=2)x.push(A1(e,f[B])),T.push(f[B+1]);const A=[],I=gi.empty();for(let B=x.length-1;B>=0;--B)if(!NA(A,x[B])){const j=x[B];let q=T[B];q=Jr(q);const $=E.Ku(j);if(q instanceof Of)A.push(j);else{const te=Ac(q,$);te!=null&&(A.push(j),I.set(j,te))}}const R=new Ii(A);return new SA(I,R,E.fieldTransforms)}function ab(i,e,t,a=!1){return Ac(t,i.ju(a?4:3,e))}function Ac(i,e){if(RA(i=Jr(i)))return lg("Unsupported field value:",e,i),bA(i,e);if(i instanceof rg)return function(a,u){if(!IA(u.Lu))throw u.Wu(`${a._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Wu(`${a._methodName}() is not currently supported inside arrays`);const f=a._toFieldTransform(u);f&&u.fieldTransforms.push(f)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(a,u){const f=[];let E=0;for(const x of a){let T=Ac(x,u.Uu(E));T==null&&(T={nullValue:"NULL_VALUE"}),f.push(T),E++}return{arrayValue:{values:f}}}(i,e)}return function(a,u){if((a=Jr(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return zS(u.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const f=cr.fromDate(a);return{timestampValue:tf(u.serializer,f)}}if(a instanceof cr){const f=new cr(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:tf(u.serializer,f)}}if(a instanceof ig)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof jl)return{bytesValue:Y_(u.serializer,a._byteString)};if(a instanceof bi){const f=u.databaseId,E=a.firestore._databaseId;if(!E.isEqual(f))throw u.Wu(`Document reference is for database ${E.projectId}/${E.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:j1(a.firestore._databaseId||u.databaseId,a._key.path)}}if(a instanceof sg)return function(E,x){return{mapValue:{fields:{[__]:{stringValue:A_},[Kh]:{arrayValue:{values:E.toArray().map(A=>{if(typeof A!="number")throw x.Wu("VectorValues must only contain numeric values.");return F1(x.serializer,A)})}}}}}}(a,u);throw u.Wu(`Unsupported field value: ${bf(a)}`)}(i,e)}function bA(i,e){const t={};return d_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(i,(a,u)=>{const f=Ac(u,e.qu(a));f!=null&&(t[a]=f)}),{mapValue:{fields:t}}}function RA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof cr||i instanceof ig||i instanceof jl||i instanceof bi||i instanceof rg||i instanceof sg)}function lg(i,e,t){if(!RA(t)||!function(u){return typeof u=="object"&&u!==null&&(Object.getPrototypeOf(u)===Object.prototype||Object.getPrototypeOf(u)===null)}(t)){const a=bf(t);throw a==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+a)}}function A1(i,e,t){if((e=Jr(e))instanceof Df)return e._internalPath;if(typeof e=="string")return ug(i,e);throw af("Field path arguments must be of type string or ",i,!1,void 0,t)}const ob=new RegExp("[~\\*/\\[\\]]");function ug(i,e,t){if(e.search(ob)>=0)throw af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Df(...e.split("."))._internalPath}catch{throw af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function af(i,e,t,a,u){const f=a&&!a.isEmpty(),E=u!==void 0;let x=`Function ${e}() called with invalid data`;t&&(x+=" (via `toFirestore()`)"),x+=". ";let T="";return(f||E)&&(T+=" (found",f&&(T+=` in field ${a}`),E&&(T+=` in document ${u}`),T+=")"),new qe(xe.INVALID_ARGUMENT,x+i+T)}function NA(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,t,a,u,f){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=u,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new bi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class lb extends DA{data(){return super.data()}}function cg(i,e){return typeof e=="string"?ug(i,e):e instanceof Df?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new qe(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hg{}class cb extends hg{}function hb(i,e,...t){let a=[];e instanceof hg&&a.push(e),a=a.concat(t),function(f){const E=f.filter(T=>T instanceof fg).length,x=f.filter(T=>T instanceof Mf).length;if(E>1||E>0&&x>0)throw new qe(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const u of a)i=u._apply(i);return i}class Mf extends cb{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Mf(e,t,a)}_apply(e){const t=this._parse(e);return OA(e._query,t),new Jl(e.firestore,e.converter,u1(e._query,t))}_parse(e){const t=og(e.firestore);return function(f,E,x,T,A,I,R){let B;if(A.isKeyField()){if(I==="array-contains"||I==="array-contains-any")throw new qe(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if(I==="in"||I==="not-in"){My(R,I);const q=[];for(const $ of R)q.push(Oy(T,f,$));B={arrayValue:{values:q}}}else B=Oy(T,f,R)}else I!=="in"&&I!=="not-in"&&I!=="array-contains-any"||My(R,I),B=ab(x,E,R,I==="in"||I==="not-in");return rr.create(A,I,B)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function fb(i,e,t){const a=e,u=cg("where",i);return Mf._create(u,a,t)}class fg extends hg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fg(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return t.length===1?t[0]:os.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(u,f){let E=u;const x=f.getFlattenedFilters();for(const T of x)OA(E,T),E=u1(E,T)}(e._query,t),new Jl(e.firestore,e.converter,u1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Oy(i,e,t){if(typeof(t=Jr(t))=="string"){if(t==="")throw new qe(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R_(e)&&t.indexOf("/")!==-1)throw new qe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(wn.fromString(t));if(!Je.isDocumentKey(a))throw new qe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return W2(i,new Je(a))}if(t instanceof bi)return W2(i,t._key);throw new qe(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bf(t)}.`)}function My(i,e){if(!Array.isArray(i)||i.length===0)throw new qe(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OA(i,e){const t=function(u,f){for(const E of u)for(const x of E.getFlattenedFilters())if(f.indexOf(x.op)>=0)return x.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new qe(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class db{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw it()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return ho(e,(u,f)=>{a[u]=this.convertValue(f,t)}),a}convertVectorValue(e){var t,a,u;const f=(u=(a=(t=e.fields)===null||t===void 0?void 0:t[Kh].arrayValue)===null||a===void 0?void 0:a.values)===null||u===void 0?void 0:u.map(E=>Wn(E.doubleValue));return new sg(f)}convertGeoPoint(e){return new ig(Wn(e.latitude),Wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=_f(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const t=so(e);return new cr(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=wn.fromString(e);Zt(J_(a));const u=new ic(a.get(1),a.get(3)),f=new Je(a.popFirst(5));return u.isEqual(t)||ua(`Document ${f} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(i,e,t){let a;return a=i?i.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mb extends DA{constructor(e,t,a,u,f,E){super(e,t,a,u,E),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(cg("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class Fh extends mb{data(e={}){return super.data(e)}}class pb{constructor(e,t,a,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new Rh(u.hasPendingWrites,u.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new Fh(this._firestore,this._userDataWriter,a.key,a,new Rh(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(u,f){if(u._snapshot.oldDocs.isEmpty()){let E=0;return u._snapshot.docChanges.map(x=>{const T=new Fh(u._firestore,u._userDataWriter,x.doc.key,x.doc,new Rh(u._snapshot.mutatedKeys.has(x.doc.key),u._snapshot.fromCache),u.query.converter);return x.doc,{type:"added",doc:T,oldIndex:-1,newIndex:E++}})}{let E=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(x=>f||x.type!==3).map(x=>{const T=new Fh(u._firestore,u._userDataWriter,x.doc.key,x.doc,new Rh(u._snapshot.mutatedKeys.has(x.doc.key),u._snapshot.fromCache),u.query.converter);let A=-1,I=-1;return x.type!==0&&(A=E.indexOf(x.doc.key),E=E.delete(x.doc.key)),x.type!==1&&(E=E.add(x.doc),I=E.indexOf(x.doc.key)),{type:yb(x.type),doc:T,oldIndex:A,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yb(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}class Eb extends db{constructor(e){super(),this.firestore=e}convertBytes(e){return new jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bi(this.firestore,null,t)}}function _b(i){i=Hl(i,Jl);const e=Hl(i.firestore,Nf),t=CA(e),a=new Eb(e);return ub(i._query),QI(t,i._query).then(u=>new pb(e,a,i,u))}function Ab(i,e,t,...a){i=Hl(i,bi);const u=Hl(i.firestore,Nf),f=og(u);let E;return E=typeof(e=Jr(e))=="string"||e instanceof Df?sb(f,"updateDoc",i._key,e,t,a):ib(f,"updateDoc",i._key,e),MA(u,[E.toMutation(i._key,Cs.exists(!0))])}function wb(i,e){const t=Hl(i.firestore,Nf),a=vA(i),u=gb(i.converter,e);return MA(t,[rb(og(i.firestore),"addDoc",a._key,u,i.converter!==null,{}).toMutation(a._key,Cs.exists(!1))]).then(()=>a)}function MA(i,e){return function(a,u){const f=new no;return a.asyncQueue.enqueueAndForget(async()=>PI(await XI(a),u,f)),f.promise}(CA(i),e)}(function(e,t=!0){(function(u){Wl=u})(Xl),Pl(new Uo("firestore",(a,{instanceIdentifier:u,options:f})=>{const E=a.getProvider("app").getImmediate(),x=new Nf(new nS(a.getProvider("auth-internal")),new sS(E,a.getProvider("app-check-internal")),function(A,I){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new qe(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ic(A.options.projectId,I)}(E,u),E);return f=Object.assign({useFetchStreams:t},f),x._setSettings(f),x},"PUBLIC").setMultipleInstances(!0)),eo(k2,U2,e),eo(k2,U2,"esm2017")})();const Cr=[];for(let i=0;i<256;++i)Cr.push((i+256).toString(16).slice(1));function xb(i,e=0){return(Cr[i[e+0]]+Cr[i[e+1]]+Cr[i[e+2]]+Cr[i[e+3]]+"-"+Cr[i[e+4]]+Cr[i[e+5]]+"-"+Cr[i[e+6]]+Cr[i[e+7]]+"-"+Cr[i[e+8]]+Cr[i[e+9]]+"-"+Cr[i[e+10]]+Cr[i[e+11]]+Cr[i[e+12]]+Cr[i[e+13]]+Cr[i[e+14]]+Cr[i[e+15]]).toLowerCase()}let B0;const Tb=new Uint8Array(16);function vb(){if(!B0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");B0=crypto.getRandomValues.bind(crypto)}return B0(Tb)}const Cb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ly={randomUUID:Cb};function Sb(i,e,t){var u;if(Ly.randomUUID&&!i)return Ly.randomUUID();i=i||{};const a=i.random??((u=i.rng)==null?void 0:u.call(i))??vb();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,xb(a)}var Ib="firebase",bb="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */eo(Ib,bb,"app");function dg(i,e){var t={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(t[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(i);u<a.length;u++)e.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(i,a[u])&&(t[a[u]]=i[a[u]]);return t}function LA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rb=LA,PA=new dc("auth","Firebase",LA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new D1("@firebase/auth");function Nb(i,...e){of.logLevel<=Dt.WARN&&of.warn(`Auth (${Xl}): ${i}`,...e)}function zh(i,...e){of.logLevel<=Dt.ERROR&&of.error(`Auth (${Xl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(i,...e){throw gg(i,...e)}function Is(i,...e){return gg(i,...e)}function BA(i,e,t){const a=Object.assign(Object.assign({},Rb()),{[e]:t});return new dc("auth","Firebase",a).create(e,{appName:i.name})}function Bo(i){return BA(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gg(i,...e){if(typeof i!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=i.name),i._errorFactory.create(t,...a)}return PA.create(i,...e)}function st(i,e,...t){if(!i)throw gg(e,...t)}function na(i){const e="INTERNAL ASSERTION FAILED: "+i;throw zh(e),new Error(e)}function fa(i,e){i||na(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function Db(){return Py()==="http:"||Py()==="https:"}function Py(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Db()||Mv()||"connection"in navigator)?navigator.onLine:!0}function Mb(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t){this.shortDelay=e,this.longDelay=t,fa(t>e,"Short delay should be less than long delay!"),this.isMobile=Nv()||Lv()}get(){return Ob()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(i,e){fa(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;na("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;na("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;na("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new wc(3e4,6e4);function pg(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function $l(i,e,t,a,u={}){return UA(i,u,async()=>{let f={},E={};a&&(e==="GET"?E=a:f={body:JSON.stringify(a)});const x=gc(Object.assign({key:i.config.apiKey},E)).slice(1),T=await i._getAdditionalHeaders();T["Content-Type"]="application/json",i.languageCode&&(T["X-Firebase-Locale"]=i.languageCode);const A=Object.assign({method:e,headers:T},f);return Ov()||(A.referrerPolicy="no-referrer"),kA.fetch()(VA(i,i.config.apiHost,t,x),A)})}async function UA(i,e,t){i._canInitEmulator=!1;const a=Object.assign(Object.assign({},Lb),e);try{const u=new kb(i),f=await Promise.race([t(),u.promise]);u.clearNetworkTimeout();const E=await f.json();if("needConfirmation"in E)throw Nh(i,"account-exists-with-different-credential",E);if(f.ok&&!("errorMessage"in E))return E;{const x=f.ok?E.errorMessage:E.error.message,[T,A]=x.split(" : ");if(T==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nh(i,"credential-already-in-use",E);if(T==="EMAIL_EXISTS")throw Nh(i,"email-already-in-use",E);if(T==="USER_DISABLED")throw Nh(i,"user-disabled",E);const I=a[T]||T.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw BA(i,I,A);ha(i,I)}}catch(u){if(u instanceof ga)throw u;ha(i,"network-request-failed",{message:String(u)})}}async function Bb(i,e,t,a,u={}){const f=await $l(i,e,t,a,u);return"mfaPendingCredential"in f&&ha(i,"multi-factor-auth-required",{_serverResponse:f}),f}function VA(i,e,t,a){const u=`${e}${t}?${a}`;return i.config.emulator?mg(i.config,u):`${i.config.apiScheme}://${u}`}class kb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Is(this.auth,"network-request-failed")),Pb.get())})}}function Nh(i,e,t){const a={appName:i.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const u=Is(i,e,a);return u.customData._tokenResponse=t,u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(i,e){return $l(i,"POST","/v1/accounts:delete",e)}async function FA(i,e){return $l(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vb(i,e=!1){const t=Jr(i),a=await t.getIdToken(e),u=yg(a);st(u&&u.exp&&u.auth_time&&u.iat,t.auth,"internal-error");const f=typeof u.firebase=="object"?u.firebase:void 0,E=f==null?void 0:f.sign_in_provider;return{claims:u,token:a,authTime:$u(k0(u.auth_time)),issuedAtTime:$u(k0(u.iat)),expirationTime:$u(k0(u.exp)),signInProvider:E||null,signInSecondFactor:(f==null?void 0:f.sign_in_second_factor)||null}}function k0(i){return Number(i)*1e3}function yg(i){const[e,t,a]=i.split(".");if(e===void 0||t===void 0||a===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{const u=WE(t);return u?JSON.parse(u):(zh("Failed to decode base64 JWT payload"),null)}catch(u){return zh("Caught error parsing JWT payload as JSON",u==null?void 0:u.toString()),null}}function By(i){const e=yg(i);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(i,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ga&&Fb(a)&&i.auth.currentUser===i&&await i.auth.signOut(),a}}function Fb({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const u=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,u)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(i){var e;const t=i.auth,a=await i.getIdToken(),u=await lc(i,FA(t,{idToken:a}));st(u==null?void 0:u.users.length,t,"internal-error");const f=u.users[0];i._notifyReloadListener(f);const E=!((e=f.providerUserInfo)===null||e===void 0)&&e.length?zA(f.providerUserInfo):[],x=jb(i.providerData,E),T=i.isAnonymous,A=!(i.email&&f.passwordHash)&&!(x!=null&&x.length),I=T?A:!1,R={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:x,metadata:new x1(f.createdAt,f.lastLoginAt),isAnonymous:I};Object.assign(i,R)}async function Hb(i){const e=Jr(i);await lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jb(i,e){return[...i.filter(a=>!e.some(u=>u.providerId===a.providerId)),...e]}function zA(i){return i.map(e=>{var{providerId:t}=e,a=dg(e,["providerId"]);return{providerId:t,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(i,e){const t=await UA(i,{},async()=>{const a=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:u,apiKey:f}=i.config,E=VA(i,u,"/v1/token",`key=${f}`),x=await i._getAdditionalHeaders();return x["Content-Type"]="application/x-www-form-urlencoded",kA.fetch()(E,{method:"POST",headers:x,body:a})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qb(i,e){return $l(i,"POST","/v2/accounts:revokeToken",pg(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):By(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){st(e.length!==0,"internal-error");const t=By(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:u,expiresIn:f}=await Gb(e,t);this.updateTokensAndExpiration(a,u,Number(f))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:u,expirationTime:f}=t,E=new Ol;return a&&(st(typeof a=="string","internal-error",{appName:e}),E.refreshToken=a),u&&(st(typeof u=="string","internal-error",{appName:e}),E.accessToken=u),f&&(st(typeof f=="number","internal-error",{appName:e}),E.expirationTime=f),E}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ol,this.toJSON())}_performRefresh(){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(i,e){st(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ra{constructor(e){var{uid:t,auth:a,stsTokenManager:u}=e,f=dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=a,this.stsTokenManager=u,this.accessToken=u.accessToken,this.displayName=f.displayName||null,this.email=f.email||null,this.emailVerified=f.emailVerified||!1,this.phoneNumber=f.phoneNumber||null,this.photoURL=f.photoURL||null,this.isAnonymous=f.isAnonymous||!1,this.tenantId=f.tenantId||null,this.providerData=f.providerData?[...f.providerData]:[],this.metadata=new x1(f.createdAt||void 0,f.lastLoginAt||void 0)}async getIdToken(e){const t=await lc(this,this.stsTokenManager.getToken(this.auth,e));return st(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Vb(this,e)}reload(){return Hb(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ra(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await lf(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ts(this.auth.app))return Promise.reject(Bo(this.auth));const e=await this.getIdToken();return await lc(this,Ub(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var a,u,f,E,x,T,A,I;const R=(a=t.displayName)!==null&&a!==void 0?a:void 0,B=(u=t.email)!==null&&u!==void 0?u:void 0,j=(f=t.phoneNumber)!==null&&f!==void 0?f:void 0,q=(E=t.photoURL)!==null&&E!==void 0?E:void 0,$=(x=t.tenantId)!==null&&x!==void 0?x:void 0,te=(T=t._redirectEventId)!==null&&T!==void 0?T:void 0,ie=(A=t.createdAt)!==null&&A!==void 0?A:void 0,me=(I=t.lastLoginAt)!==null&&I!==void 0?I:void 0,{uid:ue,emailVerified:De,isAnonymous:Ve,providerData:ke,stsTokenManager:H}=t;st(ue&&H,e,"internal-error");const F=Ol.fromJSON(this.name,H);st(typeof ue=="string",e,"internal-error"),qa(R,e.name),qa(B,e.name),st(typeof De=="boolean",e,"internal-error"),st(typeof Ve=="boolean",e,"internal-error"),qa(j,e.name),qa(q,e.name),qa($,e.name),qa(te,e.name),qa(ie,e.name),qa(me,e.name);const L=new ra({uid:ue,auth:e,email:B,emailVerified:De,displayName:R,isAnonymous:Ve,photoURL:q,phoneNumber:j,tenantId:$,stsTokenManager:F,createdAt:ie,lastLoginAt:me});return ke&&Array.isArray(ke)&&(L.providerData=ke.map(X=>Object.assign({},X))),te&&(L._redirectEventId=te),L}static async _fromIdTokenResponse(e,t,a=!1){const u=new Ol;u.updateFromServerResponse(t);const f=new ra({uid:t.localId,auth:e,stsTokenManager:u,isAnonymous:a});return await lf(f),f}static async _fromGetAccountInfoResponse(e,t,a){const u=t.users[0];st(u.localId!==void 0,"internal-error");const f=u.providerUserInfo!==void 0?zA(u.providerUserInfo):[],E=!(u.email&&u.passwordHash)&&!(f!=null&&f.length),x=new Ol;x.updateFromIdToken(a);const T=new ra({uid:u.localId,auth:e,stsTokenManager:x,isAnonymous:E}),A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:f,metadata:new x1(u.createdAt,u.lastLoginAt),isAnonymous:!(u.email&&u.passwordHash)&&!(f!=null&&f.length)};return Object.assign(T,A),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=new Map;function ia(i){fa(i instanceof Function,"Expected a class definition");let e=ky.get(i);return e?(fa(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,ky.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}HA.type="NONE";const Uy=HA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(i,e,t){return`firebase:${i}:${e}:${t}`}class Ml{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:u,name:f}=this.auth;this.fullUserKey=Hh(this.userKey,u.apiKey,f),this.fullPersistenceKey=Hh("persistence",u.apiKey,f),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ra._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Ml(ia(Uy),e,a);const u=(await Promise.all(t.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let f=u[0]||ia(Uy);const E=Hh(a,e.config.apiKey,e.name);let x=null;for(const A of t)try{const I=await A._get(E);if(I){const R=ra._fromJSON(e,I);A!==f&&(x=R),f=A;break}}catch{}const T=u.filter(A=>A._shouldAllowMigration);return!f._shouldAllowMigration||!T.length?new Ml(f,e,a):(f=T[0],x&&await f._set(E,x.toJSON()),await Promise.all(t.map(async A=>{if(A!==f)try{await A._remove(E)}catch{}})),new Ml(f,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WA(e))return"Blackberry";if(QA(e))return"Webos";if(GA(e))return"Safari";if((e.includes("chrome/")||qA(e))&&!e.includes("edge/"))return"Chrome";if(XA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=i.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function jA(i=Fr()){return/firefox\//i.test(i)}function GA(i=Fr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qA(i=Fr()){return/crios\//i.test(i)}function YA(i=Fr()){return/iemobile/i.test(i)}function XA(i=Fr()){return/android/i.test(i)}function WA(i=Fr()){return/blackberry/i.test(i)}function QA(i=Fr()){return/webos/i.test(i)}function Eg(i=Fr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Yb(i=Fr()){var e;return Eg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Xb(){return Pv()&&document.documentMode===10}function KA(i=Fr()){return Eg(i)||XA(i)||QA(i)||WA(i)||/windows phone/i.test(i)||YA(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(i,e=[]){let t;switch(i){case"Browser":t=Vy(Fr());break;case"Worker":t=`${Vy(Fr())}-${i}`;break;default:t=i}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=f=>new Promise((E,x)=>{try{const T=e(f);E(T)}catch(T){x(T)}});a.onAbort=t,this.queue.push(a);const u=this.queue.length-1;return()=>{this.queue[u]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const u of t)try{u()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(i,e={}){return $l(i,"GET","/v2/passwordPolicy",pg(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=6;class Zb{constructor(e){var t,a,u,f;const E=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=E.minPasswordLength)!==null&&t!==void 0?t:Kb,E.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=E.maxPasswordLength),E.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=E.containsLowercaseCharacter),E.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=E.containsUppercaseCharacter),E.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=E.containsNumericCharacter),E.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=E.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(u=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&u!==void 0?u:"",this.forceUpgradeOnSignin=(f=e.forceUpgradeOnSignin)!==null&&f!==void 0?f:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,a,u,f,E,x;const T={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,T),this.validatePasswordCharacterOptions(e,T),T.isValid&&(T.isValid=(t=T.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),T.isValid&&(T.isValid=(a=T.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),T.isValid&&(T.isValid=(u=T.containsLowercaseLetter)!==null&&u!==void 0?u:!0),T.isValid&&(T.isValid=(f=T.containsUppercaseLetter)!==null&&f!==void 0?f:!0),T.isValid&&(T.isValid=(E=T.containsNumericCharacter)!==null&&E!==void 0?E:!0),T.isValid&&(T.isValid=(x=T.containsNonAlphanumericCharacter)!==null&&x!==void 0?x:!0),T}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,u=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),u&&(t.meetsMaxPasswordLength=e.length<=u)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let u=0;u<e.length;u++)a=e.charAt(u),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,u,f){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=u)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,t,a,u){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=u,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fy(this),this.idTokenSubscription=new Fy(this),this.beforeStateQueue=new Wb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=u.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ia(t)),this._initializationPromise=this.queue(async()=>{var a,u;if(!this._deleted&&(this.persistenceManager=await Ml.create(this,e),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await FA(this,{idToken:e}),a=await ra._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ts(this.app)){const E=this.app.settings.authIdToken;return E?new Promise(x=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(E).then(x,x))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let u=a,f=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const E=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,x=u==null?void 0:u._redirectEventId,T=await this.tryRedirectSignIn(e);(!E||E===x)&&(T!=null&&T.user)&&(u=T.user,f=!0)}if(!u)return this.directlySetCurrentUser(null);if(!u._redirectEventId){if(f)try{await this.beforeStateQueue.runMiddleware(u)}catch(E){u=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(E))}return u?this.reloadAndSetCurrentUserOrClear(u):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===u._redirectEventId?this.directlySetCurrentUser(u):this.reloadAndSetCurrentUserOrClear(u)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Mb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ts(this.app))return Promise.reject(Bo(this));const t=e?Jr(e):null;return t&&st(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ts(this.app)?Promise.reject(Bo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ts(this.app)?Promise.reject(Bo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ia(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qb(this),t=new Zb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await qb(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ia(e)||this._popupRedirectResolver;st(t,this,"argument-error"),this.redirectPersistenceManager=await Ml.create(this,[ia(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,u){if(this._deleted)return()=>{};const f=typeof t=="function"?t:t.next.bind(t);let E=!1;const x=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(x,this,"internal-error"),x.then(()=>{E||f(this.currentUser)}),typeof t=="function"){const T=e.addObserver(t,a,u);return()=>{E=!0,T()}}else{const T=e.addObserver(t);return()=>{E=!0,T()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(t["X-Firebase-Client"]=a);const u=await this._getAppCheckToken();return u&&(t["X-Firebase-AppCheck"]=u),t}async _getAppCheckToken(){var e;if(Ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Nb(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function _g(i){return Jr(i)}class Fy{constructor(e){this.auth=e,this.observer=null,this.addObserver=jv(t=>this.observer=t)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $b(i){Ag=i}function e4(i){return Ag.loadJS(i)}function t4(){return Ag.gapiScript}function n4(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(i,e){const t=M1(i,"auth");if(t.isInitialized()){const u=t.getImmediate(),f=t.getOptions();if(ko(f,e??{}))return u;ha(u,"already-initialized")}return t.initialize({options:e})}function i4(i,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(ia);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function s4(i,e,t){const a=_g(i);st(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const u=!1,f=JA(e),{host:E,port:x}=a4(e),T=x===null?"":`:${x}`,A={url:`${f}//${E}${T}/`},I=Object.freeze({host:E,port:x,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:u})});if(!a._canInitEmulator){st(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),st(ko(A,a.config.emulator)&&ko(I,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=A,a.emulatorConfig=I,a.settings.appVerificationDisabledForTesting=!0,o4()}function JA(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function a4(i){const e=JA(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",u=/^(\[[^\]]+\])(:|$)/.exec(a);if(u){const f=u[1];return{host:f,port:zy(a.substr(f.length+1))}}else{const[f,E]=a.split(":");return{host:f,port:zy(E)}}}function zy(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function o4(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return na("not implemented")}_getIdTokenResponse(e){return na("not implemented")}_linkToIdToken(e,t){return na("not implemented")}_getReauthenticationResolver(e){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(i,e){return Bb(i,"POST","/v1/accounts:signInWithIdp",pg(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="http://localhost";class zo extends $A{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ha("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:u}=t,f=dg(t,["providerId","signInMethod"]);if(!a||!u)return null;const E=new zo(a,u);return E.idToken=f.idToken||void 0,E.accessToken=f.accessToken||void 0,E.secret=f.secret,E.nonce=f.nonce,E.pendingToken=f.pendingToken||null,E}_getIdTokenResponse(e){const t=this.buildRequest();return Ll(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Ll(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ll(e,t)}buildRequest(){const e={requestUri:l4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends ew{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends xc{constructor(){super("facebook.com")}static credential(e){return zo._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zo._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return Wa.credential(t,a)}catch{return null}}}Wa.GOOGLE_SIGN_IN_METHOD="google.com";Wa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends xc{constructor(){super("github.com")}static credential(e){return zo._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qa.credential(e.oauthAccessToken)}catch{return null}}}Qa.GITHUB_SIGN_IN_METHOD="github.com";Qa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends xc{constructor(){super("twitter.com")}static credential(e,t){return zo._fromParams({providerId:Ka.PROVIDER_ID,signInMethod:Ka.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ka.credentialFromTaggedObject(e)}static credentialFromError(e){return Ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return Ka.credential(t,a)}catch{return null}}}Ka.TWITTER_SIGN_IN_METHOD="twitter.com";Ka.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,u=!1){const f=await ra._fromIdTokenResponse(e,a,u),E=Hy(a);return new Gl({user:f,providerId:E,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const u=Hy(a);return new Gl({user:e,providerId:u,_tokenResponse:a,operationType:t})}}function Hy(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends ga{constructor(e,t,a,u){var f;super(t.code,t.message),this.operationType=a,this.user=u,Object.setPrototypeOf(this,uf.prototype),this.customData={appName:e.name,tenantId:(f=e.tenantId)!==null&&f!==void 0?f:void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,u){return new uf(e,t,a,u)}}function tw(i,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?uf._fromErrorAndOperation(i,f,e,a):f})}async function u4(i,e,t=!1){const a=await lc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Gl._forOperation(i,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(i,e,t=!1){const{auth:a}=i;if(Ts(a.app))return Promise.reject(Bo(a));const u="reauthenticate";try{const f=await lc(i,tw(a,u,e,i),t);st(f.idToken,a,"internal-error");const E=yg(f.idToken);st(E,a,"internal-error");const{sub:x}=E;return st(i.uid===x,a,"user-mismatch"),Gl._forOperation(i,u,f)}catch(f){throw(f==null?void 0:f.code)==="auth/user-not-found"&&ha(a,"user-mismatch"),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(i,e,t=!1){if(Ts(i.app))return Promise.reject(Bo(i));const a="signIn",u=await tw(i,a,e),f=await Gl._fromIdTokenResponse(i,a,u);return t||await i._updateCurrentUser(f.user),f}function f4(i,e,t,a){return Jr(i).onIdTokenChanged(e,t,a)}function d4(i,e,t){return Jr(i).beforeAuthStateChanged(e,t)}const cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cf,"1"),this.storage.removeItem(cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=1e3,m4=10;class rw extends nw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),u=this.localCache[t];a!==u&&e(t,u,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((E,x,T)=>{this.notifyListeners(E,T)});return}const a=e.key;t?this.detachListener():this.stopPolling();const u=()=>{const E=this.storage.getItem(a);!t&&this.localCache[a]===E||this.notifyListeners(a,E)},f=this.storage.getItem(a);Xb()&&f!==e.newValue&&e.newValue!==e.oldValue?setTimeout(u,m4):u()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const u of Array.from(a))u(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},g4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rw.type="LOCAL";const p4=rw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw extends nw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iw.type="SESSION";const sw=iw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(u=>u.isListeningto(e));if(t)return t;const a=new Lf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:u,data:f}=t.data,E=this.handlersMap[u];if(!(E!=null&&E.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:u});const x=Array.from(E).map(async A=>A(t.origin,f)),T=await y4(x);t.ports[0].postMessage({status:"done",eventId:a,eventType:u,response:T})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(i="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const u=typeof MessageChannel<"u"?new MessageChannel:null;if(!u)throw new Error("connection_unavailable");let f,E;return new Promise((x,T)=>{const A=wg("",20);u.port1.start();const I=setTimeout(()=>{T(new Error("unsupported_event"))},a);E={messageChannel:u,onMessage(R){const B=R;if(B.data.eventId===A)switch(B.data.status){case"ack":clearTimeout(I),f=setTimeout(()=>{T(new Error("timeout"))},3e3);break;case"done":clearTimeout(f),x(B.data.response);break;default:clearTimeout(I),clearTimeout(f),T(new Error("invalid_response"));break}}},this.handlers.add(E),u.port1.addEventListener("message",E.onMessage),this.target.postMessage({eventType:e,eventId:A,data:t},[u.port2])}).finally(()=>{E&&this.removeMessageHandler(E)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(){return window}function _4(i){bs().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(){return typeof bs().WorkerGlobalScope<"u"&&typeof bs().importScripts=="function"}async function A4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w4(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function x4(){return aw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="firebaseLocalStorageDb",T4=1,hf="firebaseLocalStorage",lw="fbase_key";class Tc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Pf(i,e){return i.transaction([hf],e?"readwrite":"readonly").objectStore(hf)}function v4(){const i=indexedDB.deleteDatabase(ow);return new Tc(i).toPromise()}function T1(){const i=indexedDB.open(ow,T4);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const a=i.result;try{a.createObjectStore(hf,{keyPath:lw})}catch(u){t(u)}}),i.addEventListener("success",async()=>{const a=i.result;a.objectStoreNames.contains(hf)?e(a):(a.close(),await v4(),e(await T1()))})})}async function jy(i,e,t){const a=Pf(i,!0).put({[lw]:e,value:t});return new Tc(a).toPromise()}async function C4(i,e){const t=Pf(i,!1).get(e),a=await new Tc(t).toPromise();return a===void 0?null:a.value}function Gy(i,e){const t=Pf(i,!0).delete(e);return new Tc(t).toPromise()}const S4=800,I4=3;class uw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await T1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>I4)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(x4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await A4(),!this.activeServiceWorker)return;this.sender=new E4(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((e=a[0])===null||e===void 0)&&e.fulfilled&&!((t=a[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await T1();return await jy(e,cf,"1"),await Gy(e,cf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>jy(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>C4(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(u=>{const f=Pf(u,!1).getAll();return new Tc(f).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:u,value:f}of e)a.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(f)&&(this.notifyListeners(u,f),t.push(u));for(const u of Object.keys(this.localCache))this.localCache[u]&&!a.has(u)&&(this.notifyListeners(u,null),t.push(u));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const u of Array.from(a))u(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uw.type="LOCAL";const b4=uw;new wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(i,e){return e?ia(e):(st(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends $A{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ll(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ll(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ll(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function N4(i){return h4(i.auth,new xg(i),i.bypassAuthState)}function D4(i){const{auth:e,user:t}=i;return st(t,e,"internal-error"),c4(t,new xg(i),i.bypassAuthState)}async function O4(i){const{auth:e,user:t}=i;return st(t,e,"internal-error"),u4(t,new xg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,t,a,u,f=!1){this.auth=e,this.resolver=a,this.user=u,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:u,tenantId:f,error:E,type:x}=e;if(E){this.reject(E);return}const T={auth:this.auth,requestUri:t,sessionId:a,tenantId:f||void 0,postBody:u||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(x)(T))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return N4;case"linkViaPopup":case"linkViaRedirect":return O4;case"reauthViaPopup":case"reauthViaRedirect":return D4;default:ha(this.auth,"internal-error")}}resolve(e){fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new wc(2e3,1e4);class Rl extends cw{constructor(e,t,a,u,f){super(e,t,u,f),this.provider=a,this.authWindow=null,this.pollId=null,Rl.currentPopupAction&&Rl.currentPopupAction.cancel(),Rl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){fa(this.filter.length===1,"Popup operations only handle one event");const e=wg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if(!((a=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M4.get())};e()}}Rl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="pendingRedirect",jh=new Map;class P4 extends cw{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=jh.get(this.auth._key());if(!e){try{const a=await B4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}jh.set(this.auth._key(),e)}return this.bypassAuthState||jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B4(i,e){const t=V4(e),a=U4(i);if(!await a._isAvailable())return!1;const u=await a._get(t)==="true";return await a._remove(t),u}function k4(i,e){jh.set(i._key(),e)}function U4(i){return ia(i._redirectPersistence)}function V4(i){return Hh(L4,i.config.apiKey,i.name)}async function F4(i,e,t=!1){if(Ts(i.app))return Promise.reject(Bo(i));const a=_g(i),u=R4(a,e),E=await new P4(a,u,t).execute();return E&&!t&&(delete E.user._redirectEventId,await a._persistUserIfCurrent(E.user),await a._setRedirectUser(null,e)),E}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=10*60*1e3;class H4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!hw(e)){const u=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";t.onError(Is(this.auth,u))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z4&&this.cachedEventUids.clear(),this.cachedEventUids.has(qy(e))}saveEventToCache(e){this.cachedEventUids.add(qy(e)),this.lastProcessedEventTime=Date.now()}}function qy(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function hw({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function j4(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hw(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(i,e={}){return $l(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y4=/^https?/;async function X4(i){if(i.config.emulator)return;const{authorizedDomains:e}=await G4(i);for(const t of e)try{if(W4(t))return}catch{}ha(i,"unauthorized-domain")}function W4(i){const e=w1(),{protocol:t,hostname:a}=new URL(e);if(i.startsWith("chrome-extension://")){const E=new URL(i);return E.hostname===""&&a===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&E.hostname===a}if(!Y4.test(t))return!1;if(q4.test(i))return a===i;const u=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+u+"|"+u+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new wc(3e4,6e4);function Yy(){const i=bs().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function K4(i){return new Promise((e,t)=>{var a,u,f;function E(){Yy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yy(),t(Is(i,"network-request-failed"))},timeout:Q4.get()})}if(!((u=(a=bs().gapi)===null||a===void 0?void 0:a.iframes)===null||u===void 0)&&u.Iframe)e(gapi.iframes.getContext());else if(!((f=bs().gapi)===null||f===void 0)&&f.load)E();else{const x=n4("iframefcb");return bs()[x]=()=>{gapi.load?E():t(Is(i,"network-request-failed"))},e4(`${t4()}?onload=${x}`).catch(T=>t(T))}}).catch(e=>{throw Gh=null,e})}let Gh=null;function Z4(i){return Gh=Gh||K4(i),Gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new wc(5e3,15e3),$4="__/auth/iframe",eR="emulator/auth/iframe",tR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rR(i){const e=i.config;st(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?mg(e,eR):`https://${i.config.authDomain}/${$4}`,a={apiKey:e.apiKey,appName:i.name,v:Xl},u=nR.get(i.config.apiHost);u&&(a.eid=u);const f=i._getFrameworks();return f.length&&(a.fw=f.join(",")),`${t}?${gc(a).slice(1)}`}async function iR(i){const e=await Z4(i),t=bs().gapi;return st(t,i,"internal-error"),e.open({where:document.body,url:rR(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tR,dontclear:!0},a=>new Promise(async(u,f)=>{await a.restyle({setHideOnLeave:!1});const E=Is(i,"network-request-failed"),x=bs().setTimeout(()=>{f(E)},J4.get());function T(){bs().clearTimeout(x),u(a)}a.ping(T).then(T,()=>{f(E)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aR=500,oR=600,lR="_blank",uR="http://localhost";class Xy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cR(i,e,t,a=aR,u=oR){const f=Math.max((window.screen.availHeight-u)/2,0).toString(),E=Math.max((window.screen.availWidth-a)/2,0).toString();let x="";const T=Object.assign(Object.assign({},sR),{width:a.toString(),height:u.toString(),top:f,left:E}),A=Fr().toLowerCase();t&&(x=qA(A)?lR:t),jA(A)&&(e=e||uR,T.scrollbars="yes");const I=Object.entries(T).reduce((B,[j,q])=>`${B}${j}=${q},`,"");if(Yb(A)&&x!=="_self")return hR(e||"",x),new Xy(null);const R=window.open(e||"",x,I);st(R,i,"popup-blocked");try{R.focus()}catch{}return new Xy(R)}function hR(i,e){const t=document.createElement("a");t.href=i,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="__/auth/handler",dR="emulator/auth/handler",gR=encodeURIComponent("fac");async function Wy(i,e,t,a,u,f){st(i.config.authDomain,i,"auth-domain-config-required"),st(i.config.apiKey,i,"invalid-api-key");const E={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:a,v:Xl,eventId:u};if(e instanceof ew){e.setDefaultLanguage(i.languageCode),E.providerId=e.providerId||"",Hv(e.getCustomParameters())||(E.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,R]of Object.entries({}))E[I]=R}if(e instanceof xc){const I=e.getScopes().filter(R=>R!=="");I.length>0&&(E.scopes=I.join(","))}i.tenantId&&(E.tid=i.tenantId);const x=E;for(const I of Object.keys(x))x[I]===void 0&&delete x[I];const T=await i._getAppCheckToken(),A=T?`#${gR}=${encodeURIComponent(T)}`:"";return`${mR(i)}?${gc(x).slice(1)}${A}`}function mR({config:i}){return i.emulator?mg(i,dR):`https://${i.authDomain}/${fR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="webStorageSupport";class pR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sw,this._completeRedirectFn=F4,this._overrideRedirectResult=k4}async _openPopup(e,t,a,u){var f;fa((f=this.eventManagers[e._key()])===null||f===void 0?void 0:f.manager,"_initialize() not called before _openPopup()");const E=await Wy(e,t,a,w1(),u);return cR(e,E,wg())}async _openRedirect(e,t,a,u){await this._originValidation(e);const f=await Wy(e,t,a,w1(),u);return _4(f),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:u,promise:f}=this.eventManagers[t];return u?Promise.resolve(u):(fa(f,"If manager is not set, promise should be"),f)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await iR(e),a=new H4(e);return t.register("authEvent",u=>(st(u==null?void 0:u.authEvent,e,"invalid-auth-event"),{status:a.onEvent(u.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(U0,{type:U0},u=>{var f;const E=(f=u==null?void 0:u[0])===null||f===void 0?void 0:f[U0];E!==void 0&&t(!!E),ha(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=X4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KA()||GA()||Eg()}}const yR=pR;var Qy="@firebase/auth",Ky="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AR(i){Pl(new Uo("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),u=e.getProvider("heartbeat"),f=e.getProvider("app-check-internal"),{apiKey:E,authDomain:x}=a.options;st(E&&!E.includes(":"),"invalid-api-key",{appName:a.name});const T={apiKey:E,authDomain:x,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZA(i)},A=new Jb(a,u,f,T);return i4(A,t),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Pl(new Uo("auth-internal",e=>{const t=_g(e.getProvider("auth").getImmediate());return(a=>new ER(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),eo(Qy,Ky,_R(i)),eo(Qy,Ky,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=5*60,xR=ZE("authIdTokenMaxAge")||wR;let Zy=null;const TR=i=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>xR)return;const u=t==null?void 0:t.token;Zy!==u&&(Zy=u,await fetch(i,{method:u?"POST":"DELETE",headers:u?{Authorization:`Bearer ${u}`}:{}}))};function vR(i=t_()){const e=M1(i,"auth");if(e.isInitialized())return e.getImmediate();const t=r4(i,{popupRedirectResolver:yR,persistence:[b4,p4,sw]}),a=ZE("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const f=new URL(a,location.origin);if(location.origin===f.origin){const E=TR(f.toString());d4(t,E,()=>E(t.currentUser)),f4(t,x=>E(x))}}const u=QE("auth");return u&&s4(t,`http://${u}`),t}function CR(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}$b({loadJS(i){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",i),a.onload=e,a.onerror=u=>{const f=Is("internal-error");f.customData=u,t(f)},a.type="text/javascript",a.charset="UTF-8",CR().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AR("Browser");const SR={apiKey:"AIzaSyAIFbyyabmv9ReN8yNV6qjLiMYTQ1xvnTg",authDomain:"monopolyonlinegame-332fd.firebaseapp.com",projectId:"monopolyonlinegame-332fd",storageBucket:"monopolyonlinegame-332fd.appspot.com",messagingSenderId:"829520826883",appId:"1:829520826883:web:de11af85974e30f328f436"},fw=e_(SR),Tg=JI(fw);vR(fw);const IR=async i=>{try{const e=Sb(),t=await wb(TA(Tg,"players"),{id:e,name:i,balance:15e3});return{id:e,docId:t.id}}catch(e){return console.error("Error al aadir jugador:",e),null}};var vl={},V0={exports:{}},F0,Jy;function bR(){if(Jy)return F0;Jy=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return F0=i,F0}var z0,$y;function RR(){if($y)return z0;$y=1;var i=bR();function e(){}function t(){}return t.resetWarningCache=e,z0=function(){function a(E,x,T,A,I,R){if(R!==i){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}a.isRequired=a;function u(){return a}var f={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:u,element:a,elementType:a,instanceOf:u,node:a,objectOf:u,oneOf:u,oneOfType:u,shape:u,exact:u,checkPropTypes:t,resetWarningCache:e};return f.PropTypes=f,f},z0}var eE;function dw(){return eE||(eE=1,V0.exports=RR()()),V0.exports}var H0,tE;function gw(){return tE||(tE=1,H0={L:1,M:0,Q:3,H:2}),H0}var j0,nE;function mw(){return nE||(nE=1,j0={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),j0}var G0,rE;function NR(){if(rE)return G0;rE=1;var i=mw();function e(t){this.mode=i.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var a=0;a<this.data.length;a++)t.put(this.data.charCodeAt(a),8)}},G0=e,G0}var q0,iE;function DR(){if(iE)return q0;iE=1;var i=gw();function e(t,a){this.totalCount=t,this.dataCount=a}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,a){var u=e.getRsBlockTable(t,a);if(u==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+a);for(var f=u.length/3,E=new Array,x=0;x<f;x++)for(var T=u[x*3+0],A=u[x*3+1],I=u[x*3+2],R=0;R<T;R++)E.push(new e(A,I));return E},e.getRsBlockTable=function(t,a){switch(a){case i.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case i.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case i.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case i.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},q0=e,q0}var Y0,sE;function OR(){if(sE)return Y0;sE=1;function i(){this.buffer=new Array,this.length=0}return i.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var a=0;a<t;a++)this.putBit((e>>>t-a-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Y0=i,Y0}var X0,aE;function pw(){if(aE)return X0;aE=1;for(var i={glog:function(t){if(t<1)throw new Error("glog("+t+")");return i.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return i.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)i.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)i.EXP_TABLE[e]=i.EXP_TABLE[e-4]^i.EXP_TABLE[e-5]^i.EXP_TABLE[e-6]^i.EXP_TABLE[e-8];for(var e=0;e<255;e++)i.LOG_TABLE[i.EXP_TABLE[e]]=e;return X0=i,X0}var W0,oE;function yw(){if(oE)return W0;oE=1;var i=pw();function e(t,a){if(t.length==null)throw new Error(t.length+"/"+a);for(var u=0;u<t.length&&t[u]==0;)u++;this.num=new Array(t.length-u+a);for(var f=0;f<t.length-u;f++)this.num[f]=t[f+u]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var a=new Array(this.getLength()+t.getLength()-1),u=0;u<this.getLength();u++)for(var f=0;f<t.getLength();f++)a[u+f]^=i.gexp(i.glog(this.get(u))+i.glog(t.get(f)));return new e(a,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var a=i.glog(this.get(0))-i.glog(t.get(0)),u=new Array(this.getLength()),f=0;f<this.getLength();f++)u[f]=this.get(f);for(var f=0;f<t.getLength();f++)u[f]^=i.gexp(i.glog(t.get(f))+a);return new e(u,0).mod(t)}},W0=e,W0}var Q0,lE;function MR(){if(lE)return Q0;lE=1;var i=mw(),e=yw(),t=pw(),a={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},u={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(f){for(var E=f<<10;u.getBCHDigit(E)-u.getBCHDigit(u.G15)>=0;)E^=u.G15<<u.getBCHDigit(E)-u.getBCHDigit(u.G15);return(f<<10|E)^u.G15_MASK},getBCHTypeNumber:function(f){for(var E=f<<12;u.getBCHDigit(E)-u.getBCHDigit(u.G18)>=0;)E^=u.G18<<u.getBCHDigit(E)-u.getBCHDigit(u.G18);return f<<12|E},getBCHDigit:function(f){for(var E=0;f!=0;)E++,f>>>=1;return E},getPatternPosition:function(f){return u.PATTERN_POSITION_TABLE[f-1]},getMask:function(f,E,x){switch(f){case a.PATTERN000:return(E+x)%2==0;case a.PATTERN001:return E%2==0;case a.PATTERN010:return x%3==0;case a.PATTERN011:return(E+x)%3==0;case a.PATTERN100:return(Math.floor(E/2)+Math.floor(x/3))%2==0;case a.PATTERN101:return E*x%2+E*x%3==0;case a.PATTERN110:return(E*x%2+E*x%3)%2==0;case a.PATTERN111:return(E*x%3+(E+x)%2)%2==0;default:throw new Error("bad maskPattern:"+f)}},getErrorCorrectPolynomial:function(f){for(var E=new e([1],0),x=0;x<f;x++)E=E.multiply(new e([1,t.gexp(x)],0));return E},getLengthInBits:function(f,E){if(1<=E&&E<10)switch(f){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:return 8;case i.MODE_KANJI:return 8;default:throw new Error("mode:"+f)}else if(E<27)switch(f){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw new Error("mode:"+f)}else if(E<41)switch(f){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw new Error("mode:"+f)}else throw new Error("type:"+E)},getLostPoint:function(f){for(var E=f.getModuleCount(),x=0,T=0;T<E;T++)for(var A=0;A<E;A++){for(var I=0,R=f.isDark(T,A),B=-1;B<=1;B++)if(!(T+B<0||E<=T+B))for(var j=-1;j<=1;j++)A+j<0||E<=A+j||B==0&&j==0||R==f.isDark(T+B,A+j)&&I++;I>5&&(x+=3+I-5)}for(var T=0;T<E-1;T++)for(var A=0;A<E-1;A++){var q=0;f.isDark(T,A)&&q++,f.isDark(T+1,A)&&q++,f.isDark(T,A+1)&&q++,f.isDark(T+1,A+1)&&q++,(q==0||q==4)&&(x+=3)}for(var T=0;T<E;T++)for(var A=0;A<E-6;A++)f.isDark(T,A)&&!f.isDark(T,A+1)&&f.isDark(T,A+2)&&f.isDark(T,A+3)&&f.isDark(T,A+4)&&!f.isDark(T,A+5)&&f.isDark(T,A+6)&&(x+=40);for(var A=0;A<E;A++)for(var T=0;T<E-6;T++)f.isDark(T,A)&&!f.isDark(T+1,A)&&f.isDark(T+2,A)&&f.isDark(T+3,A)&&f.isDark(T+4,A)&&!f.isDark(T+5,A)&&f.isDark(T+6,A)&&(x+=40);for(var $=0,A=0;A<E;A++)for(var T=0;T<E;T++)f.isDark(T,A)&&$++;var te=Math.abs(100*$/E/E-50)/5;return x+=te*10,x}};return Q0=u,Q0}var K0,uE;function LR(){if(uE)return K0;uE=1;var i=NR(),e=DR(),t=OR(),a=MR(),u=yw();function f(x,T){this.typeNumber=x,this.errorCorrectLevel=T,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var E=f.prototype;return E.addData=function(x){var T=new i(x);this.dataList.push(T),this.dataCache=null},E.isDark=function(x,T){if(x<0||this.moduleCount<=x||T<0||this.moduleCount<=T)throw new Error(x+","+T);return this.modules[x][T]},E.getModuleCount=function(){return this.moduleCount},E.make=function(){if(this.typeNumber<1){var x=1;for(x=1;x<40;x++){for(var T=e.getRSBlocks(x,this.errorCorrectLevel),A=new t,I=0,R=0;R<T.length;R++)I+=T[R].dataCount;for(var R=0;R<this.dataList.length;R++){var B=this.dataList[R];A.put(B.mode,4),A.put(B.getLength(),a.getLengthInBits(B.mode,x)),B.write(A)}if(A.getLengthInBits()<=I*8)break}this.typeNumber=x}this.makeImpl(!1,this.getBestMaskPattern())},E.makeImpl=function(x,T){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var A=0;A<this.moduleCount;A++){this.modules[A]=new Array(this.moduleCount);for(var I=0;I<this.moduleCount;I++)this.modules[A][I]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(x,T),this.typeNumber>=7&&this.setupTypeNumber(x),this.dataCache==null&&(this.dataCache=f.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,T)},E.setupPositionProbePattern=function(x,T){for(var A=-1;A<=7;A++)if(!(x+A<=-1||this.moduleCount<=x+A))for(var I=-1;I<=7;I++)T+I<=-1||this.moduleCount<=T+I||(0<=A&&A<=6&&(I==0||I==6)||0<=I&&I<=6&&(A==0||A==6)||2<=A&&A<=4&&2<=I&&I<=4?this.modules[x+A][T+I]=!0:this.modules[x+A][T+I]=!1)},E.getBestMaskPattern=function(){for(var x=0,T=0,A=0;A<8;A++){this.makeImpl(!0,A);var I=a.getLostPoint(this);(A==0||x>I)&&(x=I,T=A)}return T},E.createMovieClip=function(x,T,A){var I=x.createEmptyMovieClip(T,A),R=1;this.make();for(var B=0;B<this.modules.length;B++)for(var j=B*R,q=0;q<this.modules[B].length;q++){var $=q*R,te=this.modules[B][q];te&&(I.beginFill(0,100),I.moveTo($,j),I.lineTo($+R,j),I.lineTo($+R,j+R),I.lineTo($,j+R),I.endFill())}return I},E.setupTimingPattern=function(){for(var x=8;x<this.moduleCount-8;x++)this.modules[x][6]==null&&(this.modules[x][6]=x%2==0);for(var T=8;T<this.moduleCount-8;T++)this.modules[6][T]==null&&(this.modules[6][T]=T%2==0)},E.setupPositionAdjustPattern=function(){for(var x=a.getPatternPosition(this.typeNumber),T=0;T<x.length;T++)for(var A=0;A<x.length;A++){var I=x[T],R=x[A];if(this.modules[I][R]==null)for(var B=-2;B<=2;B++)for(var j=-2;j<=2;j++)B==-2||B==2||j==-2||j==2||B==0&&j==0?this.modules[I+B][R+j]=!0:this.modules[I+B][R+j]=!1}},E.setupTypeNumber=function(x){for(var T=a.getBCHTypeNumber(this.typeNumber),A=0;A<18;A++){var I=!x&&(T>>A&1)==1;this.modules[Math.floor(A/3)][A%3+this.moduleCount-8-3]=I}for(var A=0;A<18;A++){var I=!x&&(T>>A&1)==1;this.modules[A%3+this.moduleCount-8-3][Math.floor(A/3)]=I}},E.setupTypeInfo=function(x,T){for(var A=this.errorCorrectLevel<<3|T,I=a.getBCHTypeInfo(A),R=0;R<15;R++){var B=!x&&(I>>R&1)==1;R<6?this.modules[R][8]=B:R<8?this.modules[R+1][8]=B:this.modules[this.moduleCount-15+R][8]=B}for(var R=0;R<15;R++){var B=!x&&(I>>R&1)==1;R<8?this.modules[8][this.moduleCount-R-1]=B:R<9?this.modules[8][15-R-1+1]=B:this.modules[8][15-R-1]=B}this.modules[this.moduleCount-8][8]=!x},E.mapData=function(x,T){for(var A=-1,I=this.moduleCount-1,R=7,B=0,j=this.moduleCount-1;j>0;j-=2)for(j==6&&j--;;){for(var q=0;q<2;q++)if(this.modules[I][j-q]==null){var $=!1;B<x.length&&($=(x[B]>>>R&1)==1);var te=a.getMask(T,I,j-q);te&&($=!$),this.modules[I][j-q]=$,R--,R==-1&&(B++,R=7)}if(I+=A,I<0||this.moduleCount<=I){I-=A,A=-A;break}}},f.PAD0=236,f.PAD1=17,f.createData=function(x,T,A){for(var I=e.getRSBlocks(x,T),R=new t,B=0;B<A.length;B++){var j=A[B];R.put(j.mode,4),R.put(j.getLength(),a.getLengthInBits(j.mode,x)),j.write(R)}for(var q=0,B=0;B<I.length;B++)q+=I[B].dataCount;if(R.getLengthInBits()>q*8)throw new Error("code length overflow. ("+R.getLengthInBits()+">"+q*8+")");for(R.getLengthInBits()+4<=q*8&&R.put(0,4);R.getLengthInBits()%8!=0;)R.putBit(!1);for(;!(R.getLengthInBits()>=q*8||(R.put(f.PAD0,8),R.getLengthInBits()>=q*8));)R.put(f.PAD1,8);return f.createBytes(R,I)},f.createBytes=function(x,T){for(var A=0,I=0,R=0,B=new Array(T.length),j=new Array(T.length),q=0;q<T.length;q++){var $=T[q].dataCount,te=T[q].totalCount-$;I=Math.max(I,$),R=Math.max(R,te),B[q]=new Array($);for(var ie=0;ie<B[q].length;ie++)B[q][ie]=255&x.buffer[ie+A];A+=$;var me=a.getErrorCorrectPolynomial(te),ue=new u(B[q],me.getLength()-1),De=ue.mod(me);j[q]=new Array(me.getLength()-1);for(var ie=0;ie<j[q].length;ie++){var Ve=ie+De.getLength()-j[q].length;j[q][ie]=Ve>=0?De.get(Ve):0}}for(var ke=0,ie=0;ie<T.length;ie++)ke+=T[ie].totalCount;for(var H=new Array(ke),F=0,ie=0;ie<I;ie++)for(var q=0;q<T.length;q++)ie<B[q].length&&(H[F++]=B[q][ie]);for(var ie=0;ie<R;ie++)for(var q=0;q<T.length;q++)ie<j[q].length&&(H[F++]=j[q][ie]);return H},K0=f,K0}var Dh={},cE;function PR(){if(cE)return Dh;cE=1,Object.defineProperty(Dh,"__esModule",{value:!0});var i=Object.assign||function(A){for(var I=1;I<arguments.length;I++){var R=arguments[I];for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&(A[B]=R[B])}return A},e=dw(),t=f(e),a=uc(),u=f(a);function f(A){return A&&A.__esModule?A:{default:A}}function E(A,I){var R={};for(var B in A)I.indexOf(B)>=0||Object.prototype.hasOwnProperty.call(A,B)&&(R[B]=A[B]);return R}var x={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},T=(0,a.forwardRef)(function(A,I){var R=A.bgColor,B=A.bgD,j=A.fgD,q=A.fgColor,$=A.size,te=A.title,ie=A.viewBoxSize,me=A.xmlns,ue=me===void 0?"http://www.w3.org/2000/svg":me,De=E(A,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return u.default.createElement("svg",i({},De,{height:$,ref:I,viewBox:"0 0 "+ie+" "+ie,width:$,xmlns:ue}),te?u.default.createElement("title",null,te):null,u.default.createElement("path",{d:B,fill:R}),u.default.createElement("path",{d:j,fill:q}))});return T.displayName="QRCodeSvg",T.propTypes=x,Dh.default=T,Dh}var hE;function BR(){if(hE)return vl;hE=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.QRCode=void 0;var i=Object.assign||function($){for(var te=1;te<arguments.length;te++){var ie=arguments[te];for(var me in ie)Object.prototype.hasOwnProperty.call(ie,me)&&($[me]=ie[me])}return $},e=dw(),t=R(e),a=gw(),u=R(a),f=LR(),E=R(f),x=uc(),T=R(x),A=PR(),I=R(A);function R($){return $&&$.__esModule?$:{default:$}}function B($,te){var ie={};for(var me in $)te.indexOf(me)>=0||Object.prototype.hasOwnProperty.call($,me)&&(ie[me]=$[me]);return ie}var j={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},q=(0,x.forwardRef)(function($,te){var ie=$.bgColor,me=ie===void 0?"#FFFFFF":ie,ue=$.fgColor,De=ue===void 0?"#000000":ue,Ve=$.level,ke=Ve===void 0?"L":Ve,H=$.size,F=H===void 0?256:H,L=$.value,X=B($,["bgColor","fgColor","level","size","value"]),Z=new E.default(-1,u.default[ke]);Z.addData(L),Z.make();var Q=Z.modules;return T.default.createElement(I.default,i({},X,{bgColor:me,bgD:Q.map(function(G,ft){return G.map(function(ce,Se){return ce?"":"M "+Se+" "+ft+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:De,fgD:Q.map(function(G,ft){return G.map(function(ce,Se){return ce?"M "+Se+" "+ft+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:te,size:F,viewBoxSize:Q.length}))});return vl.QRCode=q,q.displayName="QRCode",q.propTypes=j,vl.default=q,vl}var kR=BR();const UR=bE(kR),VR=()=>{const[i,e]=Ee.useState(""),[t,a]=Ee.useState(null),u=S1(),f=async()=>{if(!i.trim()){alert("Por favor, ingresa un nombre vlido");return}const E=await IR(i);E&&a({id:E.id,balance:1500})};return gt.jsxs("div",{className:"create-player-container",children:[gt.jsx("h2",{children:" Crear Nuevo Jugador"}),gt.jsx("input",{type:"text",placeholder:"Nombre del jugador",value:i,onChange:E=>e(E.target.value),className:"input-field"}),gt.jsx("button",{onClick:f,className:"btn",children:"Crear Jugador"}),t&&gt.jsxs("div",{className:"qr-container",children:[gt.jsx("h3",{style:{color:"#000"},children:" Datos del Jugador"}),gt.jsx(UR,{value:t.id,size:150}),gt.jsxs("p",{style:{color:"#000"},children:[gt.jsx("strong",{children:"ID:"})," ",t.id]}),gt.jsxs("p",{style:{color:"#000"},children:[gt.jsx("strong",{children:"Balance:"})," $",t.balance]})]}),gt.jsx("button",{onClick:()=>u("/"),className:"btn btn-secondary",children:" Volver al Inicio"})]})};var je;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(je||(je={}));var fE=new Map([[je.QR_CODE,"QR_CODE"],[je.AZTEC,"AZTEC"],[je.CODABAR,"CODABAR"],[je.CODE_39,"CODE_39"],[je.CODE_93,"CODE_93"],[je.CODE_128,"CODE_128"],[je.DATA_MATRIX,"DATA_MATRIX"],[je.MAXICODE,"MAXICODE"],[je.ITF,"ITF"],[je.EAN_13,"EAN_13"],[je.EAN_8,"EAN_8"],[je.PDF_417,"PDF_417"],[je.RSS_14,"RSS_14"],[je.RSS_EXPANDED,"RSS_EXPANDED"],[je.UPC_A,"UPC_A"],[je.UPC_E,"UPC_E"],[je.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),dE;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(dE||(dE={}));function FR(i){return Object.values(je).includes(i)}var co;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(co||(co={}));var as=function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[co.SCAN_TYPE_CAMERA,co.SCAN_TYPE_FILE],i}(),Ew=function(){function i(e,t){this.format=e,this.formatName=t}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!fE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,fE.get(e))},i}(),gE=function(){function i(){}return i.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i}(),v1;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(v1||(v1={}));var _w=function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:v1.UNKWOWN_ERROR}},i}(),Aw=function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i}();function ws(i){return typeof i>"u"||i===null}function zR(i,e,t){return i>t?t:i<e?e:i}var Nl=function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i}(),nn=function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(e){return"Last Match: ".concat(e)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i}(),mE=function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i}(),ww=function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var a=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(u),E=Object.keys(e),x=0,T=E;x<T.length;x++){var A=T[x];if(f.has(A))return t.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},i}(),Wu={exports:{}},HR=Wu.exports,pE;function jR(){return pE||(pE=1,function(i,e){(function(t,a){a(e)})(HR,function(t){function a(O){return O==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,r){O.__proto__=r}||function(O,r){for(var o in r)r.hasOwnProperty(o)&&(O[o]=r[o])};function f(O,r){u(O,r);function o(){this.constructor=O}O.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}function E(O,r){var o=Object.setPrototypeOf;o?o(O,r):O.__proto__=r}function x(O,r){r===void 0&&(r=O.constructor);var o=Error.captureStackTrace;o&&o(O,r)}var T=function(O){f(r,O);function r(o){var l=this.constructor,h=O.call(this,o)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),E(h,l.prototype),x(h),h}return r}(Error);class A extends T{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}A.kind="Exception";class I extends A{}I.kind="ArgumentException";class R extends A{}R.kind="IllegalArgumentException";class B{constructor(r){if(this.binarizer=r,r===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,o){return this.binarizer.getBlackRow(r,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,o,l,h){const d=this.binarizer.getLuminanceSource().crop(r,o,l,h);return new B(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new B(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new B(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends A{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class q{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ${static arraycopy(r,o,l,h,d){for(;d--;)l[h++]=r[o++]}static currentTimeMillis(){return Date.now()}}class te extends A{}te.kind="IndexOutOfBoundsException";class ie extends te{constructor(r=void 0,o=void 0){super(o),this.index=r,this.message=o}}ie.kind="ArrayIndexOutOfBoundsException";class me{static fill(r,o){for(let l=0,h=r.length;l<h;l++)r[l]=o}static fillWithin(r,o,l,h){me.rangeCheck(r.length,o,l);for(let d=o;d<l;d++)r[d]=h}static rangeCheck(r,o,l){if(o>l)throw new R("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new ie(o);if(l>r)throw new ie(l)}static asList(...r){return r}static create(r,o,l){return Array.from({length:r}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(r,o,l){return Array.from({length:r}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(r,o){if(!r||!o||!r.length||!o.length||r.length!==o.length)return!1;for(let l=0,h=r.length;l<h;l++)if(r[l]!==o[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let o=1;for(const l of r)o=31*o+l;return o}static fillUint8Array(r,o){for(let l=0;l!==r.length;l++)r[l]=o}static copyOf(r,o){return r.slice(0,o)}static copyOfUint8Array(r,o){if(r.length<=o){const l=new Uint8Array(o);return l.set(r),l}return r.slice(0,o)}static copyOfRange(r,o,l){const h=l-o,d=new Int32Array(h);return $.arraycopy(r,o,d,0,h),d}static binarySearch(r,o,l){l===void 0&&(l=me.numberComparator);let h=0,d=r.length-1;for(;h<=d;){const m=d+h>>1,p=l(o,r[m]);if(p>0)h=m+1;else if(p<0)d=m-1;else return m}return-h-1}static numberComparator(r,o){return r-o}}class ue{static numberOfTrailingZeros(r){let o;if(r===0)return 32;let l=31;return o=r<<16,o!==0&&(l-=16,r=o),o=r<<8,o!==0&&(l-=8,r=o),o=r<<4,o!==0&&(l-=4,r=o),o=r<<2,o!==0&&(l-=2,r=o),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let o=1;return r>>>16||(o+=16,r<<=16),r>>>24||(o+=8,r<<=8),r>>>28||(o+=4,r<<=4),r>>>30||(o+=2,r<<=2),o-=r>>>31,o}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,o){return Math.trunc(r/o)}static parseInt(r,o=void 0){return parseInt(r,o)}}ue.MIN_VALUE_32_BITS=-2147483648,ue.MAX_VALUE=Number.MAX_SAFE_INTEGER;class De{constructor(r,o){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,o==null?this.bits=De.makeArray(r):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const o=De.makeArray(r);$.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const o=this.size;if(r>=o)return o;const l=this.bits;let h=Math.floor(r/32),d=l[h];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=l[h]}const p=h*32+ue.numberOfTrailingZeros(d);return p>o?o:p}getNextUnset(r){const o=this.size;if(r>=o)return o;const l=this.bits;let h=Math.floor(r/32),d=~l[h];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=~l[h]}const p=h*32+ue.numberOfTrailingZeros(d);return p>o?o:p}setBulk(r,o){this.bits[Math.floor(r/32)]=o}setRange(r,o){if(o<r||r<0||o>this.size)throw new R;if(o===r)return;o--;const l=Math.floor(r/32),h=Math.floor(o/32),d=this.bits;for(let m=l;m<=h;m++){const p=m>l?0:r&31,C=(2<<(m<h?31:o&31))-(1<<p);d[m]|=C}}clear(){const r=this.bits.length,o=this.bits;for(let l=0;l<r;l++)o[l]=0}isRange(r,o,l){if(o<r||r<0||o>this.size)throw new R;if(o===r)return!0;o--;const h=Math.floor(r/32),d=Math.floor(o/32),m=this.bits;for(let p=h;p<=d;p++){const w=p>h?0:r&31,b=(2<<(p<d?31:o&31))-(1<<w)&4294967295;if((m[p]&b)!==(l?b:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,o){if(o<0||o>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const o=r.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new R("Sizes don't match");const o=this.bits;for(let l=0,h=o.length;l<h;l++)o[l]^=r.bits[l]}toBytes(r,o,l,h){for(let d=0;d<h;d++){let m=0;for(let p=0;p<8;p++)this.get(r)&&(m|=1<<7-p),r++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,h=this.bits;for(let d=0;d<l;d++){let m=h[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=r[0]>>>d;for(let p=1;p<l;p++){const w=r[p];m|=w<<32-d,r[p-1]=m,m=w>>>d}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof De))return!1;const o=r;return this.size===o.size&&me.equals(this.bits,o.bits)}hashCode(){return 31*this.size+me.hashCode(this.bits)}toString(){let r="";for(let o=0,l=this.size;o<l;o++)(o&7)===0&&(r+=" "),r+=this.get(o)?"X":".";return r}clone(){return new De(this.size,this.bits.slice())}}var Ve;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ve||(Ve={}));var ke=Ve;class H extends A{static getFormatInstance(){return new H}}H.kind="FormatException";var F;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(F||(F={}));class L{constructor(r,o,l,...h){this.valueIdentifier=r,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=h,L.VALUE_IDENTIFIER_TO_ECI.set(r,this),L.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,p=d.length;m!==p;m++){const w=d[m];L.VALUES_TO_ECI.set(w,this)}for(const m of h)L.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new H("incorect value");const o=L.VALUES_TO_ECI.get(r);if(o===void 0)throw new H("incorect value");return o}static getCharacterSetECIByName(r){const o=L.NAME_TO_ECI.get(r);if(o===void 0)throw new H("incorect value");return o}equals(r){if(!(r instanceof L))return!1;const o=r;return this.getName()===o.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(F.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(F.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(F.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(F.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(F.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(F.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(F.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(F.Big5,28,"Big5"),L.GB18030=new L(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(F.EUC_KR,30,"EUC_KR","EUC-KR");class X extends A{}X.kind="UnsupportedOperationException";class Z{static decode(r,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!Z.isBrowser()&&r==="ISO-8859-1"}static encode(r,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof L?r:L.getCharacterSetECIByName(r)}static decodeFallback(r,o){const l=this.encodingCharacterSet(o);if(Z.isDecodeFallbackSupported(l)){let h="";for(let d=0,m=r.length;d<m;d++){let p=r[d].toString(16);p.length<2&&(p="0"+p),h+="%"+p}return decodeURIComponent(h)}if(l.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new X(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(L.UTF8)||r.equals(L.ISO8859_1)||r.equals(L.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),h=[];for(let d=0;d<l.length;d++)h.push(l[d].charCodeAt(0));return new Uint8Array(h)}}class Q{static castAsNonUtf8Char(r,o=null){const l=o?o.getName():this.ISO88591;return Z.decode(new Uint8Array([r]),l)}static guessEncoding(r,o){if(o!=null&&o.get(ke.CHARACTER_SET)!==void 0)return o.get(ke.CHARACTER_SET).toString();const l=r.length;let h=!0,d=!0,m=!0,p=0,w=0,C=0,b=0,M=0,P=0,z=0,W=0,K=0,oe=0,ge=0;const Ce=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Re=0;Re<l&&(h||d||m);Re++){const Te=r[Re]&255;m&&(p>0?(Te&128)===0?m=!1:p--:(Te&128)!==0&&((Te&64)===0?m=!1:(p++,(Te&32)===0?w++:(p++,(Te&16)===0?C++:(p++,(Te&8)===0?b++:m=!1))))),h&&(Te>127&&Te<160?h=!1:Te>159&&(Te<192||Te===215||Te===247)&&ge++),d&&(M>0?Te<64||Te===127||Te>252?d=!1:M--:Te===128||Te===160||Te>239?d=!1:Te>160&&Te<224?(P++,W=0,z++,z>K&&(K=z)):Te>127?(M++,z=0,W++,W>oe&&(oe=W)):(z=0,W=0))}return m&&p>0&&(m=!1),d&&M>0&&(d=!1),m&&(Ce||w+C+b>0)?Q.UTF8:d&&(Q.ASSUME_SHIFT_JIS||K>=3||oe>=3)?Q.SHIFT_JIS:h&&d?K===2&&P===2||ge*10>=l?Q.SHIFT_JIS:Q.ISO88591:h?Q.ISO88591:d?Q.SHIFT_JIS:m?Q.UTF8:Q.PLATFORM_DEFAULT_ENCODING}static format(r,...o){let l=-1;function h(m,p,w,C,b,M){if(m==="%%")return"%";if(o[++l]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let P=b?parseInt(b.substr(1)):void 0,z;switch(M){case"s":z=o[l];break;case"c":z=o[l][0];break;case"f":z=parseFloat(o[l]).toFixed(m);break;case"p":z=parseFloat(o[l]).toPrecision(m);break;case"e":z=parseFloat(o[l]).toExponential(m);break;case"x":z=parseInt(o[l]).toString(P||16);break;case"d":z=parseFloat(parseInt(o[l],P||10).toPrecision(m)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(P);let W=parseInt(w),K=w&&w[0]+""=="0"?"0":" ";for(;z.length<W;)z=p!==void 0?z+K:K+z;return z}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,h)}static getBytes(r,o){return Z.encode(r,o)}static getCharCode(r,o=0){return r.charCodeAt(o)}static getCharAt(r){return String.fromCharCode(r)}}Q.SHIFT_JIS=L.SJIS.getName(),Q.GB2312="GB2312",Q.ISO88591=L.ISO8859_1.getName(),Q.EUC_JP="EUC_JP",Q.UTF8=L.UTF8.getName(),Q.PLATFORM_DEFAULT_ENCODING=Q.UTF8,Q.ASSUME_SHIFT_JIS=!1;class G{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=Q.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,o,l){for(let h=o;o<o+l;h++)this.append(r[h]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+1)}substring(r,o){return this.value.substring(r,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+o.length)}}class ft{constructor(r,o,l,h){if(this.width=r,this.height=o,this.rowSize=l,this.bits=h,o==null&&(o=r),this.height=o,r<1||o<1)throw new R("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const o=r.length,l=r[0].length,h=new ft(l,o);for(let d=0;d<o;d++){const m=r[d];for(let p=0;p<l;p++)m[p]&&h.set(p,d)}return h}static parseFromString(r,o,l){if(r===null)throw new R("stringRepresentation cannot be null");const h=new Array(r.length);let d=0,m=0,p=-1,w=0,C=0;for(;C<r.length;)if(r.charAt(C)===`
`||r.charAt(C)==="\r"){if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new R("row lengths do not match");m=d,w++}C++}else if(r.substring(C,C+o.length)===o)C+=o.length,h[d]=!0,d++;else if(r.substring(C,C+l.length)===l)C+=l.length,h[d]=!1,d++;else throw new R("illegal character encountered: "+r.substring(C));if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new R("row lengths do not match");w++}const b=new ft(p,w);for(let M=0;M<d;M++)h[M]&&b.set(Math.floor(M%p),Math.floor(M/p));return b}get(r,o){const l=o*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new R("input matrix dimensions do not match");const o=new De(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let d=0,m=this.height;d<m;d++){const p=d*l,w=r.getRow(d,o).getBitArray();for(let C=0;C<l;C++)h[p+C]^=w[C]}}clear(){const r=this.bits,o=r.length;for(let l=0;l<o;l++)r[l]=0}setRegion(r,o,l,h){if(o<0||r<0)throw new R("Left and top must be nonnegative");if(h<1||l<1)throw new R("Height and width must be at least 1");const d=r+l,m=o+h;if(m>this.height||d>this.width)throw new R("The region must fit inside the matrix");const p=this.rowSize,w=this.bits;for(let C=o;C<m;C++){const b=C*p;for(let M=r;M<d;M++)w[b+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(r,o){o==null||o.getSize()<this.width?o=new De(this.width):o.clear();const l=this.rowSize,h=this.bits,d=r*l;for(let m=0;m<l;m++)o.setBulk(m*32,h[d+m]);return o}setRow(r,o){$.arraycopy(o.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),o=this.getHeight();let l=new De(r),h=new De(r);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),h=this.getRow(o-1-d,h),l.reverse(),h.reverse(),this.setRow(d,h),this.setRow(o-1-d,l)}getEnclosingRectangle(){const r=this.width,o=this.height,l=this.rowSize,h=this.bits;let d=r,m=o,p=-1,w=-1;for(let C=0;C<o;C++)for(let b=0;b<l;b++){const M=h[C*l+b];if(M!==0){if(C<m&&(m=C),C>w&&(w=C),b*32<d){let P=0;for(;(M<<31-P&4294967295)===0;)P++;b*32+P<d&&(d=b*32+P)}if(b*32+31>p){let P=31;for(;!(M>>>P);)P--;b*32+P>p&&(p=b*32+P)}}}return p<d||w<m?null:Int32Array.from([d,m,p-d+1,w-m+1])}getTopLeftOnBit(){const r=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const h=l/r;let d=l%r*32;const m=o[l];let p=0;for(;(m<<31-p&4294967295)===0;)p++;return d+=p,Int32Array.from([d,h])}getBottomRightOnBit(){const r=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/r);let d=Math.floor(l%r)*32;const m=o[l];let p=31;for(;!(m>>>p);)p--;return d+=p,Int32Array.from([d,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof ft))return!1;const o=r;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&me.equals(this.bits,o.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+me.hashCode(this.bits),r}toString(r="X ",o="  ",l=`
`){return this.buildToString(r,o,l)}buildToString(r,o,l){let h=new G;for(let d=0,m=this.height;d<m;d++){for(let p=0,w=this.width;p<w;p++)h.append(this.get(p,d)?r:o);h.append(l)}return h.toString()}clone(){return new ft(this.width,this.height,this.rowSize,this.bits.slice())}}class ce extends A{static getNotFoundInstance(){return new ce}}ce.kind="NotFoundException";class Se extends q{constructor(r){super(r),this.luminances=Se.EMPTY,this.buckets=new Int32Array(Se.LUMINANCE_BUCKETS)}getBlackRow(r,o){const l=this.getLuminanceSource(),h=l.getWidth();o==null||o.getSize()<h?o=new De(h):o.clear(),this.initArrays(h);const d=l.getRow(r,this.luminances),m=this.buckets;for(let w=0;w<h;w++)m[(d[w]&255)>>Se.LUMINANCE_SHIFT]++;const p=Se.estimateBlackPoint(m);if(h<3)for(let w=0;w<h;w++)(d[w]&255)<p&&o.set(w);else{let w=d[0]&255,C=d[1]&255;for(let b=1;b<h-1;b++){const M=d[b+1]&255;(C*4-w-M)/2<p&&o.set(b),w=C,C=M}}return o}getBlackMatrix(){const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight(),h=new ft(o,l);this.initArrays(o);const d=this.buckets;for(let w=1;w<5;w++){const C=Math.floor(l*w/5),b=r.getRow(C,this.luminances),M=Math.floor(o*4/5);for(let P=Math.floor(o/5);P<M;P++){const z=b[P]&255;d[z>>Se.LUMINANCE_SHIFT]++}}const m=Se.estimateBlackPoint(d),p=r.getMatrix();for(let w=0;w<l;w++){const C=w*o;for(let b=0;b<o;b++)(p[C+b]&255)<m&&h.set(b,w)}return h}createBinarizer(r){return new Se(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const o=this.buckets;for(let l=0;l<Se.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(r){const o=r.length;let l=0,h=0,d=0;for(let b=0;b<o;b++)r[b]>d&&(h=b,d=r[b]),r[b]>l&&(l=r[b]);let m=0,p=0;for(let b=0;b<o;b++){const M=b-h,P=r[b]*M*M;P>p&&(m=b,p=P)}if(h>m){const b=h;h=m,m=b}if(m-h<=o/16)throw new ce;let w=m-1,C=-1;for(let b=m-1;b>h;b--){const M=b-h,P=M*M*(m-b)*(l-r[b]);P>C&&(w=b,C=P)}return w<<Se.LUMINANCE_SHIFT}}Se.LUMINANCE_BITS=5,Se.LUMINANCE_SHIFT=8-Se.LUMINANCE_BITS,Se.LUMINANCE_BUCKETS=1<<Se.LUMINANCE_BITS,Se.EMPTY=Uint8ClampedArray.from([0]);class Oe extends Se{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight();if(o>=Oe.MINIMUM_DIMENSION&&l>=Oe.MINIMUM_DIMENSION){const h=r.getMatrix();let d=o>>Oe.BLOCK_SIZE_POWER;(o&Oe.BLOCK_SIZE_MASK)!==0&&d++;let m=l>>Oe.BLOCK_SIZE_POWER;(l&Oe.BLOCK_SIZE_MASK)!==0&&m++;const p=Oe.calculateBlackPoints(h,d,m,o,l),w=new ft(o,l);Oe.calculateThresholdForBlock(h,d,m,o,l,p,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Oe(r)}static calculateThresholdForBlock(r,o,l,h,d,m,p){const w=d-Oe.BLOCK_SIZE,C=h-Oe.BLOCK_SIZE;for(let b=0;b<l;b++){let M=b<<Oe.BLOCK_SIZE_POWER;M>w&&(M=w);const P=Oe.cap(b,2,l-3);for(let z=0;z<o;z++){let W=z<<Oe.BLOCK_SIZE_POWER;W>C&&(W=C);const K=Oe.cap(z,2,o-3);let oe=0;for(let Ce=-2;Ce<=2;Ce++){const Re=m[P+Ce];oe+=Re[K-2]+Re[K-1]+Re[K]+Re[K+1]+Re[K+2]}const ge=oe/25;Oe.thresholdBlock(r,W,M,ge,h,p)}}}static cap(r,o,l){return r<o?o:r>l?l:r}static thresholdBlock(r,o,l,h,d,m){for(let p=0,w=l*d+o;p<Oe.BLOCK_SIZE;p++,w+=d)for(let C=0;C<Oe.BLOCK_SIZE;C++)(r[w+C]&255)<=h&&m.set(o+C,l+p)}static calculateBlackPoints(r,o,l,h,d){const m=d-Oe.BLOCK_SIZE,p=h-Oe.BLOCK_SIZE,w=new Array(l);for(let C=0;C<l;C++){w[C]=new Int32Array(o);let b=C<<Oe.BLOCK_SIZE_POWER;b>m&&(b=m);for(let M=0;M<o;M++){let P=M<<Oe.BLOCK_SIZE_POWER;P>p&&(P=p);let z=0,W=255,K=0;for(let ge=0,Ce=b*h+P;ge<Oe.BLOCK_SIZE;ge++,Ce+=h){for(let Re=0;Re<Oe.BLOCK_SIZE;Re++){const Te=r[Ce+Re]&255;z+=Te,Te<W&&(W=Te),Te>K&&(K=Te)}if(K-W>Oe.MIN_DYNAMIC_RANGE)for(ge++,Ce+=h;ge<Oe.BLOCK_SIZE;ge++,Ce+=h)for(let Re=0;Re<Oe.BLOCK_SIZE;Re++)z+=r[Ce+Re]&255}let oe=z>>Oe.BLOCK_SIZE_POWER*2;if(K-W<=Oe.MIN_DYNAMIC_RANGE&&(oe=W/2,C>0&&M>0)){const ge=(w[C-1][M]+2*w[C][M-1]+w[C-1][M-1])/4;W<ge&&(oe=ge)}w[C][M]=oe}}return w}}Oe.BLOCK_SIZE_POWER=3,Oe.BLOCK_SIZE=1<<Oe.BLOCK_SIZE_POWER,Oe.BLOCK_SIZE_MASK=Oe.BLOCK_SIZE-1,Oe.MINIMUM_DIMENSION=Oe.BLOCK_SIZE*5,Oe.MIN_DYNAMIC_RANGE=24;class Ye{constructor(r,o){this.width=r,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,o,l,h){throw new X("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new X("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new X("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let o=new G;for(let l=0;l<this.height;l++){const h=this.getRow(l,r);for(let d=0;d<this.width;d++){const m=h[d]&255;let p;m<64?p="#":m<128?p="+":m<192?p=".":p=" ",o.append(p)}o.append(`
`)}return o.toString()}}class Et extends Ye{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,o){const l=this.delegate.getRow(r,o),h=this.getWidth();for(let d=0;d<h;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let h=0;h<o;h++)l[h]=255-(r[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,o,l,h){return new Et(this.delegate.crop(r,o,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Et(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Et(this.delegate.rotateCounterClockwise45())}}class J extends Ye{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=J.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const o=r.getContext("2d").getImageData(0,0,r.width,r.height);return J.toGrayscaleBuffer(o.data,r.width,r.height)}static toGrayscaleBuffer(r,o,l){const h=new Uint8ClampedArray(o*l);for(let d=0,m=0,p=r.length;d<p;d+=4,m++){let w;if(r[d+3]===0)w=255;else{const b=r[d],M=r[d+1],P=r[d+2];w=306*b+601*M+117*P+512>>10}h[m]=w}return h}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth(),h=r*l;return o===null?o=this.buffer.slice(h,h+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(h,h+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,o,l,h){return super.crop(r,o,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const o=this.getTempCanvasElement(),l=o.getContext("2d"),h=r*J.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(h))*d+Math.abs(Math.sin(h))*m),w=Math.ceil(Math.abs(Math.sin(h))*d+Math.abs(Math.cos(h))*m);return o.width=p,o.height=w,l.translate(p/2,w/2),l.rotate(h),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=J.makeBufferFromCanvasImageData(o),this}invert(){return new Et(this)}}J.DEGREE_TO_RADIANS=Math.PI/180;class Ie{constructor(r,o,l){this.deviceId=r,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Fe=(globalThis||xh||self||window||void 0)&&(globalThis||xh||self||window||void 0).__awaiter||function(O,r,o,l){function h(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function p(b){try{C(l.next(b))}catch(M){m(M)}}function w(b){try{C(l.throw(b))}catch(M){m(M)}}function C(b){b.done?d(b.value):h(b.value).then(p,w)}C((l=l.apply(O,r||[])).next())})};class Ue{constructor(r,o=500,l){this.reader=r,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Fe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of r){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,p=l.groupId,w={deviceId:d,label:m,kind:h,groupId:p};o.push(w)}return o})}getVideoInputDevices(){return Fe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new Ie(o.deviceId,o.label))})}findDeviceById(r){return Fe(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,o){return Fe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,o)})}decodeOnceFromVideoDevice(r,o){return Fe(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,o)})}decodeOnceFromConstraints(r,o){return Fe(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(r,o){return Fe(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,o,l){return Fe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,o,l)})}decodeFromVideoDevice(r,o,l){return Fe(this,void 0,void 0,function*(){let h;r?h={deviceId:{exact:r}}:h={facingMode:"environment"};const d={video:h};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(r,o,l){return Fe(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(h,o,l)})}decodeFromStream(r,o,l){return Fe(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(r,o);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,o){return Fe(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((o,l)=>this.playVideoOnLoad(r,()=>o()))}playVideoOnLoad(r,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",o),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Fe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,o){const l=document.getElementById(r);if(!l)throw new I(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new I(`element with id '${r}' must be an ${o} element`);return l}decodeFromImage(r,o){if(!r&&!o)throw new I("either imageElement with a src set or an url must be provided");return o&&!r?this.decodeFromImageUrl(o):this.decodeFromImageElement(r)}decodeFromVideo(r,o){if(!r&&!o)throw new I("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,o,l){if(r===void 0&&o===void 0)throw new I("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new I("An image element must be provided.");this.reset();const o=this.prepareImageElement(r);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(r){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(r,o){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(r){if(!r)throw new I("A video element must be provided.");this.reset();const o=this.prepareVideoElement(r);return this.videoElement=o,o}decodeFromImageUrl(r){if(!r)throw new I("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=r,l}decodeFromVideoUrl(r){if(!r)throw new I("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=r,l}decodeFromVideoUrlContinuously(r,o){if(!r)throw new I("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,o);return l.src=r,h}_decodeOnLoadImage(r){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(o,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Fe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,o){return Fe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,o)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let o;return typeof r>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(o=r),o}prepareVideoElement(r){let o;return!r&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(o=r),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(r,o=!0,l=!0){this._stopAsyncDecode=!1;const h=(d,m)=>{if(this._stopAsyncDecode){m(new ce("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(r);d(p)}catch(p){const w=o&&p instanceof ce,b=(p instanceof j||p instanceof H)&&l;if(w||b)return setTimeout(h,this._timeBetweenDecodingAttempts,d,m);m(p)}};return new Promise((d,m)=>h(d,m))}decodeContinuously(r,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(r);o(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){o(null,h);const d=h instanceof j||h instanceof H,m=h instanceof ce;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const o=this.createBinaryBitmap(r);return this.decodeBitmap(o)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,o,l){o||(o={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(r,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const o=this.getCaptureCanvas(r),l=new J(o),h=new Oe(l);return new B(h)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const o=this.createCaptureCanvas(r);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,h;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,h=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,h=r.naturalHeight||r.height)),o.style.width=l+"px",o.style.height=h+"px",o.width=l,o.height=h,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,o){try{r.srcObject=o}catch{r.src=URL.createObjectURL(o)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Pe{constructor(r,o,l=o==null?0:8*o.length,h,d,m=$.currentTimeMillis()){this.text=r,this.rawBytes=o,this.numBits=l,this.resultPoints=h,this.format=d,this.timestamp=m,this.text=r,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=h,this.format=d,this.resultMetadata=null,m==null?this.timestamp=$.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,o)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const o=this.resultPoints;if(o===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(o.length+r.length);$.arraycopy(o,0,l,0,o.length),$.arraycopy(r,0,l,o.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var lt;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(lt||(lt={}));var Ne=lt,xn;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(xn||(xn={}));var et=xn;class rn{constructor(r,o,l,h,d=-1,m=-1){this.rawBytes=r,this.text=o,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Mt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new R;return this.logTable[r]}static addOrSubtract(r,o){return r^o}}class Qt{constructor(r,o){if(o.length===0)throw new R;this.field=r;const l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),$.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(r===1){l=0;for(let m=0,p=o.length;m!==p;m++){const w=o[m];l=Mt.addOrSubtract(l,w)}return l}l=o[0];const h=o.length,d=this.field;for(let m=1;m<h;m++)l=Mt.addOrSubtract(d.multiply(r,l),o[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let h=new Int32Array(l.length);const d=l.length-o.length;$.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=Mt.addOrSubtract(o[m-d],l[m]);return new Qt(this.field,h)}multiply(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,h=r.coefficients,d=h.length,m=new Int32Array(l+d-1),p=this.field;for(let w=0;w<l;w++){const C=o[w];for(let b=0;b<d;b++)m[w+b]=Mt.addOrSubtract(m[w+b],p.multiply(C,h[b]))}return new Qt(p,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const o=this.coefficients.length,l=this.field,h=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)h[m]=l.multiply(d[m],r);return new Qt(l,h)}multiplyByMonomial(r,o){if(r<0)throw new R;if(o===0)return this.field.getZero();const l=this.coefficients,h=l.length,d=new Int32Array(h+r),m=this.field;for(let p=0;p<h;p++)d[p]=m.multiply(l[p],o);return new Qt(m,d)}divide(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new R("Divide by 0");const o=this.field;let l=o.getZero(),h=this;const d=r.getCoefficient(r.getDegree()),m=o.inverse(d);for(;h.getDegree()>=r.getDegree()&&!h.isZero();){const p=h.getDegree()-r.getDegree(),w=o.multiply(h.getCoefficient(h.getDegree()),m),C=r.multiplyByMonomial(p,w),b=o.buildMonomial(p,w);l=l.addOrSubtract(b),h=h.addOrSubtract(C)}return[l,h]}toString(){let r="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),o===0||l!==1){const h=this.field.log(l);h===0?r+="1":h===1?r+="a":(r+="a^",r+=h)}o!==0&&(o===1?r+="x":(r+="x^",r+=o))}}return r}}class $r extends A{}$r.kind="ArithmeticException";class ut extends Mt{constructor(r,o,l){super(),this.primitive=r,this.size=o,this.generatorBase=l;const h=new Int32Array(o);let d=1;for(let p=0;p<o;p++)h[p]=d,d*=2,d>=o&&(d^=r,d&=o-1);this.expTable=h;const m=new Int32Array(o);for(let p=0;p<o-1;p++)m[h[p]]=p;this.logTable=m,this.zero=new Qt(this,Int32Array.from([0])),this.one=new Qt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new R;if(o===0)return this.zero;const l=new Int32Array(r+1);return l[0]=o,new Qt(this,l)}inverse(r){if(r===0)throw new $r;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ue.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}ut.AZTEC_DATA_12=new ut(4201,4096,1),ut.AZTEC_DATA_10=new ut(1033,1024,1),ut.AZTEC_DATA_6=new ut(67,64,1),ut.AZTEC_PARAM=new ut(19,16,1),ut.QR_CODE_FIELD_256=new ut(285,256,0),ut.DATA_MATRIX_FIELD_256=new ut(301,256,1),ut.AZTEC_DATA_8=ut.DATA_MATRIX_FIELD_256,ut.MAXICODE_FIELD_64=ut.AZTEC_DATA_6;class zr extends A{}zr.kind="ReedSolomonException";class ir extends A{}ir.kind="IllegalStateException";class Hr{constructor(r){this.field=r}decode(r,o){const l=this.field,h=new Qt(l,r),d=new Int32Array(o);let m=!0;for(let z=0;z<o;z++){const W=h.evaluateAt(l.exp(z+l.getGeneratorBase()));d[d.length-1-z]=W,W!==0&&(m=!1)}if(m)return;const p=new Qt(l,d),w=this.runEuclideanAlgorithm(l.buildMonomial(o,1),p,o),C=w[0],b=w[1],M=this.findErrorLocations(C),P=this.findErrorMagnitudes(b,M);for(let z=0;z<M.length;z++){const W=r.length-1-l.log(M[z]);if(W<0)throw new zr("Bad error location");r[W]=ut.addOrSubtract(r[W],P[z])}}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){const z=r;r=o,o=z}const h=this.field;let d=r,m=o,p=h.getZero(),w=h.getOne();for(;m.getDegree()>=(l/2|0);){let z=d,W=p;if(d=m,p=w,d.isZero())throw new zr("r_{i-1} was zero");m=z;let K=h.getZero();const oe=d.getCoefficient(d.getDegree()),ge=h.inverse(oe);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const Ce=m.getDegree()-d.getDegree(),Re=h.multiply(m.getCoefficient(m.getDegree()),ge);K=K.addOrSubtract(h.buildMonomial(Ce,Re)),m=m.addOrSubtract(d.multiplyByMonomial(Ce,Re))}if(w=K.multiply(p).addOrSubtract(W),m.getDegree()>=d.getDegree())throw new ir("Division algorithm failed to reduce polynomial?")}const C=w.getCoefficient(0);if(C===0)throw new zr("sigmaTilde(0) was zero");const b=h.inverse(C),M=w.multiplyScalar(b),P=m.multiplyScalar(b);return[M,P]}findErrorLocations(r){const o=r.getDegree();if(o===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(o);let h=0;const d=this.field;for(let m=1;m<d.getSize()&&h<o;m++)r.evaluateAt(m)===0&&(l[h]=d.inverse(m),h++);if(h!==o)throw new zr("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,o){const l=o.length,h=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const p=d.inverse(o[m]);let w=1;for(let C=0;C<l;C++)if(m!==C){const b=d.multiply(o[C],p),M=(b&1)===0?b|1:b&-2;w=d.multiply(w,M)}h[m]=d.multiply(r.evaluateAt(p),d.inverse(w)),d.getGeneratorBase()!==0&&(h[m]=d.multiply(h[m],p))}return h}}var bn;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(bn||(bn={}));class Vt{decode(r){this.ddata=r;let o=r.getBits(),l=this.extractBits(o),h=this.correctBits(l),d=Vt.convertBoolArrayToByteArray(h),m=Vt.getEncodedData(h),p=new rn(d,m,null,null);return p.setNumBits(h.length),p}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let o=r.length,l=bn.UPPER,h=bn.UPPER,d="",m=0;for(;m<o;)if(h===bn.BINARY){if(o-m<5)break;let p=Vt.readCode(r,m,5);if(m+=5,p===0){if(o-m<11)break;p=Vt.readCode(r,m,11)+31,m+=11}for(let w=0;w<p;w++){if(o-m<8){m=o;break}const C=Vt.readCode(r,m,8);d+=Q.castAsNonUtf8Char(C),m+=8}h=l}else{let p=h===bn.DIGIT?4:5;if(o-m<p)break;let w=Vt.readCode(r,m,p);m+=p;let C=Vt.getCharacter(h,w);C.startsWith("CTRL_")?(l=h,h=Vt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=h)):(d+=C,h=l)}return d}static getTable(r){switch(r){case"L":return bn.LOWER;case"P":return bn.PUNCT;case"M":return bn.MIXED;case"D":return bn.DIGIT;case"B":return bn.BINARY;case"U":default:return bn.UPPER}}static getCharacter(r,o){switch(r){case bn.UPPER:return Vt.UPPER_TABLE[o];case bn.LOWER:return Vt.LOWER_TABLE[o];case bn.MIXED:return Vt.MIXED_TABLE[o];case bn.PUNCT:return Vt.PUNCT_TABLE[o];case bn.DIGIT:return Vt.DIGIT_TABLE[o];default:throw new ir("Bad table")}}correctBits(r){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=ut.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=ut.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=ut.AZTEC_DATA_10):(l=12,o=ut.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),d=r.length/l;if(d<h)throw new H;let m=r.length%l,p=new Int32Array(d);for(let P=0;P<d;P++,m+=l)p[P]=Vt.readCode(r,m,l);try{new Hr(o).decode(p,d-h)}catch(P){throw new H(P)}let w=(1<<l)-1,C=0;for(let P=0;P<h;P++){let z=p[P];if(z===0||z===w)throw new H;(z===1||z===w-1)&&C++}let b=new Array(h*l-C),M=0;for(let P=0;P<h;P++){let z=p[P];if(z===1||z===w-1)b.fill(z>1,M,M+l-1),M+=l-1;else for(let W=l-1;W>=0;--W)b[M++]=(z&1<<W)!==0}return b}extractBits(r){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(o?11:14)+l*4,d=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let p=0;p<d.length;p++)d[p]=p;else{let p=h+1+2*ue.truncDivision(ue.truncDivision(h,2)-1,15),w=h/2,C=ue.truncDivision(p,2);for(let b=0;b<w;b++){let M=b+ue.truncDivision(b,15);d[w-b-1]=C-M-1,d[w+b]=C+M+1}}for(let p=0,w=0;p<l;p++){let C=(l-p)*4+(o?9:12),b=p*2,M=h-1-b;for(let P=0;P<C;P++){let z=P*2;for(let W=0;W<2;W++)m[w+z+W]=r.get(d[b+W],d[b+P]),m[w+2*C+z+W]=r.get(d[b+P],d[M-W]),m[w+4*C+z+W]=r.get(d[M-W],d[M-P]),m[w+6*C+z+W]=r.get(d[M-P],d[b+W])}w+=C*8}return m}static readCode(r,o,l){let h=0;for(let d=o;d<o+l;d++)h<<=1,r[d]&&(h|=1);return h}static readByte(r,o){let l=r.length-o;return l>=8?Vt.readCode(r,o,8):Vt.readCode(r,o,l)<<8-l}static convertBoolArrayToByteArray(r){let o=new Uint8Array((r.length+7)/8);for(let l=0;l<o.length;l++)o[l]=Vt.readByte(r,8*l);return o}totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}Vt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Vt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Vt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Vt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Vt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class pt{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,o,l,h){const d=r-l,m=o-h;return Math.sqrt(d*d+m*m)}static sum(r){let o=0;for(let l=0,h=r.length;l!==h;l++){const d=r[l];o+=d}return o}}class Ri{static floatToIntBits(r){return r}}Ri.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(r,o){this.x=r,this.y=o}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof ze){const o=r;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Ri.floatToIntBits(this.x)+Ri.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const o=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),h=this.distance(r[0],r[2]);let d,m,p;if(l>=o&&l>=h?(m=r[0],d=r[1],p=r[2]):h>=l&&h>=o?(m=r[1],d=r[0],p=r[2]):(m=r[2],d=r[0],p=r[1]),this.crossProductZ(d,m,p)<0){const w=d;d=p,p=w}r[0]=d,r[1]=m,r[2]=p}static distance(r,o){return pt.distance(r.x,r.y,o.x,o.y)}static crossProductZ(r,o,l){const h=o.x,d=o.y;return(l.x-h)*(r.y-d)-(l.y-d)*(r.x-h)}}class ma{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class pa extends ma{constructor(r,o,l,h,d){super(r,o),this.compact=l,this.nbDatablocks=h,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Tn{constructor(r,o,l,h){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),o==null&&(o=Tn.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),h==null&&(h=r.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=h-d,this.downInit=h+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ce}detect(){let r=this.leftInit,o=this.rightInit,l=this.upInit,h=this.downInit,d=!1,m=!0,p=!1,w=!1,C=!1,b=!1,M=!1;const P=this.width,z=this.height;for(;m;){m=!1;let W=!0;for(;(W||!w)&&o<P;)W=this.containsBlackPoint(l,h,o,!1),W?(o++,m=!0,w=!0):w||o++;if(o>=P){d=!0;break}let K=!0;for(;(K||!C)&&h<z;)K=this.containsBlackPoint(r,o,h,!0),K?(h++,m=!0,C=!0):C||h++;if(h>=z){d=!0;break}let oe=!0;for(;(oe||!b)&&r>=0;)oe=this.containsBlackPoint(l,h,r,!1),oe?(r--,m=!0,b=!0):b||r--;if(r<0){d=!0;break}let ge=!0;for(;(ge||!M)&&l>=0;)ge=this.containsBlackPoint(r,o,l,!0),ge?(l--,m=!0,M=!0):M||l--;if(l<0){d=!0;break}m&&(p=!0)}if(!d&&p){const W=o-r;let K=null;for(let Re=1;K===null&&Re<W;Re++)K=this.getBlackPointOnSegment(r,h-Re,r+Re,h);if(K==null)throw new ce;let oe=null;for(let Re=1;oe===null&&Re<W;Re++)oe=this.getBlackPointOnSegment(r,l+Re,r+Re,l);if(oe==null)throw new ce;let ge=null;for(let Re=1;ge===null&&Re<W;Re++)ge=this.getBlackPointOnSegment(o,l+Re,o-Re,l);if(ge==null)throw new ce;let Ce=null;for(let Re=1;Ce===null&&Re<W;Re++)Ce=this.getBlackPointOnSegment(o,h-Re,o-Re,h);if(Ce==null)throw new ce;return this.centerEdges(Ce,K,ge,oe)}else throw new ce}getBlackPointOnSegment(r,o,l,h){const d=pt.round(pt.distance(r,o,l,h)),m=(l-r)/d,p=(h-o)/d,w=this.image;for(let C=0;C<d;C++){const b=pt.round(r+C*m),M=pt.round(o+C*p);if(w.get(b,M))return new ze(b,M)}return null}centerEdges(r,o,l,h){const d=r.getX(),m=r.getY(),p=o.getX(),w=o.getY(),C=l.getX(),b=l.getY(),M=h.getX(),P=h.getY(),z=Tn.CORR;return d<this.width/2?[new ze(M-z,P+z),new ze(p+z,w+z),new ze(C-z,b-z),new ze(d+z,m-z)]:[new ze(M+z,P+z),new ze(p+z,w-z),new ze(C-z,b+z),new ze(d-z,m-z)]}containsBlackPoint(r,o,l,h){const d=this.image;if(h){for(let m=r;m<=o;m++)if(d.get(m,l))return!0}else for(let m=r;m<=o;m++)if(d.get(l,m))return!0;return!1}}Tn.INIT_SIZE=10,Tn.CORR=1;class ya{static checkAndNudgePoints(r,o){const l=r.getWidth(),h=r.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const p=Math.floor(o[m]),w=Math.floor(o[m+1]);if(p<-1||p>l||w<-1||w>h)throw new ce;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),w===-1?(o[m+1]=0,d=!0):w===h&&(o[m+1]=h-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const p=Math.floor(o[m]),w=Math.floor(o[m+1]);if(p<-1||p>l||w<-1||w>h)throw new ce;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),w===-1?(o[m+1]=0,d=!0):w===h&&(o[m+1]=h-1,d=!0)}}}class Wt{constructor(r,o,l,h,d,m,p,w,C){this.a11=r,this.a21=o,this.a31=l,this.a12=h,this.a22=d,this.a32=m,this.a13=p,this.a23=w,this.a33=C}static quadrilateralToQuadrilateral(r,o,l,h,d,m,p,w,C,b,M,P,z,W,K,oe){const ge=Wt.quadrilateralToSquare(r,o,l,h,d,m,p,w);return Wt.squareToQuadrilateral(C,b,M,P,z,W,K,oe).times(ge)}transformPoints(r){const o=r.length,l=this.a11,h=this.a12,d=this.a13,m=this.a21,p=this.a22,w=this.a23,C=this.a31,b=this.a32,M=this.a33;for(let P=0;P<o;P+=2){const z=r[P],W=r[P+1],K=d*z+w*W+M;r[P]=(l*z+m*W+C)/K,r[P+1]=(h*z+p*W+b)/K}}transformPointsWithValues(r,o){const l=this.a11,h=this.a12,d=this.a13,m=this.a21,p=this.a22,w=this.a23,C=this.a31,b=this.a32,M=this.a33,P=r.length;for(let z=0;z<P;z++){const W=r[z],K=o[z],oe=d*W+w*K+M;r[z]=(l*W+m*K+C)/oe,o[z]=(h*W+p*K+b)/oe}}static squareToQuadrilateral(r,o,l,h,d,m,p,w){const C=r-l+d-p,b=o-h+m-w;if(C===0&&b===0)return new Wt(l-r,d-l,r,h-o,m-h,o,0,0,1);{const M=l-d,P=p-d,z=h-m,W=w-m,K=M*W-P*z,oe=(C*W-P*b)/K,ge=(M*b-C*z)/K;return new Wt(l-r+oe*l,p-r+ge*p,r,h-o+oe*h,w-o+ge*w,o,oe,ge,1)}}static quadrilateralToSquare(r,o,l,h,d,m,p,w){return Wt.squareToQuadrilateral(r,o,l,h,d,m,p,w).buildAdjoint()}buildAdjoint(){return new Wt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Wt(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Hn extends ya{sampleGrid(r,o,l,h,d,m,p,w,C,b,M,P,z,W,K,oe,ge,Ce,Re){const Te=Wt.quadrilateralToQuadrilateral(h,d,m,p,w,C,b,M,P,z,W,K,oe,ge,Ce,Re);return this.sampleGridWithTransform(r,o,l,Te)}sampleGridWithTransform(r,o,l,h){if(o<=0||l<=0)throw new ce;const d=new ft(o,l),m=new Float32Array(2*o);for(let p=0;p<l;p++){const w=m.length,C=p+.5;for(let b=0;b<w;b+=2)m[b]=b/2+.5,m[b+1]=C;h.transformPoints(m),ya.checkAndNudgePoints(r,m);try{for(let b=0;b<w;b+=2)r.get(Math.floor(m[b]),Math.floor(m[b+1]))&&d.set(b/2,p)}catch{throw new ce}}return d}}class fr{static setGridSampler(r){fr.gridSampler=r}static getInstance(){return fr.gridSampler}}fr.gridSampler=new Hn;class Qn{constructor(r,o){this.x=r,this.y=o}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ea{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new pa(h,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ce;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],o),this.sampleLine(r[1],r[2],o),this.sampleLine(r[2],r[3],o),this.sampleLine(r[3],r[0],o)]);this.shift=this.getRotation(l,o);let h=0;for(let m=0;m<4;m++){let p=l[(this.shift+m)%4];this.compact?(h<<=7,h+=p>>1&127):(h<<=10,h+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,o){let l=0;r.forEach((h,d,m)=>{let p=(h>>o-2<<1)+(h&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(ue.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new ce}getCorrectedParameterData(r,o){let l,h;o?(l=7,h=2):(l=10,h=4);let d=l-h,m=new Int32Array(l);for(let w=l-1;w>=0;--w)m[w]=r&15,r>>=4;try{new Hr(ut.AZTEC_PARAM).decode(m,d)}catch{throw new ce}let p=0;for(let w=0;w<h;w++)p=(p<<4)+m[w];return p}getBullsEyeCorners(r){let o=r,l=r,h=r,d=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(o,m,1,-1),P=this.getFirstDifferent(l,m,1,1),z=this.getFirstDifferent(h,m,-1,1),W=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let K=this.distancePoint(W,M)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(K<.75||K>1.25||!this.isWhiteOrBlackRectangle(M,P,z,W))break}o=M,l=P,h=z,d=W,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ce;this.compact=this.nbCenterLayers===5;let p=new ze(o.getX()+.5,o.getY()-.5),w=new ze(l.getX()+.5,l.getY()+.5),C=new ze(h.getX()-.5,h.getY()+.5),b=new ze(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,w,C,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,o,l,h;try{let p=new Tn(this.image).detect();r=p[0],o=p[1],l=p[2],h=p[3]}catch{let w=this.image.getWidth()/2,C=this.image.getHeight()/2;r=this.getFirstDifferent(new Qn(w+7,C-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Qn(w+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Qn(w-7,C+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Qn(w-7,C-7),!1,-1,-1).toResultPoint()}let d=pt.round((r.getX()+h.getX()+o.getX()+l.getX())/4),m=pt.round((r.getY()+h.getY()+o.getY()+l.getY())/4);try{let p=new Tn(this.image,15,d,m).detect();r=p[0],o=p[1],l=p[2],h=p[3]}catch{r=this.getFirstDifferent(new Qn(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Qn(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Qn(d-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Qn(d-7,m-7),!1,-1,-1).toResultPoint()}return d=pt.round((r.getX()+h.getX()+o.getX()+l.getX())/4),m=pt.round((r.getY()+h.getY()+o.getY()+l.getY())/4),new Qn(d,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,o,l,h,d){let m=fr.getInstance(),p=this.getDimension(),w=p/2-this.nbCenterLayers,C=p/2+this.nbCenterLayers;return m.sampleGrid(r,p,p,w,w,C,w,C,C,w,C,o.getX(),o.getY(),l.getX(),l.getY(),h.getX(),h.getY(),d.getX(),d.getY())}sampleLine(r,o,l){let h=0,d=this.distanceResultPoint(r,o),m=d/l,p=r.getX(),w=r.getY(),C=m*(o.getX()-r.getX())/d,b=m*(o.getY()-r.getY())/d;for(let M=0;M<l;M++)this.image.get(pt.round(p+M*C),pt.round(w+M*b))&&(h|=1<<l-M-1);return h}isWhiteOrBlackRectangle(r,o,l,h){let d=3;r=new Qn(r.getX()-d,r.getY()+d),o=new Qn(o.getX()-d,o.getY()-d),l=new Qn(l.getX()+d,l.getY()-d),h=new Qn(h.getX()+d,h.getY()+d);let m=this.getColor(h,r);if(m===0)return!1;let p=this.getColor(r,o);return p!==m||(p=this.getColor(o,l),p!==m)?!1:(p=this.getColor(l,h),p===m)}getColor(r,o){let l=this.distancePoint(r,o),h=(o.getX()-r.getX())/l,d=(o.getY()-r.getY())/l,m=0,p=r.getX(),w=r.getY(),C=this.image.get(r.getX(),r.getY()),b=Math.ceil(l);for(let P=0;P<b;P++)p+=h,w+=d,this.image.get(pt.round(p),pt.round(w))!==C&&m++;let M=m/l;return M>.1&&M<.9?0:M<=.1===C?1:-1}getFirstDifferent(r,o,l,h){let d=r.getX()+l,m=r.getY()+h;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=h;for(d-=l,m-=h;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=h;return m-=h,new Qn(d,m)}expandSquare(r,o,l){let h=l/(2*o),d=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),p=(r[0].getX()+r[2].getX())/2,w=(r[0].getY()+r[2].getY())/2,C=new ze(p+h*d,w+h*m),b=new ze(p-h*d,w-h*m);d=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),p=(r[1].getX()+r[3].getX())/2,w=(r[1].getY()+r[3].getY())/2;let M=new ze(p+h*d,w+h*m),P=new ze(p-h*d,w-h*m);return[C,M,b,P]}isValid(r,o){return r>=0&&r<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(r){let o=pt.round(r.getX()),l=pt.round(r.getY());return this.isValid(o,l)}distancePoint(r,o){return pt.distance(r.getX(),r.getY(),o.getX(),o.getY())}distanceResultPoint(r,o){return pt.distance(r.getX(),r.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ue.truncDivision(this.nbLayers-4,8)+1)+15}}class _a{decode(r,o=null){let l=null,h=new Ea(r.getBlackMatrix()),d=null,m=null;try{let b=h.detectMirror(!1);d=b.getPoints(),this.reportFoundResultPoints(o,d),m=new Vt().decode(b)}catch(b){l=b}if(m==null)try{let b=h.detectMirror(!0);d=b.getPoints(),this.reportFoundResultPoints(o,d),m=new Vt().decode(b)}catch(b){throw l??b}let p=new Pe(m.getText(),m.getRawBytes(),m.getNumBits(),d,Ne.AZTEC,$.currentTimeMillis()),w=m.getByteSegments();w!=null&&p.putMetadata(et.BYTE_SEGMENTS,w);let C=m.getECLevel();return C!=null&&p.putMetadata(et.ERROR_CORRECTION_LEVEL,C),p}reportFoundResultPoints(r,o){if(r!=null){let l=r.get(ke.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((h,d,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class Os extends Ue{constructor(r=500){super(new _a,r)}}class Jt{decode(r,o){try{return this.doDecode(r,o)}catch{if(o&&o.get(ke.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),m=this.doDecode(d,o),p=m.getResultMetadata();let w=270;p!==null&&p.get(et.ORIENTATION)===!0&&(w=w+p.get(et.ORIENTATION)%360),m.putMetadata(et.ORIENTATION,w);const C=m.getResultPoints();if(C!==null){const b=d.getHeight();for(let M=0;M<C.length;M++)C[M]=new ze(b-C[M].getY()-1,C[M].getX())}return m}else throw new ce}}reset(){}doDecode(r,o){const l=r.getWidth(),h=r.getHeight();let d=new De(l);const m=o&&o.get(ke.TRY_HARDER)===!0,p=Math.max(1,h>>(m?8:5));let w;m?w=h:w=15;const C=Math.trunc(h/2);for(let b=0;b<w;b++){const M=Math.trunc((b+1)/2),P=(b&1)===0,z=C+p*(P?M:-M);if(z<0||z>=h)break;try{d=r.getBlackRow(z,d)}catch{continue}for(let W=0;W<2;W++){if(W===1&&(d.reverse(),o&&o.get(ke.NEED_RESULT_POINT_CALLBACK)===!0)){const K=new Map;o.forEach((oe,ge)=>K.set(ge,oe)),K.delete(ke.NEED_RESULT_POINT_CALLBACK),o=K}try{const K=this.decodeRow(z,d,o);if(W===1){K.putMetadata(et.ORIENTATION,180);const oe=K.getResultPoints();oe!==null&&(oe[0]=new ze(l-oe[0].getX()-1,oe[0].getY()),oe[1]=new ze(l-oe[1].getX()-1,oe[1].getY()))}return K}catch{}}}throw new ce}static recordPattern(r,o,l){const h=l.length;for(let C=0;C<h;C++)l[C]=0;const d=r.getSize();if(o>=d)throw new ce;let m=!r.get(o),p=0,w=o;for(;w<d;){if(r.get(w)!==m)l[p]++;else{if(++p===h)break;l[p]=1,m=!m}w++}if(!(p===h||p===h-1&&w===d))throw new ce}static recordPatternInReverse(r,o,l){let h=l.length,d=r.get(o);for(;o>0&&h>=0;)r.get(--o)!==d&&(h--,d=!d);if(h>=0)throw new ce;Jt.recordPattern(r,o+1,l)}static patternMatchVariance(r,o,l){const h=r.length;let d=0,m=0;for(let C=0;C<h;C++)d+=r[C],m+=o[C];if(d<m)return Number.POSITIVE_INFINITY;const p=d/m;l*=p;let w=0;for(let C=0;C<h;C++){const b=r[C],M=o[C]*p,P=b>M?b-M:M-b;if(P>l)return Number.POSITIVE_INFINITY;w+=P}return w/d}}class be extends Jt{static findStartPattern(r){const o=r.getSize(),l=r.getNextSet(0);let h=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,p=!1;const w=6;for(let C=l;C<o;C++)if(r.get(C)!==p)d[h]++;else{if(h===w-1){let b=be.MAX_AVG_VARIANCE,M=-1;for(let P=be.CODE_START_A;P<=be.CODE_START_C;P++){const z=Jt.patternMatchVariance(d,be.CODE_PATTERNS[P],be.MAX_INDIVIDUAL_VARIANCE);z<b&&(b=z,M=P)}if(M>=0&&r.isRange(Math.max(0,m-(C-m)/2),m,!1))return Int32Array.from([m,C,M]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[h-1]=0,d[h]=0,h--}else h++;d[h]=1,p=!p}throw new ce}static decodeCode(r,o,l){Jt.recordPattern(r,l,o);let h=be.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<be.CODE_PATTERNS.length;m++){const p=be.CODE_PATTERNS[m],w=this.patternMatchVariance(o,p,be.MAX_INDIVIDUAL_VARIANCE);w<h&&(h=w,d=m)}if(d>=0)return d;throw new ce}decodeRow(r,o,l){const h=l&&l.get(ke.ASSUME_GS1)===!0,d=be.findStartPattern(o),m=d[2];let p=0;const w=new Uint8Array(20);w[p++]=m;let C;switch(m){case be.CODE_START_A:C=be.CODE_CODE_A;break;case be.CODE_START_B:C=be.CODE_CODE_B;break;case be.CODE_START_C:C=be.CODE_CODE_C;break;default:throw new H}let b=!1,M=!1,P="",z=d[0],W=d[1];const K=Int32Array.from([0,0,0,0,0,0]);let oe=0,ge=0,Ce=m,Re=0,Te=!0,_t=!1,tt=!1;for(;!b;){const Fs=M;switch(M=!1,oe=ge,ge=be.decodeCode(o,K,W),w[p++]=ge,ge!==be.CODE_STOP&&(Te=!0),ge!==be.CODE_STOP&&(Re++,Ce+=Re*ge),z=W,W+=K.reduce((Cc,_i)=>Cc+_i,0),ge){case be.CODE_START_A:case be.CODE_START_B:case be.CODE_START_C:throw new H}switch(C){case be.CODE_CODE_A:if(ge<64)tt===_t?P+=String.fromCharCode(32+ge):P+=String.fromCharCode(32+ge+128),tt=!1;else if(ge<96)tt===_t?P+=String.fromCharCode(ge-64):P+=String.fromCharCode(ge+64),tt=!1;else switch(ge!==be.CODE_STOP&&(Te=!1),ge){case be.CODE_FNC_1:h&&(P.length===0?P+="]C1":P+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_A:!_t&&tt?(_t=!0,tt=!1):_t&&tt?(_t=!1,tt=!1):tt=!0;break;case be.CODE_SHIFT:M=!0,C=be.CODE_CODE_B;break;case be.CODE_CODE_B:C=be.CODE_CODE_B;break;case be.CODE_CODE_C:C=be.CODE_CODE_C;break;case be.CODE_STOP:b=!0;break}break;case be.CODE_CODE_B:if(ge<96)tt===_t?P+=String.fromCharCode(32+ge):P+=String.fromCharCode(32+ge+128),tt=!1;else switch(ge!==be.CODE_STOP&&(Te=!1),ge){case be.CODE_FNC_1:h&&(P.length===0?P+="]C1":P+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_B:!_t&&tt?(_t=!0,tt=!1):_t&&tt?(_t=!1,tt=!1):tt=!0;break;case be.CODE_SHIFT:M=!0,C=be.CODE_CODE_A;break;case be.CODE_CODE_A:C=be.CODE_CODE_A;break;case be.CODE_CODE_C:C=be.CODE_CODE_C;break;case be.CODE_STOP:b=!0;break}break;case be.CODE_CODE_C:if(ge<100)ge<10&&(P+="0"),P+=ge;else switch(ge!==be.CODE_STOP&&(Te=!1),ge){case be.CODE_FNC_1:h&&(P.length===0?P+="]C1":P+="");break;case be.CODE_CODE_A:C=be.CODE_CODE_A;break;case be.CODE_CODE_B:C=be.CODE_CODE_B;break;case be.CODE_STOP:b=!0;break}break}Fs&&(C=C===be.CODE_CODE_A?be.CODE_CODE_B:be.CODE_CODE_A)}const Ar=W-z;if(W=o.getNextUnset(W),!o.isRange(W,Math.min(o.getSize(),W+(W-z)/2),!1))throw new ce;if(Ce-=Re*oe,Ce%103!==oe)throw new j;const hi=P.length;if(hi===0)throw new ce;hi>0&&Te&&(C===be.CODE_CODE_C?P=P.substring(0,hi-2):P=P.substring(0,hi-1));const wr=(d[1]+d[0])/2,tn=z+Ar/2,or=w.length,Qr=new Uint8Array(or);for(let Fs=0;Fs<or;Fs++)Qr[Fs]=w[Fs];const Vs=[new ze(wr,r),new ze(tn,r)];return new Pe(P,Qr,0,Vs,Ne.CODE_128,new Date().getTime())}}be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],be.MAX_AVG_VARIANCE=.25,be.MAX_INDIVIDUAL_VARIANCE=.7,be.CODE_SHIFT=98,be.CODE_CODE_C=99,be.CODE_CODE_B=100,be.CODE_CODE_A=101,be.CODE_FNC_1=102,be.CODE_FNC_2=97,be.CODE_FNC_3=96,be.CODE_FNC_4_A=101,be.CODE_FNC_4_B=100,be.CODE_START_A=103,be.CODE_START_B=104,be.CODE_START_C=105,be.CODE_STOP=106;class gn extends Jt{constructor(r=!1,o=!1){super(),this.usingCheckDigit=r,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,o,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let d=gn.findAsteriskPattern(o,h),m=o.getNextSet(d[1]),p=o.getSize(),w,C;do{gn.recordPattern(o,m,h);let K=gn.toNarrowWidePattern(h);if(K<0)throw new ce;w=gn.patternToChar(K),this.decodeRowResult+=w,C=m;for(let oe of h)m+=oe;m=o.getNextSet(m)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let K of h)b+=K;let M=m-C-b;if(m!==p&&M*2<b)throw new ce;if(this.usingCheckDigit){let K=this.decodeRowResult.length-1,oe=0;for(let ge=0;ge<K;ge++)oe+=gn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ge));if(this.decodeRowResult.charAt(K)!==gn.ALPHABET_STRING.charAt(oe%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,K)}if(this.decodeRowResult.length===0)throw new ce;let P;this.extendedMode?P=gn.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let z=(d[1]+d[0])/2,W=C+b/2;return new Pe(P,null,0,[new ze(z,r),new ze(W,r)],Ne.CODE_39,new Date().getTime())}static findAsteriskPattern(r,o){let l=r.getSize(),h=r.getNextSet(0),d=0,m=h,p=!1,w=o.length;for(let C=h;C<l;C++)if(r.get(C)!==p)o[d]++;else{if(d===w-1){if(this.toNarrowWidePattern(o)===gn.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((C-m)/2)),m,!1))return[m,C];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,p=!p}throw new ce}static toNarrowWidePattern(r){let o=r.length,l=0,h;do{let d=2147483647;for(let w of r)w<d&&w>l&&(d=w);l=d,h=0;let m=0,p=0;for(let w=0;w<o;w++){let C=r[w];C>l&&(p|=1<<o-1-w,h++,m+=C)}if(h===3){for(let w=0;w<o&&h>0;w++){let C=r[w];if(C>l&&(h--,C*2>=m))return-1}return p}}while(h>3);return-1}static patternToChar(r){for(let o=0;o<gn.CHARACTER_ENCODINGS.length;o++)if(gn.CHARACTER_ENCODINGS[o]===r)return gn.ALPHABET_STRING.charAt(o);if(r===gn.ASTERISK_ENCODING)return"*";throw new ce}static decodeExtended(r){let o=r.length,l="";for(let h=0;h<o;h++){let d=r.charAt(h);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=r.charAt(h+1),p="\0";switch(d){case"+":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)+32);else throw new H;break;case"$":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)-64);else throw new H;break;case"%":if(m>="A"&&m<="E")p=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")p=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")p=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")p="\0";else if(m==="V")p="@";else if(m==="W")p="`";else if(m==="X"||m==="Y"||m==="Z")p="";else throw new H;break;case"/":if(m>="A"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")p=":";else throw new H;break}l+=p,h++}else l+=d}return l}}gn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",gn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],gn.ASTERISK_ENCODING=148;class wt extends Jt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,o,l){let h=this.decodeStart(o),d=this.decodeEnd(o),m=new G;wt.decodeMiddle(o,h[1],d[0],m);let p=m.toString(),w=null;l!=null&&(w=l.get(ke.ALLOWED_LENGTHS)),w==null&&(w=wt.DEFAULT_ALLOWED_LENGTHS);let C=p.length,b=!1,M=0;for(let W of w){if(C===W){b=!0;break}W>M&&(M=W)}if(!b&&C>M&&(b=!0),!b)throw new H;const P=[new ze(h[1],r),new ze(d[0],r)];return new Pe(p,null,0,P,Ne.ITF,new Date().getTime())}static decodeMiddle(r,o,l,h){let d=new Int32Array(10),m=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),m.fill(0),p.fill(0);o<l;){Jt.recordPattern(r,o,d);for(let C=0;C<5;C++){let b=2*C;m[C]=d[b],p[C]=d[b+1]}let w=wt.decodeDigit(m);h.append(w.toString()),w=this.decodeDigit(p),h.append(w.toString()),d.forEach(function(C){o+=C})}}decodeStart(r){let o=wt.skipWhiteSpace(r),l=wt.findGuardPattern(r,o,wt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let h=o-1;l>0&&h>=0&&!r.get(h);h--)l--;if(l!==0)throw new ce}static skipWhiteSpace(r){const o=r.getSize(),l=r.getNextSet(0);if(l===o)throw new ce;return l}decodeEnd(r){r.reverse();try{let o=wt.skipWhiteSpace(r),l;try{l=wt.findGuardPattern(r,o,wt.END_PATTERN_REVERSED[0])}catch(d){d instanceof ce&&(l=wt.findGuardPattern(r,o,wt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let h=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-h,l}finally{r.reverse()}}static findGuardPattern(r,o,l){let h=l.length,d=new Int32Array(h),m=r.getSize(),p=!1,w=0,C=o;d.fill(0);for(let b=o;b<m;b++)if(r.get(b)!==p)d[w]++;else{if(w===h-1){if(Jt.patternMatchVariance(d,l,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return[C,b];C+=d[0]+d[1],$.arraycopy(d,2,d,0,w-1),d[w-1]=0,d[w]=0,w--}else w++;d[w]=1,p=!p}throw new ce}static decodeDigit(r){let o=wt.MAX_AVG_VARIANCE,l=-1,h=wt.PATTERNS.length;for(let d=0;d<h;d++){let m=wt.PATTERNS[d],p=Jt.patternMatchVariance(r,m,wt.MAX_INDIVIDUAL_VARIANCE);p<o?(o=p,l=d):p===o&&(l=-1)}if(l>=0)return l%10;throw new ce}}wt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],wt.MAX_AVG_VARIANCE=.38,wt.MAX_INDIVIDUAL_VARIANCE=.5,wt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],wt.START_PATTERN=Int32Array.from([1,1,1,1]),wt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class xt extends Jt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let o=!1,l,h=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=xt.findGuardPattern(r,h,!1,this.START_END_PATTERN,d);let m=l[0];h=l[1];let p=m-(h-m);p>=0&&(o=r.isRange(p,m,!1))}return l}static checkChecksum(r){return xt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return xt.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let h=o-1;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}static decodeEnd(r,o){return xt.findGuardPattern(r,o,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,o,l,h){return this.findGuardPattern(r,o,l,h,new Int32Array(h.length))}static findGuardPattern(r,o,l,h,d){let m=r.getSize();o=l?r.getNextUnset(o):r.getNextSet(o);let p=0,w=o,C=h.length,b=l;for(let M=o;M<m;M++)if(r.get(M)!==b)d[p]++;else{if(p===C-1){if(Jt.patternMatchVariance(d,h,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return Int32Array.from([w,M]);w+=d[0]+d[1];let P=d.slice(2,d.length-1);for(let z=0;z<p-1;z++)d[z]=P[z];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,b=!b}throw new ce}static decodeDigit(r,o,l,h){this.recordPattern(r,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,p=h.length;for(let w=0;w<p;w++){let C=h[w],b=Jt.patternMatchVariance(o,C,xt.MAX_INDIVIDUAL_VARIANCE);b<d&&(d=b,m=w)}if(m>=0)return m;throw new ce}}xt.MAX_AVG_VARIANCE=.48,xt.MAX_INDIVIDUAL_VARIANCE=.7,xt.START_END_PATTERN=Int32Array.from([1,1,1]),xt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),xt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Qi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),p=Qi.parseExtensionString(m),w=[new ze((l[0]+l[1])/2,r),new ze(d,r)],C=new Pe(m,null,0,w,Ne.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&C.putAllMetadata(p),C}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let C=0;C<5&&m<d;C++){let b=xt.decodeDigit(r,h,m,xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let M of h)m+=M;b>=10&&(p|=1<<4-C),C!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new ce;let w=this.determineCheckDigit(p);if(Qi.extensionChecksum(l.toString())!==w)throw new ce;return m}static extensionChecksum(r){let o=r.length,l=0;for(let h=o-2;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;l*=3;for(let h=o-1;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let o=0;o<10;o++)if(r===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new ce}static parseExtensionString(r){if(r.length!==5)return null;let o=Qi.parseExtension5String(r);return o==null?null:new Map([[et.SUGGESTED_PRICE,o]])}static parseExtension5String(r){let o;switch(r.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(r.substring(1)),h=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+h+"."+m}}class Aa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),p=Aa.parseExtensionString(m),w=[new ze((l[0]+l[1])/2,r),new ze(d,r)],C=new Pe(m,null,0,w,Ne.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&C.putAllMetadata(p),C}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let w=0;w<2&&m<d;w++){let C=xt.decodeDigit(r,h,m,xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let b of h)m+=b;C>=10&&(p|=1<<1-w),w!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new ce;if(parseInt(l.toString())%4!==p)throw new ce;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[et.ISSUE_NUMBER,parseInt(r)]])}}class go{static decodeRow(r,o,l){let h=xt.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Qi().decodeRow(r,o,h)}catch{return new Aa().decodeRow(r,o,h)}}}go.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class dt extends xt{constructor(){super(),this.decodeRowStringBuffer="",dt.L_AND_G_PATTERNS=dt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let o=dt.L_PATTERNS[r-10],l=new Int32Array(o.length);for(let h=0;h<o.length;h++)l[h]=o[o.length-h-1];dt.L_AND_G_PATTERNS[r]=l}}decodeRow(r,o,l){let h=dt.findStartGuardPattern(o),d=l==null?null:l.get(ke.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Te=new ze((h[0]+h[1])/2,r);d.foundPossibleResultPoint(Te)}let m=this.decodeMiddle(o,h,this.decodeRowStringBuffer),p=m.rowOffset,w=m.resultString;if(d!=null){const Te=new ze(p,r);d.foundPossibleResultPoint(Te)}let C=this.decodeEnd(o,p);if(d!=null){const Te=new ze((C[0]+C[1])/2,r);d.foundPossibleResultPoint(Te)}let b=C[1],M=b+(b-C[0]);if(M>=o.getSize()||!o.isRange(b,M,!1))throw new ce;let P=w.toString();if(P.length<8)throw new H;if(!dt.checkChecksum(P))throw new j;let z=(h[1]+h[0])/2,W=(C[1]+C[0])/2,K=this.getBarcodeFormat(),oe=[new ze(z,r),new ze(W,r)],ge=new Pe(P,null,0,oe,K,new Date().getTime()),Ce=0;try{let Te=go.decodeRow(r,o,C[1]);ge.putMetadata(et.UPC_EAN_EXTENSION,Te.getText()),ge.putAllMetadata(Te.getResultMetadata()),ge.addResultPoints(Te.getResultPoints()),Ce=Te.getText().length}catch{}let Re=l==null?null:l.get(ke.ALLOWED_EAN_EXTENSIONS);if(Re!=null){let Te=!1;for(let _t in Re)if(Ce.toString()===_t){Te=!0;break}if(!Te)throw new ce}return ge}decodeEnd(r,o){return dt.findGuardPattern(r,o,!1,dt.START_END_PATTERN,new Int32Array(dt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return dt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return dt.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let h=o-1;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}}class Rr extends dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let C=0;C<6&&m<d;C++){let b=dt.decodeDigit(r,h,m,dt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let M of h)m+=M;b>=10&&(p|=1<<5-C)}l=Rr.determineFirstDigit(l,p),m=dt.findGuardPattern(r,m,!0,dt.MIDDLE_PATTERN,new Int32Array(dt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&m<d;C++){let b=dt.decodeDigit(r,h,m,dt.L_PATTERNS);l+=String.fromCharCode(48+b);for(let M of h)m+=M}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Ne.EAN_13}static determineFirstDigit(r,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new ce}}Rr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ei extends dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1];for(let w=0;w<4&&m<d;w++){let C=dt.decodeDigit(r,h,m,dt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let b of h)m+=b}m=dt.findGuardPattern(r,m,!0,dt.MIDDLE_PATTERN,new Int32Array(dt.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&m<d;w++){let C=dt.decodeDigit(r,h,m,dt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let b of h)m+=b}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Ne.EAN_8}}class jr extends dt{constructor(){super(...arguments),this.ean13Reader=new Rr}getBarcodeFormat(){return Ne.UPC_A}decode(r,o){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,o,l))}decodeMiddle(r,o,l){return this.ean13Reader.decodeMiddle(r,o,l)}maybeReturnResult(r){let o=r.getText();if(o.charAt(0)==="0"){let l=new Pe(o.substring(1),null,null,r.getResultPoints(),Ne.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new ce}reset(){this.ean13Reader.reset()}}class Kn extends dt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,o,l){const h=this.decodeMiddleCounters.map(C=>C);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const d=r.getSize();let m=o[1],p=0;for(let C=0;C<6&&m<d;C++){const b=Kn.decodeDigit(r,h,m,Kn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let M of h)m+=M;b>=10&&(p|=1<<5-C)}let w=Kn.determineNumSysAndCheckDigit(l,p);return{rowOffset:m,resultString:w}}decodeEnd(r,o){return Kn.findGuardPatternWithoutCounters(r,o,!0,Kn.MIDDLE_END_PATTERN)}checkChecksum(r){return dt.checkChecksum(Kn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,o){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return d+r+m}throw ce.getNotFoundInstance()}getBarcodeFormat(){return Ne.UPC_E}static convertUPCEtoUPCA(r){const o=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new G;l.append(r.charAt(0));let h=o[5];switch(h){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(h),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(h);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}Kn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Kn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ls extends Jt{constructor(r){super();let o=r==null?null:r.get(ke.POSSIBLE_FORMATS),l=[];a(o)?(l.push(new Rr),l.push(new jr),l.push(new ei),l.push(new Kn)):(o.indexOf(Ne.EAN_13)>-1&&l.push(new Rr),o.indexOf(Ne.UPC_A)>-1&&l.push(new jr),o.indexOf(Ne.EAN_8)>-1&&l.push(new ei),o.indexOf(Ne.UPC_E)>-1&&l.push(new Kn)),this.readers=l}decodeRow(r,o,l){for(let h of this.readers)try{const d=h.decodeRow(r,o,l),m=d.getBarcodeFormat()===Ne.EAN_13&&d.getText().charAt(0)==="0",p=l==null?null:l.get(ke.POSSIBLE_FORMATS),w=p==null||p.includes(Ne.UPC_A);if(m&&w){const C=d.getRawBytes(),b=new Pe(d.getText().substring(1),C,C?C.length:null,d.getResultPoints(),Ne.UPC_A);return b.putAllMetadata(d.getResultMetadata()),b}return d}catch{}throw new ce}reset(){for(let r of this.readers)r.reset()}}class Ln extends Jt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,o){for(let l=0;l<o.length;l++)if(Jt.patternMatchVariance(r,o[l],Ln.MAX_INDIVIDUAL_VARIANCE)<Ln.MAX_AVG_VARIANCE)return l;throw new ce}static count(r){return pt.sum(new Int32Array(r))}static increment(r,o){let l=0,h=o[0];for(let d=1;d<r.length;d++)o[d]>h&&(h=o[d],l=d);r[l]++}static decrement(r,o){let l=0,h=o[0];for(let d=1;d<r.length;d++)o[d]<h&&(h=o[d],l=d);r[l]--}static isFinderPattern(r){let o=r[0]+r[1],l=o+r[2]+r[3],h=o/l;if(h>=Ln.MIN_FINDER_PATTERN_RATIO&&h<=Ln.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let p of r)p>m&&(m=p),p<d&&(d=p);return m<10*d}return!1}}Ln.MAX_AVG_VARIANCE=.2,Ln.MAX_INDIVIDUAL_VARIANCE=.45,Ln.MIN_FINDER_PATTERN_RATIO=9.5/12,Ln.MAX_FINDER_PATTERN_RATIO=12.5/14;class Gr{constructor(r,o){this.value=r,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Gr))return!1;const o=r;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ki{constructor(r,o,l,h,d){this.value=r,this.startEnd=o,this.value=r,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new ze(l,d)),this.resultPoints.push(new ze(h,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Ki))return!1;const o=r;return this.value===o.value}hashCode(){return this.value}}class Ht{constructor(){}static getRSSvalue(r,o,l){let h=0;for(let w of r)h+=w;let d=0,m=0,p=r.length;for(let w=0;w<p-1;w++){let C;for(C=1,m|=1<<w;C<r[w];C++,m&=~(1<<w)){let b=Ht.combins(h-C-1,p-w-2);if(l&&m===0&&h-C-(p-w-1)>=p-w-1&&(b-=Ht.combins(h-C-(p-w),p-w-2)),p-w-1>1){let M=0;for(let P=h-C-(p-w-2);P>o;P--)M+=Ht.combins(h-C-P-1,p-w-3);b-=M*(p-1-w)}else h-C>o&&b--;d+=b}h-=C}return d}static combins(r,o){let l,h;r-o>o?(h=o,l=r-o):(h=r-o,l=o);let d=1,m=1;for(let p=r;p>l;p--)d*=p,m<=h&&(d/=m,m++);for(;m<=h;)d/=m,m++;return d}}class qo{static buildBitArray(r){let o=r.length*2-1;r[r.length-1].getRightChar()==null&&(o-=1);let l=12*o,h=new De(l),d=0,p=r[0].getRightChar().getValue();for(let w=11;w>=0;--w)(p&1<<w)!=0&&h.set(d),d++;for(let w=1;w<r.length;++w){let C=r[w],b=C.getLeftChar().getValue();for(let M=11;M>=0;--M)(b&1<<M)!=0&&h.set(d),d++;if(C.getRightChar()!=null){let M=C.getRightChar().getValue();for(let P=11;P>=0;--P)(M&1<<P)!=0&&h.set(d),d++}}return h}}class Nr{constructor(r,o){o?this.decodedInformation=null:(this.finished=r,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ni{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class sr extends Ni{constructor(r,o){super(r),this.value=o}getValue(){return this.value}isFNC1(){return this.value===sr.FNC1}}sr.FNC1="$";class Di extends Ni{constructor(r,o,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class jn extends Ni{constructor(r,o,l){if(super(r),o<0||o>10||l<0||l>10)throw new H;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===jn.FNC1}isSecondDigitFNC1(){return this.secondDigit===jn.FNC1}isAnyFNC1(){return this.firstDigit===jn.FNC1||this.secondDigit===jn.FNC1}}jn.FNC1=10;class Be{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ce;let o=r.substring(0,2);for(let d of Be.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(2,d[2],r):Be.processFixedAI(2,d[1],r);if(r.length<3)throw new ce;let l=r.substring(0,3);for(let d of Be.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(3,d[2],r):Be.processFixedAI(3,d[1],r);for(let d of Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,d[2],r):Be.processFixedAI(4,d[1],r);if(r.length<4)throw new ce;let h=r.substring(0,4);for(let d of Be.FOUR_DIGIT_DATA_LENGTH)if(d[0]===h)return d[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,d[2],r):Be.processFixedAI(4,d[1],r);throw new ce}static processFixedAI(r,o,l){if(l.length<r)throw new ce;let h=l.substring(0,r);if(l.length<r+o)throw new ce;let d=l.substring(r,r+o),m=l.substring(r+o),p="("+h+")"+d,w=Be.parseFieldsInGeneralPurpose(m);return w==null?p:p+w}static processVariableAI(r,o,l){let h=l.substring(0,r),d;l.length<r+o?d=l.length:d=r+o;let m=l.substring(r,d),p=l.substring(d),w="("+h+")"+m,C=Be.parseFieldsInGeneralPurpose(p);return C==null?w:w+C}}Be.VARIABLE_LENGTH=[],Be.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Be.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Be.VARIABLE_LENGTH,20],["22",Be.VARIABLE_LENGTH,29],["30",Be.VARIABLE_LENGTH,8],["37",Be.VARIABLE_LENGTH,8],["90",Be.VARIABLE_LENGTH,30],["91",Be.VARIABLE_LENGTH,30],["92",Be.VARIABLE_LENGTH,30],["93",Be.VARIABLE_LENGTH,30],["94",Be.VARIABLE_LENGTH,30],["95",Be.VARIABLE_LENGTH,30],["96",Be.VARIABLE_LENGTH,30],["97",Be.VARIABLE_LENGTH,3],["98",Be.VARIABLE_LENGTH,30],["99",Be.VARIABLE_LENGTH,30]],Be.THREE_DIGIT_DATA_LENGTH=[["240",Be.VARIABLE_LENGTH,30],["241",Be.VARIABLE_LENGTH,30],["242",Be.VARIABLE_LENGTH,6],["250",Be.VARIABLE_LENGTH,30],["251",Be.VARIABLE_LENGTH,30],["253",Be.VARIABLE_LENGTH,17],["254",Be.VARIABLE_LENGTH,20],["400",Be.VARIABLE_LENGTH,30],["401",Be.VARIABLE_LENGTH,30],["402",17],["403",Be.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Be.VARIABLE_LENGTH,20],["421",Be.VARIABLE_LENGTH,15],["422",3],["423",Be.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Be.VARIABLE_LENGTH,15],["391",Be.VARIABLE_LENGTH,18],["392",Be.VARIABLE_LENGTH,15],["393",Be.VARIABLE_LENGTH,18],["703",Be.VARIABLE_LENGTH,30]],Be.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Be.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Be.VARIABLE_LENGTH,20],["8003",Be.VARIABLE_LENGTH,30],["8004",Be.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Be.VARIABLE_LENGTH,30],["8008",Be.VARIABLE_LENGTH,12],["8018",18],["8020",Be.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Be.VARIABLE_LENGTH,70],["8200",Be.VARIABLE_LENGTH,70]];class mn{constructor(r){this.buffer=new G,this.information=r}decodeAllCodes(r,o){let l=o,h=null;do{let d=this.decodeGeneralPurposeField(l,h),m=Be.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&r.append(m),d.isRemaining()?h=""+d.getRemainingValue():h=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let o=r;o<r+3;++o)if(this.information.get(o))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new jn(this.information.getSize(),jn.FNC1,jn.FNC1):new jn(this.information.getSize(),d-1,jn.FNC1)}let o=this.extractNumericValueFromBitArray(r,7),l=(o-8)/11,h=(o-8)%11;return new jn(r+7,l,h)}extractNumericValueFromBitArray(r,o){return mn.extractNumericValueFromBitArray(this.information,r,o)}static extractNumericValueFromBitArray(r,o,l){let h=0;for(let d=0;d<l;++d)r.get(o+d)&&(h|=1<<l-d-1);return h}decodeGeneralPurposeField(r,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Di(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Di(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),r=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),r=o.isFinished()):(o=this.parseNumericBlock(),r=o.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let o;return r.isSecondDigitFNC1()?o=new Di(this.current.getPosition(),this.buffer.toString()):o=new Di(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Nr(!0,o)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let o=new Di(this.current.getPosition(),this.buffer.toString());return new Nr(!0,o)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Nr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Di(this.current.getPosition(),this.buffer.toString());return new Nr(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Nr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Di(this.current.getPosition(),this.buffer.toString());return new Nr(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Nr(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(r,8);return h>=232&&h<253}decodeIsoIec646(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new sr(r+5,sr.FNC1);if(o>=5&&o<15)return new sr(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new sr(r+7,""+(l+1));if(l>=90&&l<116)return new sr(r+7,""+(l+7));let h=this.extractNumericValueFromBitArray(r,8),d;switch(h){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new H}return new sr(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new sr(r+5,sr.FNC1);if(o>=5&&o<15)return new sr(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new sr(r+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new ir("Decoding invalid alphanumeric value: "+l)}return new sr(r+6,h)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<5&&o+r<this.information.getSize();++o)if(o===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+o))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let o=r;o<r+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<4&&o+r<this.information.getSize();++o)if(this.information.get(r+o))return!1;return!0}}class Rn{constructor(r){this.information=r,this.generalDecoder=new mn(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class vn extends Rn{constructor(r){super(r)}encodeCompressedGtin(r,o){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,o,l)}encodeCompressedGtinWithoutAI(r,o,l){for(let h=0;h<4;++h){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*h,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}vn.appendCheckDigit(r,l)}static appendCheckDigit(r,o){let l=0;for(let h=0;h<13;h++){let d=r.charAt(h+o).charCodeAt(0)-48;l+=(h&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),r.append(l)}}vn.GTIN_SIZE=40;class ti extends vn{constructor(r){super(r)}parseInformation(){let r=new G;r.append("(01)");let o=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(ti.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,ti.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(r,ti.HEADER_SIZE+44)}}ti.HEADER_SIZE=4;class Zi extends Rn{constructor(r){super(r)}parseInformation(){let r=new G;return this.getGeneralDecoder().decodeAllCodes(r,Zi.HEADER_SIZE)}}Zi.HEADER_SIZE=5;class qr extends vn{constructor(r){super(r)}encodeCompressedWeight(r,o,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(r,h);let d=this.checkWeight(h),m=1e5;for(let p=0;p<5;++p)d/m===0&&r.append("0"),m/=10;r.append(d)}}class Dr extends qr{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Dr.HEADER_SIZE+qr.GTIN_SIZE+Dr.WEIGHT_SIZE)throw new ce;let r=new G;return this.encodeCompressedGtin(r,Dr.HEADER_SIZE),this.encodeCompressedWeight(r,Dr.HEADER_SIZE+qr.GTIN_SIZE,Dr.WEIGHT_SIZE),r.toString()}}Dr.HEADER_SIZE=5,Dr.WEIGHT_SIZE=15;class us extends Dr{constructor(r){super(r)}addWeightCode(r,o){r.append("(3103)")}checkWeight(r){return r}}class Ms extends Dr{constructor(r){super(r)}addWeightCode(r,o){o<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Pn extends vn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Pn.HEADER_SIZE+vn.GTIN_SIZE)throw new ce;let r=new G;this.encodeCompressedGtin(r,Pn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Pn.HEADER_SIZE+vn.GTIN_SIZE,Pn.LAST_DIGIT_SIZE);r.append("(392"),r.append(o),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Pn.HEADER_SIZE+vn.GTIN_SIZE+Pn.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}Pn.HEADER_SIZE=8,Pn.LAST_DIGIT_SIZE=2;class pn extends vn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<pn.HEADER_SIZE+vn.GTIN_SIZE)throw new ce;let r=new G;this.encodeCompressedGtin(r,pn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+vn.GTIN_SIZE,pn.LAST_DIGIT_SIZE);r.append("(393"),r.append(o),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+vn.GTIN_SIZE+pn.LAST_DIGIT_SIZE,pn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(pn.HEADER_SIZE+vn.GTIN_SIZE+pn.LAST_DIGIT_SIZE+pn.FIRST_THREE_DIGITS_SIZE,null);return r.append(h.getNewString()),r.toString()}}pn.HEADER_SIZE=8,pn.LAST_DIGIT_SIZE=2,pn.FIRST_THREE_DIGITS_SIZE=10;class Ft extends qr{constructor(r,o,l){super(r),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Ft.HEADER_SIZE+Ft.GTIN_SIZE+Ft.WEIGHT_SIZE+Ft.DATE_SIZE)throw new ce;let r=new G;return this.encodeCompressedGtin(r,Ft.HEADER_SIZE),this.encodeCompressedWeight(r,Ft.HEADER_SIZE+Ft.GTIN_SIZE,Ft.WEIGHT_SIZE),this.encodeCompressedDate(r,Ft.HEADER_SIZE+Ft.GTIN_SIZE+Ft.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Ft.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let h=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),d/10==0&&r.append("0"),r.append(d),h/10==0&&r.append("0"),r.append(h)}addWeightCode(r,o){r.append("("),r.append(this.firstAIdigits),r.append(o/1e5),r.append(")")}checkWeight(r){return r%1e5}}Ft.HEADER_SIZE=8,Ft.WEIGHT_SIZE=20,Ft.DATE_SIZE=16;function Ji(O){try{if(O.get(1))return new ti(O);if(!O.get(2))return new Zi(O);switch(mn.extractNumericValueFromBitArray(O,1,4)){case 4:return new us(O);case 5:return new Ms(O)}switch(mn.extractNumericValueFromBitArray(O,1,5)){case 12:return new Pn(O);case 13:return new pn(O)}switch(mn.extractNumericValueFromBitArray(O,1,7)){case 56:return new Ft(O,"310","11");case 57:return new Ft(O,"320","11");case 58:return new Ft(O,"310","13");case 59:return new Ft(O,"320","13");case 60:return new Ft(O,"310","15");case 61:return new Ft(O,"320","15");case 62:return new Ft(O,"310","17");case 63:return new Ft(O,"320","17")}}catch(r){throw console.log(r),new ir("unknown decoder: "+O)}}class jt{constructor(r,o,l,h){this.leftchar=r,this.rightchar=o,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,o){return r instanceof jt?jt.equalsOrNull(r.leftchar,o.leftchar)&&jt.equalsOrNull(r.rightchar,o.rightchar)&&jt.equalsOrNull(r.finderpattern,o.finderpattern):!1}static equalsOrNull(r,o){return r===null?o===null:jt.equals(r,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ls{constructor(r,o,l){this.pairs=r,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,o){return r instanceof Ls?this.checkEqualitity(r,o)&&r.wasReversed===o.wasReversed:!1}checkEqualitity(r,o){if(!r||!o)return;let l;return r.forEach((h,d)=>{o.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class _e extends Ln{constructor(r){super(...arguments),this.pairs=new Array(_e.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,o,l){this.pairs.length=0,this.startFromEven=!1;try{return _e.constructResult(this.decodeRow2pairs(r,o))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,_e.constructResult(this.decodeRow2pairs(r,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,r))}catch(d){if(d instanceof ce){if(!this.pairs.length)throw new ce;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(r,!1),h){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new ce}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),o}checkRows(r,o){for(let l=o;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!_e.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(h);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new ce}static isValidSequence(r){for(let o of _e.FINDER_PATTERN_SEQUENCES){if(r.length>o.length)continue;let l=!0;for(let h=0;h<r.length;h++)if(r[h].getFinderPattern().getValue()!=o[h]){l=!1;break}if(l)return!0}return!1}storeRow(r,o){let l=0,h=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){d=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}d||h||_e.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Ls(this.pairs,r,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,o){for(let l of o)if(l.getPairs().length!==r.length){for(let h of l.getPairs())for(let d of r)if(jt.equals(h,d))break}}static isPartialRow(r,o){for(let l of o){let h=!0;for(let d of r){let m=!1;for(let p of l.getPairs())if(d.equals(p)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(r){let o=qo.buildBitArray(r),h=Ji(o).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],m[0],m[1]];return new Pe(h,null,null,p,Ne.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),o=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let w=this.pairs.get(p);h+=w.getLeftChar().getChecksumPortion(),d++;let C=w.getRightChar();C!=null&&(h+=C.getChecksumPortion(),d++)}return h%=211,211*(d-4)+h==o.getValue()}static getNextSecondBar(r,o){let l;return r.get(o)?(l=r.getNextUnset(o),l=r.getNextSet(l)):(l=r.getNextSet(o),l=r.getNextUnset(l)),l}retrieveNextPair(r,o,l){let h=o.length%2==0;this.startFromEven&&(h=!h);let d,m=!0,p=-1;do this.findNextPair(r,o,p),d=this.parseFoundFinderPattern(r,l,h),d==null?p=_e.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let w=this.decodeDataCharacter(r,d,h,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new ce;let C;try{C=this.decodeDataCharacter(r,d,h,!1)}catch(b){C=null,this.verbose&&console.log(b)}return new jt(w,C,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,o,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let p=o.length%2!=0;this.startFromEven&&(p=!p);let w=!1;for(;m<d&&(w=!r.get(m),!!w);)m++;let C=0,b=m;for(let M=m;M<d;M++)if(r.get(M)!=w)h[C]++;else{if(C==3){if(p&&_e.reverseCounters(h),_e.isFinderPattern(h)){this.startEnd[0]=b,this.startEnd[1]=M;return}p&&_e.reverseCounters(h),b+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,C--}else C++;h[C]=1,w=!w}throw new ce}static reverseCounters(r){let o=r.length;for(let l=0;l<o/2;++l){let h=r[l];r[l]=r[o-l-1],r[o-l-1]=h}}parseFoundFinderPattern(r,o,l){let h,d,m;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!r.get(C);)C--;C++,h=this.startEnd[0]-C,d=C,m=this.startEnd[1]}else d=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let p=this.getDecodeFinderCounters();$.arraycopy(p,0,p,1,p.length-1),p[0]=h;let w;try{w=this.parseFinderValue(p,_e.FINDER_PATTERNS)}catch{return null}return new Ki(w,[d,m],d,m,o)}decodeDataCharacter(r,o,l,h){let d=this.getDataCharacterCounters();for(let tn=0;tn<d.length;tn++)d[tn]=0;if(h)_e.recordPatternInReverse(r,o.getStartEnd()[0],d);else{_e.recordPattern(r,o.getStartEnd()[1],d);for(let tn=0,or=d.length-1;tn<or;tn++,or--){let Qr=d[tn];d[tn]=d[or],d[or]=Qr}}let m=17,p=pt.sum(new Int32Array(d))/m,w=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(p-w)/w>.3)throw new ce;let C=this.getOddCounts(),b=this.getEvenCounts(),M=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let tn=0;tn<d.length;tn++){let or=1*d[tn]/p,Qr=or+.5;if(Qr<1){if(or<.3)throw new ce;Qr=1}else if(Qr>8){if(or>8.7)throw new ce;Qr=8}let Vs=tn/2;(tn&1)==0?(C[Vs]=Qr,M[Vs]=or-Qr):(b[Vs]=Qr,P[Vs]=or-Qr)}this.adjustOddEvenCounts(m);let z=4*o.getValue()+(l?0:2)+(h?0:1)-1,W=0,K=0;for(let tn=C.length-1;tn>=0;tn--){if(_e.isNotA1left(o,l,h)){let or=_e.WEIGHTS[z][2*tn];K+=C[tn]*or}W+=C[tn]}let oe=0;for(let tn=b.length-1;tn>=0;tn--)if(_e.isNotA1left(o,l,h)){let or=_e.WEIGHTS[z][2*tn+1];oe+=b[tn]*or}let ge=K+oe;if((W&1)!=0||W>13||W<4)throw new ce;let Ce=(13-W)/2,Re=_e.SYMBOL_WIDEST[Ce],Te=9-Re,_t=Ht.getRSSvalue(C,Re,!0),tt=Ht.getRSSvalue(b,Te,!1),Ar=_e.EVEN_TOTAL_SUBSET[Ce],hi=_e.GSUM[Ce],wr=_t*Ar+tt+hi;return new Gr(wr,ge)}static isNotA1left(r,o,l){return!(r.getValue()==0&&o&&l)}adjustOddEvenCounts(r){let o=pt.sum(new Int32Array(this.getOddCounts())),l=pt.sum(new Int32Array(this.getEvenCounts())),h=!1,d=!1;o>13?d=!0:o<4&&(h=!0);let m=!1,p=!1;l>13?p=!0:l<4&&(m=!0);let w=o+l-r,C=(o&1)==1,b=(l&1)==0;if(w==1)if(C){if(b)throw new ce;d=!0}else{if(!b)throw new ce;p=!0}else if(w==-1)if(C){if(b)throw new ce;h=!0}else{if(!b)throw new ce;m=!0}else if(w==0){if(C){if(!b)throw new ce;o<l?(h=!0,p=!0):(d=!0,m=!0)}else if(b)throw new ce}else throw new ce;if(h){if(d)throw new ce;_e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&_e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(p)throw new ce;_e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&_e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}_e.SYMBOL_WIDEST=[7,5,4,3,1],_e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],_e.GSUM=[0,348,1388,2948,3988],_e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],_e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],_e.FINDER_PAT_A=0,_e.FINDER_PAT_B=1,_e.FINDER_PAT_C=2,_e.FINDER_PAT_D=3,_e.FINDER_PAT_E=4,_e.FINDER_PAT_F=5,_e.FINDER_PATTERN_SEQUENCES=[[_e.FINDER_PAT_A,_e.FINDER_PAT_A],[_e.FINDER_PAT_A,_e.FINDER_PAT_B,_e.FINDER_PAT_B],[_e.FINDER_PAT_A,_e.FINDER_PAT_C,_e.FINDER_PAT_B,_e.FINDER_PAT_D],[_e.FINDER_PAT_A,_e.FINDER_PAT_E,_e.FINDER_PAT_B,_e.FINDER_PAT_D,_e.FINDER_PAT_C],[_e.FINDER_PAT_A,_e.FINDER_PAT_E,_e.FINDER_PAT_B,_e.FINDER_PAT_D,_e.FINDER_PAT_D,_e.FINDER_PAT_F],[_e.FINDER_PAT_A,_e.FINDER_PAT_E,_e.FINDER_PAT_B,_e.FINDER_PAT_D,_e.FINDER_PAT_E,_e.FINDER_PAT_F,_e.FINDER_PAT_F],[_e.FINDER_PAT_A,_e.FINDER_PAT_A,_e.FINDER_PAT_B,_e.FINDER_PAT_B,_e.FINDER_PAT_C,_e.FINDER_PAT_C,_e.FINDER_PAT_D,_e.FINDER_PAT_D],[_e.FINDER_PAT_A,_e.FINDER_PAT_A,_e.FINDER_PAT_B,_e.FINDER_PAT_B,_e.FINDER_PAT_C,_e.FINDER_PAT_C,_e.FINDER_PAT_D,_e.FINDER_PAT_E,_e.FINDER_PAT_E],[_e.FINDER_PAT_A,_e.FINDER_PAT_A,_e.FINDER_PAT_B,_e.FINDER_PAT_B,_e.FINDER_PAT_C,_e.FINDER_PAT_C,_e.FINDER_PAT_D,_e.FINDER_PAT_E,_e.FINDER_PAT_F,_e.FINDER_PAT_F],[_e.FINDER_PAT_A,_e.FINDER_PAT_A,_e.FINDER_PAT_B,_e.FINDER_PAT_B,_e.FINDER_PAT_C,_e.FINDER_PAT_D,_e.FINDER_PAT_D,_e.FINDER_PAT_E,_e.FINDER_PAT_E,_e.FINDER_PAT_F,_e.FINDER_PAT_F]],_e.MAX_PAIRS=11;class Yr extends Gr{constructor(r,o,l){super(r,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class vt extends Ln{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,o,l){const h=this.decodePair(o,!1,r,l);vt.addOrTally(this.possibleLeftPairs,h),o.reverse();let d=this.decodePair(o,!0,r,l);vt.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&vt.checkChecksum(m,p))return vt.constructResult(m,p)}throw new ce}static addOrTally(r,o){if(o==null)return;let l=!1;for(let h of r)if(h.getValue()===o.getValue()){h.incrementCount(),l=!0;break}l||r.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,o){let l=4537077*r.getValue()+o.getValue(),h=new String(l).toString(),d=new G;for(let C=13-h.length;C>0;C--)d.append("0");d.append(h);let m=0;for(let C=0;C<13;C++){let b=d.charAt(C).charCodeAt(0)-48;m+=(C&1)===0?3*b:b}m=10-m%10,m===10&&(m=0),d.append(m.toString());let p=r.getFinderPattern().getResultPoints(),w=o.getFinderPattern().getResultPoints();return new Pe(d.toString(),null,0,[p[0],p[1],w[0],w[1]],Ne.RSS_14,new Date().getTime())}static checkChecksum(r,o){let l=(r.getChecksumPortion()+16*o.getChecksumPortion())%79,h=9*r.getFinderPattern().getValue()+o.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(r,o,l,h){try{let d=this.findFinderPattern(r,o),m=this.parseFoundFinderPattern(r,l,o,d),p=h==null?null:h.get(ke.NEED_RESULT_POINT_CALLBACK);if(p!=null){let b=(d[0]+d[1])/2;o&&(b=r.getSize()-1-b),p.foundPossibleResultPoint(new ze(b,l))}let w=this.decodeDataCharacter(r,m,!0),C=this.decodeDataCharacter(r,m,!1);return new Yr(1597*w.getValue()+C.getValue(),w.getChecksumPortion()+4*C.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,o,l){let h=this.getDataCharacterCounters();for(let oe=0;oe<h.length;oe++)h[oe]=0;if(l)Jt.recordPatternInReverse(r,o.getStartEnd()[0],h);else{Jt.recordPattern(r,o.getStartEnd()[1]+1,h);for(let oe=0,ge=h.length-1;oe<ge;oe++,ge--){let Ce=h[oe];h[oe]=h[ge],h[ge]=Ce}}let d=l?16:15,m=pt.sum(new Int32Array(h))/d,p=this.getOddCounts(),w=this.getEvenCounts(),C=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let oe=0;oe<h.length;oe++){let ge=h[oe]/m,Ce=Math.floor(ge+.5);Ce<1?Ce=1:Ce>8&&(Ce=8);let Re=Math.floor(oe/2);(oe&1)===0?(p[Re]=Ce,C[Re]=ge-Ce):(w[Re]=Ce,b[Re]=ge-Ce)}this.adjustOddEvenCounts(l,d);let M=0,P=0;for(let oe=p.length-1;oe>=0;oe--)P*=9,P+=p[oe],M+=p[oe];let z=0,W=0;for(let oe=w.length-1;oe>=0;oe--)z*=9,z+=w[oe],W+=w[oe];let K=P+3*z;if(l){if((M&1)!==0||M>12||M<4)throw new ce;let oe=(12-M)/2,ge=vt.OUTSIDE_ODD_WIDEST[oe],Ce=9-ge,Re=Ht.getRSSvalue(p,ge,!1),Te=Ht.getRSSvalue(w,Ce,!0),_t=vt.OUTSIDE_EVEN_TOTAL_SUBSET[oe],tt=vt.OUTSIDE_GSUM[oe];return new Gr(Re*_t+Te+tt,K)}else{if((W&1)!==0||W>10||W<4)throw new ce;let oe=(10-W)/2,ge=vt.INSIDE_ODD_WIDEST[oe],Ce=9-ge,Re=Ht.getRSSvalue(p,ge,!0),Te=Ht.getRSSvalue(w,Ce,!1),_t=vt.INSIDE_ODD_TOTAL_SUBSET[oe],tt=vt.INSIDE_GSUM[oe];return new Gr(Te*_t+Re+tt,K)}}findFinderPattern(r,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=r.getSize(),d=!1,m=0;for(;m<h&&(d=!r.get(m),o!==d);)m++;let p=0,w=m;for(let C=m;C<h;C++)if(r.get(C)!==d)l[p]++;else{if(p===3){if(Ln.isFinderPattern(l))return[w,C];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,d=!d}throw new ce}parseFoundFinderPattern(r,o,l,h){let d=r.get(h[0]),m=h[0]-1;for(;m>=0&&d!==r.get(m);)m--;m++;const p=h[0]-m,w=this.getDecodeFinderCounters(),C=new Int32Array(w.length);$.arraycopy(w,0,C,1,w.length-1),C[0]=p;const b=this.parseFinderValue(C,vt.FINDER_PATTERNS);let M=m,P=h[1];return l&&(M=r.getSize()-1-M,P=r.getSize()-1-P),new Ki(b,[m,h[1]],M,P,o)}adjustOddEvenCounts(r,o){let l=pt.sum(new Int32Array(this.getOddCounts())),h=pt.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,p=!1,w=!1;r?(l>12?m=!0:l<4&&(d=!0),h>12?w=!0:h<4&&(p=!0)):(l>11?m=!0:l<5&&(d=!0),h>10?w=!0:h<4&&(p=!0));let C=l+h-o,b=(l&1)===(r?1:0),M=(h&1)===1;if(C===1)if(b){if(M)throw new ce;m=!0}else{if(!M)throw new ce;w=!0}else if(C===-1)if(b){if(M)throw new ce;d=!0}else{if(!M)throw new ce;p=!0}else if(C===0){if(b){if(!M)throw new ce;l<h?(d=!0,w=!0):(m=!0,p=!0)}else if(M)throw new ce}else throw new ce;if(d){if(m)throw new ce;Ln.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Ln.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new ce;Ln.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Ln.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}vt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],vt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],vt.OUTSIDE_GSUM=[0,161,961,2015,2715],vt.INSIDE_GSUM=[0,336,1036,1516],vt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],vt.INSIDE_ODD_WIDEST=[2,4,6,8],vt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Zn extends Jt{constructor(r,o){super(),this.readers=[],this.verbose=o===!0;const l=r?r.get(ke.POSSIBLE_FORMATS):null,h=r&&r.get(ke.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ne.EAN_13)||l.includes(Ne.UPC_A)||l.includes(Ne.EAN_8)||l.includes(Ne.UPC_E))&&this.readers.push(new ls(r)),l.includes(Ne.CODE_39)&&this.readers.push(new gn(h)),l.includes(Ne.CODE_128)&&this.readers.push(new be),l.includes(Ne.ITF)&&this.readers.push(new wt),l.includes(Ne.RSS_14)&&this.readers.push(new vt),l.includes(Ne.RSS_EXPANDED)&&this.readers.push(new _e(this.verbose))):(this.readers.push(new ls(r)),this.readers.push(new gn),this.readers.push(new ls(r)),this.readers.push(new be),this.readers.push(new wt),this.readers.push(new vt),this.readers.push(new _e(this.verbose)))}decodeRow(r,o,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(r,o,l)}catch{}throw new ce}reset(){this.readers.forEach(r=>r.reset())}}class eu extends Ue{constructor(r=500,o){super(new Zn(o),r,o)}}class It{constructor(r,o,l){this.ecCodewords=r,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ct{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class yt{constructor(r,o,l,h,d,m){this.versionNumber=r,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=d,this.ecBlocks=m;let p=0;const w=m.getECCodewords(),C=m.getECBlocks();for(let b of C)p+=b.getCount()*(b.getDataCodewords()+w);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,o){if((r&1)!==0||(o&1)!==0)throw new H;for(let l of yt.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===o)return l;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new yt(1,10,10,8,8,new It(5,new Ct(1,3))),new yt(2,12,12,10,10,new It(7,new Ct(1,5))),new yt(3,14,14,12,12,new It(10,new Ct(1,8))),new yt(4,16,16,14,14,new It(12,new Ct(1,12))),new yt(5,18,18,16,16,new It(14,new Ct(1,18))),new yt(6,20,20,18,18,new It(18,new Ct(1,22))),new yt(7,22,22,20,20,new It(20,new Ct(1,30))),new yt(8,24,24,22,22,new It(24,new Ct(1,36))),new yt(9,26,26,24,24,new It(28,new Ct(1,44))),new yt(10,32,32,14,14,new It(36,new Ct(1,62))),new yt(11,36,36,16,16,new It(42,new Ct(1,86))),new yt(12,40,40,18,18,new It(48,new Ct(1,114))),new yt(13,44,44,20,20,new It(56,new Ct(1,144))),new yt(14,48,48,22,22,new It(68,new Ct(1,174))),new yt(15,52,52,24,24,new It(42,new Ct(2,102))),new yt(16,64,64,14,14,new It(56,new Ct(2,140))),new yt(17,72,72,16,16,new It(36,new Ct(4,92))),new yt(18,80,80,18,18,new It(48,new Ct(4,114))),new yt(19,88,88,20,20,new It(56,new Ct(4,144))),new yt(20,96,96,22,22,new It(68,new Ct(4,174))),new yt(21,104,104,24,24,new It(56,new Ct(6,136))),new yt(22,120,120,18,18,new It(68,new Ct(6,175))),new yt(23,132,132,20,20,new It(62,new Ct(8,163))),new yt(24,144,144,22,22,new It(62,new Ct(8,156),new Ct(2,155))),new yt(25,8,18,6,16,new It(7,new Ct(1,5))),new yt(26,8,32,6,14,new It(11,new Ct(1,10))),new yt(27,12,26,10,24,new It(14,new Ct(1,16))),new yt(28,12,36,10,16,new It(18,new Ct(1,22))),new yt(29,16,36,14,16,new It(24,new Ct(1,32))),new yt(30,16,48,14,22,new It(28,new Ct(1,49)))]}}yt.VERSIONS=yt.buildVersions();class Oi{constructor(r){const o=r.getHeight();if(o<8||o>144||(o&1)!==0)throw new H;this.version=Oi.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new ft(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const o=r.getHeight(),l=r.getWidth();return yt.getVersionForDimensions(o,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,h=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let p=!1,w=!1,C=!1,b=!1;do if(l===d&&h===0&&!p)r[o++]=this.readCorner1(d,m)&255,l-=2,h+=2,p=!0;else if(l===d-2&&h===0&&(m&3)!==0&&!w)r[o++]=this.readCorner2(d,m)&255,l-=2,h+=2,w=!0;else if(l===d+4&&h===2&&(m&7)===0&&!C)r[o++]=this.readCorner3(d,m)&255,l-=2,h+=2,C=!0;else if(l===d-2&&h===0&&(m&7)===4&&!b)r[o++]=this.readCorner4(d,m)&255,l-=2,h+=2,b=!0;else{do l<d&&h>=0&&!this.readMappingMatrix.get(h,l)&&(r[o++]=this.readUtah(l,h,d,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(r[o++]=this.readUtah(l,h,d,m)&255),l+=2,h-=2;while(l<d&&h>=0);l+=3,h+=1}while(l<d||h<m);if(o!==this.version.getTotalCodewords())throw new H;return r}readModule(r,o,l,h){return r<0&&(r+=l,o+=4-(l+4&7)),o<0&&(o+=h,r+=4-(h+4&7)),this.readMappingMatrix.set(o,r),this.mappingBitMatrix.get(o,r)}readUtah(r,o,l,h){let d=0;return this.readModule(r-2,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r-2,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o,l,h)&&(d|=1),d<<=1,this.readModule(r,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r,o,l,h)&&(d|=1),d}readCorner1(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,1,r,o)&&(l|=1),l<<=1,this.readModule(r-1,2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}readCorner2(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-4,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner3(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-3,r,o)&&(l|=1),l<<=1,this.readModule(1,o-2,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner4(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}extractDataRegion(r){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==o)throw new R("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/h|0,p=l/d|0,w=m*h,C=p*d,b=new ft(C,w);for(let M=0;M<m;++M){const P=M*h;for(let z=0;z<p;++z){const W=z*d;for(let K=0;K<h;++K){const oe=M*(h+2)+1+K,ge=P+K;for(let Ce=0;Ce<d;++Ce){const Re=z*(d+2)+1+Ce;if(r.get(Re,oe)){const Te=W+Ce;b.set(Te,ge)}}}}}return b}}class Mi{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o){const l=o.getECBlocks();let h=0;const d=l.getECBlocks();for(let K of d)h+=K.getCount();const m=new Array(h);let p=0;for(let K of d)for(let oe=0;oe<K.getCount();oe++){const ge=K.getDataCodewords(),Ce=l.getECCodewords()+ge;m[p++]=new Mi(ge,new Uint8Array(Ce))}const C=m[0].codewords.length-l.getECCodewords(),b=C-1;let M=0;for(let K=0;K<b;K++)for(let oe=0;oe<p;oe++)m[oe].codewords[K]=r[M++];const P=o.getVersionNumber()===24,z=P?8:p;for(let K=0;K<z;K++)m[K].codewords[C-1]=r[M++];const W=m[0].codewords.length;for(let K=C;K<W;K++)for(let oe=0;oe<p;oe++){const ge=P?(oe+8)%p:oe,Ce=P&&ge>7?K-1:K;m[ge].codewords[Ce]=r[M++]}if(M!==r.length)throw new R;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Or{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new R(""+r);let o=0,l=this.bitOffset,h=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,p=r<m?r:m,w=m-p,C=255>>8-p<<w;o=(d[h]&C)>>w,r-=p,l+=p,l===8&&(l=0,h++)}if(r>0){for(;r>=8;)o=o<<8|d[h]&255,h++,r-=8;if(r>0){const m=8-r,p=255>>m<<m;o=o<<r|(d[h]&p)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=h,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Lt;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(Lt||(Lt={}));class mi{static decode(r){const o=new Or(r),l=new G,h=new G,d=new Array;let m=Lt.ASCII_ENCODE;do if(m===Lt.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,h);else{switch(m){case Lt.C40_ENCODE:this.decodeC40Segment(o,l);break;case Lt.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Lt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Lt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Lt.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new H}m=Lt.ASCII_ENCODE}while(m!==Lt.PAD_ENCODE&&o.available()>0);return h.length()>0&&l.append(h.toString()),new rn(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,o,l){let h=!1;do{let d=r.readBits(8);if(d===0)throw new H;if(d<=128)return h&&(d+=128),o.append(String.fromCharCode(d-1)),Lt.ASCII_ENCODE;if(d===129)return Lt.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return Lt.C40_ENCODE;case 231:return Lt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Lt.ANSIX12_ENCODE;case 239:return Lt.TEXT_ENCODE;case 240:return Lt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new H;break}}while(r.available()>0);return Lt.ASCII_ENCODE}static decodeC40Segment(r,o){let l=!1;const h=[];let d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let p=0;p<3;p++){const w=h[p];switch(d){case 0:if(w<3)d=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[w];l?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):o.append(C)}else throw new H;break;case 1:l?(o.append(String.fromCharCode(w+128)),l=!1):o.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[w];l?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):o.append(C)}else switch(w){case 27:o.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:l?(o.append(String.fromCharCode(w+224)),l=!1):o.append(String.fromCharCode(w+96)),d=0;break;default:throw new H}}}while(r.available()>0)}static decodeTextSegment(r,o){let l=!1,h=[],d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let p=0;p<3;p++){const w=h[p];switch(d){case 0:if(w<3)d=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[w];l?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):o.append(C)}else throw new H;break;case 1:l?(o.append(String.fromCharCode(w+128)),l=!1):o.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[w];l?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):o.append(C)}else switch(w){case 27:o.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[w];l?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):o.append(C),d=0}else throw new H;break;default:throw new H}}}while(r.available()>0)}static decodeAnsiX12Segment(r,o){const l=[];do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new H;break}}}while(r.available()>0)}static parseTwoBytes(r,o,l){let h=(r<<8)+o-1,d=Math.floor(h/1600);l[0]=d,h-=d*1600,d=Math.floor(h/40),l[1]=d,l[2]=h-d*40}static decodeEdifactSegment(r,o){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let h=r.readBits(6);if(h===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}(h&32)===0&&(h|=64),o.append(String.fromCharCode(h))}}while(r.available()>0)}static decodeBase256Segment(r,o,l){let h=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),h++);let m;if(d===0?m=r.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(r.readBits(8),h++),m<0)throw new H;const p=new Uint8Array(m);for(let w=0;w<m;w++){if(r.available()<8)throw new H;p[w]=this.unrandomize255State(r.readBits(8),h++)}l.push(p);try{o.append(Z.decode(p,Q.ISO88591))}catch(w){throw new ir("Platform does not support required encoding: "+w.message)}}static unrandomize255State(r,o){const l=149*o%255+1,h=r-l;return h>=0?h:h+256}}mi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],mi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],mi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],mi.TEXT_SHIFT2_SET_CHARS=mi.C40_SHIFT2_SET_CHARS,mi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class tu{constructor(){this.rsDecoder=new Hr(ut.DATA_MATRIX_FIELD_256)}decode(r){const o=new Oi(r),l=o.getVersion(),h=o.readCodewords(),d=Mi.getDataBlocks(h,l);let m=0;for(let C of d)m+=C.getNumDataCodewords();const p=new Uint8Array(m),w=d.length;for(let C=0;C<w;C++){const b=d[C],M=b.getCodewords(),P=b.getNumDataCodewords();this.correctErrors(M,P);for(let z=0;z<P;z++)p[z*w+C]=M[z]}return mi.decode(p)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new j}for(let h=0;h<o;h++)r[h]=l[h]}}class $t{constructor(r){this.image=r,this.rectangleDetector=new Tn(this.image)}detect(){const r=this.rectangleDetector.detect();let o=this.detectSolid1(r);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new ce;o=this.shiftToModuleCenter(o);const l=o[0],h=o[1],d=o[2],m=o[3];let p=this.transitionsBetween(l,m)+1,w=this.transitionsBetween(d,m)+1;(p&1)===1&&(p+=1),(w&1)===1&&(w+=1),4*p<7*w&&4*w<7*p&&(p=w=Math.max(p,w));let C=$t.sampleGrid(this.image,l,h,d,m,p,w);return new ma(C,[l,h,d,m])}static shiftPoint(r,o,l){let h=(o.getX()-r.getX())/(l+1),d=(o.getY()-r.getY())/(l+1);return new ze(r.getX()+h,r.getY()+d)}static moveAway(r,o,l){let h=r.getX(),d=r.getY();return h<o?h-=1:h+=1,d<l?d-=1:d+=1,new ze(h,d)}detectSolid1(r){let o=r[0],l=r[1],h=r[3],d=r[2],m=this.transitionsBetween(o,l),p=this.transitionsBetween(l,h),w=this.transitionsBetween(h,d),C=this.transitionsBetween(d,o),b=m,M=[d,o,l,h];return b>p&&(b=p,M[0]=o,M[1]=l,M[2]=h,M[3]=d),b>w&&(b=w,M[0]=l,M[1]=h,M[2]=d,M[3]=o),b>C&&(M[0]=h,M[1]=d,M[2]=o,M[3]=l),M}detectSolid2(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d),p=$t.shiftPoint(l,h,(m+1)*4),w=$t.shiftPoint(h,l,(m+1)*4),C=this.transitionsBetween(p,o),b=this.transitionsBetween(w,d);return C<b?(r[0]=o,r[1]=l,r[2]=h,r[3]=d):(r[0]=l,r[1]=h,r[2]=d,r[3]=o),r}correctTopRight(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d),p=this.transitionsBetween(l,d),w=$t.shiftPoint(o,l,(p+1)*4),C=$t.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(w,d),p=this.transitionsBetween(C,d);let b=new ze(d.getX()+(h.getX()-l.getX())/(m+1),d.getY()+(h.getY()-l.getY())/(m+1)),M=new ze(d.getX()+(o.getX()-l.getX())/(p+1),d.getY()+(o.getY()-l.getY())/(p+1));if(!this.isValid(b))return this.isValid(M)?M:null;if(!this.isValid(M))return b;let P=this.transitionsBetween(w,b)+this.transitionsBetween(C,b),z=this.transitionsBetween(w,M)+this.transitionsBetween(C,M);return P>z?b:M}shiftToModuleCenter(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d)+1,p=this.transitionsBetween(h,d)+1,w=$t.shiftPoint(o,l,p*4),C=$t.shiftPoint(h,l,m*4);m=this.transitionsBetween(w,d)+1,p=this.transitionsBetween(C,d)+1,(m&1)===1&&(m+=1),(p&1)===1&&(p+=1);let b=(o.getX()+l.getX()+h.getX()+d.getX())/4,M=(o.getY()+l.getY()+h.getY()+d.getY())/4;o=$t.moveAway(o,b,M),l=$t.moveAway(l,b,M),h=$t.moveAway(h,b,M),d=$t.moveAway(d,b,M);let P,z;return w=$t.shiftPoint(o,l,p*4),w=$t.shiftPoint(w,d,m*4),P=$t.shiftPoint(l,o,p*4),P=$t.shiftPoint(P,h,m*4),C=$t.shiftPoint(h,d,p*4),C=$t.shiftPoint(C,l,m*4),z=$t.shiftPoint(d,h,p*4),z=$t.shiftPoint(z,o,m*4),[w,P,C,z]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,o,l,h,d,m,p){return fr.getInstance().sampleGrid(r,m,p,.5,.5,m-.5,.5,m-.5,p-.5,.5,p-.5,o.getX(),o.getY(),d.getX(),d.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(r,o){let l=Math.trunc(r.getX()),h=Math.trunc(r.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),p=Math.abs(m-h)>Math.abs(d-l);if(p){let K=l;l=h,h=K,K=d,d=m,m=K}let w=Math.abs(d-l),C=Math.abs(m-h),b=-w/2,M=h<m?1:-1,P=l<d?1:-1,z=0,W=this.image.get(p?h:l,p?l:h);for(let K=l,oe=h;K!==d;K+=P){let ge=this.image.get(p?oe:K,p?K:oe);if(ge!==W&&(z++,W=ge),b+=C,b>0){if(oe===m)break;oe+=M,b-=w}}return z}}class ni{constructor(){this.decoder=new tu}decode(r,o=null){let l,h;if(o!=null&&o.has(ke.PURE_BARCODE)){const C=ni.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(C),h=ni.NO_POINTS}else{const C=new $t(r.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),h=C.getPoints()}const d=l.getRawBytes(),m=new Pe(l.getText(),d,8*d.length,h,Ne.DATA_MATRIX,$.currentTimeMillis()),p=l.getByteSegments();p!=null&&m.putMetadata(et.BYTE_SEGMENTS,p);const w=l.getECLevel();return w!=null&&m.putMetadata(et.ERROR_CORRECTION_LEVEL,w),m}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o==null||l==null)throw new ce;const h=this.moduleSize(o,r);let d=o[1];const m=l[1];let p=o[0];const C=(l[0]-p+1)/h,b=(m-d+1)/h;if(C<=0||b<=0)throw new ce;const M=h/2;d+=M,p+=M;const P=new ft(C,b);for(let z=0;z<b;z++){const W=d+z*h;for(let K=0;K<C;K++)r.get(p+K*h,W)&&P.set(K,z)}return P}static moduleSize(r,o){const l=o.getWidth();let h=r[0];const d=r[1];for(;h<l&&o.get(h,d);)h++;if(h===l)throw new ce;const m=h-r[0];if(m===0)throw new ce;return m}}ni.NO_POINTS=[];class wa extends Ue{constructor(r=500){super(new ni,r)}}var Mr;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(Mr||(Mr={}));class rt{constructor(r,o,l){this.value=r,this.stringValue=o,this.bits=l,rt.FOR_BITS.set(l,this),rt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return rt.L;case"M":return rt.M;case"Q":return rt.Q;case"H":return rt.H;default:throw new I(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof rt))return!1;const o=r;return this.value===o.value}static forBits(r){if(r<0||r>=rt.FOR_BITS.size)throw new R;return rt.FOR_BITS.get(r)}}rt.FOR_BITS=new Map,rt.FOR_VALUE=new Map,rt.L=new rt(Mr.L,"L",1),rt.M=new rt(Mr.M,"M",0),rt.Q=new rt(Mr.Q,"Q",3),rt.H=new rt(Mr.H,"H",2);class yn{constructor(r){this.errorCorrectionLevel=rt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,o){return ue.bitCount(r^o)}static decodeFormatInformation(r,o){const l=yn.doDecodeFormatInformation(r,o);return l!==null?l:yn.doDecodeFormatInformation(r^yn.FORMAT_INFO_MASK_QR,o^yn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,o){let l=Number.MAX_SAFE_INTEGER,h=0;for(const d of yn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===r||m===o)return new yn(d[1]);let p=yn.numBitsDiffering(r,m);p<l&&(h=d[1],l=p),r!==o&&(p=yn.numBitsDiffering(o,m),p<l&&(h=d[1],l=p))}return l<=3?new yn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof yn))return!1;const o=r;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}yn.FORMAT_INFO_MASK_QR=21522,yn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ae{constructor(r,...o){this.ecCodewordsPerBlock=r,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const o=this.ecBlocks;for(const l of o)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class V{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Me{constructor(r,o,...l){this.versionNumber=r,this.alignmentPatternCenters=o,this.ecBlocks=l;let h=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const p of m)h+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new H;try{return this.getVersionForNumber((r-17)/4)}catch{throw new H}}static getVersionForNumber(r){if(r<1||r>40)throw new R;return Me.VERSIONS[r-1]}static decodeVersionInformation(r){let o=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<Me.VERSION_DECODE_INFO.length;h++){const d=Me.VERSION_DECODE_INFO[h];if(d===r)return Me.getVersionForNumber(h+7);const m=yn.numBitsDiffering(r,d);m<o&&(l=h+7,o=m)}return o<=3?Me.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),o=new ft(r);o.setRegion(0,0,9,9),o.setRegion(r-8,0,8,9),o.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const d=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,r-17),o.setRegion(9,6,r-17,1),this.versionNumber>6&&(o.setRegion(r-11,0,3,6),o.setRegion(0,r-11,6,3)),o}toString(){return""+this.versionNumber}}Me.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Me.VERSIONS=[new Me(1,new Int32Array(0),new ae(7,new V(1,19)),new ae(10,new V(1,16)),new ae(13,new V(1,13)),new ae(17,new V(1,9))),new Me(2,Int32Array.from([6,18]),new ae(10,new V(1,34)),new ae(16,new V(1,28)),new ae(22,new V(1,22)),new ae(28,new V(1,16))),new Me(3,Int32Array.from([6,22]),new ae(15,new V(1,55)),new ae(26,new V(1,44)),new ae(18,new V(2,17)),new ae(22,new V(2,13))),new Me(4,Int32Array.from([6,26]),new ae(20,new V(1,80)),new ae(18,new V(2,32)),new ae(26,new V(2,24)),new ae(16,new V(4,9))),new Me(5,Int32Array.from([6,30]),new ae(26,new V(1,108)),new ae(24,new V(2,43)),new ae(18,new V(2,15),new V(2,16)),new ae(22,new V(2,11),new V(2,12))),new Me(6,Int32Array.from([6,34]),new ae(18,new V(2,68)),new ae(16,new V(4,27)),new ae(24,new V(4,19)),new ae(28,new V(4,15))),new Me(7,Int32Array.from([6,22,38]),new ae(20,new V(2,78)),new ae(18,new V(4,31)),new ae(18,new V(2,14),new V(4,15)),new ae(26,new V(4,13),new V(1,14))),new Me(8,Int32Array.from([6,24,42]),new ae(24,new V(2,97)),new ae(22,new V(2,38),new V(2,39)),new ae(22,new V(4,18),new V(2,19)),new ae(26,new V(4,14),new V(2,15))),new Me(9,Int32Array.from([6,26,46]),new ae(30,new V(2,116)),new ae(22,new V(3,36),new V(2,37)),new ae(20,new V(4,16),new V(4,17)),new ae(24,new V(4,12),new V(4,13))),new Me(10,Int32Array.from([6,28,50]),new ae(18,new V(2,68),new V(2,69)),new ae(26,new V(4,43),new V(1,44)),new ae(24,new V(6,19),new V(2,20)),new ae(28,new V(6,15),new V(2,16))),new Me(11,Int32Array.from([6,30,54]),new ae(20,new V(4,81)),new ae(30,new V(1,50),new V(4,51)),new ae(28,new V(4,22),new V(4,23)),new ae(24,new V(3,12),new V(8,13))),new Me(12,Int32Array.from([6,32,58]),new ae(24,new V(2,92),new V(2,93)),new ae(22,new V(6,36),new V(2,37)),new ae(26,new V(4,20),new V(6,21)),new ae(28,new V(7,14),new V(4,15))),new Me(13,Int32Array.from([6,34,62]),new ae(26,new V(4,107)),new ae(22,new V(8,37),new V(1,38)),new ae(24,new V(8,20),new V(4,21)),new ae(22,new V(12,11),new V(4,12))),new Me(14,Int32Array.from([6,26,46,66]),new ae(30,new V(3,115),new V(1,116)),new ae(24,new V(4,40),new V(5,41)),new ae(20,new V(11,16),new V(5,17)),new ae(24,new V(11,12),new V(5,13))),new Me(15,Int32Array.from([6,26,48,70]),new ae(22,new V(5,87),new V(1,88)),new ae(24,new V(5,41),new V(5,42)),new ae(30,new V(5,24),new V(7,25)),new ae(24,new V(11,12),new V(7,13))),new Me(16,Int32Array.from([6,26,50,74]),new ae(24,new V(5,98),new V(1,99)),new ae(28,new V(7,45),new V(3,46)),new ae(24,new V(15,19),new V(2,20)),new ae(30,new V(3,15),new V(13,16))),new Me(17,Int32Array.from([6,30,54,78]),new ae(28,new V(1,107),new V(5,108)),new ae(28,new V(10,46),new V(1,47)),new ae(28,new V(1,22),new V(15,23)),new ae(28,new V(2,14),new V(17,15))),new Me(18,Int32Array.from([6,30,56,82]),new ae(30,new V(5,120),new V(1,121)),new ae(26,new V(9,43),new V(4,44)),new ae(28,new V(17,22),new V(1,23)),new ae(28,new V(2,14),new V(19,15))),new Me(19,Int32Array.from([6,30,58,86]),new ae(28,new V(3,113),new V(4,114)),new ae(26,new V(3,44),new V(11,45)),new ae(26,new V(17,21),new V(4,22)),new ae(26,new V(9,13),new V(16,14))),new Me(20,Int32Array.from([6,34,62,90]),new ae(28,new V(3,107),new V(5,108)),new ae(26,new V(3,41),new V(13,42)),new ae(30,new V(15,24),new V(5,25)),new ae(28,new V(15,15),new V(10,16))),new Me(21,Int32Array.from([6,28,50,72,94]),new ae(28,new V(4,116),new V(4,117)),new ae(26,new V(17,42)),new ae(28,new V(17,22),new V(6,23)),new ae(30,new V(19,16),new V(6,17))),new Me(22,Int32Array.from([6,26,50,74,98]),new ae(28,new V(2,111),new V(7,112)),new ae(28,new V(17,46)),new ae(30,new V(7,24),new V(16,25)),new ae(24,new V(34,13))),new Me(23,Int32Array.from([6,30,54,78,102]),new ae(30,new V(4,121),new V(5,122)),new ae(28,new V(4,47),new V(14,48)),new ae(30,new V(11,24),new V(14,25)),new ae(30,new V(16,15),new V(14,16))),new Me(24,Int32Array.from([6,28,54,80,106]),new ae(30,new V(6,117),new V(4,118)),new ae(28,new V(6,45),new V(14,46)),new ae(30,new V(11,24),new V(16,25)),new ae(30,new V(30,16),new V(2,17))),new Me(25,Int32Array.from([6,32,58,84,110]),new ae(26,new V(8,106),new V(4,107)),new ae(28,new V(8,47),new V(13,48)),new ae(30,new V(7,24),new V(22,25)),new ae(30,new V(22,15),new V(13,16))),new Me(26,Int32Array.from([6,30,58,86,114]),new ae(28,new V(10,114),new V(2,115)),new ae(28,new V(19,46),new V(4,47)),new ae(28,new V(28,22),new V(6,23)),new ae(30,new V(33,16),new V(4,17))),new Me(27,Int32Array.from([6,34,62,90,118]),new ae(30,new V(8,122),new V(4,123)),new ae(28,new V(22,45),new V(3,46)),new ae(30,new V(8,23),new V(26,24)),new ae(30,new V(12,15),new V(28,16))),new Me(28,Int32Array.from([6,26,50,74,98,122]),new ae(30,new V(3,117),new V(10,118)),new ae(28,new V(3,45),new V(23,46)),new ae(30,new V(4,24),new V(31,25)),new ae(30,new V(11,15),new V(31,16))),new Me(29,Int32Array.from([6,30,54,78,102,126]),new ae(30,new V(7,116),new V(7,117)),new ae(28,new V(21,45),new V(7,46)),new ae(30,new V(1,23),new V(37,24)),new ae(30,new V(19,15),new V(26,16))),new Me(30,Int32Array.from([6,26,52,78,104,130]),new ae(30,new V(5,115),new V(10,116)),new ae(28,new V(19,47),new V(10,48)),new ae(30,new V(15,24),new V(25,25)),new ae(30,new V(23,15),new V(25,16))),new Me(31,Int32Array.from([6,30,56,82,108,134]),new ae(30,new V(13,115),new V(3,116)),new ae(28,new V(2,46),new V(29,47)),new ae(30,new V(42,24),new V(1,25)),new ae(30,new V(23,15),new V(28,16))),new Me(32,Int32Array.from([6,34,60,86,112,138]),new ae(30,new V(17,115)),new ae(28,new V(10,46),new V(23,47)),new ae(30,new V(10,24),new V(35,25)),new ae(30,new V(19,15),new V(35,16))),new Me(33,Int32Array.from([6,30,58,86,114,142]),new ae(30,new V(17,115),new V(1,116)),new ae(28,new V(14,46),new V(21,47)),new ae(30,new V(29,24),new V(19,25)),new ae(30,new V(11,15),new V(46,16))),new Me(34,Int32Array.from([6,34,62,90,118,146]),new ae(30,new V(13,115),new V(6,116)),new ae(28,new V(14,46),new V(23,47)),new ae(30,new V(44,24),new V(7,25)),new ae(30,new V(59,16),new V(1,17))),new Me(35,Int32Array.from([6,30,54,78,102,126,150]),new ae(30,new V(12,121),new V(7,122)),new ae(28,new V(12,47),new V(26,48)),new ae(30,new V(39,24),new V(14,25)),new ae(30,new V(22,15),new V(41,16))),new Me(36,Int32Array.from([6,24,50,76,102,128,154]),new ae(30,new V(6,121),new V(14,122)),new ae(28,new V(6,47),new V(34,48)),new ae(30,new V(46,24),new V(10,25)),new ae(30,new V(2,15),new V(64,16))),new Me(37,Int32Array.from([6,28,54,80,106,132,158]),new ae(30,new V(17,122),new V(4,123)),new ae(28,new V(29,46),new V(14,47)),new ae(30,new V(49,24),new V(10,25)),new ae(30,new V(24,15),new V(46,16))),new Me(38,Int32Array.from([6,32,58,84,110,136,162]),new ae(30,new V(4,122),new V(18,123)),new ae(28,new V(13,46),new V(32,47)),new ae(30,new V(48,24),new V(14,25)),new ae(30,new V(42,15),new V(32,16))),new Me(39,Int32Array.from([6,26,54,82,110,138,166]),new ae(30,new V(20,117),new V(4,118)),new ae(28,new V(40,47),new V(7,48)),new ae(30,new V(43,24),new V(22,25)),new ae(30,new V(10,15),new V(67,16))),new Me(40,Int32Array.from([6,30,58,86,114,142,170]),new ae(30,new V(19,118),new V(6,119)),new ae(28,new V(18,47),new V(31,48)),new ae(30,new V(34,24),new V(34,25)),new ae(30,new V(20,15),new V(61,16)))];var hn;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(hn||(hn={}));class Gn{constructor(r,o){this.value=r,this.isMasked=o}unmaskBitMatrix(r,o){for(let l=0;l<o;l++)for(let h=0;h<o;h++)this.isMasked(l,h)&&r.flip(h,l)}}Gn.values=new Map([[hn.DATA_MASK_000,new Gn(hn.DATA_MASK_000,(O,r)=>(O+r&1)===0)],[hn.DATA_MASK_001,new Gn(hn.DATA_MASK_001,(O,r)=>(O&1)===0)],[hn.DATA_MASK_010,new Gn(hn.DATA_MASK_010,(O,r)=>r%3===0)],[hn.DATA_MASK_011,new Gn(hn.DATA_MASK_011,(O,r)=>(O+r)%3===0)],[hn.DATA_MASK_100,new Gn(hn.DATA_MASK_100,(O,r)=>(Math.floor(O/2)+Math.floor(r/3)&1)===0)],[hn.DATA_MASK_101,new Gn(hn.DATA_MASK_101,(O,r)=>O*r%6===0)],[hn.DATA_MASK_110,new Gn(hn.DATA_MASK_110,(O,r)=>O*r%6<3)],[hn.DATA_MASK_111,new Gn(hn.DATA_MASK_111,(O,r)=>(O+r+O*r%3&1)===0)]]);class ri{constructor(r){const o=r.getHeight();if(o<21||(o&3)!==1)throw new H;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const o=this.bitMatrix.getHeight();let l=0;const h=o-7;for(let d=o-1;d>=h;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=yn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),o=Math.floor((r-17)/4);if(o<=6)return Me.getVersionForNumber(o);let l=0;const h=r-11;for(let m=5;m>=0;m--)for(let p=r-9;p>=h;p--)l=this.copyBit(p,m,l);let d=Me.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let p=r-9;p>=h;p--)l=this.copyBit(m,p,l);if(d=Me.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new H}copyBit(r,o,l){return(this.isMirror?this.bitMatrix.get(o,r):this.bitMatrix.get(r,o))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),o=this.readVersion(),l=Gn.values.get(r.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const d=o.buildFunctionPattern();let m=!0;const p=new Uint8Array(o.getTotalCodewords());let w=0,C=0,b=0;for(let M=h-1;M>0;M-=2){M===6&&M--;for(let P=0;P<h;P++){const z=m?h-1-P:P;for(let W=0;W<2;W++)d.get(M-W,z)||(b++,C<<=1,this.bitMatrix.get(M-W,z)&&(C|=1),b===8&&(p[w++]=C,b=0,C=0))}m=!m}if(w!==o.getTotalCodewords())throw new H;return p}remask(){if(this.parsedFormatInfo===null)return;const r=Gn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,o)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let o=0,l=r.getWidth();o<l;o++)for(let h=o+1,d=r.getHeight();h<d;h++)r.get(o,h)!==r.get(h,o)&&(r.flip(h,o),r.flip(o,h))}}class mo{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o,l){if(r.length!==o.getTotalCodewords())throw new R;const h=o.getECBlocksForLevel(l);let d=0;const m=h.getECBlocks();for(const W of m)d+=W.getCount();const p=new Array(d);let w=0;for(const W of m)for(let K=0;K<W.getCount();K++){const oe=W.getDataCodewords(),ge=h.getECCodewordsPerBlock()+oe;p[w++]=new mo(oe,new Uint8Array(ge))}const C=p[0].codewords.length;let b=p.length-1;for(;b>=0&&p[b].codewords.length!==C;)b--;b++;const M=C-h.getECCodewordsPerBlock();let P=0;for(let W=0;W<M;W++)for(let K=0;K<w;K++)p[K].codewords[W]=r[P++];for(let W=b;W<w;W++)p[W].codewords[M]=r[P++];const z=p[0].codewords.length;for(let W=M;W<z;W++)for(let K=0;K<w;K++){const oe=K<b?W:W+1;p[K].codewords[oe]=r[P++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var dr;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(dr||(dr={}));class We{constructor(r,o,l,h){this.value=r,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=h,We.FOR_BITS.set(h,this),We.FOR_VALUE.set(r,this)}static forBits(r){const o=We.FOR_BITS.get(r);if(o===void 0)throw new R;return o}getCharacterCountBits(r){const o=r.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof We))return!1;const o=r;return this.value===o.value}toString(){return this.stringValue}}We.FOR_BITS=new Map,We.FOR_VALUE=new Map,We.TERMINATOR=new We(dr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),We.NUMERIC=new We(dr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),We.ALPHANUMERIC=new We(dr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),We.STRUCTURED_APPEND=new We(dr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),We.BYTE=new We(dr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),We.ECI=new We(dr.ECI,"ECI",Int32Array.from([0,0,0]),7),We.KANJI=new We(dr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),We.FNC1_FIRST_POSITION=new We(dr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),We.FNC1_SECOND_POSITION=new We(dr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),We.HANZI=new We(dr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class en{static decode(r,o,l,h){const d=new Or(r);let m=new G;const p=new Array;let w=-1,C=-1;try{let b=null,M=!1,P;do{if(d.available()<4)P=We.TERMINATOR;else{const z=d.readBits(4);P=We.forBits(z)}switch(P){case We.TERMINATOR:break;case We.FNC1_FIRST_POSITION:case We.FNC1_SECOND_POSITION:M=!0;break;case We.STRUCTURED_APPEND:if(d.available()<16)throw new H;w=d.readBits(8),C=d.readBits(8);break;case We.ECI:const z=en.parseECIValue(d);if(b=L.getCharacterSetECIByValue(z),b===null)throw new H;break;case We.HANZI:const W=d.readBits(4),K=d.readBits(P.getCharacterCountBits(o));W===en.GB2312_SUBSET&&en.decodeHanziSegment(d,m,K);break;default:const oe=d.readBits(P.getCharacterCountBits(o));switch(P){case We.NUMERIC:en.decodeNumericSegment(d,m,oe);break;case We.ALPHANUMERIC:en.decodeAlphanumericSegment(d,m,oe,M);break;case We.BYTE:en.decodeByteSegment(d,m,oe,b,p,h);break;case We.KANJI:en.decodeKanjiSegment(d,m,oe);break;default:throw new H}break}}while(P!==We.TERMINATOR)}catch{throw new H}return new rn(r,m.toString(),p.length===0?null:p,l===null?null:l.toString(),w,C)}static decodeHanziSegment(r,o,l){if(l*13>r.available())throw new H;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let p=m/96<<8&4294967295|m%96;p<959?p+=41377:p+=42657,h[d]=p>>8&255,h[d+1]=p&255,d+=2,l--}try{o.append(Z.decode(h,Q.GB2312))}catch(m){throw new H(m)}}static decodeKanjiSegment(r,o,l){if(l*13>r.available())throw new H;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let p=m/192<<8&4294967295|m%192;p<7936?p+=33088:p+=49472,h[d]=p>>8,h[d+1]=p,d+=2,l--}try{o.append(Z.decode(h,Q.SHIFT_JIS))}catch(m){throw new H(m)}}static decodeByteSegment(r,o,l,h,d,m){if(8*l>r.available())throw new H;const p=new Uint8Array(l);for(let C=0;C<l;C++)p[C]=r.readBits(8);let w;h===null?w=Q.guessEncoding(p,m):w=h.getName();try{o.append(Z.decode(p,w))}catch(C){throw new H(C)}d.push(p)}static toAlphaNumericChar(r){if(r>=en.ALPHANUMERIC_CHARS.length)throw new H;return en.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,o,l,h){const d=o.length();for(;l>1;){if(r.available()<11)throw new H;const m=r.readBits(11);o.append(en.toAlphaNumericChar(Math.floor(m/45))),o.append(en.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new H;o.append(en.toAlphaNumericChar(r.readBits(6)))}if(h)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(r,o,l){for(;l>=3;){if(r.available()<10)throw new H;const h=r.readBits(10);if(h>=1e3)throw new H;o.append(en.toAlphaNumericChar(Math.floor(h/100))),o.append(en.toAlphaNumericChar(Math.floor(h/10)%10)),o.append(en.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(r.available()<7)throw new H;const h=r.readBits(7);if(h>=100)throw new H;o.append(en.toAlphaNumericChar(Math.floor(h/10))),o.append(en.toAlphaNumericChar(h%10))}else if(l===1){if(r.available()<4)throw new H;const h=r.readBits(4);if(h>=10)throw new H;o.append(en.toAlphaNumericChar(h))}}static parseECIValue(r){const o=r.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const l=r.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=r.readBits(16);return(o&31)<<16&4294967295|l}throw new H}}en.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",en.GB2312_SUBSET=1;class Yo{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const o=r[0];r[0]=r[2],r[2]=o}}class nu{constructor(){this.rsDecoder=new Hr(ut.QR_CODE_FIELD_256)}decodeBooleanArray(r,o){return this.decodeBitMatrix(ft.parseFromBooleanArray(r),o)}decodeBitMatrix(r,o){const l=new ri(r);let h=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){h=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new Yo(!0)),d}catch(d){throw h!==null?h:d}}decodeBitMatrixParser(r,o){const l=r.readVersion(),h=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),m=mo.getDataBlocks(d,l,h);let p=0;for(const b of m)p+=b.getNumDataCodewords();const w=new Uint8Array(p);let C=0;for(const b of m){const M=b.getCodewords(),P=b.getNumDataCodewords();this.correctErrors(M,P);for(let z=0;z<P;z++)w[C++]=M[z]}return en.decode(w,l,h,o)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new j}for(let h=0;h<o;h++)r[h]=l[h]}}class ii extends ze{constructor(r,o,l){super(r,o),this.estimatedModuleSize=l}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const h=(this.getX()+o)/2,d=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new ii(h,d,m)}}class Er{constructor(r,o,l,h,d,m,p){this.image=r,this.startX=o,this.startY=l,this.width=h,this.height=d,this.moduleSize=m,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,o=this.height,l=this.width,h=r+l,d=this.startY+o/2,m=new Int32Array(3),p=this.image;for(let w=0;w<o;w++){const C=d+((w&1)===0?Math.floor((w+1)/2):-Math.floor((w+1)/2));m[0]=0,m[1]=0,m[2]=0;let b=r;for(;b<h&&!p.get(b,C);)b++;let M=0;for(;b<h;){if(p.get(b,C))if(M===1)m[1]++;else if(M===2){if(this.foundPatternCross(m)){const P=this.handlePossibleCenter(m,C,b);if(P!==null)return P}m[0]=m[2],m[1]=1,m[2]=0,M=1}else m[++M]++;else M===1&&M++,m[M]++;b++}if(this.foundPatternCross(m)){const P=this.handlePossibleCenter(m,C,h);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ce}static centerFromEnd(r,o){return o-r[2]-r[1]/2}foundPatternCross(r){const o=this.moduleSize,l=o/2;for(let h=0;h<3;h++)if(Math.abs(o-r[h])>=l)return!1;return!0}crossCheckVertical(r,o,l,h){const d=this.image,m=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let w=r;for(;w>=0&&d.get(o,w)&&p[1]<=l;)p[1]++,w--;if(w<0||p[1]>l)return NaN;for(;w>=0&&!d.get(o,w)&&p[0]<=l;)p[0]++,w--;if(p[0]>l)return NaN;for(w=r+1;w<m&&d.get(o,w)&&p[1]<=l;)p[1]++,w++;if(w===m||p[1]>l)return NaN;for(;w<m&&!d.get(o,w)&&p[2]<=l;)p[2]++,w++;if(p[2]>l)return NaN;const C=p[0]+p[1]+p[2];return 5*Math.abs(C-h)>=2*h?NaN:this.foundPatternCross(p)?Er.centerFromEnd(p,w):NaN}handlePossibleCenter(r,o,l){const h=r[0]+r[1]+r[2],d=Er.centerFromEnd(r,l),m=this.crossCheckVertical(o,d,2*r[1],h);if(!isNaN(m)){const p=(r[0]+r[1]+r[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(p,m,d))return C.combineEstimate(m,d,p);const w=new ii(d,m,p);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class cs extends ze{constructor(r,o,l,h){super(r,o),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const h=this.count+1,d=(this.count*this.getX()+o)/h,m=(this.count*this.getY()+r)/h,p=(this.count*this.estimatedModuleSize+l)/h;return new cs(d,m,p,h)}}class $i{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class sn{constructor(r,o){this.image=r,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const o=r!=null&&r.get(ke.TRY_HARDER)!==void 0,l=r!=null&&r.get(ke.PURE_BARCODE)!==void 0,h=this.image,d=h.getHeight(),m=h.getWidth();let p=Math.floor(3*d/(4*sn.MAX_MODULES));(p<sn.MIN_SKIP||o)&&(p=sn.MIN_SKIP);let w=!1;const C=new Int32Array(5);for(let M=p-1;M<d&&!w;M+=p){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let P=0;for(let z=0;z<m;z++)if(h.get(z,M))(P&1)===1&&P++,C[P]++;else if((P&1)===0)if(P===4)if(sn.foundPatternCross(C)){if(this.handlePossibleCenter(C,M,z,l)===!0)if(p=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const K=this.findRowSkip();K>C[2]&&(M+=K-C[2]-p,z=m-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,P=3;continue}P=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,P=3;else C[++P]++;else C[P]++;sn.foundPatternCross(C)&&this.handlePossibleCenter(C,M,m,l)===!0&&(p=C[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return ze.orderBestPatterns(b),new $i(b)}static centerFromEnd(r,o){return o-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let o=0;for(let d=0;d<5;d++){const m=r[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,h=l/2;return Math.abs(l-r[0])<h&&Math.abs(l-r[1])<h&&Math.abs(3*l-r[2])<3*h&&Math.abs(l-r[3])<h&&Math.abs(l-r[4])<h}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,o,l,h){const d=this.getCrossCheckStateCount();let m=0;const p=this.image;for(;r>=m&&o>=m&&p.get(o-m,r-m);)d[2]++,m++;if(r<m||o<m)return!1;for(;r>=m&&o>=m&&!p.get(o-m,r-m)&&d[1]<=l;)d[1]++,m++;if(r<m||o<m||d[1]>l)return!1;for(;r>=m&&o>=m&&p.get(o-m,r-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const w=p.getHeight(),C=p.getWidth();for(m=1;r+m<w&&o+m<C&&p.get(o+m,r+m);)d[2]++,m++;if(r+m>=w||o+m>=C)return!1;for(;r+m<w&&o+m<C&&!p.get(o+m,r+m)&&d[3]<l;)d[3]++,m++;if(r+m>=w||o+m>=C||d[3]>=l)return!1;for(;r+m<w&&o+m<C&&p.get(o+m,r+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const b=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(b-h)<2*h&&sn.foundPatternCross(d)}crossCheckVertical(r,o,l,h){const d=this.image,m=d.getHeight(),p=this.getCrossCheckStateCount();let w=r;for(;w>=0&&d.get(o,w);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(o,w)&&p[1]<=l;)p[1]++,w--;if(w<0||p[1]>l)return NaN;for(;w>=0&&d.get(o,w)&&p[0]<=l;)p[0]++,w--;if(p[0]>l)return NaN;for(w=r+1;w<m&&d.get(o,w);)p[2]++,w++;if(w===m)return NaN;for(;w<m&&!d.get(o,w)&&p[3]<l;)p[3]++,w++;if(w===m||p[3]>=l)return NaN;for(;w<m&&d.get(o,w)&&p[4]<l;)p[4]++,w++;if(p[4]>=l)return NaN;const C=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(C-h)>=2*h?NaN:sn.foundPatternCross(p)?sn.centerFromEnd(p,w):NaN}crossCheckHorizontal(r,o,l,h){const d=this.image,m=d.getWidth(),p=this.getCrossCheckStateCount();let w=r;for(;w>=0&&d.get(w,o);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(w,o)&&p[1]<=l;)p[1]++,w--;if(w<0||p[1]>l)return NaN;for(;w>=0&&d.get(w,o)&&p[0]<=l;)p[0]++,w--;if(p[0]>l)return NaN;for(w=r+1;w<m&&d.get(w,o);)p[2]++,w++;if(w===m)return NaN;for(;w<m&&!d.get(w,o)&&p[3]<l;)p[3]++,w++;if(w===m||p[3]>=l)return NaN;for(;w<m&&d.get(w,o)&&p[4]<l;)p[4]++,w++;if(p[4]>=l)return NaN;const C=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(C-h)>=h?NaN:sn.foundPatternCross(p)?sn.centerFromEnd(p,w):NaN}handlePossibleCenter(r,o,l,h){const d=r[0]+r[1]+r[2]+r[3]+r[4];let m=sn.centerFromEnd(r,l),p=this.crossCheckVertical(o,Math.floor(m),r[2],d);if(!isNaN(p)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(p),r[2],d),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(p),Math.floor(m),r[2],d)))){const w=d/7;let C=!1;const b=this.possibleCenters;for(let M=0,P=b.length;M<P;M++){const z=b[M];if(z.aboutEquals(w,p,m)){b[M]=z.combineEstimate(p,m,w),C=!0;break}}if(!C){const M=new cs(m,p,w);b.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=sn.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=sn.CENTER_QUORUM&&(r++,o+=m.getEstimatedModuleSize());if(r<3)return!1;const h=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-h);return d<=.05*o}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ce;const o=this.possibleCenters;let l;if(r>3){let h=0,d=0;for(const w of this.possibleCenters){const C=w.getEstimatedModuleSize();h+=C,d+=C*C}l=h/r;let m=Math.sqrt(d/r-l*l);o.sort((w,C)=>{const b=Math.abs(C.getEstimatedModuleSize()-l),M=Math.abs(w.getEstimatedModuleSize()-l);return b<M?-1:b>M?1:0});const p=Math.max(.2*l,m);for(let w=0;w<o.length&&o.length>3;w++){const C=o[w];Math.abs(C.getEstimatedModuleSize()-l)>p&&(o.splice(w,1),w--)}}if(o.length>3){let h=0;for(const d of o)h+=d.getEstimatedModuleSize();l=h/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const p=Math.abs(m.getEstimatedModuleSize()-l),w=Math.abs(d.getEstimatedModuleSize()-l);return p<w?1:p>w?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}sn.CENTER_QUORUM=2,sn.MIN_SKIP=3,sn.MAX_MODULES=57;class Xr{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(ke.NEED_RESULT_POINT_CALLBACK);const l=new sn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const o=r.getTopLeft(),l=r.getTopRight(),h=r.getBottomLeft(),d=this.calculateModuleSize(o,l,h);if(d<1)throw new ce("No pattern found in proccess finder.");const m=Xr.computeDimension(o,l,h,d),p=Me.getProvisionalVersionForDimension(m),w=p.getDimensionForVersion()-7;let C=null;if(p.getAlignmentPatternCenters().length>0){const z=l.getX()-o.getX()+h.getX(),W=l.getY()-o.getY()+h.getY(),K=1-3/w,oe=Math.floor(o.getX()+K*(z-o.getX())),ge=Math.floor(o.getY()+K*(W-o.getY()));for(let Ce=4;Ce<=16;Ce<<=1)try{C=this.findAlignmentInRegion(d,oe,ge,Ce);break}catch(Re){if(!(Re instanceof ce))throw Re}}const b=Xr.createTransform(o,l,h,C,m),M=Xr.sampleGrid(this.image,b,m);let P;return C===null?P=[h,o,l]:P=[h,o,l,C],new ma(M,P)}static createTransform(r,o,l,h,d){const m=d-3.5;let p,w,C,b;return h!==null?(p=h.getX(),w=h.getY(),C=m-3,b=C):(p=o.getX()-r.getX()+l.getX(),w=o.getY()-r.getY()+l.getY(),C=m,b=m),Wt.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,C,b,3.5,m,r.getX(),r.getY(),o.getX(),o.getY(),p,w,l.getX(),l.getY())}static sampleGrid(r,o,l){return fr.getInstance().sampleGridWithTransform(r,l,l,o)}static computeDimension(r,o,l,h){const d=pt.round(ze.distance(r,o)/h),m=pt.round(ze.distance(r,l)/h);let p=Math.floor((d+m)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new ce("Dimensions could be not found.")}return p}calculateModuleSize(r,o,l){return(this.calculateModuleSizeOneWay(r,o)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(o.getX()),Math.floor(o.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(r,o,l,h){let d=this.sizeOfBlackWhiteBlackRun(r,o,l,h),m=1,p=r-(l-r);p<0?(m=r/(r-p),p=0):p>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(p-r),p=this.image.getWidth()-1);let w=Math.floor(o-(h-o)*m);return m=1,w<0?(m=o/(o-w),w=0):w>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(w-o),w=this.image.getHeight()-1),p=Math.floor(r+(p-r)*m),d+=this.sizeOfBlackWhiteBlackRun(r,o,p,w),d-1}sizeOfBlackWhiteBlackRun(r,o,l,h){const d=Math.abs(h-o)>Math.abs(l-r);if(d){let z=r;r=o,o=z,z=l,l=h,h=z}const m=Math.abs(l-r),p=Math.abs(h-o);let w=-m/2;const C=r<l?1:-1,b=o<h?1:-1;let M=0;const P=l+C;for(let z=r,W=o;z!==P;z+=C){const K=d?W:z,oe=d?z:W;if(M===1===this.image.get(K,oe)){if(M===2)return pt.distance(z,W,r,o);M++}if(w+=p,w>0){if(W===h)break;W+=b,w-=m}}return M===2?pt.distance(l+C,h,r,o):NaN}findAlignmentInRegion(r,o,l,h){const d=Math.floor(h*r),m=Math.max(0,o-d),p=Math.min(this.image.getWidth()-1,o+d);if(p-m<r*3)throw new ce("Alignment top exceeds estimated module size.");const w=Math.max(0,l-d),C=Math.min(this.image.getHeight()-1,l+d);if(C-w<r*3)throw new ce("Alignment bottom exceeds estimated module size.");return new Er(this.image,m,w,p-m,C-w,r,this.resultPointCallback).find()}}class si{constructor(){this.decoder=new nu}getDecoder(){return this.decoder}decode(r,o){let l,h;if(o!=null&&o.get(ke.PURE_BARCODE)!==void 0){const w=si.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,o),h=si.NO_POINTS}else{const w=new Xr(r.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(w.getBits(),o),h=w.getPoints()}l.getOther()instanceof Yo&&l.getOther().applyMirroredCorrection(h);const d=new Pe(l.getText(),l.getRawBytes(),void 0,h,Ne.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(et.BYTE_SEGMENTS,m);const p=l.getECLevel();return p!==null&&d.putMetadata(et.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(d.putMetadata(et.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(et.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o===null||l===null)throw new ce;const h=this.moduleSize(o,r);let d=o[1],m=l[1],p=o[0],w=l[0];if(p>=w||d>=m)throw new ce;if(m-d!==w-p&&(w=p+(m-d),w>=r.getWidth()))throw new ce;const C=Math.round((w-p+1)/h),b=Math.round((m-d+1)/h);if(C<=0||b<=0)throw new ce;if(b!==C)throw new ce;const M=Math.floor(h/2);d+=M,p+=M;const P=p+Math.floor((C-1)*h)-w;if(P>0){if(P>M)throw new ce;p-=P}const z=d+Math.floor((b-1)*h)-m;if(z>0){if(z>M)throw new ce;d-=z}const W=new ft(C,b);for(let K=0;K<b;K++){const oe=d+Math.floor(K*h);for(let ge=0;ge<C;ge++)r.get(p+Math.floor(ge*h),oe)&&W.set(ge,K)}return W}static moduleSize(r,o){const l=o.getHeight(),h=o.getWidth();let d=r[0],m=r[1],p=!0,w=0;for(;d<h&&m<l;){if(p!==o.get(d,m)){if(++w===5)break;p=!p}d++,m++}if(d===h||m===l)throw new ce;return(d-r[0])/7}}si.NO_POINTS=new Array;class Ze{PDF417Common(){}static getBitCountSum(r){return pt.sum(r)}static toIntArray(r){if(r==null||!r.length)return Ze.EMPTY_INT_ARRAY;const o=new Int32Array(r.length);let l=0;for(const h of r)o[l++]=h;return o}static getCodeword(r){const o=me.binarySearch(Ze.SYMBOL_TABLE,r&262143);return o<0?-1:(Ze.CODEWORD_TABLE[o]-1)%Ze.NUMBER_OF_CODEWORDS}}Ze.NUMBER_OF_CODEWORDS=929,Ze.MAX_CODEWORDS_IN_BARCODE=Ze.NUMBER_OF_CODEWORDS-1,Ze.MIN_ROWS_IN_BARCODE=3,Ze.MAX_ROWS_IN_BARCODE=90,Ze.MODULES_IN_CODEWORD=17,Ze.MODULES_IN_STOP_PATTERN=18,Ze.BARS_IN_MODULE=8,Ze.EMPTY_INT_ARRAY=new Int32Array([]),Ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ps{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class $e{static detectMultiple(r,o,l){let h=r.getBlackMatrix(),d=$e.detect(l,h);return d.length||(h=h.clone(),h.rotate180(),d=$e.detect(l,h)),new Ps(h,d)}static detect(r,o){const l=new Array;let h=0,d=0,m=!1;for(;h<o.getHeight();){const p=$e.findVertices(o,h,d);if(p[0]==null&&p[3]==null){if(!m)break;m=!1,d=0;for(const w of l)w[1]!=null&&(h=Math.trunc(Math.max(h,w[1].getY()))),w[3]!=null&&(h=Math.max(h,Math.trunc(w[3].getY())));h+=$e.ROW_STEP;continue}if(m=!0,l.push(p),!r)break;p[2]!=null?(d=Math.trunc(p[2].getX()),h=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),h=Math.trunc(p[4].getY()))}return l}static findVertices(r,o,l){const h=r.getHeight(),d=r.getWidth(),m=new Array(8);return $e.copyToResult(m,$e.findRowsWithPattern(r,h,d,o,l,$e.START_PATTERN),$e.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),$e.copyToResult(m,$e.findRowsWithPattern(r,h,d,o,l,$e.STOP_PATTERN),$e.INDEXES_STOP_PATTERN),m}static copyToResult(r,o,l){for(let h=0;h<l.length;h++)r[l[h]]=o[h]}static findRowsWithPattern(r,o,l,h,d,m){const p=new Array(4);let w=!1;const C=new Int32Array(m.length);for(;h<o;h+=$e.ROW_STEP){let M=$e.findGuardPattern(r,d,h,l,!1,m,C);if(M!=null){for(;h>0;){const P=$e.findGuardPattern(r,d,--h,l,!1,m,C);if(P!=null)M=P;else{h++;break}}p[0]=new ze(M[0],h),p[1]=new ze(M[1],h),w=!0;break}}let b=h+1;if(w){let M=0,P=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;b<o;b++){const z=$e.findGuardPattern(r,P[0],b,l,!1,m,C);if(z!=null&&Math.abs(P[0]-z[0])<$e.MAX_PATTERN_DRIFT&&Math.abs(P[1]-z[1])<$e.MAX_PATTERN_DRIFT)P=z,M=0;else{if(M>$e.SKIPPED_ROW_COUNT_MAX)break;M++}}b-=M+1,p[2]=new ze(P[0],b),p[3]=new ze(P[1],b)}return b-h<$e.BARCODE_MIN_HEIGHT&&me.fill(p,null),p}static findGuardPattern(r,o,l,h,d,m,p){me.fillWithin(p,0,p.length,0);let w=o,C=0;for(;r.get(w,l)&&w>0&&C++<$e.MAX_PIXEL_DRIFT;)w--;let b=w,M=0,P=m.length;for(let z=d;b<h;b++)if(r.get(b,l)!==z)p[M]++;else{if(M===P-1){if($e.patternMatchVariance(p,m,$e.MAX_INDIVIDUAL_VARIANCE)<$e.MAX_AVG_VARIANCE)return new Int32Array([w,b]);w+=p[0]+p[1],$.arraycopy(p,2,p,0,M-1),p[M-1]=0,p[M]=0,M--}else M++;p[M]=1,z=!z}return M===P-1&&$e.patternMatchVariance(p,m,$e.MAX_INDIVIDUAL_VARIANCE)<$e.MAX_AVG_VARIANCE?new Int32Array([w,b-1]):null}static patternMatchVariance(r,o,l){let h=r.length,d=0,m=0;for(let C=0;C<h;C++)d+=r[C],m+=o[C];if(d<m)return 1/0;let p=d/m;l*=p;let w=0;for(let C=0;C<h;C++){let b=r[C],M=o[C]*p,P=b>M?b-M:M-b;if(P>l)return 1/0;w+=P}return w/d}}$e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),$e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),$e.MAX_AVG_VARIANCE=.42,$e.MAX_INDIVIDUAL_VARIANCE=.8,$e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),$e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),$e.MAX_PIXEL_DRIFT=3,$e.MAX_PATTERN_DRIFT=5,$e.SKIPPED_ROW_COUNT_MAX=25,$e.ROW_STEP=5,$e.BARCODE_MIN_HEIGHT=10;class En{constructor(r,o){if(o.length===0)throw new R;this.field=r;let l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),$.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let h=0;for(let d of this.coefficients)h=this.field.add(h,d);return h}let o=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)o=this.field.add(this.field.multiply(r,o),this.coefficients[h]);return o}add(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let h=new Int32Array(l.length),d=l.length-o.length;$.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=this.field.add(o[m-d],l[m]);return new En(this.field,h)}subtract(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof En?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new En(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,h=r.coefficients,d=h.length,m=new Int32Array(l+d-1);for(let p=0;p<l;p++){let w=o[p];for(let C=0;C<d;C++)m[p+C]=this.field.add(m[p+C],this.field.multiply(w,h[C]))}return new En(this.field,m)}negative(){let r=this.coefficients.length,o=new Int32Array(r);for(let l=0;l<r;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new En(this.field,o)}multiplyScalar(r){if(r===0)return new En(this.field,new Int32Array([0]));if(r===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let h=0;h<o;h++)l[h]=this.field.multiply(this.coefficients[h],r);return new En(this.field,l)}multiplyByMonomial(r,o){if(r<0)throw new R;if(o===0)return new En(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+r);for(let d=0;d<l;d++)h[d]=this.field.multiply(this.coefficients[d],o);return new En(this.field,h)}toString(){let r=new G;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(o===0||l!==1)&&r.append(l),o!==0&&(o===1?r.append("x"):(r.append("x^"),r.append(o))))}return r.toString()}}class Li{add(r,o){return(r+o)%this.modulus}subtract(r,o){return(this.modulus+r-o)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new R;return this.logTable[r]}inverse(r){if(r===0)throw new $r;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Pi extends Li{constructor(r,o){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let h=0;h<r;h++)this.expTable[h]=l,l=l*o%r;for(let h=0;h<r-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new En(this,new Int32Array([0])),this.one=new En(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new R;if(o===0)return this.zero;let l=new Int32Array(r+1);return l[0]=o,new En(this,l)}}Pi.PDF417_GF=new Pi(Ze.NUMBER_OF_CODEWORDS,3);class Bi{constructor(){this.field=Pi.PDF417_GF}decode(r,o,l){let h=new En(this.field,r),d=new Int32Array(o),m=!1;for(let W=o;W>0;W--){let K=h.evaluateAt(this.field.exp(W));d[o-W]=K,K!==0&&(m=!0)}if(!m)return 0;let p=this.field.getOne();if(l!=null)for(const W of l){let K=this.field.exp(r.length-1-W),oe=new En(this.field,new Int32Array([this.field.subtract(0,K),1]));p=p.multiply(oe)}let w=new En(this.field,d),C=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),w,o),b=C[0],M=C[1],P=this.findErrorLocations(b),z=this.findErrorMagnitudes(M,b,P);for(let W=0;W<P.length;W++){let K=r.length-1-this.field.log(P[W]);if(K<0)throw j.getChecksumInstance();r[K]=this.field.subtract(r[K],z[W])}return P.length}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){let P=r;r=o,o=P}let h=r,d=o,m=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let P=h,z=m;if(h=d,m=p,h.isZero())throw j.getChecksumInstance();d=P;let W=this.field.getZero(),K=h.getCoefficient(h.getDegree()),oe=this.field.inverse(K);for(;d.getDegree()>=h.getDegree()&&!d.isZero();){let ge=d.getDegree()-h.getDegree(),Ce=this.field.multiply(d.getCoefficient(d.getDegree()),oe);W=W.add(this.field.buildMonomial(ge,Ce)),d=d.subtract(h.multiplyByMonomial(ge,Ce))}p=W.multiply(m).subtract(z).negative()}let w=p.getCoefficient(0);if(w===0)throw j.getChecksumInstance();let C=this.field.inverse(w),b=p.multiply(C),M=d.multiply(C);return[b,M]}findErrorLocations(r){let o=r.getDegree(),l=new Int32Array(o),h=0;for(let d=1;d<this.field.getSize()&&h<o;d++)r.evaluateAt(d)===0&&(l[h]=this.field.inverse(d),h++);if(h!==o)throw j.getChecksumInstance();return l}findErrorMagnitudes(r,o,l){let h=o.getDegree(),d=new Int32Array(h);for(let C=1;C<=h;C++)d[h-C]=this.field.multiply(C,o.getCoefficient(C));let m=new En(this.field,d),p=l.length,w=new Int32Array(p);for(let C=0;C<p;C++){let b=this.field.inverse(l[C]),M=this.field.subtract(0,r.evaluateAt(b)),P=this.field.inverse(m.evaluateAt(b));w[C]=this.field.multiply(M,P)}return w}}class pi{constructor(r,o,l,h,d){r instanceof pi?this.constructor_2(r):this.constructor_1(r,o,l,h,d)}constructor_1(r,o,l,h,d){const m=o==null||l==null,p=h==null||d==null;if(m&&p)throw new ce;m?(o=new ze(0,h.getY()),l=new ze(0,d.getY())):p&&(h=new ze(r.getWidth()-1,o.getY()),d=new ze(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=o,this.bottomLeft=l,this.topRight=h,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,o){return r==null?o:o==null?r:new pi(r.image,r.topLeft,r.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(r,o,l){let h=this.topLeft,d=this.bottomLeft,m=this.topRight,p=this.bottomRight;if(r>0){let w=l?this.topLeft:this.topRight,C=Math.trunc(w.getY()-r);C<0&&(C=0);let b=new ze(w.getX(),C);l?h=b:m=b}if(o>0){let w=l?this.bottomLeft:this.bottomRight,C=Math.trunc(w.getY()+o);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let b=new ze(w.getX(),C);l?d=b:p=b}return new pi(this.image,h,d,m,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ki{constructor(r,o,l,h){this.columnCount=r,this.errorCorrectionLevel=h,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Lr{constructor(){this.buffer=""}static form(r,o){let l=-1;function h(m,p,w,C,b,M){if(m==="%%")return"%";if(o[++l]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let P=b?parseInt(b.substr(1)):void 0,z;switch(M){case"s":z=o[l];break;case"c":z=o[l][0];break;case"f":z=parseFloat(o[l]).toFixed(m);break;case"p":z=parseFloat(o[l]).toPrecision(m);break;case"e":z=parseFloat(o[l]).toExponential(m);break;case"x":z=parseInt(o[l]).toString(P||16);break;case"d":z=parseFloat(parseInt(o[l],P||10).toPrecision(m)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(P);let W=parseInt(w),K=w&&w[0]+""=="0"?"0":" ";for(;z.length<W;)z=p!==void 0?z+K:K+z;return z}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,h)}format(r,...o){this.buffer+=Lr.form(r,o)}toString(){return this.buffer}}class es{constructor(r){this.boundingBox=new pi(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let o=this.getCodeword(r);if(o!=null)return o;for(let l=1;l<es.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(r)-l;if(h>=0&&(o=this.codewords[h],o!=null)||(h=this.imageRowToCodewordIndex(r)+l,h<this.codewords.length&&(o=this.codewords[h],o!=null)))return o}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,o){this.codewords[this.imageRowToCodewordIndex(r)]=o}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Lr;let o=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",o++);continue}r.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return r.toString()}}es.MAX_NEARBY_DISTANCE=5;class Cn{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let o=this.values.get(r);o==null&&(o=0),o++,this.values.set(r,o)}getValue(){let r=-1,o=new Array;for(const[l,h]of this.values.entries()){const d={getKey:()=>l,getValue:()=>h};d.getValue()>r?(r=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===r&&o.push(d.getKey())}return Ze.toIntArray(o)}getConfidence(r){return this.values.get(r)}}class zt extends es{constructor(r,o){super(r),this._isLeft=o}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,r);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=-1,C=1,b=0;for(let M=m;M<p;M++){if(o[M]==null)continue;let P=o[M],z=P.getRowNumber()-w;if(z===0)b++;else if(z===1)C=Math.max(C,b),b=1,w=P.getRowNumber();else if(z<0||P.getRowNumber()>=r.getRowCount()||z>M)o[M]=null;else{let W;C>2?W=(C-2)*z:W=z;let K=W>=M;for(let oe=1;oe<=W&&!K;oe++)K=o[M-oe]!=null;K?o[M]=null:(w=P.getRowNumber(),b=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let o=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=o.length)continue;o[h]++}return o}adjustIncompleteIndicatorColumnRowNumbers(r){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),h=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.getCodewords(),w=-1;for(let C=d;C<m;C++){if(p[C]==null)continue;let b=p[C];b.setRowNumberAsRowIndicatorColumn();let M=b.getRowNumber()-w;M===0||(M===1?w=b.getRowNumber():b.getRowNumber()>=r.getRowCount()?p[C]=null:w=b.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),o=new Cn,l=new Cn,h=new Cn,d=new Cn;for(let p of r){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let w=p.getValue()%30,C=p.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(w*3+1);break;case 1:d.setValue(w/3),h.setValue(w%3);break;case 2:o.setValue(w+1);break}}if(o.getValue().length===0||l.getValue().length===0||h.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<Ze.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>Ze.MAX_ROWS_IN_BARCODE)return null;let m=new ki(o.getValue()[0],l.getValue()[0],h.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,o){for(let l=0;l<r.length;l++){let h=r[l];if(r[l]==null)continue;let d=h.getValue()%30,m=h.getRowNumber();if(m>o.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==o.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ui{constructor(r,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Ze.MAX_CODEWORDS_IN_BARCODE,o;do o=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(o,h,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&o[l]!=null&&r[l].getRowNumber()===o[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let d=this.detectionResultColumns[h].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=Ui.adjustRowNumberIfValid(h,d,p),p.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=Ui.adjustRowNumberIfValid(h,d,p),p.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),o=0):++o),o}adjustRowNumbers(r,o,l){if(!this.detectionResultColumns[r-1])return;let h=l[o],d=this.detectionResultColumns[r-1].getCodewords(),m=d;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let p=new Array(14);p[2]=d[o],p[3]=m[o],o>0&&(p[0]=l[o-1],p[4]=d[o-1],p[5]=m[o-1]),o>1&&(p[8]=l[o-2],p[10]=d[o-2],p[11]=m[o-2]),o<l.length-1&&(p[1]=l[o+1],p[6]=d[o+1],p[7]=m[o+1]),o<l.length-2&&(p[9]=l[o+2],p[12]=d[o+2],p[13]=m[o+2]);for(let w of p)if(Ui.adjustRowNumber(h,w))return}static adjustRowNumber(r,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===r.getBucket()?(r.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,o){this.detectionResultColumns[r]=o}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Lr;for(let l=0;l<r.getCodewords().length;l++){o.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[h].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class yi{constructor(r,o,l,h){this.rowNumber=yi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==yi.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}yi.BARCODE_ROW_UNKNOWN=-1;class ar{static initialize(){for(let r=0;r<Ze.SYMBOL_TABLE.length;r++){let o=Ze.SYMBOL_TABLE[r],l=o&1;for(let h=0;h<Ze.BARS_IN_MODULE;h++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,ar.RATIOS_TABLE[r]||(ar.RATIOS_TABLE[r]=new Array(Ze.BARS_IN_MODULE)),ar.RATIOS_TABLE[r][Ze.BARS_IN_MODULE-h-1]=Math.fround(d/Ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let o=ar.getDecodedCodewordValue(ar.sampleBitCounts(r));return o!==-1?o:ar.getClosestDecodedValue(r)}static sampleBitCounts(r){let o=pt.sum(r),l=new Int32Array(Ze.BARS_IN_MODULE),h=0,d=0;for(let m=0;m<Ze.MODULES_IN_CODEWORD;m++){let p=o/(2*Ze.MODULES_IN_CODEWORD)+m*o/Ze.MODULES_IN_CODEWORD;d+r[h]<=p&&(d+=r[h],h++),l[h]++}return l}static getDecodedCodewordValue(r){let o=ar.getBitValue(r);return Ze.getCodeword(o)===-1?-1:o}static getBitValue(r){let o=0;for(let l=0;l<r.length;l++)for(let h=0;h<r[l];h++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(r){let o=pt.sum(r),l=new Array(Ze.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/o);let h=Ri.MAX_VALUE,d=-1;this.bSymbolTableReady||ar.initialize();for(let m=0;m<ar.RATIOS_TABLE.length;m++){let p=0,w=ar.RATIOS_TABLE[m];for(let C=0;C<Ze.BARS_IN_MODULE;C++){let b=Math.fround(w[C]-l[C]);if(p+=Math.fround(b*b),p>=h)break}p<h&&(h=p,d=Ze.SYMBOL_TABLE[m])}return d}}ar.bSymbolTableReady=!1,ar.RATIOS_TABLE=new Array(Ze.SYMBOL_TABLE.length).map(O=>new Array(Ze.BARS_IN_MODULE));class Bs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class ks{static parseLong(r,o=void 0){return parseInt(r,o)}}class Ei extends A{}Ei.kind="NullPointerException";class Us{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,o,l){if(r==null)throw new Ei;if(o<0||o>r.length||l<0||o+l>r.length||o+l<0)throw new te;if(l===0)return;for(let h=0;h<l;h++)this.write(r[o+h])}flush(){}close(){}}class ai extends A{}class Xo extends Us{constructor(r=32){if(super(),this.count=0,r<0)throw new R("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new ai;l=ue.MAX_VALUE}this.buf=me.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,o,l){if(o<0||o>r.length||l<0||o+l-r.length>0)throw new te;this.ensureCapacity(this.count+l),$.arraycopy(r,o,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return me.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var Gt;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Gt||(Gt={}));function hs(){if(typeof window<"u")return window.BigInt||null;if(typeof xh<"u")return xh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ts;function oi(O){if(typeof ts>"u"&&(ts=hs()),ts===null)throw new Error("BigInt is not supported!");return ts(O)}function xa(){let O=[];O[0]=oi(1);let r=oi(900);O[1]=r;for(let o=2;o<16;o++)O[o]=O[o-1]*r;return O}class fe{static decode(r,o){let l=new G(""),h=L.ISO8859_1;l.enableDecoding(h);let d=1,m=r[d++],p=new Bs;for(;d<r[0];){switch(m){case fe.TEXT_COMPACTION_MODE_LATCH:d=fe.textCompaction(r,d,l);break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:d=fe.byteCompaction(m,r,h,d,l);break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case fe.NUMERIC_COMPACTION_MODE_LATCH:d=fe.numericCompaction(r,d,l);break;case fe.ECI_CHARSET:L.getCharacterSetECIByValue(r[d++]);break;case fe.ECI_GENERAL_PURPOSE:d+=2;break;case fe.ECI_USER_DEFINED:d++;break;case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=fe.decodeMacroBlock(r,d,p);break;case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:throw new H;default:d--,d=fe.textCompaction(r,d,l);break}if(d<r.length)m=r[d++];else throw H.getFormatInstance()}if(l.length()===0)throw H.getFormatInstance();let w=new rn(null,l.toString(),null,o);return w.setOther(p),w}static decodeMacroBlock(r,o,l){if(o+fe.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw H.getFormatInstance();let h=new Int32Array(fe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<fe.NUMBER_OF_SEQUENCE_CODEWORDS;p++,o++)h[p]=r[o];l.setSegmentIndex(ue.parseInt(fe.decodeBase900toBase10(h,fe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new G;o=fe.textCompaction(r,o,d),l.setFileId(d.toString());let m=-1;for(r[o]===fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<r[0];)switch(r[o]){case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,r[o]){case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new G;o=fe.textCompaction(r,o+1,p),l.setFileName(p.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new G;o=fe.textCompaction(r,o+1,w),l.setSender(w.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new G;o=fe.textCompaction(r,o+1,C),l.setAddressee(C.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new G;o=fe.numericCompaction(r,o+1,b),l.setSegmentCount(ue.parseInt(b.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new G;o=fe.numericCompaction(r,o+1,M),l.setTimestamp(ks.parseLong(M.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new G;o=fe.numericCompaction(r,o+1,P),l.setChecksum(ue.parseInt(P.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let z=new G;o=fe.numericCompaction(r,o+1,z),l.setFileSize(ks.parseLong(z.toString()));break;default:throw H.getFormatInstance()}break;case fe.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(m!==-1){let p=o-m;l.isLastSegment()&&p--,l.setOptionalData(me.copyOfRange(r,m,m+p))}return o}static textCompaction(r,o,l){let h=new Int32Array((r[0]-o)*2),d=new Int32Array((r[0]-o)*2),m=0,p=!1;for(;o<r[0]&&!p;){let w=r[o++];if(w<fe.TEXT_COMPACTION_MODE_LATCH)h[m]=w/30,h[m+1]=w%30,m+=2;else switch(w){case fe.TEXT_COMPACTION_MODE_LATCH:h[m++]=fe.TEXT_COMPACTION_MODE_LATCH;break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:o--,p=!0;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=r[o++],d[m]=w,m++;break}}return fe.decodeTextCompaction(h,d,m,l),o}static decodeTextCompaction(r,o,l,h){let d=Gt.ALPHA,m=Gt.ALPHA,p=0;for(;p<l;){let w=r[p],C="";switch(d){case Gt.ALPHA:if(w<26)C=String.fromCharCode(65+w);else switch(w){case 26:C=" ";break;case fe.LL:d=Gt.LOWER;break;case fe.ML:d=Gt.MIXED;break;case fe.PS:m=d,d=Gt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break;case Gt.LOWER:if(w<26)C=String.fromCharCode(97+w);else switch(w){case 26:C=" ";break;case fe.AS:m=d,d=Gt.ALPHA_SHIFT;break;case fe.ML:d=Gt.MIXED;break;case fe.PS:m=d,d=Gt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break;case Gt.MIXED:if(w<fe.PL)C=fe.MIXED_CHARS[w];else switch(w){case fe.PL:d=Gt.PUNCT;break;case 26:C=" ";break;case fe.LL:d=Gt.LOWER;break;case fe.AL:d=Gt.ALPHA;break;case fe.PS:m=d,d=Gt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break;case Gt.PUNCT:if(w<fe.PAL)C=fe.PUNCT_CHARS[w];else switch(w){case fe.PAL:d=Gt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break;case Gt.ALPHA_SHIFT:if(d=m,w<26)C=String.fromCharCode(65+w);else switch(w){case 26:C=" ";break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break;case Gt.PUNCT_SHIFT:if(d=m,w<fe.PAL)C=fe.PUNCT_CHARS[w];else switch(w){case fe.PAL:d=Gt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break}C!==""&&h.append(C),p++}}static byteCompaction(r,o,l,h,d){let m=new Xo,p=0,w=0,C=!1;switch(r){case fe.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),M=o[h++];for(;h<o[0]&&!C;)switch(b[p++]=M,w=900*w+M,M=o[h++],M){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:h--,C=!0;break;default:if(p%5===0&&p>0){for(let P=0;P<6;++P)m.write(Number(oi(w)>>oi(8*(5-P))));w=0,p=0}break}h===o[0]&&M<fe.TEXT_COMPACTION_MODE_LATCH&&(b[p++]=M);for(let P=0;P<p;P++)m.write(b[P]);break;case fe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<o[0]&&!C;){let P=o[h++];if(P<fe.TEXT_COMPACTION_MODE_LATCH)p++,w=900*w+P;else switch(P){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:h--,C=!0;break}if(p%5===0&&p>0){for(let z=0;z<6;++z)m.write(Number(oi(w)>>oi(8*(5-z))));w=0,p=0}}break}return d.append(Z.decode(m.toByteArray(),l)),h}static numericCompaction(r,o,l){let h=0,d=!1,m=new Int32Array(fe.MAX_NUMERIC_CODEWORDS);for(;o<r[0]&&!d;){let p=r[o++];if(o===r[0]&&(d=!0),p<fe.TEXT_COMPACTION_MODE_LATCH)m[h]=p,h++;else switch(p){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(h%fe.MAX_NUMERIC_CODEWORDS===0||p===fe.NUMERIC_COMPACTION_MODE_LATCH||d)&&h>0&&(l.append(fe.decodeBase900toBase10(m,h)),h=0)}return o}static decodeBase900toBase10(r,o){let l=oi(0);for(let d=0;d<o;d++)l+=fe.EXP900[o-d-1]*oi(r[d]);let h=l.toString();if(h.charAt(0)!=="1")throw new H;return h.substring(1)}}fe.TEXT_COMPACTION_MODE_LATCH=900,fe.BYTE_COMPACTION_MODE_LATCH=901,fe.NUMERIC_COMPACTION_MODE_LATCH=902,fe.BYTE_COMPACTION_MODE_LATCH_6=924,fe.ECI_USER_DEFINED=925,fe.ECI_GENERAL_PURPOSE=926,fe.ECI_CHARSET=927,fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fe.MACRO_PDF417_TERMINATOR=922,fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fe.MAX_NUMERIC_CODEWORDS=15,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fe.PL=25,fe.LL=27,fe.AS=27,fe.ML=28,fe.AL=28,fe.PS=29,fe.PAL=29,fe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,fe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",fe.EXP900=hs()?xa():[],fe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class at{constructor(){}static decode(r,o,l,h,d,m,p){let w=new pi(r,o,l,h,d),C=null,b=null,M;for(let W=!0;;W=!1){if(o!=null&&(C=at.getRowIndicatorColumn(r,w,o,!0,m,p)),h!=null&&(b=at.getRowIndicatorColumn(r,w,h,!1,m,p)),M=at.merge(C,b),M==null)throw ce.getNotFoundInstance();let K=M.getBoundingBox();if(W&&K!=null&&(K.getMinY()<w.getMinY()||K.getMaxY()>w.getMaxY()))w=K;else break}M.setBoundingBox(w);let P=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,C),M.setDetectionResultColumn(P,b);let z=C!=null;for(let W=1;W<=P;W++){let K=z?W:P-W;if(M.getDetectionResultColumn(K)!==void 0)continue;let oe;K===0||K===P?oe=new zt(w,K===0):oe=new es(w),M.setDetectionResultColumn(K,oe);let ge=-1,Ce=ge;for(let Re=w.getMinY();Re<=w.getMaxY();Re++){if(ge=at.getStartColumn(M,K,Re,z),ge<0||ge>w.getMaxX()){if(Ce===-1)continue;ge=Ce}let Te=at.detectCodeword(r,w.getMinX(),w.getMaxX(),z,ge,Re,m,p);Te!=null&&(oe.setCodeword(Re,Te),Ce=ge,m=Math.min(m,Te.getWidth()),p=Math.max(p,Te.getWidth()))}}return at.createDecoderResult(M)}static merge(r,o){if(r==null&&o==null)return null;let l=at.getBarcodeMetadata(r,o);if(l==null)return null;let h=pi.merge(at.adjustBoundingBox(r),at.adjustBoundingBox(o));return new Ui(l,h)}static adjustBoundingBox(r){if(r==null)return null;let o=r.getRowHeights();if(o==null)return null;let l=at.getMax(o),h=0;for(let p of o)if(h+=l-p,p>0)break;let d=r.getCodewords();for(let p=0;h>0&&d[p]==null;p++)h--;let m=0;for(let p=o.length-1;p>=0&&(m+=l-o[p],!(o[p]>0));p--);for(let p=d.length-1;m>0&&d[p]==null;p--)m--;return r.getBoundingBox().addMissingRows(h,m,r.isLeft())}static getMax(r){let o=-1;for(let l of r)o=Math.max(o,l);return o}static getBarcodeMetadata(r,o){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let h;return o==null||(h=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(r,o,l,h,d,m){let p=new zt(o,h);for(let w=0;w<2;w++){let C=w===0?1:-1,b=Math.trunc(Math.trunc(l.getX()));for(let M=Math.trunc(Math.trunc(l.getY()));M<=o.getMaxY()&&M>=o.getMinY();M+=C){let P=at.detectCodeword(r,0,r.getWidth(),h,b,M,d,m);P!=null&&(p.setCodeword(M,P),h?b=P.getStartX():b=P.getEndX())}}return p}static adjustCodewordCount(r,o){let l=o[0][1],h=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-at.getNumberOfECCodeWords(r.getBarcodeECLevel());if(h.length===0){if(d<1||d>Ze.MAX_CODEWORDS_IN_BARCODE)throw ce.getNotFoundInstance();l.setValue(d)}else h[0]!==d&&l.setValue(d)}static createDecoderResult(r){let o=at.createBarcodeMatrix(r);at.adjustCodewordCount(r,o);let l=new Array,h=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],m=new Array;for(let w=0;w<r.getBarcodeRowCount();w++)for(let C=0;C<r.getBarcodeColumnCount();C++){let b=o[w][C+1].getValue(),M=w*r.getBarcodeColumnCount()+C;b.length===0?l.push(M):b.length===1?h[M]=b[0]:(m.push(M),d.push(b))}let p=new Array(d.length);for(let w=0;w<p.length;w++)p[w]=d[w];return at.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),h,Ze.toIntArray(l),Ze.toIntArray(m),p)}static createDecoderResultFromAmbiguousValues(r,o,l,h,d){let m=new Int32Array(h.length),p=100;for(;p-- >0;){for(let w=0;w<m.length;w++)o[h[w]]=d[w][m[w]];try{return at.decodeCodewords(o,r,l)}catch(w){if(!(w instanceof j))throw w}if(m.length===0)throw j.getChecksumInstance();for(let w=0;w<m.length;w++)if(m[w]<d[w].length-1){m[w]++;break}else if(m[w]=0,w===m.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(r){let o=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let h=0;h<o.length;h++)for(let d=0;d<o[h].length;d++)o[h][d]=new Cn;let l=0;for(let h of r.getDetectionResultColumns()){if(h!=null){for(let d of h.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(r,o){return o>=0&&o<=r.getBarcodeColumnCount()+1}static getStartColumn(r,o,l,h){let d=h?1:-1,m=null;if(at.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(at.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let p=0;for(;at.isValidBarcodeColumn(r,o-d);){o-=d;for(let w of r.getDetectionResultColumn(o).getCodewords())if(w!=null)return(h?w.getEndX():w.getStartX())+d*p*(w.getEndX()-w.getStartX());p++}return h?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,o,l,h,d,m,p,w){d=at.adjustCodewordStartColumn(r,o,l,h,d,m);let C=at.getModuleBitCount(r,o,l,h,d,m);if(C==null)return null;let b,M=pt.sum(C);if(h)b=d+M;else{for(let W=0;W<C.length/2;W++){let K=C[W];C[W]=C[C.length-1-W],C[C.length-1-W]=K}b=d,d=b-M}if(!at.checkCodewordSkew(M,p,w))return null;let P=ar.getDecodedValue(C),z=Ze.getCodeword(P);return z===-1?null:new yi(d,b,at.getCodewordBucketNumber(P),z)}static getModuleBitCount(r,o,l,h,d,m){let p=d,w=new Int32Array(8),C=0,b=h?1:-1,M=h;for(;(h?p<l:p>=o)&&C<w.length;)r.get(p,m)===M?(w[C]++,p+=b):(C++,M=!M);return C===w.length||p===(h?l:o)&&C===w.length-1?w:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,o,l,h,d,m){let p=d,w=h?-1:1;for(let C=0;C<2;C++){for(;(h?p>=o:p<l)&&h===r.get(p,m);){if(Math.abs(d-p)>at.CODEWORD_SKEW_SIZE)return d;p+=w}w=-w,h=!h}return p}static checkCodewordSkew(r,o,l){return o-at.CODEWORD_SKEW_SIZE<=r&&r<=l+at.CODEWORD_SKEW_SIZE}static decodeCodewords(r,o,l){if(r.length===0)throw H.getFormatInstance();let h=1<<o+1,d=at.correctErrors(r,l,h);at.verifyCodewordCount(r,h);let m=fe.decode(r,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(r,o,l){if(o!=null&&o.length>l/2+at.MAX_ERRORS||l<0||l>at.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return at.errorCorrection.decode(r,l,o)}static verifyCodewordCount(r,o){if(r.length<4)throw H.getFormatInstance();let l=r[0];if(l>r.length)throw H.getFormatInstance();if(l===0)if(o<r.length)r[0]=r.length-o;else throw H.getFormatInstance()}static getBitCountForCodeword(r){let o=new Int32Array(8),l=0,h=o.length-1;for(;!((r&1)!==l&&(l=r&1,h--,h<0));)o[h]++,r>>=1;return o}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return at.getCodewordBucketNumber(at.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let o=new Lr;for(let l=0;l<r.length;l++){o.format("Row %2d: ",l);for(let h=0;h<r[l].length;h++){let d=r[l][h];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}at.CODEWORD_SKEW_SIZE=2,at.MAX_ERRORS=3,at.MAX_EC_CODEWORDS=512,at.errorCorrection=new Bi;class qn{decode(r,o=null){let l=qn.decode(r,o,!1);if(l==null||l.length===0||l[0]==null)throw ce.getNotFoundInstance();return l[0]}decodeMultiple(r,o=null){try{return qn.decode(r,o,!0)}catch(l){throw l instanceof H||l instanceof j?ce.getNotFoundInstance():l}}static decode(r,o,l){const h=new Array,d=$e.detectMultiple(r,o,l);for(const m of d.getPoints()){const p=at.decode(d.getBits(),m[4],m[5],m[6],m[7],qn.getMinCodewordWidth(m),qn.getMaxCodewordWidth(m)),w=new Pe(p.getText(),p.getRawBytes(),void 0,m,Ne.PDF_417);w.putMetadata(et.ERROR_CORRECTION_LEVEL,p.getECLevel());const C=p.getOther();C!=null&&w.putMetadata(et.PDF417_EXTRA_METADATA,C),h.push(w)}return h.map(m=>m)}static getMaxWidth(r,o){return r==null||o==null?0:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMinWidth(r,o){return r==null||o==null?ue.MAX_VALUE:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(qn.getMaxWidth(r[0],r[4]),qn.getMaxWidth(r[6],r[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.max(qn.getMaxWidth(r[1],r[5]),qn.getMaxWidth(r[7],r[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(qn.getMinWidth(r[0],r[4]),qn.getMinWidth(r[6],r[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.min(qn.getMinWidth(r[1],r[5]),qn.getMinWidth(r[7],r[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class fs extends A{}fs.kind="ReaderException";class ds{constructor(r,o){this.verbose=r===!0,o&&this.setHints(o)}decode(r,o){return o&&this.setHints(o),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const o=!a(r)&&r.get(ke.TRY_HARDER)===!0,l=a(r)?null:r.get(ke.POSSIBLE_FORMATS),h=new Array;if(!a(l)){const d=l.some(m=>m===Ne.UPC_A||m===Ne.UPC_E||m===Ne.EAN_13||m===Ne.EAN_8||m===Ne.CODABAR||m===Ne.CODE_39||m===Ne.CODE_93||m===Ne.CODE_128||m===Ne.ITF||m===Ne.RSS_14||m===Ne.RSS_EXPANDED);d&&!o&&h.push(new Zn(r,this.verbose)),l.includes(Ne.QR_CODE)&&h.push(new si),l.includes(Ne.DATA_MATRIX)&&h.push(new ni),l.includes(Ne.AZTEC)&&h.push(new _a),l.includes(Ne.PDF_417)&&h.push(new qn),d&&o&&h.push(new Zn(r,this.verbose))}h.length===0&&(o||h.push(new Zn(r,this.verbose)),h.push(new si),h.push(new ni),h.push(new _a),h.push(new qn),o&&h.push(new Zn(r,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new fs("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(r,this.hints)}catch(l){if(l instanceof fs)continue}throw new ce("No MultiFormat Readers were able to detect the code.")}}class Wo extends Ue{constructor(r=null,o=500){const l=new ds;l.setHints(r),super(l,o)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Qo extends Ue{constructor(r=500){super(new qn,r)}}class po extends Ue{constructor(r=500){super(new si,r)}}var ns;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(ns||(ns={}));var Sn=ns;class gs{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Qt(r,Int32Array.from([1])))}buildGenerator(r){const o=this.cachedGenerators;if(r>=o.length){let l=o[o.length-1];const h=this.field;for(let d=o.length;d<=r;d++){const m=l.multiply(new Qt(h,Int32Array.from([1,h.exp(d-1+h.getGeneratorBase())])));o.push(m),l=m}}return o[r]}encode(r,o){if(o===0)throw new R("No error correction bytes");const l=r.length-o;if(l<=0)throw new R("No data bytes provided");const h=this.buildGenerator(o),d=new Int32Array(l);$.arraycopy(r,0,d,0,l);let m=new Qt(this.field,d);m=m.multiplyByMonomial(o,1);const w=m.divide(h)[1].getCoefficients(),C=o-w.length;for(let b=0;b<C;b++)r[l+b]=0;$.arraycopy(w,0,r,l+C,w.length)}}class ln{constructor(){}static applyMaskPenaltyRule1(r){return ln.applyMaskPenaltyRule1Internal(r,!0)+ln.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let m=0;m<d-1;m++){const p=l[m];for(let w=0;w<h-1;w++){const C=p[w];C===p[w+1]&&C===l[m+1][w]&&C===l[m+1][w+1]&&o++}}return ln.N2*o}static applyMaskPenaltyRule3(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let m=0;m<d;m++)for(let p=0;p<h;p++){const w=l[m];p+6<h&&w[p]===1&&w[p+1]===0&&w[p+2]===1&&w[p+3]===1&&w[p+4]===1&&w[p+5]===0&&w[p+6]===1&&(ln.isWhiteHorizontal(w,p-4,p)||ln.isWhiteHorizontal(w,p+7,p+11))&&o++,m+6<d&&l[m][p]===1&&l[m+1][p]===0&&l[m+2][p]===1&&l[m+3][p]===1&&l[m+4][p]===1&&l[m+5][p]===0&&l[m+6][p]===1&&(ln.isWhiteVertical(l,p,m-4,m)||ln.isWhiteVertical(l,p,m+7,m+11))&&o++}return o*ln.N3}static isWhiteHorizontal(r,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let h=o;h<l;h++)if(r[h]===1)return!1;return!0}static isWhiteVertical(r,o,l,h){l=Math.max(l,0),h=Math.min(h,r.length);for(let d=l;d<h;d++)if(r[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let w=0;w<d;w++){const C=l[w];for(let b=0;b<h;b++)C[b]===1&&o++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*ln.N4}static getDataMaskBit(r,o,l){let h,d;switch(r){case 0:h=l+o&1;break;case 1:h=l&1;break;case 2:h=o%3;break;case 3:h=(l+o)%3;break;case 4:h=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,h=(d&1)+d%3;break;case 6:d=l*o,h=(d&1)+d%3&1;break;case 7:d=l*o,h=d%3+(l+o&1)&1;break;default:throw new R("Invalid mask pattern: "+r)}return h===0}static applyMaskPenaltyRule1Internal(r,o){let l=0;const h=o?r.getHeight():r.getWidth(),d=o?r.getWidth():r.getHeight(),m=r.getArray();for(let p=0;p<h;p++){let w=0,C=-1;for(let b=0;b<d;b++){const M=o?m[p][b]:m[b][p];M===C?w++:(w>=5&&(l+=ln.N1+(w-5)),w=1,C=M)}w>=5&&(l+=ln.N1+(w-5))}return l}}ln.N1=3,ln.N2=3,ln.N3=40,ln.N4=10;class ms{constructor(r,o){this.width=r,this.height=o;const l=new Array(o);for(let h=0;h!==o;h++)l[h]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,o){return this.bytes[o][r]}getArray(){return this.bytes}setNumber(r,o,l){this.bytes[o][r]=l}setBoolean(r,o,l){this.bytes[o][r]=l?1:0}clear(r){for(const o of this.bytes)me.fill(o,r)}equals(r){if(!(r instanceof ms))return!1;const o=r;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,h=this.height;l<h;++l){const d=this.bytes[l],m=o.bytes[l];for(let p=0,w=this.width;p<w;++p)if(d[p]!==m[p])return!1}return!0}toString(){const r=new G;for(let o=0,l=this.height;o<l;++o){const h=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(h[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class _r{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new G;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<_r.NUM_MASK_PATTERNS}}_r.NUM_MASK_PATTERNS=8;class qt extends A{}qt.kind="WriterException";class Qe{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,o,l,h,d){Qe.clearMatrix(d),Qe.embedBasicPatterns(l,d),Qe.embedTypeInfo(o,h,d),Qe.maybeEmbedVersionInfo(l,d),Qe.embedDataBits(r,h,d)}static embedBasicPatterns(r,o){Qe.embedPositionDetectionPatternsAndSeparators(o),Qe.embedDarkDotAtLeftBottomCorner(o),Qe.maybeEmbedPositionAdjustmentPatterns(r,o),Qe.embedTimingPatterns(o)}static embedTypeInfo(r,o,l){const h=new De;Qe.makeTypeInfoBits(r,o,h);for(let d=0,m=h.getSize();d<m;++d){const p=h.get(h.getSize()-1-d),w=Qe.TYPE_INFO_COORDINATES[d],C=w[0],b=w[1];if(l.setBoolean(C,b,p),d<8){const M=l.getWidth()-d-1;l.setBoolean(M,8,p)}else{const P=l.getHeight()-7+(d-8);l.setBoolean(8,P,p)}}}static maybeEmbedVersionInfo(r,o){if(r.getVersionNumber()<7)return;const l=new De;Qe.makeVersionInfoBits(r,l);let h=6*3-1;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const p=l.get(h);h--,o.setBoolean(d,o.getHeight()-11+m,p),o.setBoolean(o.getHeight()-11+m,d,p)}}static embedDataBits(r,o,l){let h=0,d=-1,m=l.getWidth()-1,p=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);p>=0&&p<l.getHeight();){for(let w=0;w<2;++w){const C=m-w;if(!Qe.isEmpty(l.get(C,p)))continue;let b;h<r.getSize()?(b=r.get(h),++h):b=!1,o!==255&&ln.getDataMaskBit(o,C,p)&&(b=!b),l.setBoolean(C,p,b)}p+=d}d=-d,p+=d,m-=2}if(h!==r.getSize())throw new qt("Not all bits consumed: "+h+"/"+r.getSize())}static findMSBSet(r){return 32-ue.numberOfLeadingZeros(r)}static calculateBCHCode(r,o){if(o===0)throw new R("0 polynomial");const l=Qe.findMSBSet(o);for(r<<=l-1;Qe.findMSBSet(r)>=l;)r^=o<<Qe.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,o,l){if(!_r.isValidMaskPattern(o))throw new qt("Invalid mask pattern");const h=r.getBits()<<3|o;l.appendBits(h,5);const d=Qe.calculateBCHCode(h,Qe.TYPE_INFO_POLY);l.appendBits(d,10);const m=new De;if(m.appendBits(Qe.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new qt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,o){o.appendBits(r.getVersionNumber(),6);const l=Qe.calculateBCHCode(r.getVersionNumber(),Qe.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new qt("should not happen but we got: "+o.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let o=8;o<r.getWidth()-8;++o){const l=(o+1)%2;Qe.isEmpty(r.get(o,6))&&r.setNumber(o,6,l),Qe.isEmpty(r.get(6,o))&&r.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new qt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,o,l){for(let h=0;h<8;++h){if(!Qe.isEmpty(l.get(r+h,o)))throw new qt;l.setNumber(r+h,o,0)}}static embedVerticalSeparationPattern(r,o,l){for(let h=0;h<7;++h){if(!Qe.isEmpty(l.get(r,o+h)))throw new qt;l.setNumber(r,o+h,0)}}static embedPositionAdjustmentPattern(r,o,l){for(let h=0;h<5;++h){const d=Qe.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(r+m,o+h,d[m])}}static embedPositionDetectionPattern(r,o,l){for(let h=0;h<7;++h){const d=Qe.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(r+m,o+h,d[m])}}static embedPositionDetectionPatternsAndSeparators(r){const o=Qe.POSITION_DETECTION_PATTERN[0].length;Qe.embedPositionDetectionPattern(0,0,r),Qe.embedPositionDetectionPattern(r.getWidth()-o,0,r),Qe.embedPositionDetectionPattern(0,r.getWidth()-o,r);const l=8;Qe.embedHorizontalSeparationPattern(0,l-1,r),Qe.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),Qe.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const h=7;Qe.embedVerticalSeparationPattern(h,0,r),Qe.embedVerticalSeparationPattern(r.getHeight()-h-1,0,r),Qe.embedVerticalSeparationPattern(h,r.getHeight()-h,r)}static maybeEmbedPositionAdjustmentPatterns(r,o){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,h=Qe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=h.length;d!==m;d++){const p=h[d];if(p>=0)for(let w=0;w!==m;w++){const C=h[w];C>=0&&Qe.isEmpty(o.get(C,p))&&Qe.embedPositionAdjustmentPattern(C-2,p-2,o)}}}}Qe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Qe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Qe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Qe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Qe.VERSION_INFO_POLY=7973,Qe.TYPE_INFO_POLY=1335,Qe.TYPE_INFO_MASK_PATTERN=21522;class Ko{constructor(r,o){this.dataBytes=r,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Kt{constructor(){}static calculateMaskPenalty(r){return ln.applyMaskPenaltyRule1(r)+ln.applyMaskPenaltyRule2(r)+ln.applyMaskPenaltyRule3(r)+ln.applyMaskPenaltyRule4(r)}static encode(r,o,l=null){let h=Kt.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Sn.CHARACTER_SET)!==void 0;d&&(h=l.get(Sn.CHARACTER_SET).toString());const m=this.chooseMode(r,h),p=new De;if(m===We.BYTE&&(d||Kt.DEFAULT_BYTE_MODE_ENCODING!==h)){const Re=L.getCharacterSetECIByName(h);Re!==void 0&&this.appendECI(Re,p)}this.appendModeInfo(m,p);const w=new De;this.appendBytes(r,m,w,h);let C;if(l!==null&&l.get(Sn.QR_VERSION)!==void 0){const Re=Number.parseInt(l.get(Sn.QR_VERSION).toString(),10);C=Me.getVersionForNumber(Re);const Te=this.calculateBitsNeeded(m,p,w,C);if(!this.willFit(Te,C,o))throw new qt("Data too big for requested version")}else C=this.recommendVersion(o,m,p,w);const b=new De;b.appendBitArray(p);const M=m===We.BYTE?w.getSizeInBytes():r.length;this.appendLengthInfo(M,C,m,b),b.appendBitArray(w);const P=C.getECBlocksForLevel(o),z=C.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(z,b);const W=this.interleaveWithECBytes(b,C.getTotalCodewords(),z,P.getNumBlocks()),K=new _r;K.setECLevel(o),K.setMode(m),K.setVersion(C);const oe=C.getDimensionForVersion(),ge=new ms(oe,oe),Ce=this.chooseMaskPattern(W,o,C,ge);return K.setMaskPattern(Ce),Qe.buildMatrix(W,o,C,Ce,ge),K.setMatrix(ge),K}static recommendVersion(r,o,l,h){const d=this.calculateBitsNeeded(o,l,h,Me.getVersionForNumber(1)),m=this.chooseVersion(d,r),p=this.calculateBitsNeeded(o,l,h,m);return this.chooseVersion(p,r)}static calculateBitsNeeded(r,o,l,h){return o.getSize()+r.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(r){return r<Kt.ALPHANUMERIC_TABLE.length?Kt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,o=null){if(L.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(r))return We.KANJI;let l=!1,h=!1;for(let d=0,m=r.length;d<m;++d){const p=r.charAt(d);if(Kt.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)h=!0;else return We.BYTE}return h?We.ALPHANUMERIC:l?We.NUMERIC:We.BYTE}static isOnlyDoubleByteKanji(r){let o;try{o=Z.encode(r,L.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const d=o[h]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,o,l,h){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let p=0;p<_r.NUM_MASK_PATTERNS;p++){Qe.buildMatrix(r,o,l,p,h);let w=this.calculateMaskPenalty(h);w<d&&(d=w,m=p)}return m}static chooseVersion(r,o){for(let l=1;l<=40;l++){const h=Me.getVersionForNumber(l);if(Kt.willFit(r,h,o))return h}throw new qt("Data too big")}static willFit(r,o,l){const h=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),p=h-m,w=(r+7)/8;return p>=w}static terminateBits(r,o){const l=r*8;if(o.getSize()>l)throw new qt("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const h=o.getSize()&7;if(h>0)for(let m=h;m<8;m++)o.appendBit(!1);const d=r-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits((m&1)===0?236:17,8);if(o.getSize()!==l)throw new qt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,o,l,h,d,m){if(h>=l)throw new qt("Block ID too large");const p=r%l,w=l-p,C=Math.floor(r/l),b=C+1,M=Math.floor(o/l),P=M+1,z=C-M,W=b-P;if(z!==W)throw new qt("EC bytes mismatch");if(l!==w+p)throw new qt("RS blocks mismatch");if(r!==(M+z)*w+(P+W)*p)throw new qt("Total bytes mismatch");h<w?(d[0]=M,m[0]=z):(d[0]=P,m[0]=W)}static interleaveWithECBytes(r,o,l,h){if(r.getSizeInBytes()!==l)throw new qt("Number of bits and data bytes does not match");let d=0,m=0,p=0;const w=new Array;for(let b=0;b<h;++b){const M=new Int32Array(1),P=new Int32Array(1);Kt.getNumDataBytesAndNumECBytesForBlockID(o,l,h,b,M,P);const z=M[0],W=new Uint8Array(z);r.toBytes(8*d,W,0,z);const K=Kt.generateECBytes(W,P[0]);w.push(new Ko(W,K)),m=Math.max(m,z),p=Math.max(p,K.length),d+=M[0]}if(l!==d)throw new qt("Data bytes does not match offset");const C=new De;for(let b=0;b<m;++b)for(const M of w){const P=M.getDataBytes();b<P.length&&C.appendBits(P[b],8)}for(let b=0;b<p;++b)for(const M of w){const P=M.getErrorCorrectionBytes();b<P.length&&C.appendBits(P[b],8)}if(o!==C.getSizeInBytes())throw new qt("Interleaving error: "+o+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(r,o){const l=r.length,h=new Int32Array(l+o);for(let m=0;m<l;m++)h[m]=r[m]&255;new gs(ut.QR_CODE_FIELD_256).encode(h,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=h[l+m];return d}static appendModeInfo(r,o){o.appendBits(r.getBits(),4)}static appendLengthInfo(r,o,l,h){const d=l.getCharacterCountBits(o);if(r>=1<<d)throw new qt(r+" is bigger than "+((1<<d)-1));h.appendBits(r,d)}static appendBytes(r,o,l,h){switch(o){case We.NUMERIC:Kt.appendNumericBytes(r,l);break;case We.ALPHANUMERIC:Kt.appendAlphanumericBytes(r,l);break;case We.BYTE:Kt.append8BitBytes(r,l,h);break;case We.KANJI:Kt.appendKanjiBytes(r,l);break;default:throw new qt("Invalid mode: "+o)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const o=Kt.getDigit(r);return o>=0&&o<=9}static appendNumericBytes(r,o){const l=r.length;let h=0;for(;h<l;){const d=Kt.getDigit(r.charAt(h));if(h+2<l){const m=Kt.getDigit(r.charAt(h+1)),p=Kt.getDigit(r.charAt(h+2));o.appendBits(d*100+m*10+p,10),h+=3}else if(h+1<l){const m=Kt.getDigit(r.charAt(h+1));o.appendBits(d*10+m,7),h+=2}else o.appendBits(d,4),h++}}static appendAlphanumericBytes(r,o){const l=r.length;let h=0;for(;h<l;){const d=Kt.getAlphanumericCode(r.charCodeAt(h));if(d===-1)throw new qt;if(h+1<l){const m=Kt.getAlphanumericCode(r.charCodeAt(h+1));if(m===-1)throw new qt;o.appendBits(d*45+m,11),h+=2}else o.appendBits(d,6),h++}}static append8BitBytes(r,o,l){let h;try{h=Z.encode(r,l)}catch(d){throw new qt(d)}for(let d=0,m=h.length;d!==m;d++){const p=h[d];o.appendBits(p,8)}}static appendKanjiBytes(r,o){let l;try{l=Z.encode(r,L.SJIS)}catch(d){throw new qt(d)}const h=l.length;for(let d=0;d<h;d+=2){const m=l[d]&255,p=l[d+1]&255,w=m<<8&4294967295|p;let C=-1;if(w>=33088&&w<=40956?C=w-33088:w>=57408&&w<=60351&&(C=w-49472),C===-1)throw new qt("Invalid byte sequence");const b=(C>>8)*192+(C&255);o.appendBits(b,13)}}static appendECI(r,o){o.appendBits(We.ECI.getBits(),4),o.appendBits(r.getValue(),8)}}Kt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Kt.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class li{write(r,o,l,h=null){if(r.length===0)throw new R("Found empty contents");if(o<0||l<0)throw new R("Requested dimensions are too small: "+o+"x"+l);let d=rt.L,m=li.QUIET_ZONE_SIZE;h!==null&&(h.get(Sn.ERROR_CORRECTION)!==void 0&&(d=rt.fromString(h.get(Sn.ERROR_CORRECTION).toString())),h.get(Sn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Sn.MARGIN).toString(),10)));const p=Kt.encode(r,d,h);return this.renderResult(p,o,l,m)}writeToDom(r,o,l,h,d=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(o,l,h,d);r&&r.appendChild(m)}renderResult(r,o,l,h){const d=r.getMatrix();if(d===null)throw new ir;const m=d.getWidth(),p=d.getHeight(),w=m+h*2,C=p+h*2,b=Math.max(o,w),M=Math.max(l,C),P=Math.min(Math.floor(b/w),Math.floor(M/C)),z=Math.floor((b-m*P)/2),W=Math.floor((M-p*P)/2),K=this.createSVGElement(b,M);for(let oe=0,ge=W;oe<p;oe++,ge+=P)for(let Ce=0,Re=z;Ce<m;Ce++,Re+=P)if(d.get(Ce,oe)===1){const Te=this.createSvgRectElement(Re,ge,P,P);K.appendChild(Te)}return K}createSVGElement(r,o){const l=document.createElementNS(li.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(r,o,l,h){const d=document.createElementNS(li.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",h.toString()),d.setAttributeNS(null,"fill","#000000"),d}}li.QUIET_ZONE_SIZE=4,li.SVG_NS="http://www.w3.org/2000/svg";class Bn{encode(r,o,l,h,d){if(r.length===0)throw new R("Found empty contents");if(o!==Ne.QR_CODE)throw new R("Can only encode QR_CODE, but got "+o);if(l<0||h<0)throw new R(`Requested dimensions are too small: ${l}x${h}`);let m=rt.L,p=Bn.QUIET_ZONE_SIZE;d!==null&&(d.get(Sn.ERROR_CORRECTION)!==void 0&&(m=rt.fromString(d.get(Sn.ERROR_CORRECTION).toString())),d.get(Sn.MARGIN)!==void 0&&(p=Number.parseInt(d.get(Sn.MARGIN).toString(),10)));const w=Kt.encode(r,m,d);return Bn.renderResult(w,l,h,p)}static renderResult(r,o,l,h){const d=r.getMatrix();if(d===null)throw new ir;const m=d.getWidth(),p=d.getHeight(),w=m+h*2,C=p+h*2,b=Math.max(o,w),M=Math.max(l,C),P=Math.min(Math.floor(b/w),Math.floor(M/C)),z=Math.floor((b-m*P)/2),W=Math.floor((M-p*P)/2),K=new ft(b,M);for(let oe=0,ge=W;oe<p;oe++,ge+=P)for(let Ce=0,Re=z;Ce<m;Ce++,Re+=P)d.get(Ce,oe)===1&&K.setRegion(Re,ge,P,P);return K}}Bn.QUIET_ZONE_SIZE=4;class Zo{encode(r,o,l,h,d){let m;switch(o){case Ne.QR_CODE:m=new Bn;break;default:throw new R("No encoder available for format "+o)}return m.encode(r,o,l,h,d)}}class Wr extends Ye{constructor(r,o,l,h,d,m,p,w){if(super(m,p),this.yuvData=r,this.dataWidth=o,this.dataHeight=l,this.left=h,this.top=d,h+m>o||d+p>l)throw new R("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(m,p)}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return $.arraycopy(this.yuvData,h,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=r*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return $.arraycopy(this.yuvData,d,h,0,l),h;for(let m=0;m<o;m++){const p=m*r;$.arraycopy(this.yuvData,d,h,p,r),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,o,l,h){return new Wr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+o,l,h,!1)}renderThumbnail(){const r=this.getWidth()/Wr.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Wr.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*o),h=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const p=m*r;for(let w=0;w<r;w++){const C=h[d+w*Wr.THUMBNAIL_SCALE_FACTOR]&255;l[p+w]=4278190080|C*65793}d+=this.dataWidth*Wr.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Wr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Wr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,o){const l=this.yuvData;for(let h=0,d=this.top*this.dataWidth+this.left;h<o;h++,d+=this.dataWidth){const m=d+r/2;for(let p=d,w=d+r-1;p<m;p++,w--){const C=l[p];l[p]=l[w],l[w]=C}}}invert(){return new Et(this)}}Wr.THUMBNAIL_SCALE_FACTOR=2;class ui extends Ye{constructor(r,o,l,h,d,m,p){if(super(o,l),this.dataWidth=h,this.dataHeight=d,this.left=m,this.top=p,r.BYTES_PER_ELEMENT===4){const w=o*l,C=new Uint8ClampedArray(w);for(let b=0;b<w;b++){const M=r[b],P=M>>16&255,z=M>>7&510,W=M&255;C[b]=(P+z+W)/4&255}this.luminances=C}else this.luminances=r;if(h===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return $.arraycopy(this.luminances,h,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=r*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return $.arraycopy(this.luminances,d,h,0,l),h;for(let m=0;m<o;m++){const p=m*r;$.arraycopy(this.luminances,d,h,p,r),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,o,l,h){return new ui(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+r,this.top+o)}invert(){return new Et(this)}}class y extends L{static forName(r){return this.getCharacterSetECIByName(r)}}class S{}S.ISO_8859_1=L.ISO8859_1;class N{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class U{static singletonList(r){return[r]}static min(r,o){return r.sort(o)[0]}}class se{constructor(r){this.previous=r}getPrevious(){return this.previous}}class de extends se{constructor(r,o,l){super(r),this.value=o,this.bitCount=l}appendTo(r,o){r.appendBits(this.value,this.bitCount)}add(r,o){return new de(this,r,o)}addBinaryShift(r,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new de(this,r,o)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+ue.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Le extends de{constructor(r,o,l){super(r,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(r,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(r,o){return new Le(this,r,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function bt(O,r,o){return new Le(O,r,o)}function _n(O,r,o){return new de(O,r,o)}const Rt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],un=0,In=1,kn=2,Jn=3,Yn=4,yo=new de(null,0,0),Ta=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function vc(O){for(let r of O)me.fill(r,-1);return O[un][Yn]=0,O[In][Yn]=0,O[In][un]=28,O[Jn][Yn]=0,O[kn][Yn]=0,O[kn][un]=15,O}const ru=vc(me.createInt32Array(6,6));class ci{constructor(r,o,l,h){this.token=r,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,o){let l=this.bitCount,h=this.token;if(r!==this.mode){let m=Ta[this.mode][r];h=_n(h,m&65535,m>>16),l+=m>>16}let d=r===kn?4:5;return h=_n(h,o,d),new ci(h,r,0,l+d)}shiftAndAppend(r,o){let l=this.token,h=this.mode===kn?4:5;return l=_n(l,ru[this.mode][r],h),l=_n(l,o,5),new ci(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(r){let o=this.token,l=this.mode,h=this.bitCount;if(this.mode===Yn||this.mode===kn){let p=Ta[l][un];o=_n(o,p&65535,p>>16),h+=p>>16,l=un}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new ci(o,l,this.binaryShiftByteCount+1,h+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=bt(o,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new ci(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let o=this.bitCount+(Ta[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?o+=ci.calculateBinaryShiftCost(r)-ci.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(o+=10),o<=r.bitCount}toBitArray(r){let o=[];for(let h=this.endBinaryShift(r.length).token;h!==null;h=h.getPrevious())o.unshift(h);let l=new De;for(const h of o)h.appendTo(l,r);return l}toString(){return Q.format("%s bits=%d bytes=%d",Rt[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}ci.INITIAL_STATE=new ci(yo,un,0,0);function iu(O){const r=Q.getCharCode(" "),o=Q.getCharCode("."),l=Q.getCharCode(",");O[un][r]=1;const h=Q.getCharCode("Z"),d=Q.getCharCode("A");for(let P=d;P<=h;P++)O[un][P]=P-d+2;O[In][r]=1;const m=Q.getCharCode("z"),p=Q.getCharCode("a");for(let P=p;P<=m;P++)O[In][P]=P-p+2;O[kn][r]=1;const w=Q.getCharCode("9"),C=Q.getCharCode("0");for(let P=C;P<=w;P++)O[kn][P]=P-C+2;O[kn][l]=12,O[kn][o]=13;const b=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<b.length;P++)O[Jn][Q.getCharCode(b[P])]=P;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<M.length;P++)Q.getCharCode(M[P])>0&&(O[Yn][Q.getCharCode(M[P])]=P);return O}const Jo=iu(me.createInt32Array(5,256));class va{constructor(r){this.text=r}encode(){const r=Q.getCharCode(" "),o=Q.getCharCode(`
`);let l=U.singletonList(ci.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Q.getCharCode("\r"):m=p===o?2:0;break;case Q.getCharCode("."):m=p===r?3:0;break;case Q.getCharCode(","):m=p===r?4:0;break;case Q.getCharCode(":"):m=p===r?5:0;break;default:m=0}m>0?(l=va.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return U.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,o){const l=[];for(let h of r)this.updateStateForChar(h,o,l);return va.simplifyStates(l)}updateStateForChar(r,o,l){let h=this.text[o]&255,d=Jo[r.getMode()][h]>0,m=null;for(let p=0;p<=Yn;p++){let w=Jo[p][h];if(w>0){if(m==null&&(m=r.endBinaryShift(o)),!d||p===r.getMode()||p===kn){const C=m.latchAndAppend(p,w);l.push(C)}if(!d&&ru[r.getMode()][p]>=0){const C=m.shiftAndAppend(p,w);l.push(C)}}}if(r.getBinaryShiftByteCount()>0||Jo[r.getMode()][h]===0){let p=r.addBinaryShiftChar(o);l.push(p)}}static updateStateListForPair(r,o,l){const h=[];for(let d of r)this.updateStateForPair(d,o,l,h);return this.simplifyStates(h)}static updateStateForPair(r,o,l,h){let d=r.endBinaryShift(o);if(h.push(d.latchAndAppend(Yn,l)),r.getMode()!==Yn&&h.push(d.shiftAndAppend(Yn,l)),l===3||l===4){let m=d.latchAndAppend(kn,16-l).latchAndAppend(kn,1);h.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(o).addBinaryShiftChar(o+1);h.push(m)}}static simplifyStates(r){let o=[];for(const l of r){let h=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}h&&o.push(l)}return o}}class Nt{constructor(){}static encodeBytes(r){return Nt.encode(r,Nt.DEFAULT_EC_PERCENT,Nt.DEFAULT_AZTEC_LAYERS)}static encode(r,o,l){let h=new va(r).encode(),d=ue.truncDivision(h.getSize()*o,100)+11,m=h.getSize()+d,p,w,C,b,M;if(l!==Nt.DEFAULT_AZTEC_LAYERS){if(p=l<0,w=Math.abs(l),w>(p?Nt.MAX_NB_BITS_COMPACT:Nt.MAX_NB_BITS))throw new R(Q.format("Illegal value %s for layers",l));C=Nt.totalBitsInLayer(w,p),b=Nt.WORD_SIZE[w];let Te=C-C%b;if(M=Nt.stuffBits(h,b),M.getSize()+d>Te)throw new R("Data to large for user specified layer");if(p&&M.getSize()>b*64)throw new R("Data to large for user specified layer")}else{b=0,M=null;for(let Te=0;;Te++){if(Te>Nt.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(p=Te<=3,w=p?Te+1:Te,C=Nt.totalBitsInLayer(w,p),m>C)continue;(M==null||b!==Nt.WORD_SIZE[w])&&(b=Nt.WORD_SIZE[w],M=Nt.stuffBits(h,b));let _t=C-C%b;if(!(p&&M.getSize()>b*64)&&M.getSize()+d<=_t)break}}let P=Nt.generateCheckWords(M,C,b),z=M.getSize()/b,W=Nt.generateModeMessage(p,w,z),K=(p?11:14)+w*4,oe=new Int32Array(K),ge;if(p){ge=K;for(let Te=0;Te<oe.length;Te++)oe[Te]=Te}else{ge=K+1+2*ue.truncDivision(ue.truncDivision(K,2)-1,15);let Te=ue.truncDivision(K,2),_t=ue.truncDivision(ge,2);for(let tt=0;tt<Te;tt++){let Ar=tt+ue.truncDivision(tt,15);oe[Te-tt-1]=_t-Ar-1,oe[Te+tt]=_t+Ar+1}}let Ce=new ft(ge);for(let Te=0,_t=0;Te<w;Te++){let tt=(w-Te)*4+(p?9:12);for(let Ar=0;Ar<tt;Ar++){let hi=Ar*2;for(let wr=0;wr<2;wr++)P.get(_t+hi+wr)&&Ce.set(oe[Te*2+wr],oe[Te*2+Ar]),P.get(_t+tt*2+hi+wr)&&Ce.set(oe[Te*2+Ar],oe[K-1-Te*2-wr]),P.get(_t+tt*4+hi+wr)&&Ce.set(oe[K-1-Te*2-wr],oe[K-1-Te*2-Ar]),P.get(_t+tt*6+hi+wr)&&Ce.set(oe[K-1-Te*2-Ar],oe[Te*2+wr])}_t+=tt*8}if(Nt.drawModeMessage(Ce,p,ge,W),p)Nt.drawBullsEye(Ce,ue.truncDivision(ge,2),5);else{Nt.drawBullsEye(Ce,ue.truncDivision(ge,2),7);for(let Te=0,_t=0;Te<ue.truncDivision(K,2)-1;Te+=15,_t+=16)for(let tt=ue.truncDivision(ge,2)&1;tt<ge;tt+=2)Ce.set(ue.truncDivision(ge,2)-_t,tt),Ce.set(ue.truncDivision(ge,2)+_t,tt),Ce.set(tt,ue.truncDivision(ge,2)-_t),Ce.set(tt,ue.truncDivision(ge,2)+_t)}let Re=new N;return Re.setCompact(p),Re.setSize(ge),Re.setLayers(w),Re.setCodeWords(z),Re.setMatrix(Ce),Re}static drawBullsEye(r,o,l){for(let h=0;h<l;h+=2)for(let d=o-h;d<=o+h;d++)r.set(d,o-h),r.set(d,o+h),r.set(o-h,d),r.set(o+h,d);r.set(o-l,o-l),r.set(o-l+1,o-l),r.set(o-l,o-l+1),r.set(o+l,o-l),r.set(o+l,o-l+1),r.set(o+l,o+l-1)}static generateModeMessage(r,o,l){let h=new De;return r?(h.appendBits(o-1,2),h.appendBits(l-1,6),h=Nt.generateCheckWords(h,28,4)):(h.appendBits(o-1,5),h.appendBits(l-1,11),h=Nt.generateCheckWords(h,40,4)),h}static drawModeMessage(r,o,l,h){let d=ue.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let p=d-3+m;h.get(m)&&r.set(p,d-5),h.get(m+7)&&r.set(d+5,p),h.get(20-m)&&r.set(p,d+5),h.get(27-m)&&r.set(d-5,p)}else for(let m=0;m<10;m++){let p=d-5+m+ue.truncDivision(m,5);h.get(m)&&r.set(p,d-7),h.get(m+10)&&r.set(d+7,p),h.get(29-m)&&r.set(p,d+7),h.get(39-m)&&r.set(d-7,p)}}static generateCheckWords(r,o,l){let h=r.getSize()/l,d=new gs(Nt.getGF(l)),m=ue.truncDivision(o,l),p=Nt.bitsToWords(r,l,m);d.encode(p,m-h);let w=o%l,C=new De;C.appendBits(0,w);for(const b of Array.from(p))C.appendBits(b,l);return C}static bitsToWords(r,o,l){let h=new Int32Array(l),d,m;for(d=0,m=r.getSize()/o;d<m;d++){let p=0;for(let w=0;w<o;w++)p|=r.get(d*o+w)?1<<o-w-1:0;h[d]=p}return h}static getGF(r){switch(r){case 4:return ut.AZTEC_PARAM;case 6:return ut.AZTEC_DATA_6;case 8:return ut.AZTEC_DATA_8;case 10:return ut.AZTEC_DATA_10;case 12:return ut.AZTEC_DATA_12;default:throw new R("Unsupported word size "+r)}}static stuffBits(r,o){let l=new De,h=r.getSize(),d=(1<<o)-2;for(let m=0;m<h;m+=o){let p=0;for(let w=0;w<o;w++)(m+w>=h||r.get(m+w))&&(p|=1<<o-1-w);(p&d)===d?(l.appendBits(p&d,o),m--):(p&d)===0?(l.appendBits(p|1,o),m--):l.appendBits(p,o)}return l}static totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}Nt.DEFAULT_EC_PERCENT=33,Nt.DEFAULT_AZTEC_LAYERS=0,Nt.MAX_NB_BITS=32,Nt.MAX_NB_BITS_COMPACT=4,Nt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class $o{encode(r,o,l,h){return this.encodeWithHints(r,o,l,h,null)}encodeWithHints(r,o,l,h,d){let m=S.ISO_8859_1,p=Nt.DEFAULT_EC_PERCENT,w=Nt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Sn.CHARACTER_SET)&&(m=y.forName(d.get(Sn.CHARACTER_SET).toString())),d.has(Sn.ERROR_CORRECTION)&&(p=ue.parseInt(d.get(Sn.ERROR_CORRECTION).toString())),d.has(Sn.AZTEC_LAYERS)&&(w=ue.parseInt(d.get(Sn.AZTEC_LAYERS).toString()))),$o.encodeLayers(r,o,l,h,m,p,w)}static encodeLayers(r,o,l,h,d,m,p){if(o!==Ne.AZTEC)throw new R("Can only encode AZTEC, but got "+o);let w=Nt.encode(Q.getBytes(r,d),m,p);return $o.renderResult(w,l,h)}static renderResult(r,o,l){let h=r.getMatrix();if(h==null)throw new ir;let d=h.getWidth(),m=h.getHeight(),p=Math.max(o,d),w=Math.max(l,m),C=Math.min(p/d,w/m),b=(p-d*C)/2,M=(w-m*C)/2,P=new ft(p,w);for(let z=0,W=M;z<m;z++,W+=C)for(let K=0,oe=b;K<d;K++,oe+=C)h.get(K,z)&&P.setRegion(oe,W,C,C);return P}}t.AbstractExpandedDecoder=Rn,t.ArgumentException=I,t.ArithmeticException=$r,t.AztecCode=N,t.AztecCodeReader=_a,t.AztecCodeWriter=$o,t.AztecDecoder=Vt,t.AztecDetector=Ea,t.AztecDetectorResult=pa,t.AztecEncoder=Nt,t.AztecHighLevelEncoder=va,t.AztecPoint=Qn,t.BarcodeFormat=Ne,t.Binarizer=q,t.BinaryBitmap=B,t.BitArray=De,t.BitMatrix=ft,t.BitSource=Or,t.BrowserAztecCodeReader=Os,t.BrowserBarcodeReader=eu,t.BrowserCodeReader=Ue,t.BrowserDatamatrixCodeReader=wa,t.BrowserMultiFormatReader=Wo,t.BrowserPDF417Reader=Qo,t.BrowserQRCodeReader=po,t.BrowserQRCodeSvgWriter=li,t.CharacterSetECI=L,t.ChecksumException=j,t.Code128Reader=be,t.Code39Reader=gn,t.DataMatrixDecodedBitStreamParser=mi,t.DataMatrixReader=ni,t.DecodeHintType=ke,t.DecoderResult=rn,t.DefaultGridSampler=Hn,t.DetectorResult=ma,t.EAN13Reader=Rr,t.EncodeHintType=Sn,t.Exception=A,t.FormatException=H,t.GenericGF=ut,t.GenericGFPoly=Qt,t.GlobalHistogramBinarizer=Se,t.GridSampler=ya,t.GridSamplerInstance=fr,t.HTMLCanvasElementLuminanceSource=J,t.HybridBinarizer=Oe,t.ITFReader=wt,t.IllegalArgumentException=R,t.IllegalStateException=ir,t.InvertedLuminanceSource=Et,t.LuminanceSource=Ye,t.MathUtils=pt,t.MultiFormatOneDReader=Zn,t.MultiFormatReader=ds,t.MultiFormatWriter=Zo,t.NotFoundException=ce,t.OneDReader=Jt,t.PDF417DecodedBitStreamParser=fe,t.PDF417DecoderErrorCorrection=Bi,t.PDF417Reader=qn,t.PDF417ResultMetadata=Bs,t.PerspectiveTransform=Wt,t.PlanarYUVLuminanceSource=Wr,t.QRCodeByteMatrix=ms,t.QRCodeDataMask=Gn,t.QRCodeDecodedBitStreamParser=en,t.QRCodeDecoderErrorCorrectionLevel=rt,t.QRCodeDecoderFormatInformation=yn,t.QRCodeEncoder=Kt,t.QRCodeEncoderQRCode=_r,t.QRCodeMaskUtil=ln,t.QRCodeMatrixUtil=Qe,t.QRCodeMode=We,t.QRCodeReader=si,t.QRCodeVersion=Me,t.QRCodeWriter=Bn,t.RGBLuminanceSource=ui,t.RSS14Reader=vt,t.RSSExpandedReader=_e,t.ReaderException=fs,t.ReedSolomonDecoder=Hr,t.ReedSolomonEncoder=gs,t.ReedSolomonException=zr,t.Result=Pe,t.ResultMetadataType=et,t.ResultPoint=ze,t.StringUtils=Q,t.UnsupportedOperationException=X,t.VideoInputDevice=Ie,t.WhiteRectangleDetector=Tn,t.WriterException=qt,t.ZXingArrays=me,t.ZXingCharset=y,t.ZXingInteger=ue,t.ZXingStandardCharsets=S,t.ZXingStringBuilder=G,t.ZXingStringEncoding=Z,t.ZXingSystem=$,t.createAbstractExpandedDecoder=Ji,Object.defineProperty(t,"__esModule",{value:!0})})}(Wu,Wu.exports)),Wu.exports}var An=jR();const GR=bE(An),qR=Vx({__proto__:null,default:GR},[An]);var yE=function(){function i(e,t,a){if(this.formatMap=new Map([[je.QR_CODE,An.BarcodeFormat.QR_CODE],[je.AZTEC,An.BarcodeFormat.AZTEC],[je.CODABAR,An.BarcodeFormat.CODABAR],[je.CODE_39,An.BarcodeFormat.CODE_39],[je.CODE_93,An.BarcodeFormat.CODE_93],[je.CODE_128,An.BarcodeFormat.CODE_128],[je.DATA_MATRIX,An.BarcodeFormat.DATA_MATRIX],[je.MAXICODE,An.BarcodeFormat.MAXICODE],[je.ITF,An.BarcodeFormat.ITF],[je.EAN_13,An.BarcodeFormat.EAN_13],[je.EAN_8,An.BarcodeFormat.EAN_8],[je.PDF_417,An.BarcodeFormat.PDF_417],[je.RSS_14,An.BarcodeFormat.RSS_14],[je.RSS_EXPANDED,An.BarcodeFormat.RSS_EXPANDED],[je.UPC_A,An.BarcodeFormat.UPC_A],[je.UPC_E,An.BarcodeFormat.UPC_E],[je.UPC_EAN_EXTENSION,An.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!qR)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=a;var u=this.createZXingFormats(e),f=new Map;f.set(An.DecodeHintType.POSSIBLE_FORMATS,u),f.set(An.DecodeHintType.TRY_HARDER,!1),this.hints=f}return i.prototype.decodeAsync=function(e){var t=this;return new Promise(function(a,u){try{a(t.decode(e))}catch(f){u(f)}})},i.prototype.decode=function(e){var t=new An.MultiFormatReader(this.verbose,this.hints),a=new An.HTMLCanvasElementLuminanceSource(e),u=new An.BinaryBitmap(new An.HybridBinarizer(a)),f=t.decode(u);return{text:f.text,format:Ew.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,u){e.set(t,a)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var t=[],a=0,u=e;a<u.length;a++){var f=u[a];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return t},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i}(),YR=function(i,e,t,a){function u(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function x(I){try{A(a.next(I))}catch(R){E(R)}}function T(I){try{A(a.throw(I))}catch(R){E(R)}}function A(I){I.done?f(I.value):u(I.value).then(x,T)}A((a=a.apply(i,e||[])).next())})},XR=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,E;return E={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function x(A){return function(I){return T([A,I])}}function T(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(f=A[0]&2?u.return:A[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,A[1])).done)return f;switch(u=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){t.label=A[1];break}if(A[0]===6&&t.label<f[1]){t.label=f[1],f=A;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(A);break}f[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(i,t)}catch(I){A=[6,I],u=0}finally{a=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},EE=function(){function i(e,t,a){if(this.formatMap=new Map([[je.QR_CODE,"qr_code"],[je.AZTEC,"aztec"],[je.CODABAR,"codabar"],[je.CODE_39,"code_39"],[je.CODE_93,"code_93"],[je.CODE_128,"code_128"],[je.DATA_MATRIX,"data_matrix"],[je.ITF,"itf"],[je.EAN_13,"ean_13"],[je.EAN_8,"ean_8"],[je.PDF_417,"pdf417"],[je.UPC_A,"upc_a"],[je.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=a;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return YR(this,void 0,void 0,function(){var t,a;return XR(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=u.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(t),[2,{text:a.rawValue,format:Ew.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var t=null,a=0,u=0,f=e;u<f.length;u++){var E=f[u],x=E.boundingBox.width*E.boundingBox.height;x>a&&(a=x,t=E)}if(!t)throw"No largest barcode found";return t},i.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],a=0,u=e;a<u.length;a++){var f=u[a];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,u){e.set(t,a)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i}(),_E=function(i,e,t,a){function u(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function x(I){try{A(a.next(I))}catch(R){E(R)}}function T(I){try{A(a.throw(I))}catch(R){E(R)}}function A(I){I.done?f(I.value):u(I.value).then(x,T)}A((a=a.apply(i,e||[])).next())})},AE=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,E;return E={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function x(A){return function(I){return T([A,I])}}function T(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(f=A[0]&2?u.return:A[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,A[1])).done)return f;switch(u=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){t.label=A[1];break}if(A[0]===6&&t.label<f[1]){t.label=f[1],f=A;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(A);break}f[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(i,t)}catch(I){A=[6,I],u=0}finally{a=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},WR=function(){function i(e,t,a,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,t&&EE.isSupported()?(this.primaryDecoder=new EE(e,a,u),this.secondaryDecoder=new yE(e,a,u)):this.primaryDecoder=new yE(e,a,u)}return i.prototype.decodeAsync=function(e){return _E(this,void 0,void 0,function(){var t;return AE(this,function(a){switch(a.label){case 0:t=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return _E(this,void 0,void 0,function(){var t,a;return AE(this,function(u){switch(u.label){case 0:t=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(a=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw a;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,a=this.executionResults;t<a.length;t++){var u=a[t];e+=u}var f=e/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i}(),vg=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(a[f]=u[f])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),ff=function(i,e,t,a){function u(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function x(I){try{A(a.next(I))}catch(R){E(R)}}function T(I){try{A(a.throw(I))}catch(R){E(R)}}function A(I){I.done?f(I.value):u(I.value).then(x,T)}A((a=a.apply(i,e||[])).next())})},df=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,E;return E={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function x(A){return function(I){return T([A,I])}}function T(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(f=A[0]&2?u.return:A[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,A[1])).done)return f;switch(u=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){t.label=A[1];break}if(A[0]===6&&t.label<f[1]){t.label=f[1],f=A;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(A);break}f[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(i,t)}catch(I){A=[6,I],u=0}finally{a=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},xw=function(){function i(e,t){this.name=e,this.track=t}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var t={};t[this.name]=e;var a={advanced:[t]};return this.track.applyConstraints(a)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},i}(),QR=function(i){vg(e,i);function e(t,a){return i.call(this,t,a)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var a={};a[this.name]=t;var u={advanced:[a]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),a=t[this.name];return{min:a.min,max:a.max,step:a.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(xw),KR=function(i){vg(e,i);function e(t){return i.call(this,"zoom",t)||this}return e}(QR),ZR=function(i){vg(e,i);function e(t){return i.call(this,"torch",t)||this}return e}(xw),JR=function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new KR(this.track)},i.prototype.torchFeature=function(){return new ZR(this.track)},i}(),$R=function(){function i(e,t,a){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var a=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(a,u),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,t,a,u){return ff(this,void 0,void 0,function(){var f,E;return df(this,function(x){switch(x.label){case 0:return f=new i(e,t,u),a.aspectRatio?(E={aspectRatio:a.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(E)]):[3,2];case 1:x.sent(),x.label=2;case 2:return f.setupSurface(),[2,f]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var t=this,a=function(){setTimeout(e,200),t.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return ff(this,void 0,void 0,function(){return df(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,a){var u=e.mediaStream.getVideoTracks(),f=u.length,E=0;e.mediaStream.getVideoTracks().forEach(function(x){e.mediaStream.removeTrack(x),x.stop(),++E,E>=f&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},i.prototype.getCapabilities=function(){return new JR(this.getFirstTrackOrFail())},i}(),e8=function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,t,a){return ff(this,void 0,void 0,function(){return df(this,function(u){return[2,$R.create(e,this.mediaStream,t,a)]})})},i.create=function(e){return ff(this,void 0,void 0,function(){var t,a;return df(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return a=u.sent(),[2,new i(a)]}})})},i}(),wE=function(i,e,t,a){function u(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function x(I){try{A(a.next(I))}catch(R){E(R)}}function T(I){try{A(a.throw(I))}catch(R){E(R)}}function A(I){I.done?f(I.value):u(I.value).then(x,T)}A((a=a.apply(i,e||[])).next())})},xE=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,E;return E={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function x(A){return function(I){return T([A,I])}}function T(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(f=A[0]&2?u.return:A[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,A[1])).done)return f;switch(u=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){t.label=A[1];break}if(A[0]===6&&t.label<f[1]){t.label=f[1],f=A;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(A);break}f[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(i,t)}catch(I){A=[6,I],u=0}finally{a=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},t8=function(){function i(){}return i.failIfNotSupported=function(){return wE(this,void 0,void 0,function(){return xE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return wE(this,void 0,void 0,function(){return xE(this,function(t){return[2,e8.create(e)]})})},i}(),n8=function(i,e,t,a){function u(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function x(I){try{A(a.next(I))}catch(R){E(R)}}function T(I){try{A(a.throw(I))}catch(R){E(R)}}function A(I){I.done?f(I.value):u(I.value).then(x,T)}A((a=a.apply(i,e||[])).next())})},r8=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,E;return E={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function x(A){return function(I){return T([A,I])}}function T(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(f=A[0]&2?u.return:A[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,A[1])).done)return f;switch(u=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){t.label=A[1];break}if(A[0]===6&&t.label<f[1]){t.label=f[1],f=A;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(A);break}f[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(i,t)}catch(I){A=[6,I],u=0}finally{a=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},i8=function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=Nl.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=Nl.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return n8(this,void 0,void 0,function(){var e,t,a,u,f,E,x;return r8(this,function(T){switch(T.label){case 0:return e=function(A){for(var I=A.getVideoTracks(),R=0,B=I;R<B.length;R++){var j=B[R];j.enabled=!1,j.stop(),A.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=T.sent(),u=[],f=0,E=a;f<E.length;f++)x=E[f],x.kind==="videoinput"&&u.push({id:x.deviceId,label:x.label});return e(t),[2,u]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var a=function(f){for(var E=[],x=0,T=f;x<T.length;x++){var A=T[x];A.kind==="video"&&E.push({id:A.id,label:A.label})}e(E)},u=MediaStreamTrack;u.getSources(a)})},i}(),zn;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(zn||(zn={}));var s8=function(){function i(){this.state=zn.NOT_STARTED,this.onGoingTransactionNewState=zn.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===zn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=zn.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===zn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=zn.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==zn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case zn.UNKNOWN:throw"Transition from unknown is not allowed";case zn.NOT_STARTED:this.failIfNewStateIs(e,[zn.PAUSED]);break;case zn.SCANNING:break;case zn.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,t){for(var a=0,u=t;a<u.length;a++){var f=u[a];if(e===f)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i}(),a8=function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===zn.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==zn.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===zn.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===zn.PAUSED},i}(),o8=function(){function i(){}return i.create=function(){return new a8(new s8)},i}(),l8=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(a[f]=u[f])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),vi=function(i){l8(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(as),u8=function(){function i(e,t){this.logger=t,this.fps=vi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=vi.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ww.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!ws(this.qrbox)},i.create=function(e,t){return new i(e,t)},i}(),TE=function(){function i(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var a;typeof t=="boolean"?this.verbose=t===!0:t&&(a=t,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new Aw(this.verbose),this.qrcode=new WR(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=o8.create()}return i.prototype.start=function(e,t,a,u){var f=this;if(!e)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var E;u?E=u:E=this.verbose?this.logger.log:function(){};var x=u8.create(t,this.logger);this.clearElement();var T=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=T,I=document.getElementById(this.elementId);I.clientWidth?I.clientWidth:vi.DEFAULT_WIDTH,I.style.position="relative",this.shouldScan=!0,this.element=I;var R=this,B=this.stateManagerProxy.startTransition(zn.SCANNING);return new Promise(function(j,q){var $=A?x.videoConstraints:R.createVideoConstraints(e);if(!$){B.cancel(),q("videoConstraints should be defined");return}var te={};(!A||x.aspectRatio)&&(te.aspectRatio=x.aspectRatio);var ie={onRenderSurfaceReady:function(me,ue){R.setupUi(me,ue,x),R.isScanning=!0,R.foreverScan(x,a,E)}};t8.failIfNotSupported().then(function(me){me.create($).then(function(ue){return ue.render(f.element,te,ie).then(function(De){R.renderedCamera=De,B.execute(),j(null)}).catch(function(De){B.cancel(),q(De)})}).catch(function(ue){B.cancel(),q(Nl.errorGettingUserMedia(ue))})}).catch(function(me){B.cancel(),q(Nl.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(zn.PAUSED),this.showPausedState(),(ws(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(zn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(zn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(e.element){var f=document.getElementById(vi.SHADED_REGION_ELEMENT_ID);f&&e.element.removeChild(f)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),a(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),t.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(a){return a.decodedText})},i.prototype.scanFileV2=function(e,t){var a=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ws(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,f){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(e);var E=new Image;E.onload=function(){var x=E.width,T=E.height,A=document.getElementById(a.elementId),I=A.clientWidth?A.clientWidth:vi.DEFAULT_WIDTH,R=Math.max(A.clientHeight?A.clientHeight:T,vi.FILE_SCAN_MIN_HEIGHT),B=a.computeCanvasDrawConfig(x,T,I,R);if(t){var j=a.createCanvasElement(I,R,"qr-canvas-visible");j.style.display="inline-block",A.appendChild(j);var q=j.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=I,q.canvas.height=R,q.drawImage(E,0,0,x,T,B.x,B.y,B.width,B.height)}var $=vi.FILE_SCAN_HIDDEN_CANVAS_PADDING,te=Math.max(E.width,B.width),ie=Math.max(E.height,B.height),me=te+2*$,ue=ie+2*$,De=a.createCanvasElement(me,ue);A.appendChild(De);var Ve=De.getContext("2d");if(!Ve)throw"Unable to get 2d context from canvas";Ve.canvas.width=me,Ve.canvas.height=ue,Ve.drawImage(E,0,0,x,T,$,$,te,ie);try{a.qrcode.decodeRobustlyAsync(De).then(function(ke){u(gE.createFromQrcodeResult(ke))}).catch(f)}catch(ke){f("QR code parse error, error = ".concat(ke))}},E.onerror=f,E.onabort=f,E.onstalled=f,E.onsuspend=f,E.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return i8.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!ww.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var t=[je.QR_CODE,je.AZTEC,je.CODABAR,je.CODE_39,je.CODE_93,je.CODE_128,je.DATA_MATRIX,je.MAXICODE,je.ITF,je.EAN_13,je.EAN_8,je.PDF_417,je.RSS_14,je.RSS_EXPANDED,je.UPC_A,je.UPC_E,je.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],u=0,f=e.formatsToSupport;u<f.length;u++){var E=f[u];FR(E)?a.push(E):this.logger.warn("Invalid format: ".concat(E," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ws(e))return!0;if(!ws(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ws(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return ws(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,t,a){var u=this,f=a.qrbox;this.validateQrboxConfig(f);var E=this.toQrdimensions(e,t,f),x=function(A){if(A<vi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(vi.MIN_QR_BOX_SIZE,"px.")},T=function(A){return A>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=e),A};x(E.width),x(E.height),E.width=T(E.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,t,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(e,t)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return a},i.prototype.setupUi=function(e,t,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,a);var u=ws(a.qrbox)?{width:e,height:t}:a.qrbox;this.validateQrboxConfig(u);var f=this.toQrdimensions(e,t,u);f.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var E=a.isShadedBoxEnabled()&&f.height<=t,x={x:0,y:0,width:e,height:t},T=E?this.getShadedRegionBounds(e,t,f):x,A=this.createCanvasElement(T.width,T.height),I={willReadFrequently:!0},R=A.getContext("2d",I);R.canvas.width=T.width,R.canvas.height=T.height,this.element.append(A),E&&this.possiblyInsertShadingElement(this.element,e,t,f),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=R,this.canvasElement=A},i.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Nl.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},i.prototype.scanContext=function(e,t){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,gE.createFromQrcodeResult(u)),a.possiblyUpdateShaders(!0),!0}).catch(function(u){a.possiblyUpdateShaders(!1);var f=Nl.codeParseError(u);return t(f,_w.createFrom(f)),!1})},i.prototype.foreverScan=function(e,t,a){var u=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),E=f.videoWidth/f.clientWidth,x=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*E,A=this.qrRegion.height*x,I=this.qrRegion.x*E,R=this.qrRegion.y*x;this.context.drawImage(f,I,R,T,A,0,0,this.qrRegion.width,this.qrRegion.height);var B=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,t,a)},u.getTimeoutFps(e.fps))};this.scanContext(t,a).then(function(j){!j&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(t,a).finally(function(){B()})):B()}).catch(function(j){u.logger.logError("Error happend while scanning context",j),B()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",a="deviceId",u={user:!0,environment:!0},f="exact",E=function(q){if(q in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(q,"'")},x=Object.keys(e);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var T=Object.keys(e)[0];if(T!==t&&T!==a)throw"Only '".concat(t,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(T===t){var A=e.facingMode;if(typeof A=="string"){if(E(A))return{facingMode:A}}else if(typeof A=="object")if(f in A){if(E(A["".concat(f)]))return{facingMode:{exact:A["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var I=typeof A;throw"Invalid type of 'facingMode' = ".concat(I)}}else{var R=e.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(f in R)return{deviceId:{exact:R["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var B=typeof R;throw"Invalid type of 'deviceId' = ".concat(B)}}}var j=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},i.prototype.computeCanvasDrawConfig=function(e,t,a,u){if(e<=a&&t<=u){var f=(a-e)/2,E=(u-t)/2;return{x:f,y:E,width:e,height:t}}else{var x=e,T=t;return e>a&&(t=a/e*t,e=a),t>u&&(e=u/t*e,t=u),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(T)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,a,u)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?vi.BORDER_SHADER_MATCH_COLOR:vi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,t,a){var u=e,f=t,E=document.createElement("canvas");return E.style.width="".concat(u,"px"),E.style.height="".concat(f,"px"),E.style.display="none",E.id=ws(a)?"qr-canvas":a,E},i.prototype.getShadedRegionBounds=function(e,t,a){if(a.width>e||a.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-a.width)/2,y:(t-a.height)/2,width:a.width,height:a.height}},i.prototype.possiblyInsertShadingElement=function(e,t,a,u){if(!(t-u.width<1||a-u.height<1)){var f=document.createElement("div");f.style.position="absolute";var E=(t-u.width)/2,x=(a-u.height)/2;if(f.style.borderLeft="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(vi.SHADED_REGION_ELEMENT_ID),t-u.width<11||a-u.height<11)this.hasBorderShaders=!1;else{var T=5,A=40;this.insertShaderBorders(f,A,T,-T,null,0,!0),this.insertShaderBorders(f,A,T,-T,null,0,!1),this.insertShaderBorders(f,A,T,null,-T,0,!0),this.insertShaderBorders(f,A,T,null,-T,0,!1),this.insertShaderBorders(f,T,A+T,-T,null,-T,!0),this.insertShaderBorders(f,T,A+T,null,-T,-T,!0),this.insertShaderBorders(f,T,A+T,-T,null,-T,!1),this.insertShaderBorders(f,T,A+T,null,-T,-T,!1),this.hasBorderShaders=!0}e.append(f)}},i.prototype.insertShaderBorders=function(e,t,a,u,f,E,x){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=vi.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(t,"px"),T.style.height="".concat(a,"px"),u!==null&&(T.style.top="".concat(u,"px")),f!==null&&(T.style.bottom="".concat(f,"px")),x?T.style.left="".concat(E,"px"):T.style.right="".concat(E,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),e.appendChild(T)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i}(),Cg="data:image/svg+xml;base64,",c8=Cg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",h8=Cg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",vE=Cg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",f8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",CE=function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i}(),d8=function(){function i(){this.data=CE.createDefault();var e=localStorage.getItem(i.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},i.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=CE.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i}(),g8=function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=mE.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var a=document.createElement("br"),u=document.createElement("br");this.infoDiv.appendChild(a),this.infoDiv.appendChild(u);var f=document.createElement("a");f.innerText=mE.reportIssues(),f.href="https://github.com/mebjas/html5-qrcode/issues",f.target="new",f.style.color="white",this.infoDiv.appendChild(f),e.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i}(),m8=function(){function i(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=vE,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(a){return t.onHoverIn()},this.infoIcon.onmouseout=function(a){return t.onHoverOut()},this.infoIcon.onclick=function(a){return t.onClick()},e.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=f8,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=vE,this.infoIcon.style.opacity="0.6")},i}(),p8=function(){function i(){var e=this;this.infoDiv=new g8,this.infoIcon=new m8(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return i.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},i}(),y8=function(i,e,t,a){function u(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function x(I){try{A(a.next(I))}catch(R){E(R)}}function T(I){try{A(a.throw(I))}catch(R){E(R)}}function A(I){I.done?f(I.value):u(I.value).then(x,T)}A((a=a.apply(i,e||[])).next())})},E8=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,E;return E={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function x(A){return function(I){return T([A,I])}}function T(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(f=A[0]&2?u.return:A[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,A[1])).done)return f;switch(u=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){t.label=A[1];break}if(A[0]===6&&t.label<f[1]){t.label=f[1],f=A;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(A);break}f[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(i,t)}catch(I){A=[6,I],u=0}finally{a=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},SE=function(){function i(){}return i.hasPermissions=function(){return y8(this,void 0,void 0,function(){var e,t,a,u;return E8(this,function(f){switch(f.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=f.sent(),t=0,a=e;t<a.length;t++)if(u=a[t],u.kind==="videoinput"&&u.label)return[2,!0];return[2,!1]}})})},i}(),Ya=function(){function i(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var a=t[e];if(i.isCameraScanType(a))return!0}return!1},i.isCameraScanType=function(e){return e===co.SCAN_TYPE_CAMERA},i.isFileScanType=function(e){return e===co.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return as.DEFAULT_SUPPORTED_SCAN_TYPE;var t=as.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var a=0,u=e;a<u.length;a++){var f=u[a];if(!as.DEFAULT_SUPPORTED_SCAN_TYPE.includes(f))throw"Unsupported scan type ".concat(f)}return e},i}(),Si=function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i}(),sa=function(){function i(){}return i.createElement=function(e,t){var a=document.createElement(e);return a.id=t,a.classList.add(Si.ALL_ELEMENT_CLASS),e==="button"&&a.setAttribute("type","button"),a},i}(),Tw=function(i,e,t,a){function u(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function x(I){try{A(a.next(I))}catch(R){E(R)}}function T(I){try{A(a.throw(I))}catch(R){E(R)}}function A(I){I.done?f(I.value):u(I.value).then(x,T)}A((a=a.apply(i,e||[])).next())})},vw=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,E;return E={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function x(A){return function(I){return T([A,I])}}function T(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(f=A[0]&2?u.return:A[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,A[1])).done)return f;switch(u=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){t.label=A[1];break}if(A[0]===6&&t.label<f[1]){t.label=f[1],f=A;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(A);break}f[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(i,t)}catch(I){A=[6,I],u=0}finally{a=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},IE=function(){function i(e,t,a){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=a}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return Tw(this,void 0,void 0,function(){var e,t;return vw(this,function(a){switch(a.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return a.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=a.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?nn.torchOffButton():nn.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},i.prototype.propagateFailure=function(e,t){var a=e?nn.torchOnFailedMessage():nn.torchOffFailedMessage();t&&(a+="; Error = "+t),this.onTorchActionFailureCallback(a)},i.prototype.reset=function(){this.isTorchOn=!1},i}(),_8=function(){function i(e,t){this.onTorchActionFailureCallback=t,this.torchButton=sa.createElement("button",Si.TORCH_BUTTON_ID),this.torchController=new IE(e,this,t)}return i.prototype.render=function(e,t){var a=this;this.torchButton.innerText=nn.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var u=this;this.torchButton.addEventListener("click",function(f){return Tw(a,void 0,void 0,function(){return vw(this,function(E){switch(E.label){case 0:return[4,u.torchController.flipState()];case 1:return E.sent(),u.torchController.isTorchEnabled()?(u.torchButton.classList.remove(Si.TORCH_BUTTON_CLASS_TORCH_OFF),u.torchButton.classList.add(Si.TORCH_BUTTON_CLASS_TORCH_ON)):(u.torchButton.classList.remove(Si.TORCH_BUTTON_CLASS_TORCH_ON),u.torchButton.classList.add(Si.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(e){this.torchController=new IE(e,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(e){this.torchButton.innerText=e},i.prototype.reset=function(){this.torchButton.innerText=nn.torchOnButton(),this.torchController.reset()},i.create=function(e,t,a,u){var f=new i(t,u);return f.render(e,a),f},i}(),A8=function(){function i(e,t,a){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var u=document.createElement("label");u.setAttribute("for",this.getFileScanInputId()),u.style.display="inline-block",this.fileBasedScanRegion.appendChild(u),this.fileSelectionButton=sa.createElement("button",Si.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(x){u.click()}),u.append(this.fileSelectionButton),this.fileScanInput=sa.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",u.appendChild(this.fileScanInput);var f=this;this.fileScanInput.addEventListener("change",function(x){if(!(x==null||x.target==null)){var T=x.target;if(!(T.files&&T.files.length===0)){var A=T.files,I=A[0],R=I.name;f.setImageNameToButton(R),a(I)}}});var E=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(E),this.fileBasedScanRegion.addEventListener("dragenter",function(x){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(x){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(x){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(x){x.stopPropagation(),x.preventDefault(),f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder();var T=x.dataTransfer;if(T){var A=T.files;if(!A||A.length===0)return;for(var I=!1,R=0;R<A.length;++R){var B=A.item(R);if(B){var j=/image.*/;if(B.type.match(j)){I=!0;var q=B.name;f.setImageNameToButton(q),a(B),E.innerText=nn.dragAndDropMessage();break}}}I||(E.innerText=nn.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=nn.dragAndDropMessage(),e.style.fontWeight="400",e},i.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var a=e.substring(0,8),u=e.length,f=e.substring(u-8,u);e="".concat(a,"....").concat(f)}var E=nn.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=E},i.prototype.setInitialValueToButton=function(){var e=nn.fileSelectionChooseImage()+" - "+nn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(e,t,a){var u=new i(e,t,a);return u},i}(),w8=function(){function i(e){this.selectElement=sa.createElement("select",Si.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return i.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var a=this.cameras.length;if(a===0)throw new Error("No cameras found");if(a===1)t.style.display="none";else{var u=nn.selectCamera();t.innerText="".concat(u," (").concat(this.cameras.length,")  ")}for(var f=1,E=0,x=this.cameras;E<x.length;E++){var T=x[E],A=T.id,I=T.label==null?A:T.label;(!I||I==="")&&(I=[nn.anonymousCameraPrefix(),f++].join(" "));var R=document.createElement("option");R.value=A,R.innerText=I,this.options.push(R),this.selectElement.appendChild(R)}t.appendChild(this.selectElement),e.appendChild(t)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(e){for(var t=0,a=this.options;t<a.length;t++){var u=a[t];if(u.value===e)return!0}return!1},i.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(e,t){var a=new i(t);return a.render(e),a},i}(),x8=function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=sa.createElement("input",Si.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var a=nn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.rangeText.style.marginRight="10px";var u=this;this.rangeInput.addEventListener("input",function(){return u.onValueChange()}),this.rangeInput.addEventListener("change",function(){return u.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var e=nn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(e,t,a,u){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=u.toString(),this.rangeInput.value=a.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(e,t){var a=new i;return a.render(e,t),a},i}(),Ci;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ci||(Ci={}));function T8(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function v8(i,e){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:e}}var C8=function(){function i(e,t,a){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=a===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Ya(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Aw(this.verbose),this.persistedDataManager=new d8,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(e,t){var a=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(f,E){if(e)e(f,E);else{if(a.lastMatchFound===f)return;a.lastMatchFound=f,a.setHeaderMessage(nn.lastMatch(f),Ci.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(f,E){t&&t(f,E)};var u=document.getElementById(this.elementId);if(!u)throw"HTML Element with id=".concat(this.elementId," not found");u.innerHTML="",this.createBasicLayout(u),this.html5Qrcode=new TE(this.getScanRegionId(),v8(this.config,this.verbose))},i.prototype.pause=function(e){(ws(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var e=this,t=function(){var a=document.getElementById(e.elementId);a&&(a.innerHTML="",e.resetBasicLayout(a))};return this.html5Qrcode?new Promise(function(a,u){if(!e.html5Qrcode){a();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(f){if(!e.html5Qrcode){a();return}e.html5Qrcode.clear(),t(),a()}).catch(function(f){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",f),u(f)}):(e.html5Qrcode.clear(),t(),a())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(e){return e?(e.fps||(e.fps=as.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!as.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=as.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=as.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:as.SCAN_DEFAULT_FPS,rememberLastUsedCamera:as.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:as.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),a=this.getScanRegionId();t.id=a,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),Ya.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var u=document.createElement("div"),f=this.getDashboardId();u.id=f,u.style.width="100%",e.appendChild(u),this.setupInitialDashboard(u)},i.prototype.resetBasicLayout=function(e){e.style.border="none"},i.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var a=new p8;a.renderInto(t);var u=document.createElement("div");u.id=this.getHeaderMessageContainerId(),u.style.display="none",u.style.textAlign="center",u.style.fontSize="14px",u.style.padding="2px 10px",u.style.margin="4px",u.style.borderTop="1px solid #f6f6f6",t.appendChild(u)},i.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},i.prototype.createCameraListUi=function(e,t,a){var u=this;u.showHideScanTypeSwapLink(!1),u.setHeaderMessage(nn.cameraPermissionRequesting());var f=function(){a||u.createPermissionButton(e,t)};TE.getCameras().then(function(E){u.persistedDataManager.setHasPermission(!0),u.showHideScanTypeSwapLink(!0),u.resetHeaderMessage(),E&&E.length>0?(e.removeChild(t),u.renderCameraSelection(E)):(u.setHeaderMessage(nn.noCameraFound(),Ci.STATUS_WARNING),f())}).catch(function(E){u.persistedDataManager.setHasPermission(!1),a?a.disabled=!1:f(),u.setHeaderMessage(E,Ci.STATUS_WARNING),u.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(e,t){var a=this,u=sa.createElement("button",this.getCameraPermissionButtonId());u.innerText=nn.cameraPermissionTitle(),u.addEventListener("click",function(){u.disabled=!0,a.createCameraListUi(e,t,u)}),t.appendChild(u)},i.prototype.createPermissionsUi=function(e,t){var a=this;if(Ya.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){SE.hasPermissions().then(function(u){u?a.createCameraListUi(e,t):(a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,t))}).catch(function(u){a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},i.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var a=document.createElement("div");a.id=this.getDashboardSectionCameraScanRegionId(),a.style.display=Ya.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(a);var u=document.createElement("div");u.style.textAlign="center",a.appendChild(u),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(a,u),this.renderFileScanUi(t)},i.prototype.renderFileScanUi=function(e){var t=Ya.isFileScanType(this.currentScanType),a=this,u=function(f){if(!a.html5Qrcode)throw"html5Qrcode not defined";Ya.isFileScanType(a.currentScanType)&&(a.setHeaderMessage(nn.loadingImage()),a.html5Qrcode.scanFileV2(f,!0).then(function(E){a.resetHeaderMessage(),a.qrCodeSuccessCallback(E.decodedText,E)}).catch(function(E){a.setHeaderMessage(E,Ci.STATUS_WARNING),a.qrCodeErrorCallback(E,_w.createFrom(E))}))};this.fileSelectionUi=A8.create(e,t,u)},i.prototype.renderCameraSelection=function(e){var t=this,a=this,u=document.getElementById(this.getDashboardSectionCameraScanRegionId());u.style.textAlign="center";var f=x8.create(u,!1),E=function($){var te=$.zoomFeature();if(te.isSupported()){f.setOnCameraZoomValueChangeCallback(function(me){te.apply(me)});var ie=1;t.config.defaultZoomValueIfSupported&&(ie=t.config.defaultZoomValueIfSupported),ie=zR(ie,te.min(),te.max()),f.setValues(te.min(),te.max(),ie,te.step()),f.show()}},x=w8.create(u,e),T=document.createElement("span"),A=sa.createElement("button",Si.CAMERA_START_BUTTON_ID);A.innerText=nn.scanButtonStartScanningText(),T.appendChild(A);var I=sa.createElement("button",Si.CAMERA_STOP_BUTTON_ID);I.innerText=nn.scanButtonStopScanningText(),I.style.display="none",I.disabled=!0,T.appendChild(I);var R,B=function($){if(!$.torchFeature().isSupported()){R&&R.hide();return}R?R.updateTorchCapability($.torchFeature()):R=_8.create(T,$.torchFeature(),{display:"none",marginLeft:"5px"},function(te){a.setHeaderMessage(te,Ci.STATUS_WARNING)}),R.show()};u.appendChild(T);var j=function($){$||(A.style.display="none"),A.innerText=nn.scanButtonStartScanningText(),A.style.opacity="1",A.disabled=!1,$&&(A.style.display="inline-block")};if(A.addEventListener("click",function($){A.innerText=nn.scanButtonScanningStarting(),x.disable(),A.disabled=!0,A.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!1),a.resetHeaderMessage();var te=x.getValue();a.persistedDataManager.setLastUsedCameraId(te),a.html5Qrcode.start(te,T8(a.config),a.qrCodeSuccessCallback,a.qrCodeErrorCallback).then(function(ie){I.disabled=!1,I.style.display="inline-block",j(!1);var me=a.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&B(me),t.config.showZoomSliderIfSupported===!0&&E(me)}).catch(function(ie){a.showHideScanTypeSwapLink(!0),x.enable(),j(!0),a.setHeaderMessage(ie,Ci.STATUS_WARNING)})}),x.hasSingleItem()&&A.click(),I.addEventListener("click",function($){if(!a.html5Qrcode)throw"html5Qrcode not defined";I.disabled=!0,a.html5Qrcode.stop().then(function(te){t.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!0),x.enable(),A.disabled=!1,I.style.display="none",A.style.display="inline-block",R&&(R.reset(),R.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),a.insertCameraScanImageToScanRegion()}).catch(function(te){I.disabled=!1,a.setHeaderMessage(te,Ci.STATUS_WARNING)})}),a.persistedDataManager.getLastUsedCameraId()){var q=a.persistedDataManager.getLastUsedCameraId();x.hasValue(q)?(x.setValue(q),A.click()):a.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var e=this,t=nn.textIfCameraScanSelected(),a=nn.textIfFileScanSelected(),u=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");f.style.textAlign="center";var E=sa.createElement("span",this.getDashboardSectionSwapLinkId());E.style.textDecoration="underline",E.style.cursor="pointer",E.innerText=Ya.isCameraScanType(this.currentScanType)?t:a,E.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Ya.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),E.innerText=a,e.currentScanType=co.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),E.innerText=t,e.currentScanType=co.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),f.appendChild(E),u.appendChild(f)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){SE.hasPermissions().then(function(a){if(a){var u=document.getElementById(t.getCameraPermissionButtonId());if(!u)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";u.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(a){t.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},i.prototype.setHeaderMessage=function(e,t){t||(t=Ci.STATUS_DEFAULT);var a=this.getHeaderMessageDiv();switch(a.innerText=e,a.style.display="block",t){case Ci.STATUS_SUCCESS:a.style.background="rgba(106, 175, 80, 0.26)",a.style.color="#477735";break;case Ci.STATUS_WARNING:a.style.background="rgba(203, 36, 49, 0.14)",a.style.color="#cb2431";break;case Ci.STATUS_DEFAULT:default:a.style.background="rgba(0, 0, 0, 0)",a.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(a){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=c8,this.cameraScanImage.alt=nn.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(a){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=h8,this.fileScanImage.alt=nn.fileScanAltText()},i.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},i.prototype.getDashboardSectionSwapLinkId=function(){return Si.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},i.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},i.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},i.prototype.getCameraPermissionButtonId=function(){return Si.CAMERA_PERMISSION_BUTTON_ID},i.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},i.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},i.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},i}();const S8=async i=>{try{const e=TA(Tg,"players"),t=hb(e,fb("name","==",i)),a=await _b(t);return a.empty?(console.log("Jugador no encontrado"),null):a.docs[0].data().balance}catch(e){return console.error("Error al obtener el balance:",e),null}},I8=async(i,e)=>{try{const t=vA(Tg,"players",i);await Ab(t,{balance:e})}catch(t){console.error("Error al actualizar el balance:",t)}},b8=()=>{const[i,e]=Ee.useState(null),[t,a]=Ee.useState(null),[u,f]=Ee.useState(0),[E,x]=Ee.useState(null),[T,A]=Ee.useState(!0);Ee.useEffect(()=>{if(T){const B=new C8("reader",{fps:10,qrbox:{width:250,height:250}},!1);return B.render(j=>{I(j),B.clear()},j=>{console.error("Error en QR Scanner:",j)}),()=>{B.clear()}}},[T]);const I=async B=>{if(B){console.log("QR Detectado:",B),A(!1),e(B);const j=await S8(B);j!==null?(a(j),x(null)):(x("Jugador no encontrado."),A(!0))}},R=async B=>{if(!i||t===null)return;const j=B==="add"?t+u:Math.max(0,t-u);await I8(i,j),a(j),f(0)};return gt.jsxs("div",{className:"update-balance-container",children:[gt.jsx("h2",{children:" Escanea el QR del Jugador"}),T&&!i&&gt.jsx("div",{id:"reader"}),E&&gt.jsx("p",{className:"error",children:E}),i&&t!==null&&gt.jsxs("div",{className:"balance-info",children:[gt.jsx("h3",{children:" Informacin del Jugador"}),gt.jsxs("p",{children:[gt.jsx("strong",{children:"ID:"})," ",i]}),gt.jsxs("p",{children:[gt.jsx("strong",{children:"Balance Actual:"})," $",t]}),gt.jsx("input",{type:"number",placeholder:"Cantidad a modificar",value:u,onChange:B=>f(parseInt(B.target.value)||0),className:"input-field"}),gt.jsxs("div",{className:"btn-group",children:[gt.jsx("button",{onClick:()=>R("add"),className:"btn btn-add",children:" Aumentar"}),gt.jsx("button",{onClick:()=>R("subtract"),className:"btn btn-subtract",children:" Disminuir"})]}),gt.jsx("button",{className:"btn btn-reset",onClick:()=>{e(null),a(null),A(!0),x(null)},children:" Escanear Otro QR"})]})]})};function R8(){return gt.jsx(lv,{children:gt.jsxs(VT,{children:[gt.jsx(Oh,{path:"/",element:gt.jsx(Ev,{})}),gt.jsx(Oh,{path:"/crear-jugador",element:gt.jsx(VR,{})}),gt.jsx(Oh,{path:"/modificar-dinero",element:gt.jsx(b8,{})})]})})}Qx.createRoot(document.getElementById("root")).render(gt.jsx(Ee.StrictMode,{children:gt.jsx(R8,{})}));
